// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(t,e,i,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let s of __getOwnPropNames(e))__hasOwnProp.call(t,s)||s===i||__defProp(t,s,{get:()=>e[s],enumerable:!(r=__getOwnPropDesc(e,s))||r.enumerable});return t},__toESM=(t,e,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,e){return Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},m=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},y=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},g=function(t,e,i,r){var s=new ARRAY_TYPE(4);return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s},v=function(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t},w=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},S=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=i*n-s*r;return o?(o=1/o,t[0]=n*o,t[1]=-r*o,t[2]=-s*o,t[3]=i*o,t):null},b=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},_=function(t){return t[0]*t[3]-t[2]*t[1]},E=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*a+n*h,t[1]=s*a+o*h,t[2]=r*u+n*c,t[3]=s*u+o*c,t},T=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+n*a,t[1]=s*h+o*a,t[2]=r*-a+n*h,t[3]=s*-a+o*h,t},P=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=i[0],h=i[1];return t[0]=r*a,t[1]=s*a,t[2]=n*h,t[3]=o*h,t},A=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t},M=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},I=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},O=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},D=function(t,e,i,r){return t[2]=r[2]/r[0],i[0]=r[0],i[1]=r[1],i[3]=r[3]-t[2]*i[1],[t,e,i]},x=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},C=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},R=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},L=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-h)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))},k=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},G=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t},N=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},j=function(t){var e=new ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},F=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},B=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},z=function(t,e,i,r,s,n){var o=new ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o},U=function(t,e,i,r,s,n,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t},H=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=i*n-r*s;return h?(h=1/h,t[0]=n*h,t[1]=-r*h,t[2]=-s*h,t[3]=i*h,t[4]=(s*a-n*o)*h,t[5]=(r*o-i*a)*h,t):null},V=function(t){return t[0]*t[3]-t[1]*t[2]},W=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1],l=i[2],f=i[3],p=i[4],d=i[5];return t[0]=r*u+n*c,t[1]=s*u+o*c,t[2]=r*l+n*f,t[3]=s*l+o*f,t[4]=r*p+n*d+a,t[5]=s*p+o*d+h,t},$=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=r*c+n*u,t[1]=s*c+o*u,t[2]=r*-u+n*c,t[3]=s*-u+o*c,t[4]=a,t[5]=h,t},Y=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1];return t[0]=r*u,t[1]=s*u,t[2]=n*c,t[3]=o*c,t[4]=a,t[5]=h,t},J=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=r*u+n*c+a,t[5]=s*u+o*c+h,t},q=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t},Q=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},Z=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},X=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},K=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t},et=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t},it=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t},rt=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t},st=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},nt=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=e[0],u=e[1],c=e[2],l=e[3],f=e[4],p=e[5];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-u)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-l)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-f)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(p))},ot=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},at=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},ht=function(t){var e=new ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},ut=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},ct=function(t,e,i,r,s,n,o,a,h){var u=new ARRAY_TYPE(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=h,u},lt=function(t,e,i,r,s,n,o,a,h,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=h,t[8]=u,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},pt=function(t,e){if(t===e){var i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},dt=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=c*o-a*u,f=-c*n+a*h,p=u*n-o*h,d=i*l+r*f+s*p;return d?(d=1/d,t[0]=l*d,t[1]=(-c*r+s*u)*d,t[2]=(a*r-s*o)*d,t[3]=f*d,t[4]=(c*i-s*h)*d,t[5]=(-a*i+s*n)*d,t[6]=p*d,t[7]=(-u*i+r*h)*d,t[8]=(o*i-r*n)*d,t):null},mt=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8];return t[0]=o*c-a*u,t[1]=s*u-r*c,t[2]=r*a-s*o,t[3]=a*h-n*c,t[4]=i*c-s*h,t[5]=s*n-i*a,t[6]=n*u-o*h,t[7]=r*h-i*u,t[8]=i*o-r*n,t},yt=function(t){var e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],h=t[7],u=t[8];return e*(u*n-o*h)+i*(-u*s+o*a)+r*(h*s-n*a)},gt=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=i[0],p=i[1],d=i[2],m=i[3],y=i[4],g=i[5],v=i[6],w=i[7],S=i[8];return t[0]=f*r+p*o+d*u,t[1]=f*s+p*a+d*c,t[2]=f*n+p*h+d*l,t[3]=m*r+y*o+g*u,t[4]=m*s+y*a+g*c,t[5]=m*n+y*h+g*l,t[6]=v*r+w*o+S*u,t[7]=v*s+w*a+S*c,t[8]=v*n+w*h+S*l,t},vt=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=i[0],p=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=h,t[6]=f*r+p*o+u,t[7]=f*s+p*a+c,t[8]=f*n+p*h+l,t},wt=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=Math.sin(i),p=Math.cos(i);return t[0]=p*r+f*o,t[1]=p*s+f*a,t[2]=p*n+f*h,t[3]=p*o-f*r,t[4]=p*a-f*s,t[5]=p*h-f*n,t[6]=u,t[7]=c,t[8]=l,t},St=function(t,e,i){var r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},bt=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},_t=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Et=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},Pt=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,h=s+s,u=i*o,c=r*o,l=r*a,f=s*o,p=s*a,d=s*h,m=n*o,y=n*a,g=n*h;return t[0]=1-l-d,t[3]=c-g,t[6]=f+y,t[1]=c+g,t[4]=1-u-d,t[7]=p-m,t[2]=f-y,t[5]=p+m,t[8]=1-u-l,t},At=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=i*a-r*o,w=i*h-s*o,S=i*u-n*o,b=r*h-s*a,_=r*u-n*a,E=s*u-n*h,T=c*m-l*d,P=c*y-f*d,A=c*g-p*d,M=l*y-f*m,I=l*g-p*m,O=f*g-p*y,D=v*O-w*I+S*M+b*A-_*P+E*T;return D?(D=1/D,t[0]=(a*O-h*I+u*M)*D,t[1]=(h*A-o*O-u*P)*D,t[2]=(o*I-a*A+u*T)*D,t[3]=(s*I-r*O-n*M)*D,t[4]=(i*O-s*A+n*P)*D,t[5]=(r*A-i*I-n*T)*D,t[6]=(m*E-y*_+g*b)*D,t[7]=(y*S-d*E-g*w)*D,t[8]=(d*_-m*S+g*v)*D,t):null},Mt=function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},It=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Ot=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Dt=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},xt=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t},Ct=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},Rt=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t},Lt=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},kt=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=e[0],f=e[1],p=e[2],d=e[3],m=e[4],y=e[5],g=e[6],v=e[7],w=e[8];return Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-p)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(h-g)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(u-v)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-w)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(w))},Gt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Nt=function(t){var e=new ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},jt=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Ft=function(t,e,i,r,s,n,o,a,h,u,c,l,f,p,d,m){var y=new ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=i,y[3]=r,y[4]=s,y[5]=n,y[6]=o,y[7]=a,y[8]=h,y[9]=u,y[10]=c,y[11]=l,y[12]=f,y[13]=p,y[14]=d,y[15]=m,y},Bt=function(t,e,i,r,s,n,o,a,h,u,c,l,f,p,d,m,y){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=h,t[8]=u,t[9]=c,t[10]=l,t[11]=f,t[12]=p,t[13]=d,t[14]=m,t[15]=y,t},zt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ut=function(t,e){if(t===e){var i=e[1],r=e[2],s=e[3],n=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},Ht=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=i*a-r*o,w=i*h-s*o,S=i*u-n*o,b=r*h-s*a,_=r*u-n*a,E=s*u-n*h,T=c*m-l*d,P=c*y-f*d,A=c*g-p*d,M=l*y-f*m,I=l*g-p*m,O=f*g-p*y,D=v*O-w*I+S*M+b*A-_*P+E*T;return D?(D=1/D,t[0]=(a*O-h*I+u*M)*D,t[1]=(s*I-r*O-n*M)*D,t[2]=(m*E-y*_+g*b)*D,t[3]=(f*_-l*E-p*b)*D,t[4]=(h*A-o*O-u*P)*D,t[5]=(i*O-s*A+n*P)*D,t[6]=(y*S-d*E-g*w)*D,t[7]=(c*E-f*S+p*w)*D,t[8]=(o*I-a*A+u*T)*D,t[9]=(r*A-i*I-n*T)*D,t[10]=(d*_-m*S+g*v)*D,t[11]=(l*S-c*_-p*v)*D,t[12]=(a*P-o*M-h*T)*D,t[13]=(i*M-r*P+s*T)*D,t[14]=(m*w-d*b-y*v)*D,t[15]=(c*b-l*w+f*v)*D,t):null},Vt=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=i*a-r*o,w=i*h-s*o,S=i*u-n*o,b=r*h-s*a,_=r*u-n*a,E=s*u-n*h,T=c*m-l*d,P=c*y-f*d,A=c*g-p*d,M=l*y-f*m,I=l*g-p*m,O=f*g-p*y;return t[0]=a*O-h*I+u*M,t[1]=s*I-r*O-n*M,t[2]=m*E-y*_+g*b,t[3]=f*_-l*E-p*b,t[4]=h*A-o*O-u*P,t[5]=i*O-s*A+n*P,t[6]=y*S-d*E-g*w,t[7]=c*E-f*S+p*w,t[8]=o*I-a*A+u*T,t[9]=r*A-i*I-n*T,t[10]=d*_-m*S+g*v,t[11]=l*S-c*_-p*v,t[12]=a*P-o*M-h*T,t[13]=i*M-r*P+s*T,t[14]=m*w-d*b-y*v,t[15]=c*b-l*w+f*v,t},Wt=function(t){var e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],m=t[14],y=e*o-i*n,g=e*a-r*n,v=i*a-r*o,w=u*d-c*p,S=u*m-l*p,b=c*m-l*d;return h*(e*b-i*S+r*w)-s*(n*b-o*S+a*w)+t[15]*(u*v-c*g+l*y)-f*(p*v-d*g+m*y)},$t=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],w=i[0],S=i[1],b=i[2],_=i[3];return t[0]=w*r+S*a+b*l+_*m,t[1]=w*s+S*h+b*f+_*y,t[2]=w*n+S*u+b*p+_*g,t[3]=w*o+S*c+b*d+_*v,w=i[4],S=i[5],b=i[6],_=i[7],t[4]=w*r+S*a+b*l+_*m,t[5]=w*s+S*h+b*f+_*y,t[6]=w*n+S*u+b*p+_*g,t[7]=w*o+S*c+b*d+_*v,w=i[8],S=i[9],b=i[10],_=i[11],t[8]=w*r+S*a+b*l+_*m,t[9]=w*s+S*h+b*f+_*y,t[10]=w*n+S*u+b*p+_*g,t[11]=w*o+S*c+b*d+_*v,w=i[12],S=i[13],b=i[14],_=i[15],t[12]=w*r+S*a+b*l+_*m,t[13]=w*s+S*h+b*f+_*y,t[14]=w*n+S*u+b*p+_*g,t[15]=w*o+S*c+b*d+_*v,t},Yt=function(t,e,i){var r,s,n,o,a,h,u,c,l,f,p,d,m=i[0],y=i[1],g=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=h,t[6]=u,t[7]=c,t[8]=l,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+a*y+l*g+e[12],t[13]=s*m+h*y+f*g+e[13],t[14]=n*m+u*y+p*g+e[14],t[15]=o*m+c*y+d*g+e[15]),t},Jt=function(t,e,i){var r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},qt=function(t,e,i,r){var s,n,o,a,h,u,c,l,f,p,d,m,y,g,v,w,S,b,_,E,T,P,A,M,I=r[0],O=r[1],D=r[2],x=Math.hypot(I,O,D);return x<EPSILON?null:(I*=x=1/x,O*=x,D*=x,s=Math.sin(i),o=1-(n=Math.cos(i)),a=e[0],h=e[1],u=e[2],c=e[3],l=e[4],f=e[5],p=e[6],d=e[7],m=e[8],y=e[9],g=e[10],v=e[11],w=I*I*o+n,S=O*I*o+D*s,b=D*I*o-O*s,_=I*O*o-D*s,E=O*O*o+n,T=D*O*o+I*s,P=I*D*o+O*s,A=O*D*o-I*s,M=D*D*o+n,t[0]=a*w+l*S+m*b,t[1]=h*w+f*S+y*b,t[2]=u*w+p*S+g*b,t[3]=c*w+d*S+v*b,t[4]=a*_+l*E+m*T,t[5]=h*_+f*E+y*T,t[6]=u*_+p*E+g*T,t[7]=c*_+d*E+v*T,t[8]=a*P+l*A+m*M,t[9]=h*P+f*A+y*M,t[10]=u*P+p*A+g*M,t[11]=c*P+d*A+v*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},Qt=function(t,e,i){var r=Math.sin(i),s=Math.cos(i),n=e[4],o=e[5],a=e[6],h=e[7],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+u*r,t[5]=o*s+c*r,t[6]=a*s+l*r,t[7]=h*s+f*r,t[8]=u*s-n*r,t[9]=c*s-o*r,t[10]=l*s-a*r,t[11]=f*s-h*r,t},Zt=function(t,e,i){var r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],h=e[3],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-u*r,t[1]=o*s-c*r,t[2]=a*s-l*r,t[3]=h*s-f*r,t[8]=n*r+u*s,t[9]=o*r+c*s,t[10]=a*r+l*s,t[11]=h*r+f*s,t},Xt=function(t,e,i){var r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],h=e[3],u=e[4],c=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+u*r,t[1]=o*s+c*r,t[2]=a*s+l*r,t[3]=h*s+f*r,t[4]=u*s-n*r,t[5]=c*s-o*r,t[6]=l*s-a*r,t[7]=f*s-h*r,t},Kt=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},te=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ee=function(t,e,i){var r,s,n,o=i[0],a=i[1],h=i[2],u=Math.hypot(o,a,h);return u<EPSILON?null:(o*=u=1/u,a*=u,h*=u,r=Math.sin(e),n=1-(s=Math.cos(e)),t[0]=o*o*n+s,t[1]=a*o*n+h*r,t[2]=h*o*n-a*r,t[3]=0,t[4]=o*a*n-h*r,t[5]=a*a*n+s,t[6]=h*a*n+o*r,t[7]=0,t[8]=o*h*n+a*r,t[9]=a*h*n-o*r,t[10]=h*h*n+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ie=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},re=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},se=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ne=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=r+r,h=s+s,u=n+n,c=r*a,l=r*h,f=r*u,p=s*h,d=s*u,m=n*u,y=o*a,g=o*h,v=o*u;return t[0]=1-(p+m),t[1]=l+v,t[2]=f-g,t[3]=0,t[4]=l-v,t[5]=1-(c+m),t[6]=d+y,t[7]=0,t[8]=f+g,t[9]=d-y,t[10]=1-(c+p),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},oe=function(t,e){var i=new ARRAY_TYPE(3),r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=r*r+s*s+n*n+o*o;return l>0?(i[0]=2*(a*o+c*r+h*n-u*s)/l,i[1]=2*(h*o+c*s+u*r-a*n)/l,i[2]=2*(u*o+c*n+a*s-h*r)/l):(i[0]=2*(a*o+c*r+h*n-u*s),i[1]=2*(h*o+c*s+u*r-a*n),i[2]=2*(u*o+c*n+a*s-h*r)),ne(t,e,i),t},ae=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},he=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],h=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(i,r,s),t[1]=Math.hypot(n,o,a),t[2]=Math.hypot(h,u,c),t},ue=function(t,e){var i=new ARRAY_TYPE(3);he(i,e);var r=1/i[0],s=1/i[1],n=1/i[2],o=e[0]*r,a=e[1]*s,h=e[2]*n,u=e[4]*r,c=e[5]*s,l=e[6]*n,f=e[8]*r,p=e[9]*s,d=e[10]*n,m=o+c+d,y=0;return m>0?(y=2*Math.sqrt(m+1),t[3]=.25*y,t[0]=(l-p)/y,t[1]=(f-h)/y,t[2]=(a-u)/y):o>c&&o>d?(y=2*Math.sqrt(1+o-c-d),t[3]=(l-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(f+h)/y):c>d?(y=2*Math.sqrt(1+c-o-d),t[3]=(f-h)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(l+p)/y):(y=2*Math.sqrt(1+d-o-c),t[3]=(a-u)/y,t[0]=(f+h)/y,t[1]=(l+p)/y,t[2]=.25*y),t},ce=function(t,e,i,r){e[0]=r[12],e[1]=r[13],e[2]=r[14];var s=r[0],n=r[1],o=r[2],a=r[4],h=r[5],u=r[6],c=r[8],l=r[9],f=r[10];i[0]=Math.hypot(s,n,o),i[1]=Math.hypot(a,h,u),i[2]=Math.hypot(c,l,f);var p=1/i[0],d=1/i[1],m=1/i[2],y=s*p,g=n*d,v=o*m,w=a*p,S=h*d,b=u*m,_=c*p,E=l*d,T=f*m,P=y+S+T,A=0;return P>0?(A=2*Math.sqrt(P+1),t[3]=.25*A,t[0]=(b-E)/A,t[1]=(_-v)/A,t[2]=(g-w)/A):y>S&&y>T?(A=2*Math.sqrt(1+y-S-T),t[3]=(b-E)/A,t[0]=.25*A,t[1]=(g+w)/A,t[2]=(_+v)/A):S>T?(A=2*Math.sqrt(1+S-y-T),t[3]=(_-v)/A,t[0]=(g+w)/A,t[1]=.25*A,t[2]=(b+E)/A):(A=2*Math.sqrt(1+T-y-S),t[3]=(g-w)/A,t[0]=(_+v)/A,t[1]=(b+E)/A,t[2]=.25*A),t},le=function(t,e,i,r){var s=e[0],n=e[1],o=e[2],a=e[3],h=s+s,u=n+n,c=o+o,l=s*h,f=s*u,p=s*c,d=n*u,m=n*c,y=o*c,g=a*h,v=a*u,w=a*c,S=r[0],b=r[1],_=r[2];return t[0]=(1-(d+y))*S,t[1]=(f+w)*S,t[2]=(p-v)*S,t[3]=0,t[4]=(f-w)*b,t[5]=(1-(l+y))*b,t[6]=(m+g)*b,t[7]=0,t[8]=(p+v)*_,t[9]=(m-g)*_,t[10]=(1-(l+d))*_,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fe=function(t,e,i,r,s){var n=e[0],o=e[1],a=e[2],h=e[3],u=n+n,c=o+o,l=a+a,f=n*u,p=n*c,d=n*l,m=o*c,y=o*l,g=a*l,v=h*u,w=h*c,S=h*l,b=r[0],_=r[1],E=r[2],T=s[0],P=s[1],A=s[2],M=(1-(m+g))*b,I=(p+S)*b,O=(d-w)*b,D=(p-S)*_,x=(1-(f+g))*_,C=(y+v)*_,R=(d+w)*E,L=(y-v)*E,k=(1-(f+m))*E;return t[0]=M,t[1]=I,t[2]=O,t[3]=0,t[4]=D,t[5]=x,t[6]=C,t[7]=0,t[8]=R,t[9]=L,t[10]=k,t[11]=0,t[12]=i[0]+T-(M*T+D*P+R*A),t[13]=i[1]+P-(I*T+x*P+L*A),t[14]=i[2]+A-(O*T+C*P+k*A),t[15]=1,t},pe=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,h=s+s,u=i*o,c=r*o,l=r*a,f=s*o,p=s*a,d=s*h,m=n*o,y=n*a,g=n*h;return t[0]=1-l-d,t[1]=c+g,t[2]=f-y,t[3]=0,t[4]=c-g,t[5]=1-u-d,t[6]=p+m,t[7]=0,t[8]=f+y,t[9]=p-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},de=function(t,e,i,r,s,n,o){var a=1/(i-e),h=1/(s-r),u=1/(n-o);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*h,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+r)*h,t[10]=(o+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*u,t[15]=0,t},me=function(t,e,i,r,s){var n=1/Math.tan(e/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0){var o=1/(r-s);t[10]=(s+r)*o,t[14]=2*s*r*o}else t[10]=-1,t[14]=-2*r;return t},ye=function(t,e,i,r,s){var n=1/Math.tan(e/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0){var o=1/(r-s);t[10]=s*o,t[14]=s*r*o}else t[10]=-1,t[14]=-r;return t},ge=function(t,e,i,r){var s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),h=2/(o+a),u=2/(s+n);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*h*.5,t[9]=(s-n)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t},ve=function(t,e,i,r,s,n,o){var a=1/(e-i),h=1/(r-s),u=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*h,t[14]=(o+n)*u,t[15]=1,t},we=function(t,e,i,r,s,n,o){var a=1/(e-i),h=1/(r-s),u=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*h,t[14]=n*u,t[15]=1,t},Se=function(t,e,i,r){var s,n,o,a,h,u,c,l,f,p,d=e[0],m=e[1],y=e[2],g=r[0],v=r[1],w=r[2],S=i[0],b=i[1],_=i[2];return Math.abs(d-S)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(y-_)<EPSILON?zt(t):(c=d-S,l=m-b,f=y-_,s=v*(f*=p=1/Math.hypot(c,l,f))-w*(l*=p),n=w*(c*=p)-g*f,o=g*l-v*c,(p=Math.hypot(s,n,o))?(s*=p=1/p,n*=p,o*=p):(s=0,n=0,o=0),a=l*o-f*n,h=f*s-c*o,u=c*n-l*s,(p=Math.hypot(a,h,u))?(a*=p=1/p,h*=p,u*=p):(a=0,h=0,u=0),t[0]=s,t[1]=a,t[2]=c,t[3]=0,t[4]=n,t[5]=h,t[6]=l,t[7]=0,t[8]=o,t[9]=u,t[10]=f,t[11]=0,t[12]=-(s*d+n*m+o*y),t[13]=-(a*d+h*m+u*y),t[14]=-(c*d+l*m+f*y),t[15]=1,t)},be=function(t,e,i,r){var s=e[0],n=e[1],o=e[2],a=r[0],h=r[1],u=r[2],c=s-i[0],l=n-i[1],f=o-i[2],p=c*c+l*l+f*f;p>0&&(c*=p=1/Math.sqrt(p),l*=p,f*=p);var d=h*f-u*l,m=u*c-a*f,y=a*l-h*c;return(p=d*d+m*m+y*y)>0&&(d*=p=1/Math.sqrt(p),m*=p,y*=p),t[0]=d,t[1]=m,t[2]=y,t[3]=0,t[4]=l*y-f*m,t[5]=f*d-c*y,t[6]=c*m-l*d,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t},_e=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ee=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Te=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},Pe=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t},Ae=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},Me=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t},Ie=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},Oe=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=t[9],f=t[10],p=t[11],d=t[12],m=t[13],y=t[14],g=t[15],v=e[0],w=e[1],S=e[2],b=e[3],_=e[4],E=e[5],T=e[6],P=e[7],A=e[8],M=e[9],I=e[10],O=e[11],D=e[12],x=e[13],C=e[14],R=e[15];return Math.abs(i-v)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-w)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(s-S)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-_)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-E)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(h-T)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(u-P)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(c-A)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-M)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-I)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(p-O)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-D)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(m-x)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(y-C)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-R)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(R))},De=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},xe=function(t){var e=new ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},Ce=function(t){var e=t[0],i=t[1],r=t[2];return Math.hypot(e,i,r)},Re=function(t,e,i){var r=new ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=i,r},Le=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},ke=function(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t},Ge=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},Ne=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},je=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},Fe=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},Be=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},ze=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},Ue=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},He=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},Ve=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},We=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},$e=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t},Ye=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.hypot(i,r,s)},Je=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s},qe=function(t){var e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r},Qe=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},Ze=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},Xe=function(t,e){var i=e[0],r=e[1],s=e[2],n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},Ke=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},ti=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],h=i[2];return t[0]=s*h-n*a,t[1]=n*o-r*h,t[2]=r*a-s*o,t},ei=function(t,e,i,r){var s=e[0],n=e[1],o=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t},ii=function(t,e,i,r){var s=Math.acos(Math.min(Math.max(Ke(e,i),-1),1)),n=Math.sin(s),o=Math.sin((1-r)*s)/n,a=Math.sin(r*s)/n;return t[0]=o*e[0]+a*i[0],t[1]=o*e[1]+a*i[1],t[2]=o*e[2]+a*i[2],t},ri=function(t,e,i,r,s,n){var o=n*n,a=o*(2*n-3)+1,h=o*(n-2)+n,u=o*(n-1),c=o*(3-2*n);return t[0]=e[0]*a+i[0]*h+r[0]*u+s[0]*c,t[1]=e[1]*a+i[1]*h+r[1]*u+s[1]*c,t[2]=e[2]*a+i[2]*h+r[2]*u+s[2]*c,t},si=function(t,e,i,r,s,n){var o=1-n,a=o*o,h=n*n,u=a*o,c=3*n*a,l=3*h*o,f=h*n;return t[0]=e[0]*u+i[0]*c+r[0]*l+s[0]*f,t[1]=e[1]*u+i[1]*c+r[1]*l+s[1]*f,t[2]=e[2]*u+i[2]*c+r[2]*l+s[2]*f,t},ni=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI,r=2*RANDOM()-1,s=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t[2]=r*e,t},oi=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=i[3]*r+i[7]*s+i[11]*n+i[15];return o=o||1,t[0]=(i[0]*r+i[4]*s+i[8]*n+i[12])/o,t[1]=(i[1]*r+i[5]*s+i[9]*n+i[13])/o,t[2]=(i[2]*r+i[6]*s+i[10]*n+i[14])/o,t},ai=function(t,e,i){var r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t},hi=function(t,e,i){var r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],h=e[1],u=e[2],c=s*u-n*h,l=n*a-r*u,f=r*h-s*a,p=s*f-n*l,d=n*c-r*f,m=r*l-s*c,y=2*o;return c*=y,l*=y,f*=y,p*=2,d*=2,m*=2,t[0]=a+c+p,t[1]=h+l+d,t[2]=u+f+m,t},ui=function(t,e,i,r){var s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},ci=function(t,e,i,r){var s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},li=function(t,e,i,r){var s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},fi=function(t,e){var i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2],h=Math.sqrt((i*i+r*r+s*s)*(n*n+o*o+a*a)),u=h&&Ke(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))},pi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},di=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},yi=function(t,e){var i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(a))},gi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},vi=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},wi=function(t,e,i,r){var s=new ARRAY_TYPE(4);return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s},Si=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},bi=function(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t},_i=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},Ei=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},Ti=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},Pi=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},Ai=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},Mi=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},Ii=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},Oi=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},Di=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},xi=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},Ci=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t},Ri=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.hypot(i,r,s,n)},Li=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n},ki=function(t){var e=t[0],i=t[1],r=t[2],s=t[3];return Math.hypot(e,i,r,s)},Gi=function(t){var e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s},Ni=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},ji=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},Fi=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=i*o,t[1]=r*o,t[2]=s*o,t[3]=n*o,t},Bi=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},zi=function(t,e,i,r){var s=i[0]*r[1]-i[1]*r[0],n=i[0]*r[2]-i[2]*r[0],o=i[0]*r[3]-i[3]*r[0],a=i[1]*r[2]-i[2]*r[1],h=i[1]*r[3]-i[3]*r[1],u=i[2]*r[3]-i[3]*r[2],c=e[0],l=e[1],f=e[2],p=e[3];return t[0]=l*u-f*h+p*a,t[1]=-c*u+f*o-p*n,t[2]=c*h-l*o+p*s,t[3]=-c*a+l*n-f*s,t},Ui=function(t,e,i,r){var s=e[0],n=e[1],o=e[2],a=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t},Hi=function(t,e){var i,r,s,n,o,a;e=e||1;do{o=(i=2*RANDOM()-1)*i+(r=2*RANDOM()-1)*r}while(o>=1);do{a=(s=2*RANDOM()-1)*s+(n=2*RANDOM()-1)*n}while(a>=1);var h=Math.sqrt((1-o)/a);return t[0]=e*i,t[1]=e*r,t[2]=e*s*h,t[3]=e*n*h,t},Vi=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,t},Wi=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],h=i[2],u=i[3],c=u*r+a*n-h*s,l=u*s+h*r-o*n,f=u*n+o*s-a*r,p=-o*r-a*s-h*n;return t[0]=c*u+p*-o+l*-h-f*-a,t[1]=l*u+p*-a+f*-o-c*-h,t[2]=f*u+p*-h+c*-a-l*-o,t[3]=e[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Yi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},qi=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-h)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))},Qi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Xi=function(t,e,i){i*=.5;var r=Math.sin(i);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(i),t},Ki=function(t,e){var i=2*Math.acos(e[3]),r=Math.sin(i/2);return r>EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),i},tr=function(t,e){var i=dot$2(t,e);return Math.acos(2*i*i-1)},er=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*c+o*a+s*u-n*h,t[1]=s*c+o*h+n*a-r*u,t[2]=n*c+o*u+r*h-s*a,t[3]=o*c-r*a-s*h-n*u,t},ir=function(t,e,i){i*=.5;var r=e[0],s=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+o*a,t[1]=s*h+n*a,t[2]=n*h-s*a,t[3]=o*h-r*a,t},rr=function(t,e,i){i*=.5;var r=e[0],s=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h-n*a,t[1]=s*h+o*a,t[2]=n*h+r*a,t[3]=o*h-s*a,t},sr=function(t,e,i){i*=.5;var r=e[0],s=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*a,t[1]=s*h-r*a,t[2]=n*h+o*a,t[3]=o*h-n*a,t},nr=function(t,e){var i=e[0],r=e[1],s=e[2];return t[0]=i,t[1]=r,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-r*r-s*s)),t},ar=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=Math.sqrt(i*i+r*r+s*s),a=Math.exp(n),h=o>0?a*Math.sin(o)/o:0;return t[0]=i*h,t[1]=r*h,t[2]=s*h,t[3]=a*Math.cos(o),t},hr=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=Math.sqrt(i*i+r*r+s*s),a=o>0?Math.atan2(o,n)/o:0;return t[0]=i*a,t[1]=r*a,t[2]=s*a,t[3]=.5*Math.log(i*i+r*r+s*s+n*n),t},ur=function(t,e,i){return hr(t,e),scale$2(t,t,i),ar(t,t),t},cr=function(t,e,i,r){var s,n,o,a,h,u=e[0],c=e[1],l=e[2],f=e[3],p=i[0],d=i[1],m=i[2],y=i[3];return(n=u*p+c*d+l*m+f*y)<0&&(n=-n,p=-p,d=-d,m=-m,y=-y),1-n>EPSILON?(s=Math.acos(n),o=Math.sin(s),a=Math.sin((1-r)*s)/o,h=Math.sin(r*s)/o):(a=1-r,h=r),t[0]=a*u+h*p,t[1]=a*c+h*d,t[2]=a*l+h*m,t[3]=a*f+h*y,t},lr=function(t){var e=RANDOM(),i=RANDOM(),r=RANDOM(),s=Math.sqrt(1-e),n=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*i),t[1]=s*Math.cos(2*Math.PI*i),t[2]=n*Math.sin(2*Math.PI*r),t[3]=n*Math.cos(2*Math.PI*r),t},fr=function(t,e){var i=e[0],r=e[1],s=e[2],n=e[3],o=i*i+r*r+s*s+n*n,a=o?1/o:0;return t[0]=-i*a,t[1]=-r*a,t[2]=-s*a,t[3]=n*a,t},pr=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},dr=function(t,e){var i,r=e[0]+e[4]+e[8];if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);var n=(s+1)%3,o=(s+2)%3;i=Math.sqrt(e[3*s+s]-e[3*n+n]-e[3*o+o]+1),t[s]=.5*i,i=.5/i,t[3]=(e[3*n+o]-e[3*o+n])*i,t[n]=(e[3*n+s]+e[3*s+n])*i,t[o]=(e[3*o+s]+e[3*s+o])*i}return t},mr=function(t,e,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,n=Math.PI/360;e*=n,r*=n,i*=n;var o=Math.sin(e),a=Math.cos(e),h=Math.sin(i),u=Math.cos(i),c=Math.sin(r),l=Math.cos(r);switch(s){case"xyz":t[0]=o*u*l+a*h*c,t[1]=a*h*l-o*u*c,t[2]=a*u*c+o*h*l,t[3]=a*u*l-o*h*c;break;case"xzy":t[0]=o*u*l-a*h*c,t[1]=a*h*l-o*u*c,t[2]=a*u*c+o*h*l,t[3]=a*u*l+o*h*c;break;case"yxz":t[0]=o*u*l+a*h*c,t[1]=a*h*l-o*u*c,t[2]=a*u*c-o*h*l,t[3]=a*u*l+o*h*c;break;case"yzx":t[0]=o*u*l+a*h*c,t[1]=a*h*l+o*u*c,t[2]=a*u*c-o*h*l,t[3]=a*u*l-o*h*c;break;case"zxy":t[0]=o*u*l-a*h*c,t[1]=a*h*l+o*u*c,t[2]=a*u*c+o*h*l,t[3]=a*u*l-o*h*c;break;case"zyx":t[0]=o*u*l-a*h*c,t[1]=a*h*l+o*u*c,t[2]=a*u*c-o*h*l,t[3]=a*u*l+o*h*c;break;default:throw new Error("Unknown angle order "+s)}return t},yr=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},gr=function(t,e){return Math.abs(Bi(t,e))>=1-EPSILON},vr=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},wr=function(t){var e=new ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},Sr=function(t,e,i,r,s,n,o,a){var h=new ARRAY_TYPE(8);return h[0]=t,h[1]=e,h[2]=i,h[3]=r,h[4]=s,h[5]=n,h[6]=o,h[7]=a,h},br=function(t,e,i,r,s,n,o){var a=new ARRAY_TYPE(8);a[0]=t,a[1]=e,a[2]=i,a[3]=r;var h=.5*s,u=.5*n,c=.5*o;return a[4]=h*r+u*i-c*e,a[5]=u*r+c*t-h*i,a[6]=c*r+h*e-u*t,a[7]=-h*t-u*e-c*i,a},_r=function(t,e,i){var r=.5*i[0],s=.5*i[1],n=.5*i[2],o=e[0],a=e[1],h=e[2],u=e[3];return t[0]=o,t[1]=a,t[2]=h,t[3]=u,t[4]=r*u+s*h-n*a,t[5]=s*u+n*o-r*h,t[6]=n*u+r*a-s*o,t[7]=-r*o-s*a-n*h,t},Er=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},Tr=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Pr=function(t,e){var i=Qi();ue(i,e);var r=new ARRAY_TYPE(3);return ae(r,e),_r(t,i,r),t},Ar=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},Mr=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ir=function(t,e,i,r,s,n,o,a,h){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=h,t},Or=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},Dr=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},xr=function(t,e){var i=e[4],r=e[5],s=e[6],n=e[7],o=-e[0],a=-e[1],h=-e[2],u=e[3];return t[0]=2*(i*u+n*o+r*h-s*a),t[1]=2*(r*u+n*a+s*o-i*h),t[2]=2*(s*u+n*h+i*a-r*o),t},Cr=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=.5*i[0],h=.5*i[1],u=.5*i[2],c=e[4],l=e[5],f=e[6],p=e[7];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=o*a+s*u-n*h+c,t[5]=o*h+n*a-r*u+l,t[6]=o*u+r*h-s*a+f,t[7]=-r*a-s*h-n*u+p,t},Rr=function(t,e,i){var r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*n-u*s,f=h*o+c*s+u*r-a*n,p=u*o+c*n+a*s-h*r,d=c*o-a*r-h*s-u*n;return ir(t,e,i),r=t[0],s=t[1],n=t[2],o=t[3],t[4]=l*o+d*r+f*n-p*s,t[5]=f*o+d*s+p*r-l*n,t[6]=p*o+d*n+l*s-f*r,t[7]=d*o-l*r-f*s-p*n,t},Lr=function(t,e,i){var r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*n-u*s,f=h*o+c*s+u*r-a*n,p=u*o+c*n+a*s-h*r,d=c*o-a*r-h*s-u*n;return rr(t,e,i),r=t[0],s=t[1],n=t[2],o=t[3],t[4]=l*o+d*r+f*n-p*s,t[5]=f*o+d*s+p*r-l*n,t[6]=p*o+d*n+l*s-f*r,t[7]=d*o-l*r-f*s-p*n,t},kr=function(t,e,i){var r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*n-u*s,f=h*o+c*s+u*r-a*n,p=u*o+c*n+a*s-h*r,d=c*o-a*r-h*s-u*n;return sr(t,e,i),r=t[0],s=t[1],n=t[2],o=t[3],t[4]=l*o+d*r+f*n-p*s,t[5]=f*o+d*s+p*r-l*n,t[6]=p*o+d*n+l*s-f*r,t[7]=d*o-l*r-f*s-p*n,t},Gr=function(t,e,i){var r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],h=e[1],u=e[2],c=e[3];return t[0]=a*o+c*r+h*n-u*s,t[1]=h*o+c*s+u*r-a*n,t[2]=u*o+c*n+a*s-h*r,t[3]=c*o-a*r-h*s-u*n,a=e[4],h=e[5],u=e[6],c=e[7],t[4]=a*o+c*r+h*n-u*s,t[5]=h*o+c*s+u*r-a*n,t[6]=u*o+c*n+a*s-h*r,t[7]=c*o-a*r-h*s-u*n,t},Nr=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*c+o*a+s*u-n*h,t[1]=s*c+o*h+n*a-r*u,t[2]=n*c+o*u+r*h-s*a,t[3]=o*c-r*a-s*h-n*u,a=i[4],h=i[5],u=i[6],c=i[7],t[4]=r*c+o*a+s*u-n*h,t[5]=s*c+o*h+n*a-r*u,t[6]=n*c+o*u+r*h-s*a,t[7]=o*c-r*a-s*h-n*u,t},jr=function(t,e,i,r){if(Math.abs(r)<EPSILON)return Ar(t,e);var s=Math.hypot(i[0],i[1],i[2]);r*=.5;var n=Math.sin(r),o=n*i[0]/s,a=n*i[1]/s,h=n*i[2]/s,u=Math.cos(r),c=e[0],l=e[1],f=e[2],p=e[3];t[0]=c*u+p*o+l*h-f*a,t[1]=l*u+p*a+f*o-c*h,t[2]=f*u+p*h+c*a-l*o,t[3]=p*u-c*o-l*a-f*h;var d=e[4],m=e[5],y=e[6],g=e[7];return t[4]=d*u+g*o+m*h-y*a,t[5]=m*u+g*a+y*o-d*h,t[6]=y*u+g*h+d*a-m*o,t[7]=g*u-d*o-m*a-y*h,t},Fr=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t},Br=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3],a=i[4],h=i[5],u=i[6],c=i[7],l=e[4],f=e[5],p=e[6],d=e[7],m=i[0],y=i[1],g=i[2],v=i[3];return t[0]=r*v+o*m+s*g-n*y,t[1]=s*v+o*y+n*m-r*g,t[2]=n*v+o*g+r*y-s*m,t[3]=o*v-r*m-s*y-n*g,t[4]=r*c+o*a+s*u-n*h+l*v+d*m+f*g-p*y,t[5]=s*c+o*h+n*a-r*u+f*v+d*y+p*m-l*g,t[6]=n*c+o*u+r*h-s*a+p*v+d*g+l*y-f*m,t[7]=o*c-r*a-s*h-n*u+d*v-l*m-f*y-p*g,t},zr=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t},Ur=function(t,e,i,r){var s=1-r;return dot$1(e,i)<0&&(r=-r),t[0]=e[0]*s+i[0]*r,t[1]=e[1]*s+i[1]*r,t[2]=e[2]*s+i[2]*r,t[3]=e[3]*s+i[3]*r,t[4]=e[4]*s+i[4]*r,t[5]=e[5]*s+i[5]*r,t[6]=e[6]*s+i[6]*r,t[7]=e[7]*s+i[7]*r,t},Hr=function(t,e){var i=squaredLength$1(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t},Vr=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},Wr=function(t,e){var i=squaredLength$1(e);if(i>0){i=Math.sqrt(i);var r=e[0]/i,s=e[1]/i,n=e[2]/i,o=e[3]/i,a=e[4],h=e[5],u=e[6],c=e[7],l=r*a+s*h+n*u+o*c;t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=(a-r*l)/i,t[5]=(h-s*l)/i,t[6]=(u-n*l)/i,t[7]=(c-o*l)/i}return t},$r=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Yr=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},Jr=function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=e[0],l=e[1],f=e[2],p=e[3],d=e[4],m=e[5],y=e[6],g=e[7];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-f)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(n-p)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(h-y)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(u-g)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(g))},qr=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Qr=function(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},Zr=function(t,e){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},Xr=function(t,e){return t[0]=e[0],t[1]=e[1],t},Kr=function(t,e,i){return t[0]=e,t[1]=i,t},ts=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},es=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},is=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},rs=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},ss=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},ns=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},os=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},as=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},hs=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},us=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},cs=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t},ls=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.hypot(i,r)},fs=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r},ps=function(t){var e=t[0],i=t[1];return Math.hypot(e,i)},ds=function(t){var e=t[0],i=t[1];return e*e+i*i},ms=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},ys=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},gs=function(t,e){var i=e[0],r=e[1],s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t},vs=function(t,e){return t[0]*e[0]+t[1]*e[1]},ws=function(t,e,i){var r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t},Ss=function(t,e,i,r){var s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t},bs=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},_s=function(t,e,i){var r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t},Es=function(t,e,i){var r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t},Ts=function(t,e,i){var r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t},Ps=function(t,e,i){var r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t},As=function(t,e,i,r){var s=e[0]-i[0],n=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=s*a-n*o+i[0],t[1]=s*o+n*a+i[1],t},Ms=function(t,e){var i=t[0],r=t[1],s=e[0],n=e[1],o=Math.sqrt((i*i+r*r)*(s*s+n*n)),a=o&&(i*s+r*n)/o;return Math.acos(Math.min(Math.max(a,-1),1))},Is=function(t){return t[0]=0,t[1]=0,t},Os=function(t){return"vec2("+t[0]+", "+t[1]+")"},Ds=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xs=function(t,e){var i=t[0],r=t[1],s=e[0],n=e[1];return Math.abs(i-s)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(n))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=y,fromValues$8=g,set$8=v,transpose$2=w,invert$5=S,adjoint$2=b,determinant$3=_,multiply$8=E,rotate$4=T,scale$8=P,fromRotation$4=A,fromScaling$3=M,str$8=I,frob$3=O,LDU=D,add$8=x,subtract$6=C,exactEquals$8=R,equals$8=L,multiplyScalar$3=k,multiplyScalarAndAdd$3=G,create$7=N,clone$7=j,copy$7=F,identity$4=B,fromValues$7=z,set$7=U,invert$4=H,determinant$2=V,multiply$7=W,rotate$3=$,scale$7=Y,translate$3=J,fromRotation$3=q,fromScaling$2=Q,fromTranslation$3=Z,str$7=X,frob$2=K,add$7=tt,subtract$5=et,multiplyScalar$2=it,multiplyScalarAndAdd$2=rt,exactEquals$7=st,equals$7=nt,create$6=ot,fromMat4$1=at,clone$6=ht,copy$6=ut,fromValues$6=ct,set$6=lt,identity$3=ft,transpose$1=pt,invert$3=dt,adjoint$1=mt,determinant$1=yt,multiply$6=gt,translate$2=vt,rotate$2=wt,scale$6=St,fromTranslation$2=bt,fromRotation$2=_t,fromScaling$1=Et,fromMat2d=Tt,fromQuat$1=Pt,normalFromMat4=At,projection=Mt,str$6=It,frob$1=Ot,add$6=Dt,subtract$4=xt,multiplyScalar$1=Ct,multiplyScalarAndAdd$1=Rt,exactEquals$6=Lt,equals$6=kt,create$5=Gt,clone$5=Nt,copy$5=jt,fromValues$5=Ft,set$5=Bt,identity$2=zt,transpose=Ut,invert$2=Ht,adjoint=Vt,determinant=Wt,multiply$5=$t,translate$1=Yt,scale$5=Jt,rotate$1=qt,rotateX$3=Qt,rotateY$3=Zt,rotateZ$3=Xt,fromTranslation$1=Kt,fromScaling=te,fromRotation$1=ee,fromXRotation=ie,fromYRotation=re,fromZRotation=se,fromRotationTranslation$1=ne,fromQuat2=oe,getTranslation$1=ae,getScaling=he,getRotation=ue,decompose=ce,fromRotationTranslationScale=le,fromRotationTranslationScaleOrigin=fe,fromQuat=pe,frustum=de,perspectiveNO=me,perspectiveZO=ye,perspectiveFromFieldOfView=ge,orthoNO=ve,orthoZO=we,lookAt=Se,targetTo=be,str$5=_e,frob=Ee,add$5=Te,subtract$3=Pe,multiplyScalar=Ae,multiplyScalarAndAdd=Me,exactEquals$5=Ie,equals$5=Oe,create$4=De,clone$4=xe,length$4=Ce,fromValues$4=Re,copy$4=Le,set$4=ke,add$4=Ge,subtract$2=Ne,multiply$4=je,divide$2=Fe,ceil$2=Be,floor$2=ze,min$2=Ue,max$2=He,round$2=Ve,scale$4=We,scaleAndAdd$2=$e,distance$2=Ye,squaredDistance$2=Je,squaredLength$4=qe,negate$2=Qe,inverse$2=Ze,normalize$4=Xe,dot$4=Ke,cross$2=ti,lerp$4=ei,slerp$1=ii,hermite=ri,bezier=si,random$3=ni,transformMat4$2=oi,transformMat3$1=ai,transformQuat$1=hi,rotateX$2=ui,rotateY$2=ci,rotateZ$2=li,angle$1=fi,zero$2=pi,str$4=di,exactEquals$4=mi,equals$4=yi,create$3=gi,clone$3=vi,fromValues$3=wi,copy$3=Si,set$3=bi,add$3=_i,subtract$1=Ei,multiply$3=Ti,divide$1=Pi,ceil$1=Ai,floor$1=Mi,min$1=Ii,max$1=Oi,round$1=Di,scale$3=xi,scaleAndAdd$1=Ci,distance$1=Ri,squaredDistance$1=Li,length$3=ki,squaredLength$3=Gi,negate$1=Ni,inverse$1=ji,normalize$3=Fi,dot$3=Bi,cross$1=zi,lerp$3=Ui,random$2=Hi,transformMat4$1=Vi,transformQuat=Wi,zero$1=$i,str$3=Yi,exactEquals$3=Ji,equals$3=qi,create$2=Qi,identity$1=Zi,setAxisAngle=Xi,getAxisAngle=Ki,getAngle=tr,multiply$2=er,rotateX$1=ir,rotateY$1=rr,rotateZ$1=sr,calculateW=nr,exp=ar,ln=hr,pow=ur,slerp=cr,random$1=lr,invert$1=fr,conjugate$1=pr,fromMat3=dr,fromEuler=mr,str$2=yr,equals$2=gr,create$1=vr,clone$1=wr,fromValues$1=Sr,fromRotationTranslationValues=br,fromRotationTranslation=_r,fromTranslation=Er,fromRotation=Tr,fromMat4=Pr,copy$1=Ar,identity=Mr,set$1=Ir,getDual=Or,setDual=Dr,getTranslation=xr,translate=Cr,rotateX=Rr,rotateY=Lr,rotateZ=kr,rotateByQuatAppend=Gr,rotateByQuatPrepend=Nr,rotateAroundAxis=jr,add$1=Fr,multiply$1=Br,scale$1=zr,lerp$1=Ur,invert=Hr,conjugate=Vr,normalize$1=Wr,str$1=$r,exactEquals$1=Yr,equals$1=Jr,create=qr,clone=Qr,fromValues=Zr,copy=Xr,set=Kr,add=ts,subtract=es,multiply=is,divide=rs,ceil=ss,floor=ns,min=os,max=as,round=hs,scale=us,scaleAndAdd=cs,distance=ls,squaredDistance=fs,length=ps,squaredLength=ds,negate=ms,inverse=ys,normalize=gs,dot=vs,cross=ws,lerp=Ss,random=bs,transformMat2=_s,transformMat2d=Es,transformMat3=Ts,transformMat4=Ps,rotate=As,angle=Ms,zero=Is,str=Os,exactEquals=Ds,equals=xs,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get o(){return ARRAY_TYPE},h:RANDOM,u:ANGLE_ORDER,l:e,m:n,equals:h},mul$8=E,sub$6=C,mat2=Object.freeze({__proto__:null,create:u,clone:p,v:m,identity:y,S:g,set:v,_:w,T:S,P:b,A:_,multiply:E,rotate:T,scale:P,M:A,I:M,O:I,D:O,C:D,add:x,R:C,L:R,equals:L,G:k,N:G,mul:mul$8,sub:sub$6}),mul$7=W,sub$5=et,mat2d=Object.freeze({__proto__:null,create:N,clone:j,v:F,identity:B,S:z,set:U,T:H,A:V,multiply:W,rotate:$,scale:Y,translate:J,M:q,I:Q,j:Z,O:X,D:K,add:tt,R:et,G:it,N:rt,L:st,equals:nt,mul:mul$7,sub:sub$5}),mul$6=gt,sub$4=xt,mat3=Object.freeze({__proto__:null,create:ot,F:at,clone:ht,v:ut,S:ct,set:lt,identity:ft,_:pt,T:dt,P:mt,A:yt,multiply:gt,translate:vt,rotate:wt,scale:St,j:bt,M:_t,I:Et,B:Tt,U:Pt,H:At,V:Mt,O:It,D:Ot,add:Dt,R:xt,G:Ct,N:Rt,L:Lt,equals:kt,mul:mul$6,sub:sub$4}),perspective=me,ortho=ve,mul$5=$t,sub$3=Pe,mat4=Object.freeze({__proto__:null,create:Gt,clone:Nt,v:jt,S:Ft,set:Bt,identity:zt,_:Ut,T:Ht,P:Vt,A:Wt,multiply:$t,translate:Yt,scale:Jt,rotate:qt,W:Qt,$:Zt,Y:Xt,j:Kt,I:te,M:ee,J:ie,Z:re,X:se,K:ne,tt:oe,et:ae,it:he,rt:ue,st:ce,nt:le,ot:fe,U:pe,ht:de,ut:me,perspective:perspective,ct:ye,lt:ge,ft:ve,dt:ortho,yt:we,gt:Se,vt:be,O:_e,D:Ee,add:Te,R:Pe,G:Ae,N:Me,L:Ie,equals:Oe,mul:mul$5,sub:sub$3}),sub$2=Ne,mul$4=je,div$2=Fe,dist$2=Ye,sqrDist$2=Je,len$4=Ce,sqrLen$4=qe,t=De(),forEach$2=function(e,i,r,s,n,o){var a,h;for(i||(i=3),r||(r=0),h=s?Math.min(s*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],n(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e},vec3=Object.freeze({__proto__:null,create:De,clone:xe,length:Ce,S:Re,v:Le,set:ke,add:Ge,R:Ne,multiply:je,wt:Fe,ceil:Be,floor:ze,min:Ue,max:He,round:Ve,scale:We,St:$e,bt:Ye,_t:Je,Et:qe,Tt:Qe,inverse:Ze,normalize:Xe,Pt:Ke,At:ti,Mt:ei,It:ii,Ot:ri,Dt:si,random:ni,xt:oi,Ct:ai,Rt:hi,W:ui,$:ci,Y:li,angle:fi,Lt:pi,O:di,L:mi,equals:yi,sub:sub$2,mul:mul$4,div:div$2,kt:dist$2,Gt:sqrDist$2,Nt:len$4,jt:sqrLen$4,forEach:forEach$2}),sub$1=Ei,mul$3=Ti,div$1=Pi,dist$1=Ri,sqrDist$1=Li,len$3=ki,sqrLen$3=Gi,forEach$1=function(){var t=gi();return function(e,i,r,s,n,o){var a,h;for(i||(i=4),r||(r=0),h=s?Math.min(s*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],n(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),vec4=Object.freeze({__proto__:null,create:gi,clone:vi,S:wi,v:Si,set:bi,add:_i,R:Ei,multiply:Ti,wt:Pi,ceil:Ai,floor:Mi,min:Ii,max:Oi,round:Di,scale:xi,St:Ci,bt:Ri,_t:Li,length:ki,Et:Gi,Tt:Ni,inverse:ji,normalize:Fi,Pt:Bi,At:zi,Mt:Ui,random:Hi,xt:Vi,Rt:Wi,Lt:$i,O:Yi,L:Ji,equals:qi,sub:sub$1,mul:mul$3,div:div$1,kt:dist$1,Gt:sqrDist$1,Nt:len$3,jt:sqrLen$3,forEach:forEach$1}),clone$2=vi,fromValues$2=wi,copy$2=Si,set$2=bi,add$2=_i,mul$2=er,scale$2=xi,dot$2=Bi,lerp$2=Ui,length$2=ki,len$2=length$2,squaredLength$2=Gi,sqrLen$2=squaredLength$2,normalize$2=Fi,exactEquals$2=Ji,rotationTo=function(){var t=De(),e=Re(1,0,0),i=Re(0,1,0);return function(r,s,n){var o=Ke(s,n);return o<-.999999?(ti(t,e,s),len$4(t)<1e-6&&ti(t,i,s),Xe(t,t),Xi(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(ti(t,s,n),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,normalize$2(r,r))}}(),sqlerp=function(){var t=Qi(),e=Qi();return function(i,r,s,n,o,a){return cr(t,r,o,a),cr(e,s,n,a),cr(i,t,e,2*a*(1-a)),i}}(),setAxes=function(){var t=ot();return function(e,i,r,s){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=s[0],t[4]=s[1],t[7]=s[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(e,dr(e,t))}}(),quat=Object.freeze({__proto__:null,create:Qi,identity:Zi,Ft:Xi,Bt:Ki,zt:tr,multiply:er,W:ir,$:rr,Y:sr,Ut:nr,exp:ar,Ht:hr,pow:ur,It:cr,random:lr,T:fr,Vt:pr,Wt:dr,$t:mr,O:yr,clone:clone$2,S:fromValues$2,v:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Pt:dot$2,Mt:lerp$2,length:length$2,Nt:len$2,Et:squaredLength$2,jt:sqrLen$2,normalize:normalize$2,L:exactEquals$2,equals:gr,Yt:rotationTo,Jt:sqlerp,qt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Br,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:vr,clone:wr,S:Sr,Qt:br,K:_r,j:Er,M:Tr,F:Pr,v:Ar,identity:Mr,set:Ir,Zt:getReal,Xt:Or,Kt:setReal,te:Dr,et:xr,translate:Cr,W:Rr,$:Lr,Y:kr,ee:Gr,ie:Nr,re:jr,add:Fr,multiply:Br,mul:mul$1,scale:zr,Pt:dot$1,Mt:Ur,T:Hr,Vt:Vr,length:length$1,Nt:len$1,Et:squaredLength$1,jt:sqrLen$1,normalize:Wr,O:$r,L:Yr,equals:Jr}),len=ps,sub=es,mul=is,div=rs,dist=ls,sqrDist=fs,sqrLen=ds,forEach=function(){var t=qr();return function(e,i,r,s,n,o){var a,h;for(i||(i=2),r||(r=0),h=s?Math.min(s*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],n(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}(),vec2=Object.freeze({__proto__:null,create:qr,clone:Qr,S:Zr,v:Xr,set:Kr,add:ts,R:es,multiply:is,wt:rs,ceil:ss,floor:ns,min:os,max:as,round:hs,scale:us,St:cs,bt:ls,_t:fs,length:ps,Et:ds,Tt:ms,inverse:ys,normalize:gs,Pt:vs,At:ws,Mt:Ss,random:bs,se:_s,ne:Es,Ct:Ts,xt:Ps,rotate:As,angle:Ms,Lt:Is,O:Os,L:Ds,equals:xs,Nt:len,sub:sub,mul:mul,div:div,kt:dist,Gt:sqrDist,jt:sqrLen,forEach:forEach}),globalThis.oe=common,globalThis.oe.ae=mat2,globalThis.oe.he=mat2d,globalThis.oe.ue=mat3,globalThis.oe.ce=mat4,globalThis.oe.le=quat,globalThis.oe.fe=quat2,globalThis.oe.pe=vec2,globalThis.oe.de=vec3,globalThis.oe.me=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,UpdateLayoutEndValues,makeNullFilledArray,GetFragmentInputStructDeclaration,HashPipelineState,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,IsExpressionType,GetAudioSdkInstance,GetAudioDOMInterface,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let Cs=function(t,e,i){i=i||0;var r,s,n,o,a,h,u,c=[0,0];return r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],n=r*t[0][0]+s*t[0][1],o=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=o*e[0][0]+a*e[0][1],nn(u=r*a-o*s,0,i)||(c[0]=(a*n-s*h)/u,c[1]=(r*h-o*n)/u),c},Rs=function(t,e,i,r){var s=e[0]-t[0],n=e[1]-t[1],o=r[0]-i[0],a=r[1]-i[1];if(o*n-a*s===0)return!1;var h=(s*(i[1]-t[1])+n*(t[0]-i[0]))/(o*n-a*s),u=(o*(t[1]-i[1])+a*(i[0]-t[0]))/(a*s-o*n);return h>=0&&h<=1&&u>=0&&u<=1},Ls=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},ks=function(t,e,i){return Ls(t,e,i)>0},Gs=function(t,e,i){return Ls(t,e,i)>=0},Ns=function(t,e,i){return Ls(t,e,i)<0},js=function(t,e,i){return Ls(t,e,i)<=0},Fs=function(t,e,i,r){if(r){var s=tmpPoint1,n=tmpPoint2;s[0]=e[0]-t[0],s[1]=e[1]-t[1],n[0]=i[0]-e[0],n[1]=i[1]-e[1];var o=s[0]*n[0]+s[1]*n[1],a=Math.sqrt(s[0]*s[0]+s[1]*s[1]),h=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.acos(o/(a*h))<r}return 0===Ls(t,e,i)},Bs=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r},zs=function(t,e){var i=t.length;return t[e<0?e%i+i:e%i]},Us=function(t){t.length=0},Hs=function(t,e,i,r){for(var s=i;s<r;s++)t.push(e[s])},Vs=function(t){for(var e=0,i=t,r=1;r<t.length;++r)(i[r][1]<i[e][1]||i[r][1]===i[e][1]&&i[r][0]>i[e][0])&&(e=r);return!ks(zs(t,e-1),zs(t,e),zs(t,e+1))&&(Ws(t),!0)},Ws=function(t){for(var e=[],i=t.length,r=0;r!==i;r++)e.push(t.pop());for(r=0;r!==i;r++)t[r]=e[r]},$s=function(t,e){return Ns(zs(t,e-1),zs(t,e),zs(t,e+1))},Ys=function(t,e,i){var r,s,n=tmpLine1,o=tmpLine2;if(Gs(zs(t,e+1),zs(t,e),zs(t,i))&&js(zs(t,e-1),zs(t,e),zs(t,i)))return!1;s=Bs(zs(t,e),zs(t,i));for(var a=0;a!==t.length;++a)if((a+1)%t.length!==e&&a!==e&&Gs(zs(t,e),zs(t,i),zs(t,a+1))&&js(zs(t,e),zs(t,i),zs(t,a))&&(n[0]=zs(t,e),n[1]=zs(t,i),o[0]=zs(t,a),o[1]=zs(t,a+1),r=Cs(n,o),Bs(zs(t,e),r)<s))return!1;return!0},Js=function(t,e,i){for(var r=0;r!==t.length;++r)if(r!==e&&r!==i&&(r+1)%t.length!==e&&(r+1)%t.length!==i&&Rs(zs(t,e),zs(t,i),zs(t,r),zs(t,r+1)))return!1;return!0},qs=function(t,e,i,r){var s=r||[];if(Us(s),e<i)for(var n=e;n<=i;n++)s.push(t[n]);else{for(n=0;n<=i;n++)s.push(t[n]);for(n=e;n<t.length;n++)s.push(t[n])}return s},Qs=function(t){for(var e=[],i=[],r=[],s=[],n=Number.MAX_VALUE,o=0;o<t.length;++o)if($s(t,o))for(var a=0;a<t.length;++a)if(Ys(t,o,a)){i=Qs(qs(t,o,a,s)),r=Qs(qs(t,a,o,s));for(var h=0;h<r.length;h++)i.push(r[h]);i.length<n&&(e=i,n=i.length,e.push([zs(t,o),zs(t,a)]))}return e},Zs=function(t){var e=Qs(t);return e.length>0?Xs(t,e):[t]},Xs=function(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],r=0;r<e.length;r++)for(var s=e[r],n=0;n<i.length;n++){var o=Xs(i[n],s);if(o){i.splice(n,1),i.push(o[0],o[1]);break}}return i}return s=e,r=t.indexOf(s[0]),n=t.indexOf(s[1]),-1!==r&&-1!==n&&[qs(t,r,n),qs(t,n,r)]},Ks=function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var r=0;r<e-1;r++)if(Rs(i[e],i[e+1],i[r],i[r+1]))return!1;for(e=1;e<i.length-2;e++)if(Rs(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},tn=function(t,e,i,r,s){s=s||0;var n=e[1]-t[1],o=t[0]-e[0],a=n*t[0]+o*t[1],h=r[1]-i[1],u=i[0]-r[0],c=h*i[0]+u*i[1],l=n*u-h*o;return nn(l,0,s)?[0,0]:[(u*a-o*c)/l,(n*c-h*a)/l]},en=function(t,e,i,r,s,n,o){n=n||100,o=o||0,s=s||25,e=void 0!==e?e:[],i=i||[],r=r||[];var a=[0,0],h=[0,0],u=[0,0],c=0,l=0,f=0,p=0,d=0,m=0,y=0,g=[],v=[],w=t,S=t;if(S.length<3)return e;if(++o>n)return console.warn("quickDecomp: max level ("+n+") reached."),e;for(var b=0;b<t.length;++b)if($s(w,b)){i.push(w[b]),c=l=Number.MAX_VALUE;for(var _=0;_<t.length;++_)ks(zs(w,b-1),zs(w,b),zs(w,_))&&js(zs(w,b-1),zs(w,b),zs(w,_-1))&&(u=tn(zs(w,b-1),zs(w,b),zs(w,_),zs(w,_-1)),Ns(zs(w,b+1),zs(w,b),u)&&(f=Bs(w[b],u))<l&&(l=f,h=u,m=_)),ks(zs(w,b+1),zs(w,b),zs(w,_+1))&&js(zs(w,b+1),zs(w,b),zs(w,_))&&(u=tn(zs(w,b+1),zs(w,b),zs(w,_),zs(w,_+1)),ks(zs(w,b-1),zs(w,b),u)&&(f=Bs(w[b],u))<c&&(c=f,a=u,d=_));if(m===(d+1)%t.length)u[0]=(h[0]+a[0])/2,u[1]=(h[1]+a[1])/2,r.push(u),b<d?(Hs(g,w,b,d+1),g.push(u),v.push(u),0!==m&&Hs(v,w,m,w.length),Hs(v,w,0,b+1)):(0!==b&&Hs(g,w,b,w.length),Hs(g,w,0,d+1),g.push(u),v.push(u),Hs(v,w,m,b+1));else{if(m>d&&(d+=t.length),p=Number.MAX_VALUE,d<m)return e;for(_=m;_<=d;++_)Gs(zs(w,b-1),zs(w,b),zs(w,_))&&js(zs(w,b+1),zs(w,b),zs(w,_))&&(f=Bs(zs(w,b),zs(w,_)))<p&&Js(w,b,_)&&(p=f,y=_%t.length);b<y?(Hs(g,w,b,y+1),0!==y&&Hs(v,w,y,S.length),Hs(v,w,0,b+1)):(0!==b&&Hs(g,w,b,S.length),Hs(g,w,0,y+1),Hs(v,w,y,b+1))}return g.length<v.length?(en(g,e,i,r,s,n,o),en(v,e,i,r,s,n,o)):(en(v,e,i,r,s,n,o),en(g,e,i,r,s,n,o)),e}return e.push(t),e},rn=function(t,e){for(var i=0,r=t.length-1;t.length>3&&r>=0;--r)Fs(zs(t,r-1),zs(t,r),zs(t,r+1),e)&&(t.splice(r%t.length,1),i++);return i},sn=function(t,e){for(var i=t.length-1;i>=1;--i)for(var r=t[i],s=i-1;s>=0;--s)on(r,t[s],e)&&t.splice(i,1)},nn=function(t,e,i){return i=i||0,Math.abs(t-e)<=i},on=function(t,e,i){return nn(t[0],e[0],i)&&nn(t[1],e[1],i)};lineInt=Cs,lineSegmentsIntersect=Rs,triangleArea=Ls,isLeft=ks,isLeftOn=Gs,isRight=Ns,isRightOn=js,collinear=Fs,sqdist=Bs,polygonAt=zs,polygonClear=Us,polygonAppend=Hs,polygonMakeCCW=Vs,polygonReverse=Ws,polygonIsReflex=$s,polygonCanSee=Ys,polygonCanSee2=Js,polygonCopy=qs,polygonGetCutEdges=Qs,polygonDecomp=Zs,polygonSlice=Xs,polygonIsSimple=Ks,getIntersectionPoint=tn,polygonQuickDecomp=en,polygonRemoveCollinearPoints=rn,polygonRemoveDuplicatePoints=sn,scalar_eq=nn,points_eq=on,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.ye={ge:Zs,ve:en,we:Ks,Se:rn,be:sn,_e:Vs}}{let an=!1,hn=!1,un="dev";const cn=Symbol("Construct internal API token");let fn=16;const pn=self.Ee=class{constructor(){throw TypeError("static class can't be instantiated")}static Te(){if(fn<=0)throw new Error("cannot obtain internal API token");return--fn,cn}static Pe(){an=!0}static Ae(){return an}static Me(){hn=!0}static Ie(){return hn}static Oe(t){un=t}static De(){return un}static xe(){return"final"===un}};pn.Ce=!1,pn.Re=!1,pn.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Le={}}{const dn=self.Ee;dn.ke=class{constructor(t){this.Ge=t,this.Ne=new Map,this.je()}je(){let t=this.Ge;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const e=t.split("&");for(const t of e)this.Fe(t)}Fe(t){if(!t)return;if(!t.includes("="))return void this.Ne.set(t,null);const e=t.indexOf("="),i=decodeURIComponent(t.substring(0,e)),r=decodeURIComponent(t.substring(e+1));this.Ne.set(i,r)}Be(){for(const t of this.Ne)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ze(t){return this.Ne.has(t)}Ue(t){const e=this.Ne.get(t);return void 0===e?null:e}He(){history.replaceState("",document.title,location.pathname+location.search)}Ve(t){this.Ge=t,this.Ne.clear(),this.je()}},dn.We=new dn.ke(location.search),dn.$e=new dn.ke(location.hash),dn.We.ze("perf")&&(dn.Ye=!0),"dev"!==dn.We.Ue("mode")&&dn.Oe("final")}{let mn=function(t){const e=parseFloat(t);return vn.get(e)||(e>=13?"11":"NT "+t)};GetWindowsNTVersionName=mn;const yn=self.Ee,gn="(unknown)";yn.Je={qe:gn,Qe:gn,Ze:gn,Xe:gn,Ke:NaN,ti:gn,ei:"browser",ii:!0,ri:!1,si:!1,ni:!1,oi:async()=>{}};const vn=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),wn=navigator.userAgent,Sn=navigator.userAgentData;if(Sn&&Sn.brands.length>0){let _n=function(t){let e="",i="",r="",s="";for(const n of t){const t=En.get(n.brand);!e&&t&&(e=t,i=n.version);const o=Tn.get(n.brand);!r&&o&&(r=o,s=n.version)}e||"Chromium"!==r||(yn.Je.Ze="Chromium",yn.Je.Xe=s),yn.Je.Ze=e||gn,yn.Je.Xe=i||gn,yn.Je.ti=r||gn};ReadBrandList=_n,yn.Je.qe=Sn.platform,yn.Je.ri=Sn.mobile,yn.Je.ii=!yn.Je.ri;const En=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tn=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);_n(Sn.brands);let Pn=!1;yn.Je.oi=async()=>{if(!Pn)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);_n(t.fullVersionList),"Windows"===yn.Je.qe?yn.Je.Qe=mn(t.platformVersion):yn.Je.Qe=t.platformVersion,Pn=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let An=function(t,e){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(wn);if(i){e(i);break}}};RunTest=An,An(/windows\s+nt\s+([\d\.]+)/i,t=>{yn.Je.qe="Windows";const e=t[1];yn.Je.Qe=mn(e)}),An(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{yn.Je.qe="macOS",yn.Je.Qe=t[1].replace(/_/g,".")}),An(/CrOS/,()=>{yn.Je.qe="Chrome OS"}),An(/linux|openbsd|freebsd|netbsd/i,()=>{yn.Je.qe="Linux"}),An(/android/i,()=>{yn.Je.qe="Android"}),An(/android\s+([\d\.]+)/i,t=>{yn.Je.qe="Android",yn.Je.Qe=t[1]}),yn.Je.qe===gn&&(An(/(iphone|ipod|ipad)/i,t=>{yn.Je.qe="iOS"}),An([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{yn.Je.qe="iOS",yn.Je.Qe=t[1].replace(/_/g,".")}));const Mn=/chrome\//i.test(wn),In=/chromium\//i.test(wn),On=/edg\//i.test(wn),Dn=/OPR\//.test(wn),xn=/nwjs/i.test(wn),Cn=/safari\//i.test(wn),Rn=/webkit/i.test(wn);On||Dn||An(/chrome\/([\d\.]+)/i,t=>{yn.Je.Ze="Chrome",yn.Je.Xe=t[1],yn.Je.ti="Chromium"}),An(/edg\/([\d\.]+)/i,t=>{yn.Je.Ze="Edge",yn.Je.Xe=t[1],yn.Je.ti="Chromium"}),An(/OPR\/([\d\.]+)/,t=>{yn.Je.Ze="Opera",yn.Je.Xe=t[1],yn.Je.ti="Chromium"}),An(/chromium\/([\d\.]+)/i,t=>{yn.Je.Ze="Chromium",yn.Je.Xe=t[1],yn.Je.ti="Chromium"}),An(/nwjs\/[0-9.]+/i,t=>{yn.Je.Ze="NW.js",yn.Je.Xe=t[1],yn.Je.ti="Chromium",yn.Je.ei="nwjs"}),An(/firefox\/([\d\.]+)/i,t=>{yn.Je.Ze="Firefox",yn.Je.Xe=t[1],yn.Je.ti="Gecko"}),!Cn||Mn||In||On||Dn||xn||(yn.Je.Ze="Safari",yn.Je.ti="WebKit",An(/version\/([\d\.]+)/i,t=>{yn.Je.Xe=t[1]}),An(/crios\/([\d\.]+)/i,t=>{yn.Je.Ze="Chrome for iOS",yn.Je.Xe=t[1]}),An(/fxios\/([\d\.]+)/i,t=>{yn.Je.Ze="Firefox for iOS",yn.Je.Xe=t[1]}),An(/edgios\/([\d\.]+)/i,t=>{yn.Je.Ze="Edge for iOS",yn.Je.Xe=t[1]})),yn.Je.ti===gn&&Rn&&(yn.Je.ti="WebKit"),"Android"===yn.Je.qe&&"Safari"===yn.Je.Ze&&(yn.Je.Ze="Stock");const Ln=new Set(["Windows","macOS","Linux","Chrome OS"]).has(yn.Je.qe)||"nwjs"===yn.Je.ei;yn.Je.ii=Ln,yn.Je.ri=!Ln}"Chrome"===yn.Je.Ze&&"browser"===yn.Je.ei&&/wv\)/.test(wn)&&(yn.Je.ei="webview"),"nwjs"!==yn.Je.ei&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(yn.Je.ei="webapp"),yn.Je.Ke=parseFloat(yn.Je.Xe);const bn="macOS"===yn.Je.qe&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;bn&&(yn.Je.qe="iOS",yn.Je.Qe=yn.Je.Xe,yn.Je.ii=!1,yn.Je.ri=!0,yn.Je.ni=!0),yn.Je.si="macOS"===yn.Je.qe||"iOS"===yn.Je.qe}{let kn=function(t){return new Promise((e,i)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>i(t.error)})},Gn=function(t){return new Promise((e,i)=>{t.oncomplete=()=>e(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Nn=function(t,e){return Yn(t,e)},jn=function(t,e){return Yn(t,e,!0)},Fn=function(t){Bn(t);let e=Vn.get(t);return e instanceof Promise||(e=Jn(t),Vn.set(t,e),e.catch(e=>Vn.delete(t))),e},Bn=function(t){if("string"!=typeof t)throw new TypeError("expected string")},zn=function(t,e){const i=t.objectStore(Hn).openCursor();return new Promise(t=>{const r=[];i.onsuccess=i=>{const s=i.target.result;if(s){switch(e){case"entries":r.push([s.key,s.value]);break;case"keys":r.push(s.key);break;case"values":r.push(s.value)}s.continue()}else t(r)}})};s=kn,a=Gn,c=Nn,i=jn,l=Fn,f=Bn,d=zn;const Un=2,Hn="keyvaluepairs",Vn=new Map,Wn="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,$n="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function Yn(t,e,i=!1,r=!0){const s=await Fn(t);try{return e(s.transaction([Hn],i?"readwrite":"readonly"))}catch(s){if(r&&"InvalidStateError"===s.name)return Vn.delete(t),Yn(t,e,i,!1);throw s}}async function Jn(t){Bn(t);const e=indexedDB.open(t,Un);return e.addEventListener("upgradeneeded",e=>{try{e.target.result.createObjectStore(Hn)}catch(e){console.error(`Failed to create objectstore for database ${t}`,e)}}),kn(e)}class qn{constructor(t){Bn(t),this.name=t}async ready(){await Fn(this.name)}set(t,e){return Bn(t),jn(this.name,async i=>{const r=kn(i.objectStore(Hn).put(e,t)),s=Gn(i);await Promise.all([s,r])})}get(t){return Bn(t),Nn(this.name,async e=>{const i=kn(e.objectStore(Hn).get(t)),r=Gn(e),[s,n]=await Promise.all([r,i]);return n})}delete(t){return Bn(t),jn(this.name,async e=>{const i=kn(e.objectStore(Hn).delete(t)),r=Gn(e);await Promise.all([r,i])})}clear(){return jn(this.name,async t=>{const e=kn(t.objectStore(Hn).clear()),i=Gn(t);await Promise.all([i,e])})}keys(){return Nn(this.name,async t=>{let e;e=$n?kn(t.objectStore(Hn).getAllKeys()):zn(t,"keys");const i=Gn(t),[r,s]=await Promise.all([i,e]);return s})}values(){return Nn(this.name,async t=>{let e;e=Wn?kn(t.objectStore(Hn).getAll()):zn(t,"values");const i=Gn(t),[r,s]=await Promise.all([i,e]);return s})}entries(){return Nn(this.name,async t=>{const e=zn(t,"entries"),i=Gn(t),[r,s]=await Promise.all([i,e]);return s})}}self.ai=qn}{let Qn=function(t){throw new Error(`"${t}" is not implemented`)},Zn=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Xn=function(t){return"object"==typeof t?new Promise(e=>{const{port1:i,port2:r}=new MessageChannel;r.onmessage=t=>e(t.data),i.postMessage(t)}):Promise.resolve(t)};r=Qn,a=Zn,o=Xn;const Kn=self.ai,to=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class eo{constructor(t){this.hi=t,this.ci=!this.hi,this.ci||"undefined"!=typeof indexedDB||(this.ci=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.li=new Map}fi(t){if(!this.ci)for(const e of to)if(t&&e.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.ci=!0;break}}async pi(t){const e=this.li.get(t),i=await Xn(e);return void 0===i?null:i}async di(t,e){e=await Xn(e),this.li.set(t,e)}mi(t){this.li.delete(t)}yi(){this.li.clear()}gi(){return Array.from(this.li.keys())}wi(){return this.ci}Si(){return this.li}bi(t){this.li=t}async getItem(t,e){if(Zn(e),this.ci)return await this.pi(t);let i;try{i=await this.hi.get(t)}catch(e){return this.fi(e),this.ci?await this.pi(t):(console.error(`Error reading '${t}' from storage, returning null: `,e),null)}return void 0===i?null:i}async setItem(t,e,i){if(Zn(i),void 0===e&&(e=null),this.ci)await this.di(t,e);else try{await this.hi.set(t,e)}catch(i){if(this.fi(i),!this.ci)throw i;await this.di(t,e)}}async removeItem(t,e){if(Zn(e),this.ci)this.mi(t);else try{await this.hi.delete(t)}catch(e){this.fi(e),this.ci?this.mi(t):console.error(`Error removing '${t}' from storage: `,e)}}async clear(t){if(Zn(t),this.ci)this.yi();else try{await this.hi.clear()}catch(t){this.fi(t),this.ci?this.yi():console.error("Error clearing storage: ",t)}}async keys(t){if(Zn(t),this.ci)return this.gi();let e=[];try{e=await this.hi.keys()}catch(t){if(this.fi(t),this.ci)return this.gi();console.error("Error getting storage keys: ",t)}return e}ready(t){return Zn(t),this.ci?Promise.resolve(!0):this.hi.ready()}_i(t){if(t.Ei)return new eo(null);{const e=t.name;if("string"!=typeof e)throw new TypeError("invalid store name");const i=new Kn(e);return new eo(i)}}length(t){Qn("localforage.length()")}key(t,e){Qn("localforage.key()")}iterate(t,e){Qn("localforage.iterate()")}Ti(t){Qn("localforage.setDriver()")}config(t){Qn("localforage.config()")}Pi(t){Qn("localforage.defineDriver()")}Ai(){Qn("localforage.driver()")}supports(t){Qn("localforage.supports()")}dropInstance(){Qn("localforage.dropInstance()")}}self.localforage=new eo(new Kn("localforage"))}{const io=self.Ee;if(io.Mi={},io.Mi.Ii=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),io.Mi.Oi="undefined"!=typeof HTMLDialogElement,io.Mi.Di=!!self.requestIdleCallback,io.Mi.ImageBitmap=!!self.createImageBitmap,io.Mi.ImageBitmapOptions=!1,io.Mi.xi=!1,io.Mi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{io.Mi.ImageBitmapOptions=!0}).catch(()=>{io.Mi.ImageBitmapOptions=!1})}catch(ro){io.Mi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{io.Mi.xi=10===t.width&&10===t.height}).catch(()=>{io.Mi.xi=!1})}catch(so){io.Mi.xi=!1}}if(io.Mi.Ci=!(!navigator.clipboard||!navigator.clipboard.readText),io.Mi.Ri=!(!navigator.permissions||!navigator.permissions.query),io.Mi.Li=!1,io.Mi.Ri){const no={name:"clipboard-read"};navigator.permissions.query(no).then(()=>{io.Mi.Li=!0}).catch(()=>{io.Mi.Li=!1})}io.Mi.ki=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),io.Mi.Gi="undefined"!=typeof Proxy,io.Mi.Ni="undefined"!=typeof document&&void 0!==document.createElement("a").download,io.Mi.ji="function"==typeof fetch,io.Mi.Fi=!!(self.isSecureContext&&"Opera"!==io.Je.Ze&&navigator.storage&&navigator.storage.persist),io.Mi.Bi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),io.Mi.zi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===io.Je.qe)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),io.Mi.ImageDecoder=void 0!==self.ImageDecoder,io.Mi.Ui=!!self.VideoEncoder,io.Mi.Hi=!!self.showOpenFilePicker,io.Mi.Vi=!!self.queryLocalFonts,io.Mi.UserActivation=!!navigator.userActivation,io.Mi.Wi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const e=t.getContext("2d");e.fillStyle="blue",e.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(e=>t.toBlob(e,"image/webp",1))),io.Mi.Wi=i&&"image/webp"===i.type}catch(t){io.Mi.Wi=!1}})()}{const oo=self.Ee;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(oo.$i(t),"g"),e)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const e of this)if(!t.has(e))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,e)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((e,i)=>t({usage:e,quota:i}),e))})}{let ao=function(t){let e="Assertion failure: "+t+"\n\nStack trace:\n"+ho.Yi();console.error(e)};assertFail=ao;const ho=self.Ee;self.assert=function(t,e){t||ao(e)}}{const uo=self.Ee,co=self.Le;uo.Ji=function(t){return"number"==typeof t},uo.Qi=function(t){return uo.Ji(t)&&isFinite(t)},uo.Zi=function(t){if(!uo.Ji(t))throw new TypeError("expected number")},uo.Xi=function(t){uo.Ki(t)},uo.tr=function(t,e,i){if(!uo.Ji(t)||isNaN(t)||e>t||i<t)throw new RangeError("number outside of range")},uo.er=function(...t){for(let e of t);},uo.ir=function(t){if(!uo.Qi(t))throw new TypeError("expected finite number")},uo.rr=function(t){uo.Ki(t)},uo.sr=function(...t){for(let e of t);},uo.nr=function(t){return"string"==typeof t},uo.ar=function(t){if(!uo.nr(t))throw new TypeError("expected string")},uo.hr=function(t){uo.Ki(t)},uo.ur=function(...t){for(let e of t);},uo.cr=function(t){if("object"!=typeof t||null===t)return!1;let e=Object.getPrototypeOf(t);return e?e.constructor===Object:null===e},uo.lr=function(t){if(!uo.cr(t))throw new TypeError("expected simple object")},uo.pr=function(t){if(!uo.Ki(t)&&!uo.cr(t))throw new TypeError("expected simple object")},uo.dr=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},uo.mr=function(t){if(!uo.dr(t))throw new TypeError("expected object")},uo.yr=function(t){uo.Ki(t)},uo.gr=function(...t){for(let e of t);},uo.vr=function(t){return uo.wr(t,Blob)&&"string"==typeof t.name},uo.Sr=function(t){if(!uo.vr(t))throw new TypeError("expected file")},uo.br=function(t){uo.Ki(t)},uo._r=function(t){return Array.isArray(t)},uo.Er=function(t){if(!uo._r(t))throw new TypeError("expected array")},uo.Tr=function(t){uo.Ki(t)},uo.Pr=function(...t){for(let e of t);},uo.Ar=function(t){return!(!uo._r(t)||t.length&&!uo._r(t[0]))},uo.Mr=function(t){if(!uo.Ar(t))throw new TypeError("expected 2d array");for(let e of t)if(!uo._r(e))throw new TypeError("expected 2d array")},uo.Ir=function(t){uo.Ki(t)},uo.Or=function(t){return"function"==typeof t},uo.Dr=function(t,e){if(!uo.Or(t))throw new TypeError("expected function");if(!uo.Ki(e)&&t!==e)throw new TypeError("expected same function reference")},uo.Cr=function(t){uo.Ki(t)},uo.Rr=function(...t){for(let e of t);},uo.Lr=function(t,...e){if(!uo.Or(t))throw new TypeError("expected function");if(!e.length)throw new Error("missing comparison functions");for(let i of e)if(!uo.Ki(i)&&t===i)return;throw new TypeError("expected same function reference")},uo.kr=function(...t){if(!uo.Ki(t))for(let e of t);},uo.Gr=function(t,e){return t instanceof e},uo.Nr=function(t,...e){for(let i of e)if(uo.Gr(t,i))return!0;return!1},uo.jr=function(t,e){if(!uo.Gr(t,e))throw new TypeError("unexpected type")},uo.Fr=function(t,e){uo.Ki(t)},uo.Br=function(t,...e){for(let t of e);},uo.zr=function(t,...e){if(!uo.Nr(t,...e))throw new TypeError("unexpected type")},uo.Ur=function(t,...e){if(!uo.Ki(t)&&!uo.Nr(t,...e))throw new TypeError("unexpected type")},uo.Hr=function(t,e){for(let i of t)if(!uo.Gr(i,e))return!1;return!0},uo.Vr=function(t){for(let e of t)if(!uo.Qi(e))return!1;return!0},uo.Wr=function(t,e){for(let e of t);},uo.$r=function(t,e){if(!uo.Ki(t))for(let e of t);},uo.Yr=function(t,e){if(!uo.Ki(t))for(let e of t);},uo.Jr=function(t,...e){for(let e of t);},uo.qr=function(t,...e){if(!uo.Ki(t))for(let e of t);},uo.Qr=function(t,e){return!(uo.Ki(t)||!uo.nr(t.nodeName))&&(!e||uo.Zr(t.nodeName,e))},uo.Xr=function(t,e){if(uo.Ki(t)||!uo.nr(t.nodeName))throw new TypeError("expected DOM node");if(e&&!uo.Zr(t.nodeName,e))throw new TypeError(`expected DOM '${e}' node`)},uo.Kr=function(t,e){uo.Ki(t)},uo.ts=function(t,e){return!(uo.Ki(t)||!uo.nr(t.tagName))&&(!e||uo.Zr(t.tagName,e))},uo.es=function(t,e){if(uo.Ki(t)||!uo.nr(t.tagName))throw new TypeError("expected HTML element");if(e&&!uo.Zr(t.tagName,e))throw new TypeError(`expected HTML '${e}' element`)},uo.rs=function(t,e){uo.Ki(t)},uo.ss=function(t){return uo.ts(t,"img")||uo.ts(t,"canvas")||uo.ts(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},uo.ns=function(t){if(!uo.ss(t))throw new TypeError("expected drawable")},uo.hs=function(t){uo.Ki(t)},uo.us=function(t){return t instanceof ImageData||uo.ss(t)},uo.cs=function(t){if(!uo.us(t))throw new TypeError("expected drawable or image data")},uo.ls=function(t){if(!uo.Ki(t)&&!uo.us(t))throw new TypeError("expected drawable or image data")},uo.fs=function(t){return"string"==typeof t||uo.ps&&t instanceof uo.ps||t instanceof uo.ds},uo.ys=function(t){if(!uo.fs(t))throw new TypeError("expected string-like")},uo.gs=function(t){uo.Ki(t)},uo.vs=function(...t){for(let e of t);},uo.ws=function(){throw new Error("must be overridden")},uo.Ss=function(){throw new Error("not yet implemented")},uo.bs=function(t){return t.constructor===function*(){}.constructor},uo._s=function(t){if(!uo.bs(t))throw new Error("expected generator function")},uo.Es=function(t){return"function"===t[Symbol.iterator]},uo.Ts=function(t){if(!uo.Es(t))throw new Error("expected iterable")},uo.Ps=function(t){return!uo.Ki(t)},uo.Ki=function(t){return null==t},uo.As=function(t){let e=t[0].constructor;for(let i of t)if(i.constructor!==e)return!1;return e},uo.Ms=function(t,e){for(let i of t)if(!(i instanceof e))return!1;return!0};const lo=Object.getPrototypeOf(Uint8Array);uo.Is=function(t){return uo.Gr(t,lo)},uo.Os=function(t){},uo.Ds=function(t){uo.xs(t,lo)},uo.Cs=function(t,...e){if(!uo.Rs(t,...e))throw new TypeError("unexpected type")},uo.Rs=function(t,...e){for(const i of e)if(uo.wr(t,i))return!0;return!1},uo.xs=function(t,e){if(!uo.wr(t,e))throw new TypeError("unexpected type")},uo.wr=function(t,e){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===e.name)return!0;return!1},co.Zi=uo.Zi,co.Xi=uo.Xi,co.ir=uo.ir,co.rr=uo.rr,co.ar=uo.ar,co.hr=uo.hr,co.mr=uo.mr,co.yr=uo.yr,co.Er=uo.Er,co.Tr=uo.Tr,co.Dr=uo.Dr,co.Cr=uo.Cr,co.jr=uo.jr,co.Fr=uo.Fr,co.Ki=uo.Ki}{let fo=function(t,e){let i=vo.getType(t),r=vo.getType(e);return"null"===i||"null"===r||"undefined"!==i&&"undefined"!==r&&i===r},po=function(t){console.warn("[Defence] "+t+" @",vo.Yi())},mo=function(){if(Ao=-1,bo.size>0||_o.size>0){let t=[...new Set([...bo.keys()].map(t=>vo.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),bo.clear(),_o.clear()}},yo=function(t){let e=new Set;for(let i in t)e.add(i);return e},go=function(t,e){let i=yo(e),r=Mo.get(t);if(r){let e=[];for(let t of r.values())i.has(t)?i.delete(t):e.push(t);vo.Ls(e,[...i]),e.length&&console.warn(`[Defence] '${vo.getName(t)}' constructor creates inconsistent properties: ${e.join(", ")}`)}else Mo.set(t,i)};isValidTypeChange=fo,logDefendedObjectWarning=po,CheckDefendedObjectsUsedCorrectly=mo,getObjectPropertySet=yo,VerifyObjectPropertiesConsistent=go;const vo=self.Ee,wo=new Map;let So;vo.ks=function(t,e){console.log(`%c${t}`,`font-weight: bold; color:${e}`)},vo.Gs=function(t,...e){wo.has(t)||wo.set(t,-1),-1===wo.get(t)&&wo.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...e),wo.set(t,-1)}))},vo.Ns=function(t){performance.mark(t),So||(So=new Map),So.has(t)||So.set(t,{js:0,total:0,Fs:0,Bs:1,toString:function(){return`${t} :: current => ${this.js.toPrecision(3)} :: average => ${this.Fs.toPrecision(3)} :: calls => ${this.Bs}`}})},vo.zs=function(t){performance.measure(`measure-${t}`,t);const e=performance.getEntriesByName(`measure-${t}`)[0],i=So.get(t);i.js=e.duration,i.total+=i.js,i.Fs=i.total/i.Bs,console.log(i.toString()),i.Bs++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},vo.Yi=function(){return(new Error).stack},vo.Us=function(){},vo.cast=function(t,e){return t&&t instanceof e?t:null},vo.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":vo.Ji(t)?"<number>":vo.nr(t)?"<string>":vo._r(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":vo.Or(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},vo.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},vo.range=function*(t,e){if(!isFinite(Math.abs(t-e)))throw new Error("Invalid parameters");if(t>e)for(let i=t-1;i>=e;i--)yield i;else for(let i=t;i<e;i++)yield i};let bo=new Map,_o=new Map,Eo=new WeakMap,To=new WeakMap;vo.Hs={};const Po=new Set(["then","splice"]);vo.Hs.get=function(t,e){return e in t||"symbol"==typeof e||Po.has(e)||po(`Accessed missing property '${e}' from defended object '${vo.getName(t)}', returning undefined`),To.has(t)&&"symbol"!=typeof e&&!Po.has(e)&&po(`Accessed property '${e}' on a released object '${vo.getName(t)}'\nObject was originally released at: ${To.get(t)})\nCall stack at access: `),t[e]},vo.Hs.set=function(t,e,i){return e in t||bo.has(t)||po(`Set non-existent property '${e}' to '${i}' on defended object '${vo.getName(t)}'`),fo(t[e],i)||bo.has(t)||po(`Set '${vo.getType(t[e])}' property '${e}' to type '${vo.getType(i)}' on defended object '${vo.getName(t)}'`),To.has(t)&&po(`Set property '${e}' on a released object '${vo.getName(t)}'\nObject was originally released at: ${To.get(t)})\nCall stack at access: `),t[e]=i,!0},vo.Hs.deleteProperty=function(t,e){throw new ReferenceError(`Cannot delete property '${e}' from defended object '${vo.getName(t)}'`)},vo.Hs.defineProperty=function(t,e,i){throw new ReferenceError(`Cannot define property '${e}' on defended object '${vo.getName(t)}'`)},vo.Hs.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${vo.getName(t)}'`)};let Ao=-1;vo.Vs=class{constructor(){if(!vo.Re||!vo.Mi.Gi)return;let t=new.target,e=Object.create(t.prototype),i=new Proxy(e,vo.Hs);return bo.set(e,i),_o.set(i,e),Eo.set(i,e),-1===Ao&&(Ao=requestAnimationFrame(mo)),i}},vo.Ws=function(t){if(vo.Re&&vo.Mi.Gi&&t instanceof vo.Vs){if(!_o.has(t))return t;let e=_o.get(t);return _o.delete(t),bo.delete(e),t}return vo.Ce?Object.seal(t):t},vo.$s=function(t,...e){let i;try{i=new t(...e)}catch(t){throw _o.clear(),bo.clear(),t}return vo.Re&&go(t,i),vo.Ws(i)},vo.Ys=function(t){let e=Eo.get(t);e&&To.set(e,vo.Yi())},vo.Js=function(t){let e=Eo.get(t);return!!e&&!!To.get(e)};let Mo=new Map;vo.qs=class{constructor(t){this.Qs="",t&&this.start(t)}start(t){vo.Ye&&(this.Qs=t,performance.mark(this.Qs+"-Start"))}end(){vo.Ye&&(performance.mark(this.Qs+"-End"),performance.measure(this.Qs,this.Qs+"-Start",this.Qs+"-End"))}next(t){vo.Ye&&(this.end(),this.Qs=t,performance.mark(this.Qs+"-Start"))}}}{let Io=function(t){return 0===t&&1/t<0};isNegativeZero=Io;const Oo=self.Ee,Do=2*Math.PI,xo=Math.PI/180,Co=180/Math.PI;Oo.wrap=function(t,e,i){t=Math.floor(t),e=Math.floor(e);const r=(i=Math.floor(i))-e;if(0===r)return i;if(t<e){const s=i-(e-t)%r;return s===i?0:s}return e+(t-e)%r},Oo.Zs=function(t,e,i,r,s){const n=i-e;return 0===n&&0===r?t:(t-e)*(s-r)/n+r},Oo.normalize=function(t,e,i){return e-i===0?1:(t-e)/(i-e)},Oo.Xs=function(t,e,i){return t<e?e:t>i?i:t},Oo.Ks=function(t){return(t%=Do)<0&&(t+=Do),t},Oo.tn=function(t){return t*xo},Oo.en=function(t){return t*Co},Oo.rn=function(t,e){return Math.sqrt(t*t+e*e)},Oo.sn=function(t,e,i){return Math.sqrt(t*t+e*e+i*i)},Oo.nn=function(t,e,i,r){return Oo.rn(i-t,r-e)},Oo.an=function(t,e,i,r){const s=i-t,n=r-e;return s*s+n*n},Oo.hn=function(t,e,i,r){return Math.atan2(r-e,i-t)},Oo.un=function(t,e){if(t===e)return 0;let i=Math.sin(t),r=Math.cos(t),s=i*Math.sin(e)+r*Math.cos(e);return s>=1?0:s<=-1?Math.PI:Math.acos(s)},Oo.cn=function(t,e,i){let r=Math.sin(t),s=Math.cos(t),n=Math.sin(e),o=Math.cos(e);return Math.acos(r*n+s*o)>i?s*n-r*o>0?Oo.Ks(t+i):Oo.Ks(t-i):Oo.Ks(e)},Oo.ln=function(t,e){let i=Math.sin(t);return Math.cos(t)*Math.sin(e)-i*Math.cos(e)<=0},Oo.fn=function(t,e,i,r=0){let s=Oo.un(t,e);const n=Do*r;return Oo.ln(e,t)?Oo.Ks(t+(s+n)*i):Oo.Ks(t-(s+n)*i)},Oo.pn=function(t,e,i,r=0){const s=Oo.un(t,e),n=Do*r;return Oo.ln(e,t)?Oo.Ks(t+(s+n)*i):Oo.Ks(t+(Do-s+n)*i)},Oo.dn=function(t,e,i,r=0){const s=Oo.un(t,e),n=Do*r;return Oo.ln(e,t)?Oo.Ks(t-(-Do+s-n)*i):Oo.Ks(t-(s+n)*i)},Oo.mn=function(t,e){const i=Oo.un(t,e);return Oo.ln(t,e)?Oo.Ks(e-i):Oo.Ks(e+i)},Oo.Mt=function(t,e,i){return t+i*(e-t)},Oo.yn=function(t,e,i){return t===e?0:(i-t)/(e-t)},Oo.gn=function(t,e,i,r,s){return Oo.Mt(r,s,Oo.yn(t,e,i))},Oo.vn=function(t,e,i,r){return Oo.Mt(Oo.Mt(t,e,r),Oo.Mt(e,i,r),r)},Oo.wn=function(t,e,i,r,s){return Oo.Mt(Oo.vn(t,e,i,s),Oo.vn(e,i,r,s),s)},Oo.Sn=function(t,e,i){return(t+e+(t-e)*Math.cos(i*Math.PI))/2},Oo.bn=function(t){return t>0&&!(t-1&t)},Oo._n=function(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1},Oo.En=function(t,e){return Math.round(t*e)/e},Oo.Tn=function(t,e){return Math.floor(t*e)/e},Oo.Pn=function(t,e){e=Math.max(Math.floor(e),0);const i=Math.pow(10,e);return Math.round(t*i)/i},Oo.An=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Oo.toFixed=function(t,e){let i=t.toFixed(e),r=i.length-1;for(;r>=0&&"0"===i.charAt(r);--r);return r>=0&&"."===i.charAt(r)&&--r,r<0?i:i.substr(0,r+1)},Oo.Mn=function(t,e,i){return Oo.Xs(t,0,255)|Oo.Xs(e,0,255)<<8|Oo.Xs(i,0,255)<<16};const Ro=1024,Lo=1023,ko=16384,Go=8191,No=-8192;Oo.In=function(t,e,i,r){return(t=Oo.Xs(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(e=Oo.Xs(Math.floor(1024*e),-8192,8191))<0&&(e+=16384),(i=Oo.Xs(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*e*1024+1024*i+(r=Oo.Xs(Math.floor(1023*r),0,1023)))},Oo.On=function(t,e,i){return Oo.In(t,e,i,1)},Oo.Dn=function(t){if(t>=0)return(255&t)/255;{let e=Math.floor(-t/274877906944);return e>8191&&(e-=16384),e/1024}},Oo.xn=function(t){if(t>=0)return((65280&t)>>8)/255;{let e=Math.floor(-t%274877906944/16777216);return e>8191&&(e-=16384),e/1024}},Oo.Cn=function(t){if(t>=0)return((16711680&t)>>16)/255;{let e=Math.floor(-t%16777216/1024);return e>8191&&(e-=16384),e/1024}},Oo.Rn=function(t){return Io(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Oo.Ln=function(t,e){for(t=Math.floor(t),e=Math.floor(e);0!==e;){let i=e;e=t%e,t=i}return t};const jo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Oo.kn=function(t,e){if((t=Math.floor(t))===(e=Math.floor(e)))return[1,1];for(let i of jo){let r=t/i[0]*i[1];if(Math.abs(e-r)<1)return i.slice(0);if(r=t/i[1]*i[0],Math.abs(e-r)<1)return[i[1],i[0]]}let i=Oo.Ln(t,e);return[t/i,e/i]},Oo.Gn=function(t,e,i,r,s,n,o,a){const h=Math.min(t,i),u=Math.max(t,i),c=Math.min(s,o),l=Math.max(s,o);if(u<c||h>l)return!1;const f=Math.min(e,r),p=Math.max(e,r),d=Math.min(n,a),m=Math.max(n,a);if(p<d||f>m)return!1;const y=s-t+o-i,g=n-e+a-r,v=i-t,w=r-e,S=o-s,b=a-n,_=Math.abs(w*S-b*v),E=S*g-b*y;if(Math.abs(E)>_)return!1;const T=v*g-w*y;return Math.abs(T)<=_},Oo.Nn=function(t,e,i,r,s,n,o,a,h,u,c,l){const f=Math.min(h,c),p=Math.max(h,c);if(n<f||s>p)return!1;const d=Math.min(u,l),m=Math.max(u,l);if(a<d||o>m)return!1;const y=h-t+c-i,g=u-e+l-r,v=i-t,w=r-e,S=c-h,b=l-u,_=Math.abs(w*S-b*v),E=S*g-b*y;if(Math.abs(E)>_)return!1;const T=v*g-w*y;return Math.abs(T)<=_},Oo.jn=function(t,e,i,r,s){const n=Math.min(t,i),o=Math.max(t,i),a=Math.min(e,r),h=Math.max(e,r),u=s.Fn(),c=s.Bn(),l=s.zn(),f=s.Un(),p=s.Hn(),d=s.Vn(),m=s.Wn(),y=s.$n();return Oo.Nn(t,e,i,r,n,o,a,h,u,c,l,f)||Oo.Nn(t,e,i,r,n,o,a,h,l,f,p,d)||Oo.Nn(t,e,i,r,n,o,a,h,p,d,m,y)||Oo.Nn(t,e,i,r,n,o,a,h,m,y,u,c)},Oo.Yn=function(t,e,i,r,s){const n=Math.min(t,i),o=Math.max(t,i),a=Math.min(e,r),h=Math.max(e,r);let u=0;for(let c=s.length-4;u<=c;u+=2)if(Oo.Nn(t,e,i,r,n,o,a,h,s[u],s[u+1],s[u+2],s[u+3]))return!0;return Oo.Nn(t,e,i,r,n,o,a,h,s[u],s[u+1],s[0],s[1])};const Fo=2,Bo=1e-6;Oo.Jn=function(t,e,i,r,s,n,o,a){const h=i-t,u=a-n,c=h*u-(r-e)*(o-s);if(0===c)return 2;const l=((e-r)*(o-t)+h*(a-e))/c;return 0<l&&l<1.000001?(u*(o-t)+(s-o)*(a-e))/c:2},Oo.qn=function(t,e,i,r,s,n,o,a,h){const u=(o-s)*h,c=(a-n)*h;return Oo.Jn(t,e,i,r,s-u,n-c,o+u,a+c)},Oo.Qn=function(t,e,i,r,s,n,o,a){const h=s-i,u=n-r,c=o-i,l=a-r,f=t-i,p=e-r,d=h*h+u*u,m=h*c+u*l,y=h*f+u*p,g=c*c+l*l,v=c*f+l*p,w=1/(d*g-m*m),S=(g*y-m*v)*w,b=(d*v-m*y)*w;return S>=0&&b>=0&&S+b<=1},Oo.Zn=function(t,e,i,r,s,n,o,a){const h=s-i,u=n-r,c=o-i,l=a-r,f=t-i,p=e-r,d=h*h+u*u,m=h*c+u*l,y=c*c+l*l,g=f*h+p*u,v=f*c+p*l,w=d*y-m*m,S=(y*g-m*v)/w,b=(d*v-m*g)/w;return[1-S-b,S,b]},Oo.Xn=function(t,e,i,r,s,n,o,a,h,u,c,l){return[t*r+e*o+i*u,t*s+e*a+i*c,t*n+e*h+i*l]}}{const zo=self.Ee;let Uo=null,Ho="";if("undefined"!=typeof document){Uo=document;const qo=document.querySelector("base");Ho=qo&&qo.hasAttribute("href")?qo.getAttribute("href"):"",Ho&&(Ho.startsWith("/")&&(Ho=Ho.substr(1)),Ho.endsWith("/")||(Ho+="/"))}zo.Kn=function(){return Ho},zo.eo=function(){if(!Uo)return"";const t=Uo.location;return zo.io(t.origin+t.pathname)+Ho},zo.io=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?"":t.substr(0,e+1)},zo.ro=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?t:t.substr(e+1)},zo.so=function(t){let e=t.lastIndexOf(".");return e<1?"":t.substr(e)},zo.no=function(t,e){const i=t.lastIndexOf(".");return-1===i?t+"."+e:t.substr(0,i+1)+e},zo.oo=function(t){let e=t.lastIndexOf(".");return e<1?t:t.substr(0,e)},zo.ao=function(t){return t.replace(/\\/g,"/")},zo.ho=function(t,e){return e===(t?zo.so(t).slice(1):"")},zo.uo=function(t,e){let i,r;return zo.vr(t)&&(i=zo.oo(t.name)),zo.nr(t)&&(i=zo.oo(t)),zo.vr(e)&&(r=zo.oo(e.name)),zo.nr(e)&&(r=zo.oo(e)),i===r},zo.co=function(t){t=zo.ao(t);let e=/^\w\:\//.exec(t);e?(e=e[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):e="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let r,s="",n=t,o="";i>0&&(s=t.slice(0,i),n=t.slice(i)),r=n;const a=n.lastIndexOf(".");return a>0&&(o=n.slice(a),r=n.slice(0,-o.length)),{dir:s,lo:n,name:r,root:e,ext:o,fo:e+s+n}},zo.po=function(t,e){return new Promise((i,r)=>{self.setTimeout(i,t,e)})},zo.do=function(t){try{t()}catch(t){zo.Ce&&console.warn("Swallowed exception: ",t)}},zo.mo=function(){},zo.Zr=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize().toLowerCase()===e.normalize().toLowerCase())},zo.yo=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize()===e.normalize())},zo.vo=function(t,e,i){t[i++]=e[0],t[i++]=e[1],t[i++]=e[2],t[i++]=e[3],t[i++]=e[4],t[i++]=e[5],t[i++]=e[6],t[i++]=e[7],t[i++]=e[8],t[i++]=e[9],t[i++]=e[10],t[i++]=e[11],t[i++]=e[12],t[i++]=e[13],t[i++]=e[14],t[i]=e[15]},zo.wo=function(t,e){t.length=e},zo.So=function(t){t&&0!==t.length&&zo.wo(t,0)},zo.bo=function(t){if(t){for(let e=0;e<t.length;e++){let i=t[e];zo.wo(i,0)}zo.wo(t,0)}},zo._o=function(t,e,i){e|=0;const r=t.length;if(!(e<=r))for(let s=r;s<e;++s)t.push(i)},zo.Eo=function(t,e,i){e|=0;const r=t.length;e<r?zo.wo(t,e):e>r&&zo._o(t,e,i)},zo.To=function(t,e){zo.So(t),zo.Ls(t,e)},zo.Ls=function(t,e){if(e.length<1e4)t.push(...e);else for(let i=0,r=e.length;i<r;++i)t.push(e[i])},zo.Po=function(t,e){if((e=Math.floor(e))<0||e>=t.length)return;let i=t.length-1;for(let r=e;r<i;++r)t[r]=t[r+1];zo.wo(t,i)},zo.Ao=function(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)},zo.Mo=function(t,e){let i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;++r)if(t[r]!==e[r])return!1;return!0},zo.Io=function(t,e){let i=[],r=0;for(let s=0,n=t.length;s<n;++s){let n=t[s];e(n)?i.push(n):(t[r]=n,++r)}return zo.wo(t,r),i},zo.Oo=function(t,e){const i=t.length;let r=0;for(let i=0,s=t.length;i<s;++i){let s=t[i];e.has(s)||(t[r++]=s)}return zo.wo(t,r),i-r},zo.Do=function(t,e){return t===Math.floor(t)&&t>=0&&t<e.length},zo.xo=function(t,e){if(!zo.Do(t,e))throw new RangeError("array index out of bounds")},zo.Co=function(t){return t.slice()},zo.Ro=function(t,e){let i=[];for(let r of t)if(zo.dr(r)){let t=e(r);if(!t)throw new Error("missing clone");if(t.constructor!==r.constructor)throw new Error("object is not a clone");i.push(t)}else zo._r(r)?i.push(zo.Ro(r,e)):i.push(r);return i},zo.Lo=function(t){let e=[];for(let i of t)e.push(i.slice());return e},zo.ko=function(t,e=" "){return t?t.split(e).map(t=>t.trim()).filter(t=>!!t):[]},zo.Go=function(t,e,i){const r=new Set;for(const s of t.values())e(s)&&(i?r.add(i(s)):r.add(s));return r},zo.No=function(t,e){return t.union?t.union(e):new Set([...t,...e])},zo.jo=function(t,e){for(const i of e)t.add(i);return t},zo.Fo=function(t){for(let e of t)return e;return null},zo.xor=function(t,e){return!t!=!e},zo.compare=function(t,e,i){switch(e){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},zo.Bo=function(t){for(let e in t)if(t.hasOwnProperty(e))return!0;return!1},zo.zo=function(t,e){return t.length?new Promise((i,r)=>{const s=[];let n=0,o=!1;for(let a=0,h=t.length;a<h;++a)s.push(void 0),t[a].then(r=>{o||(s[a]=r,++n,n===t.length?i(s):e(n,t.length))}).catch(t=>{o=!0,r(t)})}):Promise.resolve([])};let Vo=[];zo.Uo=function(t){Vo.push(t)},zo.Ho=function(){let t=0;for(let e of Vo)t+=e();return Math.floor(t)};let Wo=1;const $o=new Map,Yo=new MessageChannel;Yo.port2.onmessage=function(t){const e=t.data,i=$o.get(e);$o.delete(e),i&&i(performance.now())},zo.Vo=function(t){const e=Wo++;return $o.set(e,t),Yo.port1.postMessage(e),e},zo.Wo=function(t){$o.delete(t)},zo.$o=zo.Vo,zo.Yo=function(){return new Promise(t=>zo.$o(t))};const Jo=new Set;zo.Jo=function(t){const e=self.requestAnimationFrame(async i=>{await zo.Yo(),Jo.has(e)&&(Jo.delete(e),t(i))});return Jo.add(e),e},zo.qo=function(t){Jo.has(t)&&(self.cancelAnimationFrame(t),Jo.delete(t))}}{const Qo=self.Ee;Qo.Qo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Qo.Zo=function(t){return!Qo.Qo(t)},Qo.Xo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Qo.Ko=function(t,e){return fetch(t,e).then(t=>(Qo.Xo(t),t))},Qo.ta=function(t){return Qo.Ko(t).then(t=>t.text())},Qo.ea=function(t){return Qo.Ko(t).then(t=>t.json())},Qo.ia=function(t){return Qo.Ko(t).then(t=>t.blob())},Qo.ra=function(t){return Qo.Ko(t).then(t=>t.arrayBuffer())},Qo.sa=function(t){return new Promise((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t=>i(t),r.src=t})},Qo.na=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((e,i)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>i(r.error),r.readAsArrayBuffer(t)})},Qo.oa=function(t){return"function"==typeof t.text?t.text():new Promise((e,i)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>i(r.error),r.readAsText(t)})},Qo.aa=function(t){return Qo.oa(t).then(t=>JSON.parse(t))},Qo.ha=async function(t,e){let i=URL.createObjectURL(t);try{const t=await Qo.sa(i);return URL.revokeObjectURL(i),i="",e&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Qo.ua=function(t,e){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=e,i}return new OffscreenCanvas(t,e)},Qo.ca=function(t,e,i){if("number"!=typeof i&&(i=1),e=e||"image/png",i=Qo.Xs(i,0,1),t.convertToBlob)return t.convertToBlob({type:e,quality:i});if(t.toBlob)return new Promise(r=>t.toBlob(r,e,i));throw new Error("could not convert canvas to blob")},Qo.la=function(t,e,i){const r=Qo.ua(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),Qo.ca(r,e,i)},Qo.fa=function(t,e,i){if(Qo.Mi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Qo.la(t,e,i));if(Qo.Mi.ImageBitmap)return createImageBitmap(t).then(t=>Qo.la(t,e,i));{const r=Qo.ua(t.width,t.height);return r.getContext("2d").putImageData(t,0,0),Qo.ca(r,e,i)}},Qo.pa=function(t,e){t.clear();for(const i of e)t.add(i)},Qo.da=function(t){const e=Object.create(null);for(const[i,r]of t.entries())e[i]=r;return e},Qo.ma=function(t,e){e.clear();for(const[i,r]of Object.entries(t))e.set(i,r)},Qo.ya=function t(e){if("object"==typeof e&&null!==e){if(e instanceof Set)return{_c3type_:"set",data:[...e].map(e=>t(e))};if(e instanceof Map)return{_c3type_:"map",data:[...e].map(e=>[e[0],t(e[1])])};{const i=Object.create(null);for(const[r,s]of Object.entries(e))i[r]=t(s);return i}}return e},Qo.ga=function t(e){if("object"==typeof e&null!==e){if("set"===e._c3type_)return new Set(e.data.map(e=>t(e)));if("map"===e._c3type_)return new Map(e.data.map(e=>[e[0],t(e[1])]));{const i=Object.create(null);for(const[r,s]of Object.entries(e))i[r]=t(s);return i}}return e},Qo.va=function(t){if(t.startsWith("--"))return t;let e="",i=!1,r=0;for(const s of t)"-"===s?r>0&&(i=!0):i?(e+=s.toUpperCase(),i=!1):e+=s,++r;return e},Qo.wa=function(t){return"object"==typeof t&&"function"==typeof t.next},Qo.Sa=function(t,e){const i=[];if("function"==typeof e)for(let r=0;r<t;++r)i.push(e());else for(let r=0;r<t;++r)i.push(e);return i}}{let Zo=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},Xo=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t};padTwoDigits=Zo,hueToRGB=Xo;const Ko=self.Ee,ta=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,ea=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;Ko.ba=class{constructor(t,e,i,r){this._a=NaN,this.Ea=NaN,this.Ta=NaN,this.Pa=NaN,this._a=0,this.Ea=0,this.Ta=0,this.Pa=0,t instanceof Ko.ba?this.set(t):this.Aa(t||0,e||0,i||0,r||0)}Ma(t,e,i){return this._a=+t,this.Ea=+e,this.Ta=+i,this.Xs(),this}Aa(t,e,i,r){return this._a=+t,this.Ea=+e,this.Ta=+i,this.Pa=+r,this.Xs(),this}set(t){return this._a=t._a,this.Ea=t.Ea,this.Ta=t.Ta,this.Pa=t.Pa,this}v(t){return this.set(t)}add(t){this._a+=t._a,this.Ea+=t.Ea,this.Ta+=t.Ta,this.Pa+=t.Pa,this.Xs()}Ia(t,e,i,r=0){this._a+=+t,this.Ea+=+e,this.Ta+=+i,this.Pa+=+r,this.Xs()}Oa(t){this.Da(Math.max(this._a,t._a)-Math.min(this._a,t._a)),this.xa(Math.max(this.Ea,t.Ea)-Math.min(this.Ea,t.Ea)),this.Ca(Math.max(this.Ta,t.Ta)-Math.min(this.Ta,t.Ta)),this.Ra(Math.max(this.Pa,t.Pa)-Math.min(this.Pa,t.Pa)),this.Xs()}La(t){this._a=t._a,this.Ea=t.Ea,this.Ta=t.Ta}Da(t){this._a=Ko.Xs(+t,0,1)}ka(){return this._a}xa(t){this.Ea=Ko.Xs(+t,0,1)}Ga(){return this.Ea}Ca(t){this.Ta=Ko.Xs(+t,0,1)}Na(){return this.Ta}Ra(t){this.Pa=Ko.Xs(+t,0,1)}ja(){return this.Pa}clone(){return Ko.$s(Ko.ba,this._a,this.Ea,this.Ta,this.Pa)}toArray(){return[this._a,this.Ea,this.Ta,this.Pa]}Fa(){return new Float64Array(this.toArray())}Ba(t,e){t[e++]=this._a,t[e++]=this.Ea,t[e++]=this.Ta,t[e]=this.Pa}za(t,e){const i=this._a,r=this.Ea,s=this.Ta,n=this.Pa;for(let o=0;o<4;++o)t[e++]=i,t[e++]=r,t[e++]=s,t[e++]=n}Ua(t,e){t[e++]=this._a,t[e++]=this.Ea,t[e]=this.Ta}equals(t){return this._a===t._a&&this.Ea===t.Ea&&this.Ta===t.Ta&&this.Pa===t.Pa}Ha(t){return this._a===t._a&&this.Ea===t.Ea&&this.Ta===t.Ta}Va(t,e,i){return this._a===t&&this.Ea===e&&this.Ta===i}Wa(t,e,i,r){return this._a===t&&this.Ea===e&&this.Ta===i&&this.Pa===r}$a(t,e){return t[e]===Math.fround(this._a)&&t[e+1]===Math.fround(this.Ea)&&t[e+2]===Math.fround(this.Ta)&&t[e+3]===Math.fround(this.Pa)}Ya(t,e){return t[e]===Math.fround(this._a)&&t[e+1]===Math.fround(this.Ea)&&t[e+2]===Math.fround(this.Ta)}multiply(t){this._a*=t._a,this.Ea*=t.Ea,this.Ta*=t.Ta,this.Pa*=t.Pa}Ja(t){this._a*=t,this.Ea*=t,this.Ta*=t,this.Pa*=t}qa(){return this._a*=this.Pa,this.Ea*=this.Pa,this.Ta*=this.Pa,this}Qa(){return this._a/=this.Pa,this.Ea/=this.Pa,this.Ta/=this.Pa,this}Xs(){return this._a=Ko.Xs(this._a,0,1),this.Ea=Ko.Xs(this.Ea,0,1),this.Ta=Ko.Xs(this.Ta,0,1),this.Pa=Ko.Xs(this.Pa,0,1),this}Za(t){this._a=Ko.Dn(t),this.Ea=Ko.xn(t),this.Ta=Ko.Cn(t),this.Pa=Ko.Rn(t)}Xa(t,e,i){return`rgb(${100*(Ko.Qi(t)?t:this.ka())}%, ${100*(Ko.Qi(e)?e:this.Ga())}%, ${100*(Ko.Qi(i)?i:this.Na())}%)`}Ka(t,e,i,r){return`rgba(${100*(Ko.Qi(t)?t:this.ka())}%, ${100*(Ko.Qi(e)?e:this.Ga())}%, ${100*(Ko.Qi(i)?i:this.Na())}%, ${Ko.Qi(r)?r:this.ja()})`}th(t=!1){const e=Math.round(255*this.ka()),i=Math.round(255*this.Ga()),r=Math.round(255*this.Na());let s="#"+Zo(e.toString(16))+Zo(i.toString(16))+Zo(r.toString(16));return t&&(s+=Zo(Math.round(255*this.ja()).toString(16))),s}eh(t){if("string"!=typeof t)return!1;let e,i,r,s;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length||4===t.length)e=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,r=parseInt(t[2],16)/15,4===t.length&&(s=parseInt(t[3],16)/15);else{if(6!==t.length&&8!==t.length)return!1;e=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,r=parseInt(t.substr(4,2),16)/255,8===t.length&&(s=parseInt(t.substr(6,2),16)/255)}return!!(Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r))&&(this.Ma(e,i,r),Number.isFinite(s)?this.Ra(s):this.Ra(1),!0)}ih(){return`${Math.round(255*this.ka())}, ${Math.round(255*this.Ga())}, ${Math.round(255*this.Na())}`}rh(){return[Math.round(255*this.ka()),Math.round(255*this.Ga()),Math.round(255*this.Na())]}sh(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const i=parseInt(e[0].trim(),10)/255,r=parseInt(e[1].trim(),10)/255,s=parseInt(e[2].trim(),10)/255;return isFinite(i)&&this.Da(i),isFinite(r)&&this.xa(r),isFinite(s)&&this.Ca(s),this.Ra(1),!0}nh(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const i=parseInt(e[0].trim(),10)/100,r=parseInt(e[1].trim(),10)/100,s=parseInt(e[2].trim(),10)/100;return isFinite(i)&&this.Da(i),isFinite(r)&&this.xa(r),isFinite(s)&&this.Ca(s),this.Ra(1),!0}oh(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const i=parseInt(e[0].trim(),10)/255,r=parseInt(e[1].trim(),10)/255,s=parseInt(e[2].trim(),10)/255,n=parseFloat(e[3].trim());return isFinite(i)&&this.Da(i),isFinite(r)&&this.xa(r),isFinite(s)&&this.Ca(s),isFinite(n)&&this.Ra(n),!0}ah(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const i=parseInt(e[0].trim(),10)/100,r=parseInt(e[1].trim(),10)/100,s=parseInt(e[2].trim(),10)/100,n=parseFloat(e[3].trim());return isFinite(i)&&this.Da(i),isFinite(r)&&this.xa(r),isFinite(s)&&this.Ca(s),isFinite(n)&&this.Ra(n),!0}hh(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.nh(t):this.sh(t);if(t.startsWith("rgba("))return t.includes("%")?this.ah(t):this.oh(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.uh(t);{const e=t.split(",");return t.includes("%")?3===e.length?this.nh(t):4===e.length&&this.ah(t):3===e.length?this.sh(t):4===e.length&&this.oh(t)}}return this.eh(t)}toJSON(){return[this._a,this.Ea,this.Ta,this.Pa]}fh(t,e,i,r){let s,n,o;if(t%=360,e=Ko.Xs(e,0,100),i=Ko.Xs(i,0,100),r=Ko.Xs(r,0,1),t/=360,i/=100,0==(e/=100))s=n=o=i;else{const r=i<.5?i*(1+e):i+e-i*e,a=2*i-r;s=Xo(a,r,t+1/3),n=Xo(a,r,t),o=Xo(a,r,t-1/3)}return this.Da(s),this.xa(n),this.Ca(o),this.Ra(r),this}uh(t){const e=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=ta.exec(e),r=ea.exec(e);return i&&4===i.length?(this.fh(+i[1],+i[2],+i[3],1),!0):!(!r||5!==r.length||(this.fh(+i[1],+i[2],+i[3],+i[4]),0))}ph(){const t=this._a,e=this.Ea,i=this.Ta,r=this.Pa;return`hsla(${Ko.ba.dh(t,e,i)}, ${Ko.ba.mh(t,e,i)}%, ${Ko.ba.yh(t,e,i)}%, ${r})`}gh(){const t=this._a,e=this.Ea,i=this.Ta;return[Ko.ba.dh(t,e,i),Ko.ba.mh(t,e,i),Ko.ba.yh(t,e,i),this.Pa]}wh(t){Array.isArray(t)&&(t.length<3||(this._a=t[0],this.Ea=t[1],this.Ta=t[2],t.length>=4?this.Pa=t[3]:this.Pa=1))}set r(t){this.Da(t)}get r(){return this.ka()}set g(t){this.xa(t)}get g(){return this.Ga()}set b(t){this.Ca(t)}get b(){return this.Na()}set a(t){this.Ra(t)}get a(){return this.ja()}Sh(t,e){switch(t){case 0:this.Da(e);break;case 1:this.xa(e);break;case 2:this.Ca(e);break;case 3:this.Ra(e);break;default:throw new RangeError("invalid color index")}}bh(t){switch(t){case 0:return this.ka();case 1:return this.Ga();case 2:return this.Na();case 3:return this.ja();default:throw new RangeError("invalid color index")}}static _h(t,e){let i,r;if(Array.isArray(t))i=new Ko.ba,i.wh(t);else{if(!(t instanceof Ko.ba))throw new Error("unexpected type");i=t}if(Array.isArray(e))r=new Ko.ba,r.wh(e);else{if(!(e instanceof Ko.ba))throw new Error("unexpected type");r=e}return i.equals(r)}static Eh(t,e){return Ko.Xs(Math.max(t,e)-Math.min(t,e),0,1)}static Th(t,e){const i=new Ko.ba;return i.Da(Math.max(t._a,e._a)-Math.min(t._a,e._a)),i.xa(Math.max(t.Ea,e.Ea)-Math.min(t.Ea,e.Ea)),i.Ca(Math.max(t.Ta,e.Ta)-Math.min(t.Ta,e.Ta)),i.Ra(Math.max(t.Pa,e.Pa)-Math.min(t.Pa,e.Pa)),i}static Ph(t,e){const i=new Ko.ba(0,0,0,1);return i.Da(Math.max(t._a,e._a)-Math.min(t._a,e._a)),i.xa(Math.max(t.Ea,e.Ea)-Math.min(t.Ea,e.Ea)),i.Ca(Math.max(t.Ta,e.Ta)-Math.min(t.Ta,e.Ta)),i}static dh(t,e,i){const r=Math.max(t,e,i),s=Math.min(t,e,i);if(r===s)return 0;let n=0;switch(r){case t:n=(e-i)/(r-s)+(e<i?6:0);break;case e:n=(i-t)/(r-s)+2;break;case i:n=(t-e)/(r-s)+4}return Math.round(n/6*360)}static mh(t,e,i){const r=Math.max(t,e,i),s=Math.min(t,e,i);if(r===s)return 0;const n=r-s,o=(r+s)/2>.5?n/(2-r-s):n/(r+s);return Math.round(100*o)}static yh(t,e,i){const r=Math.max(t,e,i),s=(r+Math.min(t,e,i))/2;return r?Math.round(100*s):0}},Ko.ba.Ah=Object.freeze(Ko.$s(Ko.ba,1,1,1,1)),Ko.ba.Mh=Object.freeze(Ko.$s(Ko.ba,0,0,0,1)),Ko.ba.Ih=Object.freeze(Ko.$s(Ko.ba,0,0,0,0))}{const ia=self.Ee;ia.Oh=class{constructor(t,e){this.Dh=0,this.xh=0,t instanceof ia.Oh?this.v(t):this.set(t||0,e||0)}set(t,e){this.Dh=+t,this.xh=+e}v(t){this.Dh=t.Dh,this.xh=t.xh}equals(t){return this.Dh===t.Dh&&this.xh===t.xh}Ch(t,e){return this.Dh===t&&this.xh===e}$a(t,e){return t[e]===Math.fround(this.Dh)&&t[e+1]===Math.fround(this.xh)}Rh(t){this.Dh=+t}Lh(){return this.Dh}kh(t){this.xh=+t}Gh(){return this.xh}toArray(){return[this.Dh,this.xh]}Fa(){return new Float64Array(this.toArray())}Ba(t,e){t[e++]=this.Dh,t[e]=this.xh}offset(t,e){this.Dh+=+t,this.xh+=+e}scale(t,e){this.Dh*=t,this.xh*=e}wt(t,e){this.Dh/=t,this.xh/=e}round(){this.Dh=Math.round(this.Dh),this.xh=Math.round(this.xh)}floor(){this.Dh=Math.floor(this.Dh),this.xh=Math.floor(this.xh)}ceil(){this.Dh=Math.ceil(this.Dh),this.xh=Math.ceil(this.xh)}angle(){return ia.hn(0,0,this.Dh,this.xh)}Nh(){return this.Dh*this.Dh+this.xh*this.xh}length(){return ia.rn(this.Dh,this.xh)}jh(t,e){const i=this.Dh*e-this.xh*t;this.xh=this.xh*e+this.Dh*t,this.Dh=i}rotate(t){0!==t&&this.jh(Math.sin(t),Math.cos(t))}Fh(t,e,i){0===t||e===this.Dh&&i===this.xh||(this.Dh-=e,this.xh-=i,this.jh(Math.sin(t),Math.cos(t)),this.Dh+=+e,this.xh+=+i)}move(t,e){0!==e&&(this.Dh+=Math.cos(t)*e,this.xh+=Math.sin(t)*e)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Dh/=t,this.xh/=t)}Xs(t,e){this.Dh=ia.Xs(this.Dh,t,e),this.xh=ia.Xs(this.xh,t,e)}Pt(t){return this.Dh*t.Dh+this.xh*t.xh}reverse(){this.Dh=-this.Dh,this.xh=-this.xh}Bh(){let t=this.Dh;return this.Dh=this.xh,this.xh=-t,this}}}{const ra=self.Ee;ra.Rect=class{constructor(t,e,i,r){this.zh=NaN,this.Uh=NaN,this.Hh=NaN,this.Vh=NaN,this.zh=0,this.Uh=0,this.Hh=0,this.Vh=0,t instanceof ra.Rect?this.v(t):this.set(t||0,e||0,i||0,r||0)}set(t,e,i,r){this.zh=+t,this.Uh=+e,this.Hh=+i,this.Vh=+r}Wh(t,e,i,r){t=+t,e=+e,this.zh=t,this.Uh=e,this.Hh=t+ +i,this.Vh=e+ +r}v(t){this.zh=+t.zh,this.Uh=+t.Uh,this.Hh=+t.Hh,this.Vh=+t.Vh}clone(){return new ra.Rect(this.zh,this.Uh,this.Hh,this.Vh)}static $h(t,e){const i=new ra.Rect;return i.Yh(Math.min(t.zh,e.zh)),i.Jh(Math.min(t.Uh,e.Uh)),i.qh(Math.max(t.Hh,e.Hh)),i.Qh(Math.max(t.Vh,e.Vh)),i}static Zh(t){return new ra.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.zh===t.zh&&this.Uh===t.Uh&&this.Hh===t.Hh&&this.Vh===t.Vh}Xh(t,e,i,r){return this.zh===t&&this.Uh===e&&this.width()===i&&this.height()===r}$a(t,e){return t[e]===Math.fround(this.zh)&&t[e+1]===Math.fround(this.Uh)&&t[e+2]===Math.fround(this.Hh)&&t[e+3]===Math.fround(this.Vh)}Yh(t){this.zh=+t}Kh(){return this.zh}Jh(t){this.Uh=+t}tu(){return this.Uh}qh(t){this.Hh=+t}eu(){return this.Hh}Qh(t){this.Vh=+t}iu(){return this.Vh}toArray(){return[this.zh,this.Uh,this.Hh,this.Vh]}Fa(){return new Float64Array(this.toArray())}ru(){return new DOMRect(this.zh,this.Uh,this.width(),this.height())}static su(t){return ra.$s(ra.Rect,t.left,t.top,t.right,t.bottom)}Ba(t,e){t[e++]=this.zh,t[e++]=this.Uh,t[e++]=this.Hh,t[e]=this.Vh}nu(t,e){t[e++]=this.zh,t[e++]=this.Uh,t[e++]=this.Hh,t[e++]=this.Uh,t[e++]=this.Hh,t[e++]=this.Vh,t[e++]=this.zh,t[e]=this.Vh}ou(t,e,i){t[e++]=this.zh,t[e++]=this.Uh,t[e++]=i,t[e++]=this.Hh,t[e++]=this.Uh,t[e++]=i,t[e++]=this.Hh,t[e++]=this.Vh,t[e++]=i,t[e++]=this.zh,t[e++]=this.Vh,t[e]=i}width(){return this.Hh-this.zh}height(){return this.Vh-this.Uh}au(){return(this.zh+this.Hh)/2}hu(){return(this.Uh+this.Vh)/2}offset(t,e){t=+t,e=+e,this.zh+=t,this.Uh+=e,this.Hh+=t,this.Vh+=e}offsetLeft(t){this.zh+=+t}offsetTop(t){this.Uh+=+t}uu(t){this.Hh+=+t}cu(t){this.Vh+=+t}lu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Uh<this.Vh?this.zh<this.Hh?this.Vh=this.Uh+this.width():this.Vh=this.Uh-this.width():this.zh<this.Hh?this.Vh=this.Uh-this.width():this.Vh=this.Uh+this.width()}fu(t,e){t=+t,e=+e,this.zh-=t,this.Uh-=e,this.Hh+=t,this.Vh+=e}pu(t,e){t=+t,e=+e,this.zh+=t,this.Uh+=e,this.Hh-=t,this.Vh-=e}multiply(t,e){this.zh*=t,this.Uh*=e,this.Hh*=t,this.Vh*=e}wt(t,e){this.zh/=t,this.Uh/=e,this.Hh/=t,this.Vh/=e}du(t){this.zh=+t-this.zh,this.Hh=+t-this.Hh}mu(t){this.Uh=+t-this.Uh,this.Vh=+t-this.Vh}yu(t,e){const i=this.width(),r=this.height(),s=this.Kh()+i*t,n=this.tu()+r*e;this.Wh(s-r*e,n-i*t,r,i)}gu(){const t=this.zh;this.zh=this.Hh,this.Hh=t}vu(){const t=this.Uh;this.Uh=this.Vh,this.Vh=t}wu(t){const e=this.Uh;this.Uh=+t-this.Vh,this.Vh=+t-e}round(){this.zh=Math.round(this.zh),this.Uh=Math.round(this.Uh),this.Hh=Math.round(this.Hh),this.Vh=Math.round(this.Vh)}Su(){this.zh=Math.ceil(this.zh),this.Uh=Math.ceil(this.Uh),this.Hh=Math.floor(this.Hh),this.Vh=Math.floor(this.Vh)}bu(){this.zh=Math.floor(this.zh),this.Uh=Math.floor(this.Uh),this.Hh=Math.ceil(this.Hh),this.Vh=Math.ceil(this.Vh)}floor(){this.zh=Math.floor(this.zh),this.Uh=Math.floor(this.Uh),this.Hh=Math.floor(this.Hh),this.Vh=Math.floor(this.Vh)}ceil(){this.zh=Math.ceil(this.zh),this.Uh=Math.ceil(this.Uh),this.Hh=Math.ceil(this.Hh),this.Vh=Math.ceil(this.Vh)}Xs(t,e,i,r){this.zh=Math.max(this.zh,+t),this.Uh=Math.max(this.Uh,+e),this.Hh=Math.min(this.Hh,+i),this.Vh=Math.min(this.Vh,+r)}_u(t,e,i,r){t=+t,e=+e,i=+i,r=+r,this.zh=ra.Xs(this.zh,t,i),this.Uh=ra.Xs(this.Uh,e,r),this.Hh=ra.Xs(this.Hh,t,i),this.Vh=ra.Xs(this.Vh,e,r)}normalize(){this.zh>this.Hh&&this.gu(),this.Uh>this.Vh&&this.vu()}Eu(t){return!(t.Hh<this.zh||t.Vh<this.Uh||t.zh>this.Hh||t.Uh>this.Vh)}Tu(t,e,i){return!(t.Hh+e<this.zh||t.Vh+i<this.Uh||t.zh+e>this.Hh||t.Uh+i>this.Vh)}Pu(t,e){return t>=this.zh&&t<=this.Hh&&e>=this.Uh&&e<=this.Vh}Au(t){return t.zh>=this.zh&&t.Uh>=this.Uh&&t.Hh<=this.Hh&&t.Vh<=this.Vh}Mu(t){t.zh<this.zh&&(this.zh=+t.zh),t.Uh<this.Uh&&(this.Uh=+t.Uh),t.Hh>this.Hh&&(this.Hh=+t.Hh),t.Vh>this.Vh&&(this.Vh=+t.Vh)}Iu(t){this.zh=ra.Mt(t.zh,t.Hh,this.zh),this.Uh=ra.Mt(t.Uh,t.Vh,this.Uh),this.Hh=ra.Mt(t.zh,t.Hh,this.Hh),this.Vh=ra.Mt(t.Uh,t.Vh,this.Vh)}}}{const sa=self.Ee;sa.Ou=class{constructor(t,e,i,r,s,n,o,a){this.Du=NaN,this.xu=NaN,this.Cu=NaN,this.Ru=NaN,this.Lu=NaN,this.ku=NaN,this.Gu=NaN,this.Nu=NaN,this.Du=0,this.xu=0,this.Cu=0,this.Ru=0,this.Lu=0,this.ku=0,this.Gu=0,this.Nu=0,t instanceof sa.Ou?this.v(t):this.set(t||0,e||0,i||0,r||0,s||0,n||0,o||0,a||0)}set(t,e,i,r,s,n,o,a){this.Du=+t,this.xu=+e,this.Cu=+i,this.Ru=+r,this.Lu=+s,this.ku=+n,this.Gu=+o,this.Nu=+a}ju(t,e,i,r){this.set(t,e,i,e,i,r,t,r)}v(t){this.Du=t.Du,this.xu=t.xu,this.Cu=t.Cu,this.Ru=t.Ru,this.Lu=t.Lu,this.ku=t.ku,this.Gu=t.Gu,this.Nu=t.Nu}equals(t){return this.Du===t.Du&&this.xu===t.xu&&this.Cu===t.Cu&&this.Ru===t.Ru&&this.Lu===t.Lu&&this.ku===t.ku&&this.Gu===t.Gu&&this.Nu===t.Nu}Fu(t){this.Du=+t}Fn(){return this.Du}Bu(t){this.xu=+t}Bn(){return this.xu}zu(t){this.Cu=+t}zn(){return this.Cu}Uu(t){this.Ru=+t}Un(){return this.Ru}Hu(t){this.Lu=+t}Hn(){return this.Lu}Vu(t){this.ku=+t}Vn(){return this.ku}Wu(t){this.Gu=+t}Wn(){return this.Gu}$u(t){this.Nu=+t}$n(){return this.Nu}Yu(){return new DOMQuad(new DOMPoint(this.Du,this.xu),new DOMPoint(this.Cu,this.Ru),new DOMPoint(this.Lu,this.ku),new DOMPoint(this.Gu,this.Nu))}static Ju(t){return sa.$s(sa.Ou,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Du,this.xu,this.Cu,this.Ru,this.Lu,this.ku,this.Gu,this.Nu]}Fa(){return new Float64Array(this.toArray())}Ba(t,e){t[e++]=this.Du,t[e++]=this.xu,t[e++]=this.Cu,t[e++]=this.Ru,t[e++]=this.Lu,t[e++]=this.ku,t[e++]=this.Gu,t[e]=this.Nu}qu(t,e,i){t[e++]=this.Du,t[e++]=this.xu,t[e++]=i,t[e++]=this.Cu,t[e++]=this.Ru,t[e++]=i,t[e++]=this.Lu,t[e++]=this.ku,t[e++]=i,t[e++]=this.Gu,t[e++]=this.Nu,t[e]=i}offset(t,e){t=+t,e=+e,this.Du+=t,this.xu+=e,this.Cu+=t,this.Ru+=e,this.Lu+=t,this.ku+=e,this.Gu+=t,this.Nu+=e}round(){this.Du=Math.round(this.Du),this.xu=Math.round(this.xu),this.Cu=Math.round(this.Cu),this.Ru=Math.round(this.Ru),this.Lu=Math.round(this.Lu),this.ku=Math.round(this.ku),this.Gu=Math.round(this.Gu),this.Nu=Math.round(this.Nu)}floor(){this.Du=Math.floor(this.Du),this.xu=Math.floor(this.xu),this.Cu=Math.floor(this.Cu),this.Ru=Math.floor(this.Ru),this.Lu=Math.floor(this.Lu),this.ku=Math.floor(this.ku),this.Gu=Math.floor(this.Gu),this.Nu=Math.floor(this.Nu)}ceil(){this.Du=Math.ceil(this.Du),this.xu=Math.ceil(this.xu),this.Cu=Math.ceil(this.Cu),this.Ru=Math.ceil(this.Ru),this.Lu=Math.ceil(this.Lu),this.ku=Math.ceil(this.ku),this.Gu=Math.ceil(this.Gu),this.Nu=Math.ceil(this.Nu)}Qu(t){this.Du=t.zh,this.xu=t.Uh,this.Cu=t.Hh,this.Ru=t.Uh,this.Lu=t.Hh,this.ku=t.Vh,this.Gu=t.zh,this.Nu=t.Vh}Zu(t,e){0===e?this.Qu(t):this.Xu(t,Math.sin(e),Math.cos(e))}Xu(t,e,i){const r=t.zh*e,s=t.Uh*e,n=t.Hh*e,o=t.Vh*e,a=t.zh*i,h=t.Uh*i,u=t.Hh*i,c=t.Vh*i;this.Du=a-s,this.xu=h+r,this.Cu=u-s,this.Ru=h+n,this.Lu=u-o,this.ku=c+n,this.Gu=a-o,this.Nu=c+r}Ku(t){t.set(Math.min(this.Du,this.Cu,this.Lu,this.Gu),Math.min(this.xu,this.Ru,this.ku,this.Nu),Math.max(this.Du,this.Cu,this.Lu,this.Gu),Math.max(this.xu,this.Ru,this.ku,this.Nu))}Pu(t,e){let i=this.Cu-this.Du,r=this.Ru-this.xu;const s=this.Lu-this.Du,n=this.ku-this.xu,o=t-this.Du,a=e-this.xu;let h=i*i+r*r,u=i*s+r*n,c=i*o+r*a;const l=s*s+n*n,f=s*o+n*a;let p=1/(h*l-u*u),d=(l*c-u*f)*p,m=(h*f-u*c)*p;return d>=0&&m>0&&d+m<1||(i=this.Gu-this.Du,r=this.Nu-this.xu,h=i*i+r*r,u=i*s+r*n,c=i*o+r*a,p=1/(h*l-u*u),d=(l*c-u*f)*p,m=(h*f-u*c)*p,d>=0&&m>0&&d+m<1)}au(){return(this.Du+this.Cu+this.Lu+this.Gu)/4}hu(){return(this.xu+this.Ru+this.ku+this.Nu)/4}tc(t,e,i,r){return!(!this.Pu(t,e)&&!this.Pu(i,r))||sa.jn(t,e,i,r,this)}ec(t){let e=t.au(),i=t.hu();if(this.Pu(e,i))return!0;if(e=this.au(),i=this.hu(),t.Pu(e,i))return!0;const r=this.Du,s=this.xu,n=this.Cu,o=this.Ru,a=this.Lu,h=this.ku,u=this.Gu,c=this.Nu;return sa.jn(r,s,n,o,t)||sa.jn(n,o,a,h,t)||sa.jn(a,h,u,c,t)||sa.jn(u,c,r,s,t)}rc(){const t=this.Du,e=this.xu;this.Du=this.Cu,this.xu=this.Ru,this.Cu=this.Lu,this.Ru=this.ku,this.Lu=this.Gu,this.ku=this.Nu,this.Gu=t,this.Nu=e}sc(){this.nc(0,2),this.nc(1,3),this.nc(6,4),this.nc(7,5)}oc(){this.nc(0,6),this.nc(1,7),this.nc(2,4),this.nc(3,5)}ac(){this.nc(2,6),this.nc(3,7)}nc(t,e){const i=this.hc(t);this.uc(t,this.hc(e)),this.uc(e,i)}hc(t){switch(t){case 0:return this.Du;case 1:return this.xu;case 2:return this.Cu;case 3:return this.Ru;case 4:return this.Lu;case 5:return this.ku;case 6:return this.Gu;case 7:return this.Nu;default:throw new RangeError("invalid quad point index")}}uc(t,e){switch(e=+e,t){case 0:this.Du=e;break;case 1:this.xu=e;break;case 2:this.Cu=e;break;case 3:this.Ru=e;break;case 4:this.Lu=e;break;case 5:this.ku=e;break;case 6:this.Gu=e;break;case 7:this.Nu=e;break;default:throw new RangeError("invalid quad point index")}}wt(t,e){this.Du/=t,this.xu/=e,this.Cu/=t,this.Ru/=e,this.Lu/=t,this.ku/=e,this.Gu/=t,this.Nu/=e}}}{const na=self.Ee,oa=self.assert,aa=[0,0,1,0,1,1,0,1],ha=na.$s(na.Ou);na.cc=class extends na.Vs{constructor(t,e=!0){super(),t||(t=aa),this.lc=Float64Array.from(t),this.fc=new na.Rect,this.dc=!0,this.mc=e}Ys(){}yc(){return this.lc}vc(){return this.lc.length/2}wc(t){this.lc.length===t.length?this.lc.set(t):this.lc=Float64Array.from(t),this.dc=!0}Sc(){this.wc(aa)}v(t){this.wc(t.lc)}bc(){this.dc=!0}_c(){if(!this.dc)return;const t=this.lc;let e=t[0],i=t[1],r=e,s=i;for(let n=0,o=t.length;n<o;n+=2){const o=t[n],a=t[n+1];o<e&&(e=o),o>r&&(r=o),a<i&&(i=a),a>s&&(s=a)}this.fc.set(e,i,r,s),this.dc=!1}Qu(t,e,i){let r=this.lc;8!==r.length&&(r=new Float64Array(8),this.lc=r),r[0]=t.Kh()-e,r[1]=t.tu()-i,r[2]=t.eu()-e,r[3]=t.tu()-i,r[4]=t.eu()-e,r[5]=t.iu()-i,r[6]=t.Kh()-e,r[7]=t.iu()-i,this.fc.v(t),0===e&&0===i||this.fc.offset(-e,-i),this.dc=!1}Ec(t,e,i){ha.v(t),ha.offset(e,i),this.wc(ha.toArray()),this.dc=!0}transform(t,e,i){let r=0,s=1;0!==i&&(r=Math.sin(i),s=Math.cos(i)),this.Tc(t,e,r,s)}Tc(t,e,i,r){const s=this.lc;for(let n=0,o=s.length;n<o;n+=2){const o=n+1,a=s[n]*t,h=s[o]*e;s[n]=a*r-h*i,s[o]=h*r+a*i}this.dc=!0}offset(t,e){const i=this.lc;for(let r=0,s=i.length;r<s;r+=2)i[r]+=t,i[r+1]+=e}Pu(t,e){const i=this.lc;if(t===i[0]&&e===i[1])return!0;this._c();const r=this.fc,s=r.Kh()-110,n=r.tu()-101,o=r.eu()+131,a=r.iu()+120;let h=0,u=0,c=0,l=0,f=0,p=0,d=0,m=0;s<t?(h=s,c=t):(h=t,c=s),n<e?(u=n,l=e):(u=e,l=n),o<t?(f=o,d=t):(f=t,d=o),a<e?(p=a,m=e):(p=e,m=a);let y=0,g=0;for(let r=0,v=i.length;r<v;r+=2){const w=(r+2)%v,S=i[r],b=i[r+1],_=i[w],E=i[w+1];na.Nn(s,n,t,e,h,c,u,l,S,b,_,E)&&++y,na.Nn(o,a,t,e,f,d,p,m,S,b,_,E)&&++g}return y%2==1||g%2==1}Pc(t,e,i){const r=t.lc,s=this.lc;if(this.Pu(r[0]+e,r[1]+i))return!0;if(t.Pu(s[0]-e,s[1]-i))return!0;for(let t=0,n=s.length;t<n;t+=2){const o=(t+2)%n,a=s[t],h=s[t+1],u=s[o],c=s[o+1];let l=0,f=0,p=0,d=0;a<u?(l=a,p=u):(l=u,p=a),h<c?(f=h,d=c):(f=c,d=h);for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,m=r[t+1]+i,y=r[n]+e,g=r[n+1]+i;if(na.Nn(a,h,u,c,l,p,f,d,o,m,y,g))return!0}}return!1}tc(t,e,i,r,s,n){if(this.Pu(i-t,r-e))return!0;if(this.Pu(s-t,n-e))return!0;let o=0,a=0,h=0,u=0;i<s?(o=i,h=s):(o=s,h=i),r<n?(a=r,u=n):(a=n,u=r);const c=this.lc;for(let l=0,f=c.length;l<f;l+=2){const p=(l+2)%f,d=c[l]+t,m=c[l+1]+e,y=c[p]+t,g=c[p+1]+e;if(na.Nn(i,r,s,n,o,h,a,u,d,m,y,g))return!0}return!1}sc(t){const e=this.lc;for(let i=0,r=e.length;i<r;i+=2)e[i]=2*t-e[i];this.dc=!0}oc(t){const e=this.lc;for(let i=0,r=e.length;i<r;i+=2){const r=i+1;e[r]=2*t-e[r]}this.dc=!0}ac(){const t=this.lc;for(let e=0,i=t.length;e<i;e+=2){const i=e+1,r=t[e];t[e]=t[i],t[i]=r}this.dc=!0}Ac(){const t=this.lc;let e=0;for(let i=0,r=t.length;i<r;i+=2)e+=t[i];return e/this.vc()}Mc(){const t=this.lc;let e=0;for(let i=0,r=t.length;i<r;i+=2)e+=t[i+1];return e/this.vc()}Ic(){return this.lc}Oc(){return this.vc()}Dc(){return this.mc}}}{const ua=self.Ee;ua.xc=class extends ua.Vs{constructor(t){if(super(),this.Cc=new Map,t)for(const[e,i,r]of t)this.Set(e,i,r)}Ys(){this.Rc(),this.Cc=null}Lc(){return 0===this.Cc.size}Rc(){const t=this.Cc;for(const e of t.values())e.clear();t.clear()}Set(t,e,i){const r=this.Cc;let s=r.get(t);s||(s=new Map,r.set(t,s)),s.set(e,i)}Ue(t,e){const i=this.Cc.get(t);return i?i.get(e):i}ze(t,e){const i=this.Cc.get(t);return!!i&&i.has(e)}kc(t,e){const i=this.Cc,r=i.get(t);if(!r)return!1;const s=r.delete(e);return s&&0===r.size&&i.delete(t),s}Gc(t){const e=this.Cc,i=e.get(t);i&&(i.clear(),e.delete(t));for(const[i,r]of e.entries())r.delete(t)&&0===r.size&&e.delete(i)}Nc(){let t=0;for(const e of this.Cc.values())t+=e.size;return t}*values(){for(const t of this.Cc.values())yield*t.values()}*jc(){for(const[t,e]of this.Cc.entries())for(const i of e.keys())yield[t,i]}*entries(){for(const[t,e]of this.Cc.entries())for(const[i,r]of e.entries())yield[t,i,r]}}}{const ca=self.Ee;ca.Fc=class extends ca.Vs{constructor(){super(),this.Bc=new Set,this.zc=[],this.Uc=!1}Ys(){this.Rc()}Rc(){this.Bc.clear(),ca.So(this.zc),this.Uc=!1}Hc(t){this.Bc.has(t)||(this.Bc.add(t),this.Uc||this.zc.push(t))}ze(t){return this.Bc.has(t)}kc(t){this.Bc.delete(t)&&(this.Uc=!0)}Nc(){return this.Bc.size}Lc(){return 0===this.Bc.size}Vc(){return this.Uc&&(this.Wc(),this.Uc=!1),this.zc}Wc(){const t=this.zc;ca.So(t);for(const e of this.Bc)t.push(e)}}}{const la=self.Ee,fa=new Map,pa=new Map,da=new Map,ma=new Map,ya=new Map,ga=new Map,va=new Map,wa=new Map,Sa=new Map;Sa.set("linear","noease"),Sa.set("default","noease");const ba=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],_a=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Ea=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.$c=class t{constructor(){}static Yc(){return"default"}static Jc(){return"noease"}static qc(t){return Ea.get(t)}static Qc(e,...i){let r,s;this.Zc(),e?(da.has(e)||da.set(e,new Map),r=da.get(e),s=[...r.keys()].filter(i=>!t.Xc(i,e)||t.Xc(i,e).transition.Kc())):(r=ya,s=[...r.keys()]);const n=s.sort();return[...pa.keys()].concat(n).filter(t=>!i.includes(t))}static tl(){this.Zc();const t=[...ya.keys()];return t.sort(),[...pa.keys()].concat(t)}static el(){this.Zc();const t=[...ya.keys()];return t.sort(),t}static il(t){for(const e of ba)if(self.lang(`ui.bars.timeline.eases.${e}`)===t)return!0;for(const e of _a)if(self.lang(`ui.bars.timeline.short-eases.${e}`)===t)return!0}static rl(t){return this.Zc(),[...pa.keys()].includes(t)}static sl(e){const i=Sa.get(e);return i?fa.get(i):t.rl(e)?fa.get(e):va.has(e)?va.get(e):void 0}static nl(t){return this.Zc(),wa.get(t)}static ol(e,i){this.Zc();const r=t.sl(e);if(r)return r;if(!i)throw new Error("missing ease function");return da.get(i).get(e)}static Xc(t,e){this.Zc();const i=ma.get(e);if(i)return i.get(t)}static al(e,i){return this.Zc(),!!t.sl(e)||!!da.get(i).get(e)}static hl(e){this.Zc();return t.sl(e)||ya.get(e)}static ul(t){return this.Zc(),ga.get(t)}static cl(t){return this.Zc(),this.tl()[t]}static ll(t,e){return this.Zc(),this.Qc(e).indexOf(t)}static fl(t){return this.ll(t)}static Zc(){0===fa.size&&(this.pl("default",()=>{}),this.pl("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.pl("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.pl("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.pl("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.pl("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.pl("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.pl("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.pl("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.pl("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.pl("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.pl("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.pl("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.pl("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.pl("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.pl("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.pl("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.pl("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.pl("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.pl("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.pl("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.pl("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.pl("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.pl("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.pl("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.pl("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.pl("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.pl("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.pl("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.pl("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.pl("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.pl("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.dl("cubicbezier",this.ml),this.dl("spline",this.yl))}static pl(e,i,r=!1){if("function"==typeof i)t.gl(e,i,"predefined");else{if(!la._r(i))throw new Error("unexpected arguments");if(self.vl){const s=la.$s(self.vl,e,r);s.wl(i),t.gl(e,(t,e,i,r)=>s.Sl(t,e,i,r),"predefined"),wa.set(e,s)}else{const s=la.$s(la.bl,[e,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);s._l(r),t.gl(e,(t,e,i,r)=>s.Sl(t,e,i,r),"predefined")}}}static dl(e,i){t.gl(e,i,"private")}static El(e,i,r,s){this.Zc(),t.gl(e,i,"custom",r,s)}static Tl(t,e){if(this.rl(t))return;if([...va.keys()].includes(t))return;const i=da.get(e);i&&i.delete(t);const r=ma.get(e);r&&r.delete(t)}static gl(t,e,i,r,s){switch(i){case"predefined":fa.set(t,e),pa.set(t,e);break;case"custom":r?(da.has(r)||da.set(r,new Map),ma.has(r)||ma.set(r,new Map),da.get(r).set(t,e),ma.get(r).set(t,s)):(ya.set(t,e),ga.set(t,s));break;case"private":fa.set(t,e),va.set(t,e);break;default:throw new Error("unexpected ease mode")}}static Pl(t,e,i,r){return 0===r?e:i*t/r+e}static ml(t,e,i,r,s){return e+3*t*(i-e)+3*t**2*(e+r-2*i)+t**3*(s-e+3*i-3*r)}static yl(t,e,i,r,s,n,o,a,h,u){if(r===s&&n===o)return t;const c=ka(t,e,r,n,a,u),l=Da(i,s,o,h),f=xa(i,s,o,h),p=Ca(i,s,o,h);return Ra(c,l,f,p)}static Al(t,e,i,r){const s=[],n=Da(t,e,i,r),o=xa(t,e,i,r),a=Ca(t,e,i,r);for(let t=0;t<Ta;++t){const e=Ra(t*Pa,n,o,a);s.push(e)}return s}};const Ta=11,Pa=1/(Ta-1),Aa=4,Ma=.01,Ia=1e-7,Oa=10,Da=(t,e,i,r)=>r-3*i+3*e-t,xa=(t,e,i,r)=>3*i-6*e+3*t,Ca=(t,e,i,r)=>3*(e-t),Ra=(t,e,i,r)=>((e*t+i)*t+r)*t,La=(t,e,i,r)=>3*e*t*t+2*i*t+r,ka=(t,e,i,r,s,n)=>{if(1==t)return 1;let o=0,a=1,h=n[a],u=Ta-1;for(n[Ta-1];a!=u&&h<=t;)a++,h=n[a],o+=Pa;a--,h=n[a];let c=o+(t-h)/(n[a+1]-h)*Pa;const l=Da(e,i,r,s),f=xa(e,i,r,s),p=Ca(e,i,r,s),d=La(c,l,f,p);if(0===d)return c;if(d>=.01){for(let e=0;e<4;++e)c-=(Ra(c,l,f,p)-t)/La(c,l,f,p);return c}{let e,i,r=o,s=o+Pa,n=0;do{c=r+(s-r)/2;let o=Ra(c,l,f,p)-t;o>0?s=c:r=c,e=Math.abs(o)>1e-7,i=++n<10}while(e&&i);return c}}}{let Ga=function(t){Na.nr(t)};RequireStringOrNumber=Ga;const Na=self.Ee;Na.Ml=class{constructor(t){this.Il=[],this.Qs=t||"",this.Ol=0}Ys(){this.Rc(),this.Il=null}Dl(){return this.Qs}Rc(){Na.bo(this.Il),this.Ol=0}xl(){return this.Ol}Cl(t=Math.random()*this.xl()){let e=0;for(const[i,r]of this.Il)if(e+=i,t<e)return r;return 0}Rl(){return!!this.Il.length}Ll(t,e){Ga(e),this.Ol+=t,this.Il.push([t,e])}kl(t,e){Ga(e);const i=0===t;for(let r=0;r<this.Il.length;r++){const s=this.Il[r],n=i||s[0]===t,o=s[1]===e;if(n&&o){this.Il.splice(r,1),this.Ol-=s[0];break}}}Gl(){return JSON.stringify(this.Il)}static Nl(t,e){const i=new Na.Ml(e),r=JSON.parse(t);for(const t of r){const e=t[0],r=t[1];i.Ll(e,r)}return i}}}{const ja=self.Ee;let Fa=0;ja.jl=class{constructor(t,e){this.Fl=t,this.Bl=e,this.zl=Fa++,this.Fl.Ul("runtime","screen-reader-text",{type:"create",id:this.zl,text:this.Bl})}Ys(){this.Fl.Ul("runtime","screen-reader-text",{type:"release",id:this.zl}),this.Fl=null,this.Bl="",this.zl=-1}Hl(t){this.Bl!==t&&(this.Bl=t,this.Fl.Ul("runtime","screen-reader-text",{type:"update",id:this.zl,text:this.Bl}))}}}{const Ba=self.Ee;Ba.Event=class{constructor(t,e){this.type=t,this.cancelable=!!e,this.defaultPrevented=!1,this.Vl=!1,this.Wl=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Wl)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Vl=!0}}}{const za=self.Ee,Ua=self.assert;za.Event.$l=class extends za.Vs{constructor(t){super(),this.Yl=t,this.Jl=[],this.ql=new Set,this.Ql=[],this.Zl=new Set,this.Xl=0,this.Kl=[]}Ys(){this.Xl>0||(za.So(this.Jl),this.ql.clear(),za.So(this.Ql),this.Zl.clear(),za.So(this.Kl),za.Ys(this))}tf(t,e){if(this.ef())this.Kl.push({if:"add",rf:t,capture:e});else if(e){if(this.ql.has(t))return;this.Jl.push(t),this.ql.add(t)}else{if(this.Zl.has(t))return;this.Ql.push(t),this.Zl.add(t)}}sf(t,e){this.ef()?this.Kl.push({if:"remove",rf:t,capture:e}):e?this.ql.has(t)&&(this.ql.delete(t),za.Ao(this.Jl,t)):this.Zl.has(t)&&(this.Zl.delete(t),za.Ao(this.Ql,t))}nf(){return!this.Jl.length&&!this.Ql.length}ef(){return this.Xl>0}af(){const t=new Set,e=new Set;for(const i of this.Kl)if("add"===i.if)this.tf(i.rf,i.capture),i.capture?e.delete(i.rf):t.delete(i.rf);else{if("remove"!==i.if)throw new Error("invalid op");i.capture?(this.ql.delete(i.rf),e.add(i.rf)):(this.Zl.delete(i.rf),t.add(i.rf))}za.Oo(this.Ql,t),za.Oo(this.Jl,e),za.So(this.Kl)}hf(t){this.uf();let e=!1;for(let i=0,r=this.Jl.length;i<r;++i)if(this.Jl[i](t),t.Vl){e=!0;break}if(!e)for(let e=0,i=this.Ql.length;e<i&&(this.Ql[e](t),!t.Vl);++e);return this.cf(),!t.defaultPrevented}lf(t){this.uf();for(let e=0,i=this.Jl.length;e<i;++e)this.Jl[e](t);for(let e=0,i=this.Ql.length;e<i;++e)this.Ql[e](t);return this.cf(),!0}uf(){this.Xl++}cf(){this.Xl--,0===this.Xl&&this.Kl.length>0&&this.af()}ff(t){t?this.uf():this.cf()}pf(t){let e=[];for(let i=0,r=this.Jl.length;i<r;++i){let r=this.Jl[i];e.push(za.df(()=>r(t)))}for(let i=0,r=this.Ql.length;i<r;++i){let r=this.Ql[i];e.push(za.df(()=>r(t)))}return Promise.all(e).then(()=>!t.defaultPrevented)}mf(t){const e=[];this.uf();for(let i=0,r=this.Jl.length;i<r;++i){const r=this.Jl[i](t);r instanceof Promise&&e.push(r)}for(let i=0,r=this.Ql.length;i<r;++i){const r=this.Ql[i](t);r instanceof Promise&&e.push(r)}return this.cf(),e.length?Promise.all(e).then(()=>!t.defaultPrevented):!t.defaultPrevented}async yf(t){return await this.mf(t)}async gf(t){this.uf();for(let e=0,i=this.Jl.length;e<i;++e){const i=this.Jl[e](t);i instanceof Promise&&await i}for(let e=0,i=this.Ql.length;e<i;++e){const i=this.Ql[e](t);i instanceof Promise&&await i}return this.cf(),!t.defaultPrevented}*vf(t){this.uf();for(let e=0,i=this.Jl.length;e<i;++e){const i=this.Jl[e](t);za.wa(i)&&(yield*i)}for(let e=0,i=this.Ql.length;e<i;++e){const i=this.Ql[e](t);za.wa(i)&&(yield*i)}this.cf()}}}{const Ha=self.Ee;Ha.Event.wf=class extends Ha.Vs{constructor(){super(),this.Sf=new Map,this.bf=!1}Ys(){if(this.bf)throw new Error("already released");this._f(),this.bf=!0,Ha.Ys(this)}Js(){return this.bf}_f(){if(this.Sf){for(let t of this.Sf.values())t.Ys();this.Sf.clear()}}Ef(t,e){let i=this.Sf.get(t);return i||(e?(i=Ha.$s(Ha.Event.$l,t),this.Sf.set(t,i),i):null)}Tf(t){return this.Sf.has(t)}addEventListener(t,e,i){this.Ef(t,!0).tf(e,!!i)}removeEventListener(t,e,i){let r=this.Ef(t,!1);r&&(r.sf(e,!!i),r.nf()&&this.Sf.delete(t))}dispatchEvent(t){const e=this.Ef(t.type,!1);return!e||(t.cancelable?e.hf(t):e.lf(t))}Pf(t){const e=this.Ef(t.type,!1);return e?(t.Wl=!0,e.pf(t)):Promise.resolve(!0)}async Af(t){const e=this.Ef(t.type,!1);if(!e)return!0;this.Sf.delete(t.type),t.Wl=!0;const i=await e.pf(t);return e.Ys(),i}async Mf(t){const e=this.Ef(t.type,!1);return!e||await e.yf(t)}If(t){const e=this.Ef(t.type,!1);return!e||e.mf(t)}async Of(t){const e=this.Ef(t.type,!1);return!e||await e.gf(t)}Df(t){const e=this.Ef(t.type,!1);if(!e)return null;if(t.cancelable)throw new Error("not supported");return e.vf(t)}ff(t){for(const e of this.Sf.values())e.ff(t)}}}{let Va=function(t){Ka=Za&&0===th?requestIdleCallback(Wa,{timeout:35}):setTimeout(Wa,th>0?1:t)},Wa=function(t){if(Ka=-1,!Xa.length)return;let e=performance.now(),i=e,r=0,s=0;do{$a(Xa.shift()),i=performance.now(),++r,s=(i-e)/r*1.1}while(Xa.length&&(Za&&0===th&&void 0!==t?s<t.timeRemaining():i-e+s<12));if(-1===Ka&&Xa.length){let t=i-e;Va(Math.max(16-t,4))}},$a=function(t){let e;try{e=t.rf()}catch(e){return void t.reject(e)}t.resolve(e)};SetNewCallback=Va,DoAsyncifiedWork=Wa,DoNextAsyncifiedJob=$a;const Ya=self.Ee,Ja=12,qa=16,Qa=35,Za="undefined"!=typeof requestIdleCallback;let Xa=[],Ka=-1,th=0,eh=Ya.We.ze("disable-asyncify");eh&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Ya.df=function(t){let e=null;return Ya.Ce&&(e=Ya.Yi()),new Promise((i,r)=>{Xa.push({rf:t,resolve:i,reject:r,stack:e}),eh?$a(Xa.pop()):-1===Ka&&Va(16)})},Ya.df.xf=function(t){if(t)++th;else if(--th,th<0)throw new Error("already turned off high throughput mode")}}{let ih=function(){ah=-1},rh=function(){hh=-1,uh=-1;let t=Date.now();for(let e of ch)if(e.Cf(t)){let t=e.Rf();(-1===uh||t<uh)&&(uh=t)}else ch.delete(e);if(-1!==uh){let e=Math.max(uh-t+100,1e3);hh=self.setTimeout(rh,e)}};ClearTimeCache=ih,CheckActiveIdleTimeouts=rh;const sh=self.Ee,nh=1e3,oh=100;let ah=-1;sh.Lf=function(){return-1===ah&&(ah=Date.now(),self.setTimeout(ih,16)),ah};let hh=-1,uh=-1,ch=new Set;sh.kf=class{constructor(t,e){this.Gf=t,this.Nf=1e3*e,this.jf=0,this.Ff=!1}Bf(){let t=sh.Lf();this.jf=t+this.Nf,this.Ff||(ch.add(this),this.Ff=!0),-1===hh?(uh=this.jf,hh=self.setTimeout(rh,this.Nf+100)):this.jf<uh&&uh>t+1e3&&(self.clearTimeout(hh),uh=this.jf,hh=self.setTimeout(rh,this.Nf+100))}Cf(t){return!(t>=this.jf&&(this.Gf()?(this.jf=t+this.Nf,0):(this.Ff=!1,1)))}Rf(){return this.jf}zf(){this.Ff&&(ch.delete(this),this.Ff=!1,0===ch.size&&-1!==hh&&(self.clearTimeout(hh),hh=-1,uh=-1))}Ys(){this.zf(),this.Gf=null}}}{const lh=self.Ee;lh.Uf=class t{constructor(t){this.Hf=!1,this.Vf=t}Wf(){this.Hf||(this.Hf=!0,this.Vf&&(this.Vf(),this.Vf=null))}$f(){return this.Hf}Ys(){this.Wf()}static Ys(e){return new t(()=>e.Ys())}static Yf(t,e,i,r,s){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("expected string or array");if(null==r)r=!1;else if("boolean"!=typeof r&&"object"!=typeof r)throw new TypeError("invalid event listener options");if(s&&(i=i.bind(s)),Array.isArray(e)||e.includes(" ")){"string"==typeof e&&(e=e.split(" "));const s=new lh.Jf;for(const n of e)t.addEventListener(n,i,r),s.Hc(lh.$s(lh.Uf,()=>t.removeEventListener(n,i,r)));return s}return t.addEventListener(e,i,r),lh.$s(lh.Uf,()=>t.removeEventListener(e,i,r))}},lh.qf=class extends lh.Uf{Qf(t){this.Vf=t}},lh.Jf=class extends lh.Uf{constructor(...t){super(),this.Zf=new Set;for(let e of t)this.Hc(e)}Hc(...t){if(this.Hf)throw new Error("already disposed");for(let e of t)this.Zf.add(e)}Xf(t){if(this.Hf)throw new Error("already disposed");this.Zf.delete(t)}Kf(){if(this.Hf)throw new Error("already disposed");if(this.Zf){for(let t of this.Zf)t.Wf();this.Zf.clear()}}$f(){return this.Hf}Wf(){if(this.Hf)throw new Error("already disposed");this.Hf=!0;for(let t of this.Zf)t.Wf();this.Zf.clear(),this.Zf=null}Ys(){this.Wf()}}}{const fh=self.Ee;fh.tp=class extends fh.Vs{constructor(){super(),this.ep=0,this.xh=0,this.ip=0,this.rp=0}Hc(t){t=+t,this.xh=t-this.ep,this.ip=this.rp+this.xh,this.ep=this.ip-this.rp-this.xh,this.rp=this.ip}sp(t){this.rp-=+t}Ue(){return this.rp}Bf(){this.ep=0,this.xh=0,this.ip=0,this.rp=0}Set(t){this.ep=0,this.xh=0,this.ip=0,this.rp=+t}np(t){this.ep=t.ep,this.xh=t.xh,this.ip=t.ip,this.rp=t.rp}Ys(){}}}{const ph=self.Ee,dh={},mh=!0,yh=!1;dh.op=function(t){this.ap=t,this.right=this.ap.hp,this.left=this.ap.hp,this.parent=null,this.color=!1,this.key=null},dh.up=function(t){this.size=0,this.hp=new dh.op(this),this.hp.color=!1,this.root=this.hp,this.root.parent=this.hp,this.compare=t||this.cp},dh.up.prototype.cp=function(t,e){return t<e?-1:e<t?1:0},dh.up.prototype.clone=function(){var t=new dh.up(this.compare);return t.lp(this),t},dh.up.prototype.clear=function(){this.size=0,this.hp=new dh.op(this),this.hp.color=!1,this.root=this.hp,this.root.parent=this.hp},dh.up.prototype.fp=function(t){var e=t.right;t.right=e.left,e.left!=this.hp&&(e.left.parent=t),e.parent=t.parent,t.parent==this.hp?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e},dh.up.prototype.pp=function(t){var e=t.left;t.left=e.right,e.right!=this.hp&&(e.right.parent=t),e.parent=t.parent,t.parent==this.hp?this.root=e:t==t.parent.right?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e},dh.up.prototype.mp=function(t){if(this.contains(t))this.yp(t).key=t;else{var e=new dh.op(this);e.key=t;for(var i=this.hp,r=this.root;r!=this.hp;)i=r,r=this.compare(e.key,r.key)<0?r.left:r.right;e.parent=i,i==this.hp?this.root=e:this.compare(e.key,i.key)<0?i.left=e:i.right=e,e.left=this.hp,e.right=this.hp,e.color=mh,this.gp(e),this.size++}},dh.up.prototype.gp=function(t){for(;t!=this.hp&&t!=this.root&&t.parent.color==mh;){var e;t.parent==t.parent.parent.left?(e=t.parent.parent.right).color==mh?(t.parent.color=!1,e.color=!1,t.parent.parent.color=mh,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.fp(t)),t.parent.color=!1,t.parent.parent.color=mh,t.parent.parent!=this.hp&&this.pp(t.parent.parent)):(e=t.parent.parent.left).color==mh?(t.parent.color=!1,e.color=!1,t.parent.parent.color=mh,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pp(t)),t.parent.color=!1,t.parent.parent.color=mh,t.parent.parent!=this.hp&&this.fp(t.parent.parent))}this.root.color=!1},dh.up.prototype.vp=function(t){var e,i;(i=(e=t.left==this.hp||t.right==this.hp?t:this.wp(t)).left!=this.hp?e.left:e.right).parent=e.parent,e.parent==this.hp?this.root=i:e==e.parent.left?e.parent.left=i:e.parent.right=i,e!=t&&(t.key=e.key),0==e.color&&this.Sp(i),this.size--},dh.up.prototype.Sp=function(t){for(;t!=this.root&&0==t.color;){var e;t==t.parent.left?((e=t.parent.right).color==mh&&(e.color=!1,t.parent.color=mh,this.fp(t.parent),e=t.parent.right),0==e.left.color&&0==e.right.color?(e.color=mh,t=t.parent):(0==e.right.color&&(e.left.color=!1,e.color=mh,this.pp(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=!1,e.right.color=!1,this.fp(t.parent),t=this.root)):((e=t.parent.left).color==mh&&(e.color=!1,t.parent.color=mh,this.pp(t.parent),e=t.parent.left),0==e.right.color&&0==e.left.color?(e.color=mh,t=t.parent):(0==e.left.color&&(e.right.color=!1,e.color=mh,this.fp(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=!1,e.left.color=!1,this.pp(t.parent),t=this.root))}t.color=!1},dh.up.prototype.remove=function(t){var e=this.yp(t);if(e!=this.hp){var i=e.key;return this.vp(e),i}return null},dh.up.prototype.bp=function(t,e){this.remove(e)},dh.up.prototype.min=function(t){for(;t.left!=this.hp;)t=t.left;return t},dh.up.prototype.max=function(t){for(;t.right!=this.hp;)t=t.right;return t},dh.up.prototype.wp=function(t){if(t.right!=this.hp)return this.min(t.right);for(var e=t.parent;e!=this.hp&&t==e.right;)t=e,e=e.parent;return e},dh.up.prototype._p=function(t){if(t.left!=this.hp)return this.max(t.left);for(var e=t.parent;e!=this.hp&&t==e.left;)t=e,e=e.parent;return e},dh.up.prototype.Ep=function(t){if(this.size>0){var e=this.yp(t);if(e==this.hp)return null;if(e.right!=this.hp)return this.min(e.right).key;for(var i=e.parent;i!=this.hp&&e==i.right;)e=i,i=i.parent;return i!=this.hp?i.key:null}return null},dh.up.prototype.Tp=function(t){if(this.size>0){var e=this.yp(t);if(e==this.hp)return null;if(e.left!=this.hp)return this.max(e.left).key;for(var i=e.parent;i!=this.hp&&e==i.left;)e=i,i=i.parent;return i!=this.hp?i.key:null}return null},dh.up.prototype.Pp=function(){return this.min(this.root).key},dh.up.prototype.Ap=function(){return this.max(this.root).key},dh.up.prototype.yp=function(t){for(var e=this.root;e!=this.hp&&0!=this.compare(e.key,t);)e=this.compare(t,e.key)<0?e.left:e.right;return e},dh.up.prototype.contains=function(t){return null!=this.yp(t).key},dh.up.prototype.getValues=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},dh.up.prototype.lp=function(t){if("array"==dh.Mp(t))for(var e=0;e<t.length;e++)this.mp(t[e]);else if("function"==dh.Mp(t.forEach))t.forEach(this.mp,this);else if("function"==dh.Mp(t.getValues)){var i=t.getValues();for(e=0;e<i.length;e++)this.mp(i[e])}else if("object"==dh.Mp(t))for(var r in t)this.mp(t[r])},dh.up.prototype.Ip=function(t){if("array"==dh.Mp(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else if("function"==dh.Mp(t.forEach))t.forEach(this.bp,this);else if("function"==dh.Mp(t.getValues)){var i=t.getValues();for(e=0;e<i.length;e++)this.remove(i[e])}else if("object"==dh.Mp(t))for(var r in t)this.remove(t[r])},dh.up.prototype.Op=function(t){if("array"==dh.Mp(t)){for(var e=0;e<t.length;e++)if(!this.contains(t[e]))return!1;return!0}if("function"==dh.Mp(t.forEach))return t.every(this.contains,this);if("function"==dh.Mp(t.getValues)){var i=t.getValues();for(e=0;e<i.length;e++)if(!this.contains(i[e]))return!1;return!0}if("object"==dh.Mp(t)){for(var r in t)if(!this.contains(t[r]))return!1;return!0}},dh.up.prototype.range=function(t,e){var i=[];return this.Dp(function(t){i.push(t)},t,e),i},dh.up.prototype.xp=function(t,e){if(!this.Cp())for(var i=this.min(this.root);i!=this.hp;){if(t.call(e,i.key,this))return;i=this.wp(i)}},dh.up.prototype.Rp=function(t,e,i){if(!this.Cp())for(var r=this.yp(e);r!=this.hp;){if(t.call(i,r.key,this))return;r=this.wp(r)}},dh.up.prototype.traverseTo=function(t,e,i){if(!this.Cp())for(var r=this.min(this.root),s=this.yp(e);r!=s;){if(t.call(i,r.key,this))return;r=this.wp(r)}},dh.up.prototype.Dp=function(t,e,i,r){if(!this.Cp())for(var s=this.yp(e),n=this.yp(i);s!=n;){if(t.call(r,s.key,this))return;s=this.wp(s)}},dh.up.prototype.Lp=function(t,e){if(!this.Cp())for(var i=this.max(this.root);i!=this.hp;){if(t.call(e,i.key,this))return;i=this._p(i)}},dh.up.prototype.forEach=function(t,e){if(!this.Cp())for(var i=this.min(this.root);i!=this.hp;i=this.wp(i))t.call(e,i.key,i.key,this)},dh.up.prototype.some=function(t,e){if(this.Cp())return!1;for(var i=this.min(this.root);i!=this.hp;i=this.wp(i))if(t.call(e,i.key,i.key,this))return!0;return!1},dh.up.prototype.every=function(t,e){if(this.Cp())return!1;for(var i=this.min(this.root);i!=this.hp;i=this.wp(i))if(!t.call(e,i.key,i.key,this))return!1;return!0},dh.up.prototype.map=function(t,e){var i=[];if(this.Cp())return i;for(var r=this.min(this.root);r!=this.hp;r=this.wp(r))i.push(t.call(e,r.key,r.key,this));return i},dh.up.prototype.filter=function(t,e){var i=[];if(this.Cp())return i;for(var r=this.min(this.root);r!=this.hp;r=this.wp(r))t.call(e,r.key,r.key,this)&&i.push(r.key);return i},dh.up.prototype.kp=function(){return this.size},dh.up.prototype.Cp=function(){return 0==this.size},dh.up.prototype.isSubsetOf=function(t){var e=dh.kp(t);if(this.kp()>e)return!1;var i=0;if(this.Cp())return!0;for(var r=this.min(this.root);r!=this.hp;r=this.wp(r))dh.contains.call(t,t,r.key)&&i++;return i==this.kp()},dh.up.prototype.intersection=function(t){var e=new dh.up(this.compare);if(this.Cp())return e;for(var i=this.min(this.root);i!=this.hp;i=this.wp(i))t.contains.call(t,i.key,i.key,this)&&e.mp(i.key);return e},ph.up=class extends ph.Vs{constructor(t){super(),this.Gp=new dh.up(t),this.Np=!1,this.jp=new Set,this.Fp=new Set}Hc(t){this.Np?this.Gp.contains(t)?this.Fp.delete(t):this.jp.add(t):this.Gp.mp(t)}Xf(t){this.Np?this.Gp.contains(t)?this.Fp.add(t):this.jp.delete(t):this.Gp.remove(t)}ze(t){return this.Np?!!this.jp.has(t)||!this.Fp.has(t)&&this.Gp.contains(t):this.Gp.contains(t)}Rc(){this.Gp.clear(),this.jp.clear(),this.Fp.clear()}toArray(){if(this.Np)throw new Error("cannot be used in queueing mode");return this.Gp.getValues()}Nc(){return this.Gp.kp()+this.jp.size-this.Fp.size}Lc(){return 0===this.Nc()}Bp(){if(this.Lc())throw new Error("empty set");if(this.Np)throw new Error("cannot be used in queueing mode");const t=this.Gp;return t.min(t.root).key}zp(){if(this.Lc())throw new Error("empty set");if(this.Np)throw new Error("cannot be used in queueing mode");const t=this.Bp();return this.Xf(t),t}Up(t){if(t=!!t,this.Np!==t&&(this.Np=t,!t)){for(const t of this.Fp)this.Gp.remove(t);this.Fp.clear();for(const t of this.jp)this.Gp.mp(t);this.jp.clear()}}Hp(t){this.Gp.forEach(t)}*values(){if(this.Lc())return;const t=this.Gp;for(let e=t.min(t.root);e!=t.hp;e=t.wp(e))yield e.key}[Symbol.iterator](){return this.values()}}}{const gh=self.Ee;gh.Vp=class{constructor(t=gh.hardwareConcurrency){this.Wp=t,this.$p=[],this.Yp=0}Hc(t,e){return new Promise((i,r)=>{const s={rf:t,resolve:i,reject:r,Jp:e};e?.signal&&e.signal.aborted?r(new Error("abort")):(e?.signal&&(s.onabort=()=>{const t=this.$p.indexOf(s);-1!==t&&(this.$p.splice(t,1),r(new Error("abort")))},e.signal.addEventListener("abort",s.onabort)),this.$p.push(s),this.qp())})}Qp(t){for(let e=0,i=this.$p.length;e<i;++e)if(this.$p[e].rf===t)return e;return-1}Zp(t,e){const i=this.Qp(t);if(-1===i)throw new Error("cannot find promise to resolve");this.$p[i].resolve(e),this.$p.splice(i,1)}Xp(t,e){const i=this.Qp(t);if(-1===i)throw new Error("cannot find promise to reject");this.$p[i].reject(e),this.$p.splice(i,1)}async qp(){if(!this.$p.length)return;if(this.Yp>=this.Wp)return;this.Yp++;const t=this.$p.shift();t.Jp?.signal&&t.onabort&&t.Jp.signal.removeEventListener("abort",t.onabort);try{const e=await t.rf();t.resolve(e)}catch(e){t.reject(e)}this.Yp--,this.qp()}}}{const vh=self.Ee;vh.Kp=class{constructor(t,e,i){this.Gf=t,this.td=e,this.ed=i||2*e,this.rd=-1,this.sd=-1/0,this.nd=()=>this.od(),this.ad=!1,this.hd=!1,this.ud=null}ld(t){this.hd=!!t}fd(){return void 0!==vh.pd&&vh.pd.dd()?this.ed:this.td}md(...t){if(-1!==this.rd)return;this.ud=t;let e=vh.Lf(),i=e-this.sd,r=this.fd();i>=r&&this.hd?(this.sd=e,this.yd()):this.rd=self.setTimeout(this.nd,Math.max(r-i,4))}yd(){this.ad=!0;const t=this.ud;this.ud=null,t?this.Gf(...t):this.Gf(),this.ad=!1}Bf(){this.ad||(this.gd(),this.ud=null,this.sd=vh.Lf())}od(){this.rd=-1,this.sd=vh.Lf(),this.yd()}gd(){-1!==this.rd&&(self.clearTimeout(this.rd),this.rd=-1)}Ys(){this.gd(),this.Gf=null,this.ud=null,this.nd=null}}}{const wh=self.Ee;wh.vd=class{constructor(){this.wd=new Map,this.Sd=!1,this.bd=null,this._d=null,this.Ed=null,this.Td=null}Pd(t){this.Sd=!!t}Ad(){return this.Sd}Md(t){this.bd=t}Id(t){if(!this.bd)throw new Error("no get base size callback set");return this.bd(t)}Od(t){this._d=t}Dd(t,e,i,r,s,n){if(!this._d)throw new Error("no raster at size callback set");return this._d(t,e,i,r,s,n)}xd(t){this.Ed=t}Cd(t){if(!this.Ed)throw new Error("no release result callback set");this.Ed(t)}Rd(t){this.Td=t}Ld(){if(!this.Td)throw new Error("no redraw callback set");this.Td()}kd(t){let e=this.wd.get(t);return e||(e=wh.$s(wh.Gd,this,t),this.wd.set(t,e)),e.Nd(),e}jd(t){this.wd.delete(t.Fd())}Bd(){for(const t of this.wd.values())t.zd(),t.Ud()}}}{const Sh=self.Ee,bh=4096;Sh.Gd=class{constructor(t,e){this.Hd=t,this.Vd=e,this.Wd=0,this.$d=0,this.Yd=0,this.Jd=this.Hd.Id(e).then(t=>{this.Hd&&(this.$d=t[0],this.Yd=t[1],this.Hd.Ld())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.qd=!0,this.Hd&&this.Hd.Ld()}),this.Qd=0,this.Zd=0,this.Xd=0,this.Kd=0,this.tm=!1,this.im=null,this.rm=!1,this.qd=!1}Ys(){if(this.Wd<=0)throw new Error("already released");this.Wd--,0===this.Wd&&this.sm()}zd(){this.im&&(this.Hd.Cd(this.im),this.im=null)}sm(){this.zd(),this.Hd.jd(this),this.Hd=null}Fd(){return this.Vd}Nd(){this.Wd++}nm(){return this.Wd>0}om(){return this.im}Ud(){this.rm=!0}async am(t,e,i){if(0===e||0===i||this.qd)return;if(this.tm)return;let r=Sh._n(Math.ceil(e)),s=Sh._n(Math.ceil(i));const n=Math.max(r,s);if(n>4096){const t=4096/n;e*=t,i*=t,r=Math.min(Math.ceil(r*t),4096),s=Math.min(Math.ceil(s*t),4096)}if(e<r&&i<s){const t=e/i;r/s>t?(e=s*t,i=s):(e=r,i=r/t)}if(this.Hd.Ad()&&(r=Math.ceil(e),s=Math.ceil(i)),r<=this.Qd&&s<=this.Zd&&!this.rm)return;this.tm=!0,this.Qd=r,this.Zd=s;const o=await this.Hd.Dd(this.Vd,t,this.Qd,this.Zd,e,i);this.Hd&&(this.zd(),this.im=o,this.Xd=e,this.Kd=i,this.tm=!1,this.rm=!1,this.Hd.Ld())}hm(){return this.Jd}um(){return this.$d}lm(){return this.Yd}fm(){return this.Xd}pm(){return this.Kd}dm(){return this.qd}}}{let _h=function(t){return Ih.get(t)};lookupHtmlEntity=_h;const Eh=self.Ee;Eh.ym="\ufeff";const Th=new Set("0123456789");Eh.gm=function(t){return Th.has(t)};const Ph=new Set(" \t\n\r\u2028\u2029");Eh.vm=function(t){return Ph.has(t)},Eh.wm=function(t){return[...t].filter(t=>!Eh.vm(t)).join("")},Eh.Sm=function(t){for(const e of t)if(!Eh.vm(e))return!1;return!0},Eh.bm=function(t){for(const e of t)if(!Eh.vm(e))return!1;return!0},Eh._m=function(t){return 1===t.length&&t.charCodeAt(0)<32},Eh.Em=function(t){return[...t].filter(t=>!Eh._m(t)).join("")};let Ah=null;try{Ah=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Eh.Tm=function(t){return!Eh.vm(t)&&Ah&&Ah.test(t)};const Mh=new Set("0123456789.+-e");Eh.Pm=function(t){if(!(t=t.trim()).length)return!1;let e=t.charAt(0);if("-"!==e&&!Th.has(e))return!1;for(let e of t)if(!Mh.has(e))return!1;return!0},Eh.Am=function(t){let e=t.length;for(;e>0;){let i=t.charAt(e-1);if(!Eh.gm(i))break;--e}return t.substr(0,e)},Eh.Mm=function(t){let e=Eh.Am(t),i=t.substr(e.length);return i=i?(parseInt(i,10)+1).toString():"2",e+i};const Ih=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Oh=/[&<>"']/g;Eh.Im=function(t){return t.replace(Oh,_h)},Eh.Om=function(t){let e=Eh.Dm(t,"\\","\\\\");return e=Eh.Dm(e,'"','\\"'),e=Eh.Dm(e,"\t","\\t"),e=Eh.Dm(e,"\r",""),Eh.Dm(e,"\n","\\n")},Eh.xm=function(t){let e=Eh.Dm(t,"&","&amp;");return e=Eh.Dm(e,"<","&lt;"),e=Eh.Dm(e,">","&gt;"),Eh.Dm(e,'"',"&quot;")};const Dh=/[-[\]{}()*+?.,\\^$|#\s]/g;Eh.$i=function(t){return t.replace(Dh,"\\$&")},Eh.Cm=function(t,e){let i=0;for(const r of t)r===e&&++i;return i},Eh.Rm=function(t,e){let i=0,r=0;for(;i<e;){if(i=t.indexOf("\n",i),-1===i)return r;r++,i++}return r},Eh.Lm=function(t,e,i=!1){if(!e)return[];i||(t=t.toLowerCase(),e=e.toLowerCase());const r=e.length;let s=0,n=0,o=[];for(;(n=t.indexOf(e,s))>-1;)o.push(n),s=n+r;return o},Eh.Dm=function(t,e,i){return t.replaceAll(e,()=>i)},Eh.km=function(t,e,i){return t.replace(new RegExp(Eh.$i(e),"gi"),()=>i)},Eh.Gm=function(t,e){"string"==typeof e?t.textContent=e:e.Nm()?t.textContent=e.toString():(t.innerHTML=e.jm(),e instanceof Eh.ds&&e.Fm(t))},Eh.Bm=function(t,e){return t instanceof Eh.ps||t instanceof Eh.ds?t.equals(e):e instanceof Eh.ps||e instanceof Eh.ds?e.equals(t):t===e},Eh.zm=function(t,...e){let i=t;for(let r=0,s=e.length;r<s;++r){const s=`{${r}}`;if(!t.includes(s))throw new Error(`missing placeholder '${s}' in string substitution`);i=i.replace(s,e[r].toString())}return i},Eh.Um=function(t,...e){let i=t,r=-1,s=-1;for(let n=0,o=e.length;n<o;++n){const o=`{${n}}`;t.includes(o)?(s=n,i=i.replace(o,e[n].toString())):-1===r&&(r=n)}if(r>=0&&s>=0&&r<s)throw new Error(`missing placeholder '${r}' in string substitution`);return i},Eh.Hm=function(t,e){let i=t;for(let[t,r]of Object.entries(e))i=i.replaceAll(t,r.toString());return i},Eh.Vm=function(t,e){return t>e?1:t<e?-1:0},Eh.Wm=function(t,e){let i=t.toLowerCase(),r=e.toLowerCase();return i>r?1:i<r?-1:0};const xh=new self.Intl.Segmenter;Eh.$m=function(t){if(1===t.length)return[t];const e=[];for(const i of xh.segment(t))e.push(i.segment);return e},Eh.Ym=function*(t){for(const e of xh.segment(t))yield e.segment},Eh.Jm=function(t){let e=0;for(const i of xh.segment(t))++e;return e};const Ch=1024,Rh=1048576,Lh=1073741824,kh=1099511627776;Eh.qm=function(t,e){let i="common."+(e?"dataRates":"dataSizes")+".";const r=self.Qm;if(t<1024)return r(i+"bytes",t);if(t<1048576){let e=t/1024;return e=e<10?Math.round(10*e)/10:Math.round(e),r(i+"kilobytes",e)}if(t<Lh){let e=t/1048576;return e=e<10?Math.round(10*e)/10:Math.round(e),r(i+"megabytes",e)}if(t<kh){let e=t/Lh;return e=e<10?Math.round(10*e)/10:Math.round(e),r(i+"gigabytes",e)}{let e=t/kh;return e=e<10?Math.round(10*e)/10:Math.round(e),r(i+"terabytes",e)}};const Gh={Zm:!1,Xm:!0,Km:!0,ty:!0,ey:!0};Eh.iy=function(t,e){e=Object.assign({},Gh,e),Eh.ny.sy("common.time");const i=[],r=self.lang,s=self.oy;if(e.Xm){const e=Math.floor(t/86400);e>0&&(t-=24*e*3600,i.push(s(".days",null,e)))}if(e.Km){const e=Math.floor(t/3600);(e>0||i.length)&&(t-=3600*e,i.push(s(".hours",null,e)))}if(e.ty){const r=Math.floor(t/60);(r>0||i.length||!e.ey)&&(t-=60*r,i.push(s(".minutes",null,r)))}if(e.ey){const e=Math.floor(t%60);i.push(s(".seconds",null,e))}const n=(e.Zm?r(".approx-prefix"):"")+i.join(r(".separator"));return Eh.ny.hy(),n},Eh.uy=function(t,e){let i=t<0?"-":"",r=(t=Math.abs(t)).toString(),s=e-r.length;for(let t=0;t<s;++t)i+="0";return i+r},Eh.ly=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Eh.py=function(t,e){let i=t.split(".").map(t=>t.trim()),r=e.split(".").map(t=>t.trim());Eh.Eo(i,4,"0"),Eh.Eo(r,4,"0"),i=i.map(t=>parseInt(t,10)),r=r.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const e=i[t]-r[t];if(0!==e)return e<0?-1:1}return 0},Eh.my=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(16*Math.random());return("x"===t?e:3&e|8).toString(16)})},Eh.yy=function(t,e){if(t.length!==e.length)throw new Error("strings must be same length");let i=0;for(let r=0,s=t.length;r<s;++r)t.charAt(r)!==e.charAt(r)&&++i;return i},Eh.gy=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let i,r,s,n,o,a;for(t.length>e.length&&(i=t,t=e,e=i),a=Array(t.length+1),r=0;r<=t.length;r++)a[r]=r;for(r=1;r<=e.length;r++){for(n=r,s=1;s<=t.length;s++)o=e[r-1]===t[s-1]?a[s-1]:Math.min(a[s-1]+1,Math.min(n+1,a[s]+1)),a[s-1]=n,n=o;a[t.length]=n}return a[t.length]},Eh.vy=function(t){return(new TextEncoder).encode(t).length}}{let Nh=function(t,e,i){const r=Bh.get(i);if(!r)return"class"===i?e?"</span>":`<span class="bbclass${$h++}">`:t;if("string"==typeof r){if("a"===r&&0===Vh.length||"abbr"===r&&0===Wh.length)return t;if("a"!==r||e){if("abbr"!==r||e)return"<"+e+r+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Wh.length)throw new Error("invalid bbcode tip substitution");const e=Wh[t];let r="";if("string"==typeof e?r=e:"function"==typeof e&&(r=e()),"string"!=typeof r)throw new TypeError("invalid bbcode tip");return`<abbr title="${jh.Dm(r,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Vh.length)throw new Error("invalid bbcode link substitution");const e=Vh[t];if("string"==typeof e)return`<a href="${Vh[t]}">`;if("function"==typeof e)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(r)){let t=r[0],i=r[1];return e?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Nh;const jh=self.Ee,Fh=self.assert,Bh=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),zh=new Set(["icon"]),Uh=/\[(\/?)([a-zA-Z0-9]+)\]/g,Hh=/\[(\/?)([^\[\n]*?)\]/g;let Vh=null,Wh=null,$h=0;const Yh=/\n/g;jh.ds=class{constructor(t,e){if(this.wy=e&&e.Sy?t:jh.Im(t),this.by="",this._y=!1,this.Ey=[],this.Ty=[],e){if(this._y=!!e.Py,e.links){if(e.links.length>9)throw new Error("too many links");this.Ey=e.links}if(e.Ay){if(e.Ay.length>9)throw new Error("too many tips");this.Ty=e.Ay}}this.My=this.wy.includes("["),this.Iy=this._y&&this.wy.includes("\n"),this.Oy=!this.My&&!this.Iy&&!this.wy.includes("&"),this.Dy=!1,this.xy=[]}toString(){return this.wy}valueOf(){return this.wy}Nm(){return this.Oy}Cy(){return this.My?this.wy.replace(Uh,""):this.wy}jm(){if(this.Oy)return this.wy;if(!this.by&&this.wy){let t=this.wy;this.My&&($h=0,Vh=this.Ey,Wh=this.Ty,t=t.replace(Uh,Nh),Vh=null,Wh=null),this.Iy&&(t=t.replace(Yh,"<br>")),this.by=t}return this.by}Fm(t){if(this.Ey.length)for(let e=0,i=this.Ey.length;e<i;++e){const i=this.Ey[e];if("function"!=typeof i)continue;const r=t.querySelector(".bblink"+e);if(!r)throw new Error("unable to attach BBString link handler");r.onclick=i}}equals(t){return t instanceof jh.ps?this.jm()===t.jm():t instanceof jh.ds?this.wy===t.wy:this.wy===t}Ry(){if(this.Dy)return this.xy;const t=[],e=this.wy,i=[];Hh.lastIndex=0;let r=0,s=null;for(;null!==(s=Hh.exec(e));){const n=s.index;if(n>0&&"\\"===e.charAt(n-1))continue;const o=s[0],a=s[1],h=s[2],u=e.substring(r,n);if(r=n+o.length,u&&t.push({text:u,Ly:i.slice(0)}),h)if(a){const t=h.toLowerCase();for(let e=i.length-1;e>=0;--e)if(i[e].tag===t){i.splice(e,1);break}}else{let e=h,r=null;const s=h.indexOf("=");if(-1!==s?(e=h.substring(0,s).toLowerCase(),r=h.substring(s+1)):e=e.toLowerCase(),zh.has(e)){if("icon"!==e)throw new Error(`unknown self-closing tag ${e}`);t.push({icon:r,Ly:i.slice(0)})}else i.push({tag:e,ky:r})}}r<e.length&&t.push({text:e.substring(r),Ly:i.slice(0)});for(const e of t)e.text&&(e.text=this.Gy(e.text));return this.xy=t.map(t=>t.icon?jh.$s(jh.Ny,{icon:t.icon,Ly:t.Ly}):jh.$s(jh.jy,{Fy:jh.$m(t.text),Ly:t.Ly})),this.Dy=!0,this.xy}Gy(t){return t=jh.Dm(t,"\\[","["),jh.Dm(t,"\\\\","\\")}static By(t){return jh.$s(jh.ds,t,{Sy:!0}).Cy()}static zy(t){return t.replace(Hh,"")}}}{let Jh=function(t){return""!==t&&""!==t&&Kh.vm(t)},qh=function(t){return tu.has(t)},Qh=function(t){return Kh.Tm(t)&&!qh(t)},Zh=function(t){for(;t.length>0&&Jh(t.at(-1));)t.pop()},Xh=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Jh,IsOpeningCJKPunctiationChar=qh,IsContinuingCJKPunctuationChar=Qh,WordBreakTrimEnd=Zh,IsNewline=Xh;const Kh=self.Ee,tu=new Set("");class eu{constructor(){this.Uy=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Hy=0,this.Vy=!1}static Wy(t,e,i,r,s,n){const o=new eu;return o.Uy.push(t),o.width=e,o.height=i,o.fontBoundingBoxAscent=r,o.fontBoundingBoxDescent=s,o.Hy=n,o}np(t){this.Uy=t.Uy.map(t=>t.$y()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.Hy=t.Hy,this.Vy=t.Vy}Bf(){this.Uy=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Hy=0,this.Vy=!1}Yy(t,e){e||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.Hy=t.Hy||0,this.Vy=!0}Jy(t){const e=this.Uy.length?this.Uy.at(-1):null;let i=0;e&&e.qy()&&t[0].qy()&&t[0].Qy()===e.Qy()&&(e.Zy(t[0].Xy()),i=1);for(let e=t.length;i<e;++i){const e=t[i];this.Uy.push(e.$y())}this.Vy=!1}}Kh.Ky=class{constructor(){this.tg=[],this.eg=null,this.ig=new eu,this.rg=new eu,this.sg=!1}ng(){return this.tg}og(){return this.tg.length}ag(t){this.eg=t}Ky(t,e,i,r,s){if("string"==typeof t&&(t=[Kh.$s(Kh.jy,{Fy:Kh.$m(t)})]),Kh.So(this.tg),!t.length||1===t.length&&t[0].qy()&&t[0].Lc()||i<2)return;if(1===t.length){const r=t[0];if(r.qy()&&r.hg()<=100&&!r.ug()){let{width:t,height:n,fontBoundingBoxAscent:o,fontBoundingBoxDescent:a,Hy:h}=e(r);if(t+=s,r.cg(t),r.lg(n),r.fg(o||0),r.pg(a||0),r.dg(h||0),t<=i)return void this.mg(eu.Wy(r,t,n,o,a,h))}}let n,o=4;"word"===r?n=this.yg(t):"cjk"===r?(n=this.gg(t),o=8):(n=this.vg(t),o=8),this.wg(n,e,i,o,s)}yg(t){const e=[];let i=[],r=!1;for(const s of t){const t=s.Qy();if(s.Sg())i.length>0&&e.push(i),e.push([s]),i=[];else for(const n of s.Xy())if(Xh(n))i.length>0&&e.push(i),e.push([Kh.$s(Kh.jy,{Fy:["\n"],Ly:t})]),i=[];else if(0===i.length)i.push(Kh.$s(Kh.jy,{Fy:[n],Ly:t})),r=Jh(n);else{const s=Jh(n);if(s===r){const e=i.at(-1);e.Qy()===t?e.bg(n):i.push(Kh.$s(Kh.jy,{Fy:[n],Ly:t}))}else e.push(i),i=[Kh.$s(Kh.jy,{Fy:[n],Ly:t})],r=s}}return i.length>0&&e.push(i),e}gg(t){const e=[];let i=[],r=!1;for(const s of t){const t=s.Qy();if(s.Sg())i.length>0&&e.push(i),e.push([s]),i=[];else for(const n of s.Xy())if(Xh(n))i.length>0&&e.push(i),e.push([Kh.$s(Kh.jy,{Fy:["\n"],Ly:t})]),i=[];else if(0===i.length)i.push(Kh.$s(Kh.jy,{Fy:[n],Ly:t})),r=qh(n);else if(r||Qh(n)){const e=i.at(-1);e.Qy()===t?e.bg(n):i.push(Kh.$s(Kh.jy,{Fy:[n],Ly:t})),r=qh(n)}else e.push(i),i=[Kh.$s(Kh.jy,{Fy:[n],Ly:t})],r=qh(n)}return i.length>0&&e.push(i),e}vg(t){const e=[];for(const i of t)if(i.qy()){const t=i.Xy();Kh.Ls(e,t.map(t=>[Kh.$s(Kh.jy,{Fy:[t],Ly:i.Qy()})]))}else e.push([i]);return e}_g(t,e){let i=0,r=0,s=0,n=0,o=0;for(const a of t){if(-1===a.Eg()){const t=e(a);a.lg(t.height),a.fg(t.fontBoundingBoxAscent||0),a.pg(t.fontBoundingBoxDescent||0),a.dg(t.Hy||0),a.qy()?a.cg(t.width):a.Sg()&&a.Tg(this.eg)}i+=a.Eg(),r=Math.max(r,a.Pg()),s=Math.max(s,a.Ag()),n=Math.max(n,a.Mg()),o=Math.max(o,a.Ig())}return{width:i,height:r,fontBoundingBoxAscent:s,fontBoundingBoxDescent:n,Hy:o}}Og(){this.ig.Bf(),this.rg.Bf()}mg(t){this.tg.push(new Kh.Ky.Dg(t)),this.Og()}xg(t){return 1===t.length&&t[0].qy()&&1===t[0].hg()&&Xh(t[0].Xy()[0])}Cg(t){return t[0].qy()&&Kh.bm(t[0].Xy())}wg(t,e,i,r,s){let n=0;for(;n<t.length;)n=this.Rg(t,n,e,i,r);if(this.rg.Uy.length>0){if(!this.rg.Vy){const t=this._g(this.rg.Uy,e);this.rg.Yy(t)}this.mg(this.rg)}this.Lg(e,s),this.Og(),this.sg=!1}Rg(t,e,i,r,s){const n=this.ig,o=this.rg,a=t[e];if(this.xg(a)){if(!o.Vy){const t=i(Kh.$s(Kh.jy,{Fy:[" "],Ly:a[0].Qy()}));o.Yy(t,!0)}return this.mg(o),e+1}const h=this.kg(t,e,s),u=this._g(o.Uy,i);return o.Yy(u),u.width>=r?this.Gg(t,e,i,r):(n.np(o),this.sg&&this.mg(n),h+1)}kg(t,e,i){const r=this.rg;this.sg=!1;let s=e,n=0;for(let e=t.length;s<e;++s){const e=t[s];if(this.xg(e)){this.sg=!0;break}if(r.Jy(e),!this.Cg(e)&&(++n,n===i))break}return s}Gg(t,e,i,r){const s=this.ig,n=this.rg;n.np(s);let o=e;for(let e=t.length;o<e;++o){const a=t[o];if(this.xg(a))return this.mg(s),o+1;if(n.Jy(a),!this.Cg(a)||0===s.Uy.length){const a=this._g(n.Uy,i);if(n.Yy(a),a.width>=r){let i;return s.Uy.length>0?i=s:(i=n,++o,o<e&&this.Cg(t[o])&&++o),this.mg(i),o}s.np(n)}}return o}Lg(t,e){for(const i of this.tg){const r=i.Ng();if(!r.length)continue;let s=r.at(-1);if(s.qy()){const n=s.Xy(),o=n.slice(0);if(Zh(o),0===o.length)i.jg(-s.Eg()),r.pop();else if(o.length<n.length){s.Fg(o);const e=t(s).width,r=s.Eg()-e;s.cg(e),i.jg(-r)}0!==e&&r.length>0&&(s=r.at(-1),s.jg(e),i.jg(e))}}}Rc(){Kh.So(this.tg)}Bg(){return this.tg.reduce((t,e)=>Math.max(t,e.Eg()),0)}zg(){return this.tg.reduce((t,e)=>t+e.Pg(),0)}}}{const iu=self.Ee;iu.Ky.Dg=class{constructor(t){this.xy=t.Uy,this.Ug=t.width,this.Hg=t.height,this.Vg=t.fontBoundingBoxAscent,this.Wg=t.fontBoundingBoxDescent,this.$g=t.Hy,this.Yg=0,this.Jg=0}Uy(){return this.xy.values()}*qg(){const t=this.xy;for(let e=t.length-1;e>=0;--e)yield t[e]}Ng(){return this.xy}jg(t){this.Ug+=t}Eg(){return this.Ug}Pg(){return this.Hg}Qg(){return this.Vg}Mg(){return this.Wg}Ig(){return this.$g}Zg(t){this.Yg=t}Xg(){return this.Yg}Kg(t){this.Jg=t}tv(){return this.Jg}}}{const ru=self.Ee;ru.ev=class{constructor(t){this.rv=t.Ly||[],this.Ug=t.width||-1,this.Hg=t.height||-1,this.Vg=t.fontBoundingBoxAscent||-1,this.Wg=t.fontBoundingBoxDescent||-1,this.$g=t.Hy||-1,this.Yg=0,this.Jg=0}qy(){return!1}Sg(){return!1}Qy(){return this.rv}sv(t){const e=this.rv;for(let i=e.length-1;i>=0;--i){const r=e[i];if(r.tag===t)return r}return null}nv(t){return!!this.sv(t)}ov(){const t=new Map;for(const e of this.rv)t.set(e.tag,e.ky);return t}jg(t){this.Ug+=t}cg(t){this.Ug=t}Eg(){return this.Ug}lg(t){this.Hg=t}Pg(){return this.Hg}fg(t){this.Vg=t}Ag(){return this.Vg}pg(t){this.Wg=t}Mg(){return this.Wg}dg(t){this.$g=t}Ig(){return this.$g}Zg(t){this.Yg=t}Xg(){return this.Yg}Kg(t){this.Jg=t}tv(){return this.Jg}}}{const su=self.Ee;su.jy=class extends su.ev{constructor(t){super(t),this.av=t.Fy}qy(){return!0}Zy(t){su.Ls(this.av,t),this.Ug=-1,this.Hg=-1,this.Vg=-1,this.Wg=-1,this.$g=-1}bg(t){this.av.push(t)}$y(){return su.$s(su.jy,{Fy:this.av.slice(0),Ly:this.rv,width:this.Ug,height:this.Hg,fontBoundingBoxAscent:this.Vg,fontBoundingBoxDescent:this.Wg,Hy:this.$g})}Xy(){return this.av}Fg(t){this.av=t}hg(){return this.av.length}Lc(){return 0===this.av.length}ug(){return this.av.includes("\n")}}}{const nu=self.Ee;nu.Ny=class extends nu.ev{constructor(t){super(t),this.hv=t.icon}Sg(){return!0}uv(){return this.hv}$y(){return nu.$s(nu.Ny,{icon:this.hv,Ly:this.rv,width:this.Ug,height:this.Hg,fontBoundingBoxAscent:this.Vg,fontBoundingBoxDescent:this.Wg,Hy:this.$g})}cv(t){if(!t)return null;let e=Number(this.hv);return String(e)===this.hv?(e=Math.floor(e),t.lv(e)):t.fv(this.hv)}Tg(t){const e=this.cv(t);this.Ug=e?this.Hg*e.Eg()/e.Pg():0}pv(t){const e=this.cv(t);return e?e.pv():null}hg(){return 1}}}{const ou=self.Ee;ou.dv=class{constructor(t){this.mv=new Map,this.yv=t.gv,this.vv=t.wv}Ys(){for(const t of this.mv.values())t.Ys();this.mv.clear()}Sv(t){let e=this.mv.get(t);if(e)return e;const i=this.yv(t);return e=ou.$s(ou.bv,this,{source:t,_v:i}),this.mv.set(t,e),e}Ev(t){return this.mv.has(t)}Tv(t){const e=this.mv.get(t);e&&e.Ys(),this.mv.delete(t)}async Pv(t){return await this.vv(t)}}}{const au=self.Ee;au.bv=class{constructor(t,e){this.Av=t,this.Mv=e.source,this.Iv=[],this.Ov=new Map,this.Dv=!1,this.xv=!1,this.Cv=null;const i=e._v.Rv;for(let t=0,e=i.length;t<e;++t){const e=i[t],r=au.$s(au.Lv,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Iv.push(r),e.tag&&this.Ov.set(e.tag.toLowerCase(),r)}}Ys(){for(const t of this.Iv)t.Ys();au.So(this.Iv),this.Ov.clear(),this.Av=null,this.Mv=null}kv(){return this.Dv}Gv(){return this.xv}Nv(){return this.Cv||(this.Cv=this.jv()),this.Cv}async jv(){if(this.Dv)return;this.Dv=!0,this.xv=!0;const t=await this.Av.Pv(this.Mv);if(!this.Av)return;const e=t.Rv;for(let t=0,i=Math.min(e.length,this.Iv.length);t<i;++t){const i=e[t].Fv;this.Iv[t].Bv(i)}this.xv=!1}lv(t){return(t=Math.floor(t))<0||t>=this.Iv.length?null:this.Iv[t]}fv(t){return this.Ov.get(t.toLowerCase())||null}}}{const hu=self.Ee;hu.Lv=class{constructor(t,e){this.zv=t,this.Mv=e.source||null,this.Uv=e.index,this.Hv=e.tag,this.Ug=e.width,this.Hg=e.height,this.Vv=null}Ys(){this.Ug=0,this.Hg=0,this.zv=null}Wv(){return this.Mv}Eg(){return this.Ug}Pg(){return this.Hg}Bv(t){this.Vv=t}pv(){return this.Vv}}}{let uu=function(t,e,i,r){const s=wu;du.R(gu,i,e),du.R(vu,t,e),du.At(s,gu,vu),du.normalize(s,s),r.set(s[0],s[1],s[2],du.Pt(t,s))},cu=function(t,e,i,r,s,n,o){const a=o.x,h=o.y,u=o.z,c=o.w,l=o.$v,f=o.Yv,p=o.Jv,d=1-l,m=1-f,y=1-p;return a*t*l+a*r*d+h*e*f+h*s*m+u*i*p+u*n*y>=c||a*r*l+a*t*d+h*s*f+h*e*m+u*n*p+u*i*y>c},lu=function(t,e,i,r){return r.x*t+r.y*e+r.z*i>=r.w};PlaneFromPoints=uu,IsInFrontOfPlane=cu,IsPointInFrontOfPlane=lu;const fu=self.Ee,pu=self.oe,du=pu.de,mu=pu.me,yu=pu.ce,gu=du.create(),vu=du.create(),wu=du.create(),Su=mu.create(),bu=yu.create(),_u=du.create(),Eu=du.create(),Tu=du.create(),Pu=du.create(),Au=du.create(),Mu=du.create(),Iu=du.create(),Ou=du.create(),Du=mu.S(0,0,1,1);fu.qv={Qv(t,e,i,r,s,n,o){const a=r[0]*t+r[4]*e+r[8]*i+r[12],h=r[1]*t+r[5]*e+r[9]*i+r[13],u=r[2]*t+r[6]*e+r[10]*i+r[14],c=r[3]*t+r[7]*e+r[11]*i+r[15];let l=s[0]*a+s[4]*h+s[8]*u+s[12]*c,f=s[1]*a+s[5]*h+s[9]*u+s[13]*c,p=s[2]*a+s[6]*h+s[10]*u+s[14]*c,d=s[3]*a+s[7]*h+s[11]*u+s[15]*c;return 0!==d&&(d=1/d,l*=d,f*=d,p*=d,o[0]=(.5*l+.5)*n[2]+n[0],o[1]=(.5*f+.5)*n[3]+n[1],o[2]=.5*(1+p),!0)},Zv(t,e,i,r,s,n,o){const a=bu,h=Su;return yu.multiply(a,s,r),null!==yu.T(a,a)&&(h[0]=(t-n[0])/n[2]*2-1,h[1]=(e-n[1])/n[3]*2-1,h[2]=2*i-1,h[3]=1,mu.xt(h,h,a),0!==h[3]&&(h[3]=1/h[3],o[0]=h[0]*h[3],o[1]=h[1]*h[3],o[2]=h[2]*h[3],!0))},Xv(t,e,i,r,s,n,o){const a=gu,h=vu;if(!fu.qv.Zv(t,e,0,r,s,n,a))return!1;if(!fu.qv.Zv(t,e,1,r,s,n,h))return!1;const u=vu;du.R(u,h,a);const c=wu;du.set(c,0,0,1);const l=-i,f=du.Pt(c,u);let p=0;if(0===f){if(0!==du.Pt(c,a)+l)return!1}else if(p=-(du.Pt(a,c)+l)/f,p<0)return!1;return du.St(o,a,u,p),!0}};class xu{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.$v=NaN,this.Yv=NaN,this.Jv=NaN}set(t,e,i,r){this.x=t,this.y=e,this.z=i,this.w=r,this.$v=t>0?1:0,this.Yv=e>0?1:0,this.Jv=i>0?1:0}}fu.qv.Kv=class{constructor(){this.tw=new xu,this.ew=new xu,this.iw=new xu,this.rw=new xu,this.sw=new xu,this.ow=new xu}aw(t,e){const i=Du;fu.qv.Zv(0,1,0,t,e,i,_u),fu.qv.Zv(1,1,0,t,e,i,Eu),fu.qv.Zv(0,0,0,t,e,i,Tu),fu.qv.Zv(1,0,0,t,e,i,Pu),fu.qv.Zv(0,1,1,t,e,i,Au),fu.qv.Zv(1,1,1,t,e,i,Mu),fu.qv.Zv(0,0,1,t,e,i,Iu),fu.qv.Zv(1,0,1,t,e,i,Ou),uu(Tu,_u,Au,this.tw),uu(_u,Eu,Mu,this.ew),uu(Eu,Pu,Ou,this.iw),uu(Pu,Tu,Iu,this.rw),uu(Iu,Au,Mu,this.ow),uu(Pu,Eu,_u,this.sw)}hw(t,e,i,r,s,n){return cu(t,e,i,r,s,n,this.tw)&&cu(t,e,i,r,s,n,this.ew)&&cu(t,e,i,r,s,n,this.iw)&&cu(t,e,i,r,s,n,this.rw)&&cu(t,e,i,r,s,n,this.sw)&&cu(t,e,i,r,s,n,this.ow)}uw(t,e,i){return!lu(t,e,i,this.sw)}}}{const Cu=self.Ee,Ru=self.oe,Lu=Ru.de,ku=Ru.me,Gu=Ru.ce,Nu=Gu.create(),ju=Lu.S(0,0,0),Fu=Lu.S(0,0,0),Bu=Lu.S(0,0,0),zu=Lu.S(0,1,0),Uu=ku.S(0,0,0,0),Hu=new Cu.Ou,Vu=new Cu.Rect,Wu=new Cu.Ou(0,0,1,0,1,1,0,1),$u={cw:1,lw:1e4},Yu=Gu.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Cu.qv.fw=class{constructor(t){t=Object.assign({},$u,t),this.Ug=0,this.Hg=0,this.pw=Cu.tn(45),this.dw=Math.tan(this.pw/2),this.mw=Gu.create(),this.yw=Gu.create(),this.gw=!1,this.ww=t.cw,this.Sw=t.lw,this.bw=[],this._w=new Map,this.Ew=null,this.Tw=null,this.Pw=null,this.Aw=null,this.Mw=null,this.Iw=null,this.Ow=null,this.Dw=null,this.xw=null,this.Cw=null,this.Rw=null,this.Lw=null,this.kw=new Map,this.Gw=null,this.Nw=[],this.jw=new Map,this.Fw=0,this.Bw=0,this.zw=1,this.Uw=[this.zw],this.Hw=1,this.Vw=[this.Hw],this.Ww=.5,this.$w=[this.Ww],this.Yw=0,this.Jw=!0,this.qw=!1}Qw(){this.Fw=0,this.Bw=0,this.Ew=null,this.Tw=null,this.Pw=null,this.Aw=null,this.Mw=null,this.Iw=null,this.Ow=null,this.Dw=null,this.xw=null,this.Cw=null,this.Rw=null,this.Lw=null,this.Zw()}Xw(){this.Qw(),this.Gw=null}Kw(){for(const t of this.bw)t.Ys();this.Qw()}Eg(){return this.Ug}Pg(){return this.Hg}tS(t){return this.eS()?100:t/(2*this.iS())}rS(t){return this.eS()?t/(2*this.iS())/this.tS(t):1}sS(t){this.ww=t}nS(){return this.ww}oS(t){this.Sw=t}aS(){return this.Sw}hS(t){this.pw=t,this.dw=Math.tan(this.pw/2)}uS(){return this.pw}iS(){return this.dw}cS(){this.gw=!1}lS(){this.gw=!0}eS(){return!this.gw}fS(){return this.gw}pS(t,e,i=.5,r=.5){const s=this.nS(),n=this.aS(),o=this.uS();if(.5===i&&.5===r)this.dS()?Gu.ct(t,o,e,s,n):Gu.perspective(t,o,e,s,n);else{const o=2*(i=1-i)-2,a=2*i,h=2*r-2,u=2*r,c=this.iS()*s,l=c*e;Gu.ht(t,o*l,a*l,h*c,u*c,s,n),this.dS()&&Gu.mul(t,Yu,t)}}mS(t,e,i,r=1){const s=self.devicePixelRatio,n=2*this.tS(i)*s*this.iS()/i,o=e*n/(2*s*r),a=i*n/(2*s*r),h=-o,u=o,c=-a,l=a;this.dS()?Gu.yt(t,h,u,c,l,this.nS(),this.aS()):Gu.dt(t,h,u,c,l,this.nS(),this.aS())}yS(t,e,i,r,s,n=1){let o=1;this.eS()&&(o=200*this.iS()/s);const a=Bu;Lu.set(a,o,-o,1);const h=ju,u=Fu;Lu.multiply(h,e,a),Lu.multiply(u,i,a),Gu.gt(t,h,u,r||zu),a[2]=n,Gu.scale(t,t,a)}gS(t,e,i,r,s,n,o,a){return Lu.set(ju,t,e,i),Lu.set(Fu,r,s,n),this.yS(Nu,ju,Fu,zu,o,a),Nu}vS(t){this.bw.push(t),this._w.set(t.Dl(),t)}wS(t){const e=this.bw.indexOf(t);-1!==e&&this.bw.splice(e,1),this._w.delete(t.Dl())}Zw(){Cu.So(this.bw),this._w.clear()}SS(t){return this._w.get(t)||null}bS(){return this.Ew}_S(){this.ES(this.Ew)}TS(){return this.Tw}PS(){this.ES(this.Tw)}AS(){this.ES(this.Pw)}MS(){this.ES(this.Aw)}IS(){this.ES(this.Mw)}OS(){this.ES(this.Iw)}DS(){this.ES(this.Ow)}xS(){this.ES(this.Dw)}CS(){this.ES(this.xw)}RS(){this.ES(this.Cw)}LS(){this.ES(this.Rw)}kS(){this.ES(this.Lw)}GS(t){this.Gw=t}NS(){return this.Gw}jS(t,e,i,r,s,n){const o=Cu.qv.BS.FS(t,e,i,r,s,n);let a=this.kw.get(o);return a||(a=Cu.$s(Cu.qv.BS,this,t,e,i,r,s,n),this.kw.set(o,a)),a.zS(),a}US(t){t.HS(),0===t.VS()&&(this.Gw===t&&(this.Gw=null),this.kw.delete(t.WS()),t.Ys())}$S(t){Cu.So(this.Nw),this.jw.clear();let e=0;for(const i of t){const t=i[0],r=i[1];this.Nw.push(r),this.jw.set(t,e),e++}}YS(t){return this.Nw[t]}JS(t){const e=this.jw.get(t);if(void 0===e)throw new Error("invalid blend name");return e}qS(t){this.Fw=t}QS(){return this.Fw}ZS(t){this.Bw=t,this.Gw=null}XS(){return this.Bw}Dg(t,e,i,r){const s=Cu.hn(t,e,i,r),n=Math.sin(s),o=Math.cos(s),a=.5*this.zw,h=n*a,u=o*a,c=this.Hw;2===c?this.KS(t,e,0,i,r,0,h,u):1===c?this.tb(t,e,0,i,r,0,h,u):this.eb(t,e,0,i,r,0,h,u)}ib(t,e,i,r,s,n){const o=Cu.hn(t,e,r,s),a=Math.sin(o),h=Math.cos(o),u=.5*this.zw,c=a*u,l=h*u,f=this.Hw;2===f?this.KS(t,e,i,r,s,n,c,l):1===f?this.tb(t,e,i,r,s,n,c,l):this.eb(t,e,i,r,s,n,c,l)}KS(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h-a,c=e+h-o,l=r+h+a,f=s+h+o,p=2*a,d=2*o,m=u+o,y=c-a,g=u-o+p,v=c+a+d,w=l+o,S=f-a,b=l-o-p,_=f+a-d;this.rb(m,y,i,w,S,n,b,_,n,g,v,i,Wu)}tb(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h-a,c=e+h-o,l=r+h+a,f=s+h+o,p=u+o,d=c-a,m=u-o,y=c+a,g=l+o,v=f-a,w=l-o,S=f+a;this.rb(p,d,i,g,v,n,w,S,n,m,y,i,Wu)}eb(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h,c=e+h,l=r+h,f=s+h,p=u+o,d=c-a,m=u-o,y=c+a,g=l+o,v=f-a,w=l-o,S=f+a;this.rb(p,d,i,g,v,n,w,S,n,m,y,i,Wu)}sb(t,e,i,r,s,n){const o=Cu.hn(t,e,i,r),a=Math.sin(o),h=Math.cos(o),u=.5*this.zw,c=a*u,l=h*u,f=this.Hw;2===f?this.nb(t,e,i,r,c,l,s,n):1===f?this.ob(t,e,i,r,c,l,s,n):this.ab(t,e,i,r,c,l,s,n)}nb(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h-n,c=e+h-s,l=i+h+n,f=r+h+s,p=2*n,d=2*s,m=u+s,y=c-n,g=u-s+p,v=c+n+d,w=l+s,S=f-n,b=l-s-p,_=f+n-d;Hu.set(m,y,w,S,b,_,g,v),Vu.set(o,0,a,0),this.hb(Hu,Vu)}ob(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h-n,c=e+h-s,l=i+h+n,f=r+h+s,p=u+s,d=c-n,m=u-s,y=c+n,g=l+s,v=f-n,w=l-s,S=f+n;Hu.set(p,d,g,v,w,S,m,y),Vu.set(o,0,a,0),this.hb(Hu,Vu)}ab(t,e,i,r,s,n,o,a){const h=this.Ww,u=t+h,c=e+h,l=i+h,f=r+h,p=u+s,d=c-n,m=u-s,y=c+n,g=l+s,v=f-n,w=l-s,S=f+n;Hu.set(p,d,g,v,w,S,m,y),Vu.set(o,0,a,0),this.hb(Hu,Vu)}ub(t,e,i,r){const s=.5*this.zw,n=this.Hw;2===n?this.cb(t,e,i,r,s):1===n?this.lb(t,e,i,r,s):this.fb(t,e,i,r,s)}cb(t,e,i,r,s){this.KS(t,e,0,i,e,0,0,s),this.KS(i,e,0,i,r,0,s,0),this.KS(i,r,0,t,r,0,0,-s),this.KS(t,r,0,t,e,0,-s,0)}lb(t,e,i,r,s){this.tb(t,e,0,i,e,0,0,s),this.tb(i,e,0,i,r,0,s,0),this.tb(i,r,0,t,r,0,0,-s),this.tb(t,r,0,t,e,0,-s,0)}fb(t,e,i,r,s){this.eb(t,e,0,i,e,0,0,s),this.eb(i,e,0,i,r,0,s,0),this.eb(i,r,0,t,r,0,0,-s),this.eb(t,r,0,t,e,0,-s,0)}pb(t){this.ub(t.Kh(),t.tu(),t.eu(),t.iu())}mb(t){const e=Cu.hn(t.Fn(),t.Bn(),t.zn(),t.Un()),i=Math.sin(e),r=Math.cos(e),s=.5*this.zw,n=i*s,o=r*s,a=this.Hw;2===a?this.yb(t,n,o):1===a?this.gb(t,n,o):this.wb(t,n,o)}yb(t,e,i){this.KS(t.Fn(),t.Bn(),0,t.zn(),t.Un(),0,e,i),this.KS(t.zn(),t.Un(),0,t.Hn(),t.Vn(),0,i,-e),this.KS(t.Hn(),t.Vn(),0,t.Wn(),t.$n(),0,-e,-i),this.KS(t.Wn(),t.$n(),0,t.Fn(),t.Bn(),0,-i,e)}gb(t,e,i){this.tb(t.Fn(),t.Bn(),0,t.zn(),t.Un(),0,e,i),this.tb(t.zn(),t.Un(),0,t.Hn(),t.Vn(),0,i,-e),this.tb(t.Hn(),t.Vn(),0,t.Wn(),t.$n(),0,-e,-i),this.tb(t.Wn(),t.$n(),0,t.Fn(),t.Bn(),0,-i,e)}wb(t,e,i){this.eb(t.Fn(),t.Bn(),0,t.zn(),t.Un(),0,e,i),this.eb(t.zn(),t.Un(),0,t.Hn(),t.Vn(),0,i,-e),this.eb(t.Hn(),t.Vn(),0,t.Wn(),t.$n(),0,-e,-i),this.eb(t.Wn(),t.$n(),0,t.Fn(),t.Bn(),0,-i,e)}Sb(t){this.zw=t,this.Uw[this.Uw.length-1]=t}bb(){return this.zw}_b(t){if(this.Uw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Uw.push(t),this.zw=t}Eb(){if(this.Uw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Uw.pop(),this.zw=this.Uw.at(-1)}Tb(){this.Hw=0,this.Vw[this.Vw.length-1]=0}Pb(){this.Hw=1,this.Vw[this.Vw.length-1]=0}Ab(){this.Hw=2,this.Vw[this.Vw.length-1]=0}Mb(t){if("butt"===t)this.Ib();else if("square"===t)this.Ob();else{if("zag"!==t)throw new Error("invalid line cap");this.Db()}}Ib(){if(this.Vw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Vw.push(0),this.Hw=0}Ob(){if(this.Vw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Vw.push(1),this.Hw=1}Db(){if(this.Vw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Vw.push(2),this.Hw=2}xb(){if(this.Vw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Vw.pop(),this.Hw=this.Vw.at(-1)}Cb(t){this.Ww=t,this.$w[this.$w.length-1]=t}Rb(){return this.Ww}Lb(t){if(this.$w.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.$w.push(t),this.Ww=t}kb(){if(this.$w.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.$w.pop(),this.Ww=this.$w.at(-1)}Gb(){this.Nb(0),this.jb(0)}Fb(t){const e=t.length/2;if(e<3)throw new Error("need at least 3 points");const i=e-2,r=i-1,s=t[0],n=t[1];for(let e=0;e<i;e+=2){const i=2*e,o=t[i+2],a=t[i+3],h=t[i+4],u=t[i+5];if(e===r)this.Bb(s,n,o,a,h,u,h,u);else{const e=t[i+6],r=t[i+7];this.Bb(s,n,o,a,h,u,e,r)}}}zb(){this.Ub(!0),this.Yw++}Hb(){return this.Yw}Vb(){this.Yw++}Wb(t){this.Jw=!!t}$b(){return this.Jw}Yb(t){this.qw=!!t}Jb(){return this.qw}qb(){return!1}dS(){return!1}Qb(){}Zb(){}Xb(){}Kb(){return this.Qb()+this.Zb()+this.Xb()}t_(){return Cu.$s(Cu.qv.e_,this)}}}{const Ju=self.Ee;Ju.qv.i_=class{constructor(t,e){this.Qs=e.name,this.r_=t,this.s_=e.n_||0,this.o_=e.a_||0,this.h_=!!e.u_,this.c_=!!e.l_,this.f_=!!e.p_,this.d_=!!e.m_,this.y_=!!e.animated,this.g_=!!e.v_,this.w_=!!e.S_,this.b_=!1,this.__=this.h_||this.g_||0!==this.s_||0!==this.o_}Ys(){this.r_=null}E_(){return this.r_}Dl(){return this.Qs}T_(){return 0!==this.s_||0!==this.o_}P_(){return this.s_}A_(){return this.o_}M_(){return this.h_}I_(){return this.c_}O_(){return this.f_}D_(){return this.d_}x_(){return this.y_}C_(){return this.g_}R_(){return this.w_}L_(){return this.b_}k_(){return this.__}G_(){return!1}}}{const qu=self.Ee;qu.qv.BS=class{constructor(t,e,i,r,s,n,o){this.r_=t,this.Wd=0,this.N_=null,this.j_="",this.F_=i,this.B_=qu.$s(qu.ba),this.B_.set(r),this.z_=s,this.U_=n,this.H_=o,"string"==typeof e?this.j_=e:(this.N_=e,this.j_=this.N_.Dl())}Ys(){if(this.Wd>0)throw new Error("releasing state group still in use");this.r_=null,this.N_=null,this.j_=""}V_(){const t=this.r_;t.ES(this.N_),t.W_(this.F_),t.Y_(this.B_),t.ZS(this.z_),t.Nb(this.U_),t.jb(this.H_),t.GS(this)}WS(){return qu.qv.BS.FS(this.j_,this.F_,this.B_,this.z_,this.U_,this.H_)}zS(){++this.Wd}HS(){--this.Wd}VS(){return this.Wd}J_(){this.N_=null}q_(t){if(this.N_=t.SS(this.j_),!this.N_)throw new Error("failed to restore shader program")}static FS(t,e,i,r,s,n){return("string"==typeof t?t:t.Dl())+","+e+","+i.ka()+","+i.Ga()+","+i.Na()+","+i.ja()+","+r+","+s+","+n}}}{let Qu=function(t,e,i){const r=i.Fn(),s=i.Bn(),n=i.zn()-r,o=i.Un()-s;return[r+n*t+(i.Wn()-r)*e,s+o*t+(i.$n()-s)*e]};interpolateQuad=Qu;const Zu=globalThis.Ee,Xu=globalThis.assert,Ku=65535;Zu.qv.Q_=class{constructor(t,e,i){this.Z_=t,this.X_=e,this.K_=i,this.Dh=NaN,this.xh=NaN,this.z_=NaN,this.tE=NaN,this.eE=NaN,this.Dh=0,this.xh=0,this.z_=0,this.tE=0,this.eE=0}iE(t,e,i,r){this.Dh=t,this.xh=e,this.tE=i,this.eE=r}rE(){return this.Dh}sE(t){this.Dh!==t&&(this.Dh=t,this.Z_.nE())}oE(){return this.xh}aE(t){this.xh!==t&&(this.xh=t,this.Z_.nE())}hE(){return this.z_}uE(t){this.z_!==t&&(this.z_=Math.max(t,0),this.Z_.nE())}cE(){return this.tE}lE(t){this.tE=t}fE(){return this.eE}pE(t){this.eE=t}dE(t,e,i){[this.Dh,this.xh]=Qu(t.Dh,t.xh,e),this.z_=t.z_,this.tE=Zu.Mt(i.Kh(),i.eu(),t.tE),this.eE=Zu.Mt(i.tu(),i.iu(),t.eE)}mE(t,e,i){[this.Dh,this.xh]=Qu(t.Dh,t.xh,e),this.z_=t.z_,[this.tE,this.eE]=Qu(t.tE,t.eE,i)}yE(){return{x:this.rE(),y:this.oE(),z:this.hE(),u:this.cE(),v:this.fE()}}gE(t){this.sE(t.x),this.aE(t.y),t.hasOwnProperty("z")&&this.uE(t.z),this.lE(t.u),this.pE(t.v)}vE(){return this.Z_}wE(){return this.X_}SE(){return this.K_}},Zu.qv.bE=class{constructor(t,e,i){if(t<2||e<2)throw new Error("invalid mesh size");this._E=t,this.EE=e,this.TE=i||null,this.PE=[],this.AE=0,this.ME=0,this.IE=1,this.OE=1,this.DE=0,this.xE=!1,this.CE=[],this.RE=0,this.LE=!0;const r=t-1,s=e-1;for(let i=0;i<e;++i){const e=[];for(let n=0;n<t;++n){const t=Zu.$s(Zu.qv.Q_,this,n,i),o=n/r,a=i/s;t.iE(o,a,o,a),e.push(t)}this.PE.push(e)}}Ys(){Zu.So(this.PE),Zu.So(this.CE)}kE(){return this._E}GE(){return this.EE}NE(){return this.TE}jE(){return this.PE}nE(){this.xE=!0,this.LE=!0}FE(){if(!this.xE)return;let t=1/0,e=1/0,i=-1/0,r=-1/0,s=0;for(const n of this.PE)for(const o of n){const n=o.rE(),a=o.oE();t=Math.min(t,n),e=Math.min(e,a),i=Math.max(i,n),r=Math.max(r,a),s=Math.max(s,o.hE())}this.AE=t,this.ME=e,this.IE=i,this.OE=r,this.DE=s,this.xE=!1}BE(){return this.FE(),this.AE}zE(){return this.FE(),this.ME}UE(){return this.FE(),this.IE}HE(){return this.FE(),this.OE}VE(){return this.FE(),this.DE}WE(){return this.VE()>0}$E(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>=this._E||e<0||e>=this.EE?null:this.PE[e][t]}YE(t,e,i){const r=i instanceof Zu.Rect;if(t.kE()!==this.kE()||t.GE()!==this.GE())throw new Error("source mesh wrong size");const s=t.PE,n=this.PE;for(let t=0,o=n.length;t<o;++t){const o=s[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const s=o[t],n=a[t];r?n.dE(s,e,i):n.mE(s,e,i)}}this.LE=!0}JE(t){if(!this.LE&&this.RE===t)return;const e=this._E,i=this.EE,r=this.CE,s=Math.floor(65535/e)-1;if(s<=0)throw new Error("mesh too large");const n=Math.ceil((i-1)/s);n<r.length&&(r.length=n);let o=0;for(let a=0;a<n;++a){const n=Math.min(s,i-o-1),h=(n+1)*e,u=3*h,c=2*h,l=(e-1)*n*6;if(a===r.length)r.push({qE:new Float32Array(u),QE:new Float32Array(c),ZE:new Uint16Array(l)});else{const t=r[a];t.qE.length!==u&&(t.qE=new Float32Array(u)),t.QE.length!==c&&(t.QE=new Float32Array(c)),t.ZE.length!==l&&(t.ZE=new Uint16Array(l))}const{qE:f,QE:p,ZE:d}=r[a];this.XE(o,n,t,f,p,d),o+=s}this.RE=t,this.LE=!1}XE(t,e,i,r,s,n){const o=this.PE,a=this._E;let h=0,u=0,c=0;for(let l=t,f=t+e+1;l<f;++l){const e=o[l],p=l+1,d=l-t,m=d*a,y=(d+1)*a;for(let t=0,o=e.length;t<o;++t){const a=e[t],l=t+1;if(r[h++]=a.rE(),r[h++]=a.oE(),r[h++]=a.hE()+i,s[u++]=a.cE(),s[u++]=a.fE(),l<o&&p<f){const e=t+m,i=l+m,r=l+y,s=t+y;n[c++]=e,n[c++]=i,n[c++]=r,n[c++]=e,n[c++]=r,n[c++]=s}}}}KE(t,e){this.JE(e);for(const{qE:e,QE:i,ZE:r}of this.CE)t.tT(e,i,r)}eT(t,e){e||(e=(t,e,i)=>[t,e,i]);const i=this.PE;let r=i[0];for(let s=1,n=i.length;s<n;++s){const o=i[s];let a=r[0],h=o[0];for(let i=1,u=o.length;i<u;++i){const c=r[i],l=o[i],[f,p,d]=e(a.rE(),a.oE(),a.hE()),[m,y,g]=e(c.rE(),c.oE(),c.hE()),[v,w,S]=e(l.rE(),l.oE(),l.hE()),[b,_,E]=e(h.rE(),h.oE(),h.hE());t.ib(f,p,d,m,y,g),t.ib(f,p,d,v,w,S),t.ib(f,p,d,b,_,E),i===u-1&&t.ib(m,y,g,v,w,S),s===n-1&&t.ib(b,_,E,v,w,S),a=c,h=l}r=o}}iT(t){const e=.001,i=.99999999,r=t.yc(),s=[],n=this.kE()-1,o=this.GE()-1,a=1/n,h=1/o,u=n-1,c=o-1;let l=r[0],f=r[1],p=Zu.Xs(Math.floor(l*n),0,u),d=Zu.Xs(Math.floor(f*o),0,c),m=!0,y=0,g=0,v=0,w=-1;const S=()=>{l=Zu.Xs(Zu.Mt(l,y,v),0,1),f=Zu.Xs(Zu.Mt(f,g,v),0,1),s.push(l,f)};for(let t=0,b=r.length;t<b;t+=2){l=r[t],f=r[t+1],s.push(l,f),p=Zu.Xs(Math.floor(l*n),0,u),d=Zu.Xs(Math.floor(f*o),0,c);const _=(t+2)%b;for(y=r[_],g=r[_+1],w=-1;;){if(s.length>1e6)throw new Error("Too many mesh poly points");const t=p*a,r=d*h,n=(p+1)*a,o=(d+1)*h;if(m=Zu.Qn(l,f,t,r,n,r,n,o),0!==w&&(v=Zu.qn(l,f,y,g,t,r,n,o,-.001),v>=0&&v<=i))S(),m=!m,w=0;else if(d>0&&2!==w&&(v=Zu.qn(l,f,y,g,t,r,n,r,e),v>=0&&v<=i))S(),d--,m=!1,w=4;else if(p<u&&3!==w&&(v=Zu.qn(l,f,y,g,n,r,n,o,e),v>=0&&v<=i))S(),p++,m=!1,w=1;else if(p>0&&1!==w&&(v=Zu.qn(l,f,y,g,t,r,t,o,e),v>=0&&v<=i))S(),p--,m=!0,w=3;else{if(!(d<c&&4!==w&&(v=Zu.qn(l,f,y,g,t,o,n,o,e),v>=0&&v<=i)))break;S(),d++,m=!0,w=2}}}return Zu.$s(Zu.cc,s)}rT(t,e){const i=this.sT(t);this.nT(i),e.wc(i)}sT(t){const e=[],i=t.yc();for(let t=0,r=i.length;t<r;t+=2){const r=i[t],s=i[t+1],[n,o]=this.oT(r,s);e.push(n,o)}return e}oT(t,e){const i=this.kE()-1,r=this.GE()-1,s=1/i,n=1/r,o=Zu.Xs(Math.floor(t*i),0,i-1),a=Zu.Xs(Math.floor(e*r),0,r-1),h=o*s,u=a*n,c=(o+1)*s,l=(a+1)*n,f=this.$E(o,a),p=this.$E(o+1,a+1),d=Zu.Qn(t,e,h,u,c,u,c,l),m=d?h+s:h,y=d?u:u+n,g=this.$E(o+(d?1:0),a+(d?0:1)),[v,w,S]=Zu.Zn(t,e,h,u,m,y,c,l);return Zu.Xn(v,w,S,f.rE(),f.oE(),f.hE(),g.rE(),g.oE(),g.hE(),p.rE(),p.oE(),p.hE())}nT(t){const e=[],i=1e-7;let r=t[0],s=t[1],n=r-t.at(-2),o=s-t.at(-1);for(let a=0,h=t.length;a<h;a+=2){const u=(a+2)%h,c=t[u],l=t[u+1],f=c-r,p=l-s,d=Math.abs(f)<i&&Math.abs(n)<i&&Math.sign(p)===Math.sign(o),m=Math.abs(p)<i&&Math.abs(o)<i&&Math.sign(f)===Math.sign(n);(!d&&!m&&Math.abs(f/n-p/o)>.001||0==f&&0===p)&&e.push(r,s),r=c,s=l,n=f,o=p}e.length>=6&&e.length<t.length&&Zu.To(t,e)}yE(){return{cols:this.kE(),rows:this.GE(),points:this.PE.map(t=>t.map(t=>t.yE()))}}gE(t){const e=this.kE(),i=this.GE();if(t.cols!==e||t.rows!==i)throw new Error("mesh data wrong size");const r=t.points;for(let t=0;t<i;++t){const i=r[t];for(let r=0;r<e;++r)this.$E(r,t).gE(i[r])}}}}{let tc=function(t,e){let i,r,s,n;switch(t){case"rgba8":i=e.RGBA8,r=e.RGBA,s=e.RGBA,n=e.UNSIGNED_BYTE;break;case"rgb8":i=e.RGB8,r=e.RGB,s=e.RGB,n=e.UNSIGNED_BYTE;break;case"rgba4":i=e.RGBA4,r=e.RGBA,s=e.RGBA,n=e.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=e.RGB5_A1,r=e.RGBA,s=e.RGBA,n=e.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=e.RGB565,r=e.RGB,s=e.RGB,n=e.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{aT:i,hT:r,format:s,type:n}};GetFormatSpecifiers=tc;const ec=self.Ee,ic=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),rc=new Set(["nearest","bilinear","trilinear"]),sc=new Set(["default","low","high"]),nc=new Set(["clamp-to-edge","repeat","mirror-repeat"]),oc={uT:"clamp-to-edge",cT:"clamp-to-edge",lT:"trilinear",fT:0,pT:"rgba8",dT:!0,mT:"default",yT:!0,gT:!1,width:-1,height:-1},ac={yT:!0,flipY:!1},hc=new Set;ec.qv.vT=class{constructor(t){this.r_=t,this.wT=null,this.Ug=0,this.Hg=0,this.ST=!0,this.bT="clamp-to-edge",this._T="clamp-to-edge",this.ET="trilinear",this.TT=0,this.PT="rgba8",this.AT=!1,this.MT="default",this.Wd=0}IT(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(e=Object.assign({},oc,e),this.wT)throw new Error("already created texture");if(this.bT=e.uT,this._T=e.cT,this.ET=e.lT,this.TT=e.fT,this.PT=e.pT,this.AT=!!e.dT&&this.r_.$b(),this.MT=e.mT,!nc.has(this.bT)||!nc.has(this._T))throw new Error("invalid wrap mode");if(!rc.has(this.ET))throw new Error("invalid sampling");if(!ic.has(this.PT))throw new Error("invalid pixel format");if(!sc.has(this.MT))throw new Error("invalid mipmap quality");if(this.ST=!0,t instanceof ArrayBuffer||null===t||e.gT){if(this.Ug=e.width,this.Hg=e.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ug*this.Hg*4)throw new Error("ArrayBuffer wrong size")}else this.Ug=t.width,this.Hg=t.height;if(this.Ug<=0||this.Hg<=0)throw new Error("invalid texture data size");if(e.gT){const e=ec.ua(this.Ug,this.Hg);e.getContext("2d").drawImage(t,0,0,this.Ug,this.Hg),t=e}const i=ec.bn(this.Ug)&&ec.bn(this.Hg),r=this.r_.OT();if(this.Ug>r||this.Hg>r)throw new Error("texture data exceeds maximum texture size");const s=this.r_.DT(),n=this.r_.xT();this.wT=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.wT),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.yT),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1);const o=tc(this.PT,s);if(this.r_.CT()||i||!this.RT())if(n>=2){let e;e=this.AT?Math.floor(Math.log2(Math.max(this.Ug,this.Hg))+1):1,s.texStorage2D(s.TEXTURE_2D,e,o.aT,this.Ug,this.Hg),t instanceof ArrayBuffer?s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.Ug,this.Hg,o.format,o.type,new Uint8Array(t)):null!==t&&s.texSubImage2D(s.TEXTURE_2D,0,0,0,o.format,o.type,t)}else t instanceof ArrayBuffer?s.texImage2D(s.TEXTURE_2D,0,o.hT,this.Ug,this.Hg,0,o.format,o.type,new Uint8Array(t)):null===t?s.texImage2D(s.TEXTURE_2D,0,o.hT,this.Ug,this.Hg,0,o.format,o.type,null):s.texImage2D(s.TEXTURE_2D,0,o.hT,o.format,o.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ug,this.Hg)),t instanceof ImageData){const e=ec.ua(this.Ug,this.Hg);e.getContext("2d").putImageData(t,0,0),t=e}const e=ec.ua(ec._n(this.Ug),ec._n(this.Hg)),i=e.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.ET,i.drawImage(t,0,0,this.Ug,this.Hg,0,0,e.width,e.height),s.texImage2D(s.TEXTURE_2D,0,o.hT,o.format,o.type,e)}null!==t&&this.LT(s),s.bindTexture(s.TEXTURE_2D,null),this.r_.kT(),this.Wd=1,hc.add(this)}GT(t,e,i){if(i=Object.assign({},oc,i),this.wT)throw new Error("already created texture");if(this.bT=i.uT,this._T=i.cT,this.ET=i.lT,this.PT=i.pT,this.AT=!!i.dT&&this.r_.$b(),this.MT=i.mT,!nc.has(this.bT)||!nc.has(this._T))throw new Error("invalid wrap mode");if(!rc.has(this.ET))throw new Error("invalid sampling");if(!ic.has(this.PT))throw new Error("invalid pixel format");if(!sc.has(this.MT))throw new Error("invalid mipmap quality");this.ST=!1,this.Ug=Math.floor(t),this.Hg=Math.floor(e);const r=ec.bn(this.Ug)&&ec.bn(this.Hg),s=this.r_.OT();if(this.Ug<=0||this.Hg<=0)throw new Error("invalid texture size");if(this.Ug>s||this.Hg>s)throw new Error("texture exceeds maximum texture size");if(!this.r_.CT()&&this.RT()&&!r)throw new Error("non-power-of-two tiled textures not supported");const n=this.r_.DT(),o=this.r_.xT();this.wT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.wT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.yT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const a=tc(this.PT,n),h=o>=2?a.aT:a.hT;n.texImage2D(n.TEXTURE_2D,0,h,this.Ug,this.Hg,0,a.format,a.type,null),this.LT(n),n.bindTexture(n.TEXTURE_2D,null),this.r_.kT(),this.Wd=1,hc.add(this)}NT(t){if("default"===this.MT)return this.ST?t.NICEST:t.FASTEST;if("low"===this.MT)return t.FASTEST;if("high"===this.MT)return t.NICEST;throw new Error("invalid mipmap quality")}RT(){return"clamp-to-edge"!==this.bT||"clamp-to-edge"!==this._T}jT(t,e){if("clamp-to-edge"===e)return t.CLAMP_TO_EDGE;if("repeat"===e)return t.REPEAT;if("mirror-repeat"===e)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}LT(t){const e=ec.bn(this.Ug)&&ec.bn(this.Hg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.jT(t,this.bT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.jT(t,this._T)),"nearest"===this.ET)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.AT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(e||this.r_.CT())&&this.AT){t.hint(t.GENERATE_MIPMAP_HINT,this.NT(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.ET&&!this.r_.Jb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.AT=!1;const i=this.r_.FT();i&&this.TT>0&&"nearest"!==this.ET&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.TT,this.r_.BT()))}zT(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.wT||this.Wd<=0)throw new Error("texture not created");if(this.ST)throw new Error("cannot update static texture");e=Object.assign({},ac,e);const i=t.width||t.videoWidth,r=t.height||t.videoHeight,s=this.r_.xT(),n=this.r_.DT();n.bindTexture(n.TEXTURE_2D,this.wT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.yT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!e.flipY);const o=tc(this.PT,n),a=s>=2?o.aT:o.hT;try{if(this.Ug===i&&this.Hg===r){const e=ec.bn(this.Ug)&&ec.bn(this.Hg);n.texSubImage2D(n.TEXTURE_2D,0,0,0,o.format,o.type,t),(e||this.r_.CT())&&this.AT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.NT(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Ug=i,this.Hg=r;const e=ec.bn(this.Ug)&&ec.bn(this.Hg);if(!this.r_.CT()&&this.RT()&&!e)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,a,o.format,o.type,t),(e||this.r_.CT())&&this.AT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.NT(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.r_.kT()}UT(){if(this.Wd>0)throw new Error("texture still has references");if(!this.wT)throw new Error("already deleted texture");hc.delete(this),this.r_.DT().deleteTexture(this.wT),this.wT=null}HT(){return!!this.wT}VT(){return this.wT}E_(){return this.r_}WT(){this.Wd++}$T(){if(this.Wd<=0)throw new Error("no more references");this.Wd--}YT(){return this.Wd}Eg(){return this.Ug}Pg(){return this.Hg}JT(){return this.ST}qT(){let t=this.Ug*this.Hg;switch(this.PT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.AT&&(t+=Math.floor(t/3)),t}static J_(){hc.clear()}static QT(){return hc.values()}}}{const uc=self.Ee,cc=self.assert,lc=self.oe,fc=lc.de,pc=lc.ce,dc=new Set(["nearest","bilinear","trilinear"]),mc={lT:"trilinear",alpha:!0,depth:!1,ZT:!0,XT:!0,KT:0},yc=new Set;uc.qv.tP=class{constructor(t){this.r_=t,this.eP=null,this.iP=null,this.wT=null,this.rP=null,this.Ug=0,this.Hg=0,this.sP=!0,this.ET="trilinear",this.nP=!0,this.oP=!1,this.aP=!0,this.hP=0,this.uP=pc.create(),this.cP=0,this.lP=0,this.fP=0}pP(t,e,i){i=Object.assign({},mc,i);const r=this.r_.xT();if(this.wT||this.rP)throw new Error("already created render target");if(this.ET=i.lT,this.nP=!!i.alpha,this.oP=!!i.depth,this.aP=!!i.ZT,this.sP=!!i.XT,this.hP=i.KT,!dc.has(this.ET))throw new Error("invalid sampling");if(this.hP>0&&(r<2||this.aP))throw new Error("invalid use of multisampling");if(r<2&&(this.aP=!0),this.Ug=t,this.Hg=e,this.Ug<=0||this.Hg<=0)throw new Error("invalid render target size");this.dP();const s=this.r_.DT();if(this.eP=s.createFramebuffer(),this.oP&&(this.iP=s.createFramebuffer()),this.aP){this.wT=this.r_.mP(this.Ug,this.Hg,{lT:this.ET,pT:this.nP?"rgba8":"rgb8",dT:!1});const t=this.wT.VT();s.bindFramebuffer(s.FRAMEBUFFER,this.eP),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0),this.oP&&(s.bindFramebuffer(s.FRAMEBUFFER,this.iP),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0))}else{this.rP=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this.rP);const t=this.nP?s.RGBA8:s.RGB8;if(this.hP>0){const e=s.getInternalformatParameter(s.RENDERBUFFER,t,s.SAMPLES);if(e&&e[0]){const t=e[0];this.hP>t&&(this.hP=t)}else this.hP=0}0===this.hP?s.renderbufferStorage(s.RENDERBUFFER,t,this.Ug,this.Hg):s.renderbufferStorageMultisample(s.RENDERBUFFER,this.hP,t,this.Ug,this.Hg),s.bindFramebuffer(s.FRAMEBUFFER,this.eP),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.rP),this.oP&&(s.bindFramebuffer(s.FRAMEBUFFER,this.iP),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.rP)),s.bindRenderbuffer(s.RENDERBUFFER,null)}const n=this.r_.yP();this.oP&&n&&(s.bindFramebuffer(s.FRAMEBUFFER,this.eP),this.r_.gP()?s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,n,0):s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n)),s.bindFramebuffer(s.FRAMEBUFFER,null),yc.add(this)}vP(t,e){if(this.Ug===t&&this.Hg===e)return;this.Ug=t,this.Hg=e,this.dP();const i=this.r_.DT();i.bindFramebuffer(i.FRAMEBUFFER,this.eP),this.wT?this.wT.zT(new ImageData(this.Ug,this.Hg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.rP),i.renderbufferStorage(i.RENDERBUFFER,this.nP?i.RGBA8:i.RGB8,this.Ug,this.Hg),i.bindRenderbuffer(i.RENDERBUFFER,null));const r=this.r_.yP();this.oP&&r&&(this.r_.gP()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,r,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r)),i.bindFramebuffer(i.FRAMEBUFFER,null)}UT(){if(!this.wT&&!this.rP)throw new Error("already deleted render target");yc.delete(this);const t=this.r_.DT();this.wT?(t.bindFramebuffer(t.FRAMEBUFFER,this.eP),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.oP&&(t.bindFramebuffer(t.FRAMEBUFFER,this.iP),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.r_.wP(this.wT),this.wT=null):this.rP&&(t.bindFramebuffer(t.FRAMEBUFFER,this.eP),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.oP&&(t.bindFramebuffer(t.FRAMEBUFFER,this.iP),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.rP),this.rP=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.r_.xT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.eP),this.oP&&t.deleteFramebuffer(this.iP);const e=this.r_.SP();e.bP=null,e._P=null,this.eP=null}dP(){this.r_.pS(this.uP,this.Ug/this.Hg),this.cP=this.r_.uS(),this.lP=this.r_.nS(),this.fP=this.r_.aS()}EP(){return this.eP}TP(){return this.iP}E_(){return this.r_}PP(){return this.wT}AP(){return this.r_.uS()===this.cP&&this.r_.nS()===this.lP&&this.r_.aS()===this.fP||this.dP(),this.uP}MP(){return"nearest"!==this.ET}IP(){return this.nP}OP(){return this.aP}DP(){return this.oP}Eg(){return this.Ug}Pg(){return this.Hg}xP(){return this.sP}CP(){return this.hP}RP(){const t={lT:this.ET,alpha:this.nP,ZT:this.aP};return this.sP||(t.width=this.Ug,t.height=this.Hg),t}LP(t){return"nearest"!==(t=Object.assign({},mc,t)).lT===this.MP()&&!!t.alpha===this.IP()&&!!t.depth===this.DP()&&!(this.r_.xT()>=2&&!!t.ZT!==this.OP())&&("number"==typeof t.width||"number"==typeof t.height?!this.xP()&&this.Eg()===Math.floor(t.width)&&this.Pg()===Math.floor(t.height):this.xP())}kP(){return this.wT?this.wT.VT():null}qT(){return this.wT?this.wT.qT():this.Ug*this.Hg*(this.nP?4:3)}static async GP(t,e){const i=await t.NP(e,!0);return await uc.fa(i)}static J_(){yc.clear()}static jP(){return yc.values()}static FP(t,e){for(const i of yc)i.xP()&&i.vP(t,e)}}}{const gc=self.Ee,vc=self.oe,wc=vc.de,Sc=vc.ce,bc=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);gc.qv.BP=class extends gc.qv.i_{static async zP(t,e){const i=t.DT(),r=e.src,s=e.UP,n=e.name,o=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(o,r),i.compileShader(o);const a=i.createShader(i.VERTEX_SHADER);i.shaderSource(a,s),i.compileShader(a);const h=i.createProgram();i.attachShader(h,o),i.attachShader(h,a),i.bindAttribLocation(h,0,"aPos"),i.bindAttribLocation(h,1,"aTex"),i.bindAttribLocation(h,2,"aColor"),i.bindAttribLocation(h,3,"aPoints"),i.linkProgram(h);const u=t.HP();if(u?await t.VP(()=>i.getProgramParameter(h,u.COMPLETION_STATUS_KHR)):await gc.po(5),!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(o),i.deleteShader(a),i.deleteProgram(h),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(a,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(a);throw i.deleteShader(o),i.deleteShader(a),i.deleteProgram(h),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(h,i.LINK_STATUS)){const t=i.getProgramInfoLog(h);throw i.deleteShader(o),i.deleteShader(a),i.deleteProgram(h),new Error("Error linking shader program: "+t)}const c=gc.Em(i.getProgramInfoLog(h)||"").trim();return c&&!gc.Sm(c)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,c),i.deleteShader(o),i.deleteShader(a),h}static async WP(t,e){const i=await gc.qv.BP.zP(t,e);return new gc.qv.BP(t,i,e)}constructor(t,e,i){super(t,i);const r=t.DT(),s=t.SP();t.Ub(),r.useProgram(e),this.$P=r,this.N_=e,this.YP="<default-device-transform>"===i.name;const n=r.getAttribLocation(e,"aPos"),o=r.getAttribLocation(e,"aTex"),a=r.getAttribLocation(e,"aColor");this.JP=r.getAttribLocation(e,"aPoints"),-1!==n&&(r.bindBuffer(r.ARRAY_BUFFER,t.qP),r.vertexAttribPointer(n,3,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n)),-1!==o&&(r.bindBuffer(r.ARRAY_BUFFER,t.QP),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(o)),-1!==a&&(r.bindBuffer(r.ARRAY_BUFFER,t.ZP),r.vertexAttribPointer(a,4,t.XP()?r.HALF_FLOAT:r.FLOAT,!1,0,0),r.enableVertexAttribArray(a)),-1!==this.JP&&(r.bindBuffer(r.ARRAY_BUFFER,t.KP),r.vertexAttribPointer(this.JP,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(this.JP)),r.bindBuffer(r.ARRAY_BUFFER,null),this.tA=new gc.qv.eA(this,"matP","mat4"),this.iA=new gc.qv.eA(this,"matMV","mat4"),this.rA=new gc.qv.eA(this,"color","vec4"),this.sA=new gc.qv.eA(this,"samplerFront","sampler"),this.nA=new gc.qv.eA(this,"pointTexStart","vec2"),this.oA=new gc.qv.eA(this,"pointTexEnd","vec2"),this.aA=new gc.qv.eA(this,"zElevation","float"),this.hA=new gc.qv.eA(this,"tileSize","vec2"),this.uA=new gc.qv.eA(this,"tileSpacing","vec2"),this.cA=new gc.qv.eA(this,"color2_","vec4"),this.lA=new gc.qv.eA(this,"outlineThickness","float"),this.fA=new gc.qv.eA(this,"samplerBack","sampler"),this.pA=new gc.qv.eA(this,"samplerDepth","sampler"),this.dA=new gc.qv.eA(this,"destStart","vec2"),this.mA=new gc.qv.eA(this,"destEnd","vec2"),this.yA=new gc.qv.eA(this,"srcStart","vec2"),this.gA=new gc.qv.eA(this,"srcEnd","vec2"),this.vA=new gc.qv.eA(this,"srcOriginStart","vec2"),this.wA=new gc.qv.eA(this,"srcOriginEnd","vec2"),this.SA=new gc.qv.eA(this,"pixelSize","vec2"),this.bA=new gc.qv.eA(this,"seconds","float"),this._A=new gc.qv.eA(this,"devicePixelRatio","float"),this.EA=new gc.qv.eA(this,"layerScale","float"),this.TA=new gc.qv.eA(this,"layerAngle","float"),this.PA=new gc.qv.eA(this,"layoutStart","vec2"),this.AA=new gc.qv.eA(this,"layoutEnd","vec2"),this.MA=new gc.qv.eA(this,"zNear","float"),this.IA=new gc.qv.eA(this,"zFar","float"),this.OA=!!(this.SA.DA()||this.bA.DA()||this.fA.DA()||this.dA.DA()||this.mA.DA()||this.yA.DA()||this.gA.DA()||this.vA.DA()||this.wA.DA()||this._A.DA()||this.EA.DA()||this.TA.DA()||this.PA.DA()||this.AA.DA());const h=i.parameters||[];this.xA=[],this.b_=this.SA.DA()||this.yA.DA()||this.gA.DA()||this.vA.DA()||this.wA.DA(),this.CA=!1,this.RA=!1,this.rA.LA(1,1,1,1),this.cA.LA(1,1,1,1),this.sA.kA(0),this.fA.kA(1),this.pA.kA(2),this.nA.GA(0,0),this.oA.GA(1,1),this.aA.NA(0),this.hA.GA(0,0),this.uA.GA(0,0),this.dA.GA(0,0),this.mA.GA(1,1),this.yA.GA(0,0),this.gA.GA(0,0),this.vA.GA(0,0),this.wA.GA(0,0),this.SA.GA(0,0),this._A.NA(1),this.MA.NA(t.nS()),this.IA.NA(t.aS()),this.EA.NA(1),this.TA.NA(0),this.bA.NA(0),this.PA.GA(0,0),this.AA.GA(0,0),this.lA.NA(1);for(const t of h){const e=t[0],i=t[2],r=new gc.qv.eA(this,e,i);"color"===i?r.jA(0,0,0):r.NA(0),this.xA.push(r)}this.YP?this.FA(s.BA):(this.zA(s.BA,!0),this.UA(s.HA,!0));const u=s.VA;r.useProgram(u?u.N_:null)}Ys(){this.$P.deleteProgram(this.N_),this.N_=null,this.r_.wS(this),this.$P=null,super.Ys()}WA(){return this.$P}$A(){return this.N_}YA(){return this.xA.length}JA(t){return t<0||t>=this.xA.length?null:this.xA[t].qA()}QA(t){for(let e=0,i=t.length;e<i;++e)if(!this.xA[e].ZA(t[e]))return!1;return!0}XA(t){for(let e=0,i=t.length;e<i;++e)this.xA[e].KA(t[e])}tM(t,e,i,r,s,n,o,a,h,u){return!(this.fA.DA()||this.SA.DA()&&!this.SA.eM(s,n)||this.dA.DA()&&!this.dA.eM(t.Kh(),t.tu())||this.mA.DA()&&!this.mA.eM(t.eu(),t.iu())||this._A.DA()&&!this._A.iM(o)||this.EA.DA()&&!this.EA.iM(a)||this.TA.DA()&&!this.TA.iM(h)||this.yA.DA()&&!this.yA.eM(e.Kh(),e.tu())||this.gA.DA()&&!this.gA.eM(e.eu(),e.iu())||this.vA.DA()&&!this.vA.eM(i.Kh(),i.tu())||this.wA.DA()&&!this.wA.eM(i.eu(),i.iu())||this.PA.DA()&&!this.PA.eM(r.Kh(),r.tu())||this.AA.DA()&&!this.AA.eM(r.tu(),r.iu())||this.bA.DA()&&!this.bA.iM(u))}rM(t,e,i,r,s,n,o,a,h,u){this.fA.DA()||(this.SA.DA()&&this.SA.sM(s,n),this.dA.DA()&&this.dA.sM(t.Kh(),t.tu()),this.mA.DA()&&this.mA.sM(t.eu(),t.iu()),this._A.DA()&&this._A.nM(o),this.EA.DA()&&this.EA.nM(a),this.TA.DA()&&this.TA.nM(h),this.yA.DA()&&this.yA.sM(e.Kh(),e.tu()),this.gA.DA()&&this.gA.sM(e.eu(),e.iu()),this.vA.DA()&&this.vA.sM(i.Kh(),i.tu()),this.wA.DA()&&this.wA.sM(i.eu(),i.iu()),this.PA.DA()&&this.PA.sM(r.Kh(),r.tu()),this.AA.DA()&&this.AA.sM(r.tu(),r.iu()),this.bA.DA()&&this.bA.nM(u))}zA(t,e){this.CA&&!e||this.YP||(this.tA.DA()&&this.tA.oM(t),this.CA=!0)}aM(){this.CA=!1}UA(t,e){this.RA&&!e||this.YP||(this.iA.DA()&&this.iA.oM(t),this.RA=!0)}hM(){this.RA=!1}FA(t){if(!this.YP)throw new Error("not device transform shader");this.tA.oM(t);const e=this.r_,i=e.Eg()/2,r=e.Pg()/2,s=e.gS(i,r,e.tS(e.Pg()),i,r,0,e.Pg());this.iA.oM(s)}uM(t){this.rA.DA()&&this.rA.cM(t[0],t[1],t[2],t[3])}static lM(){return bc}static fM(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static pM(t){const e=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${e} vec2 aTex;`,`varying ${e} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static dM(t){const e=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${e} vec2 aTex;`,`out ${e} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static mM(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static yM(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static gM(t){return["#version 300 es",gc.qv.BP.fM(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vM(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static wM(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static SM(t){return["#version 300 es",gc.qv.BP.fM(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bM(t,e,i,r){let s="";return t>=2?s="#version 300 es\n"+gc.qv.BP.fM(r):(e&&(s="#extension GL_EXT_frag_depth : enable\n"),i&&(s+="#extension GL_EXT_shader_texture_lod : enable\n",s+="#extension GL_OES_standard_derivatives : enable\n")),s+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&e?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static _M(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static EM(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static TM(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static PM(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static AM(t){return["#version 300 es",gc.qv.BP.fM(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MM(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static IM(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static OM(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static DM(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static xM(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static CM(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static RM(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static LM(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const _c=self.Ee,Ec=self.oe,Tc=Ec.ce,Pc=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);_c.qv.eA=class{constructor(t,e,i){if(!Pc.has(i))throw new Error("invalid uniform type");this.TE=t,this.$P=this.TE.WA(),this.Qs=e,this.Yl=i,this.kM="color"===this.Yl,this.GM=this.$P.getUniformLocation(this.TE.$A(),e),this.NM=!!this.GM;const r=Pc.get(i);this.jM=new Float32Array(r),this.FM=new Float32Array(r)}Ys(){this.TE=null,this.$P=null,this.GM=null}DA(){return this.NM}qA(){return this.Yl}BM(){return this.kM}NA(t){this.DA()&&(this.jM[0]=t,this.FM.set(this.jM),this.$P.uniform1f(this.GM,t))}kA(t){this.DA()&&(this.jM[0]=t,this.FM.set(this.jM),this.$P.uniform1i(this.GM,t))}GA(t,e){this.DA()&&(this.jM[0]=t,this.jM[1]=e,this.FM.set(this.jM),this.$P.uniform2f(this.GM,t,e))}jA(t,e,i){this.DA()&&(this.jM[0]=t,this.jM[1]=e,this.jM[2]=i,this.FM.set(this.jM),this.$P.uniform3f(this.GM,t,e,i))}LA(t,e,i,r){this.DA()&&(this.jM[0]=t,this.jM[1]=e,this.jM[2]=i,this.jM[3]=r,this.FM.set(this.jM),this.$P.uniform4f(this.GM,t,e,i,r))}zM(t){t=Math.fround(t);const e=this.jM;e[0]!==t&&(e[0]=t,this.$P.uniform1f(this.GM,t))}UM(t){const e=this.jM;e[0]!==t&&(e[0]=t,this.$P.uniform1i(this.GM,t))}HM(t,e){t=Math.fround(t),e=Math.fround(e);const i=this.jM;i[0]===t&&i[1]===e||(i[0]=t,i[1]=e,this.$P.uniform2f(this.GM,t,e))}VM(t,e,i){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i);const r=this.jM;r[0]===t&&r[1]===e&&r[2]===i||(r[0]=t,r[1]=e,r[2]=i,this.$P.uniform3f(this.GM,t,e,i))}cM(t,e,i,r){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i),r=Math.fround(r);const s=this.jM;s[0]===t&&s[1]===e&&s[2]===i&&s[3]===r||(s[0]=t,s[1]=e,s[2]=i,s[3]=r,this.$P.uniform4f(this.GM,t,e,i,r))}oM(t){const e=this.jM;Tc.L(e,t)||(_c.vo(e,t,0),this.$P.uniformMatrix4fv(this.GM,!1,t))}ZA(t){const e=this.FM;return this.BM()?e[0]===Math.fround(t.ka())&&e[1]===Math.fround(t.Ga())&&e[2]===Math.fround(t.Na()):e[0]===Math.fround(t)}KA(t){const e=this.FM;this.BM()?(e[0]=t.ka(),e[1]=t.Ga(),e[2]=t.Na()):e[0]=t}iM(t){return this.FM[0]===Math.fround(t)}eM(t,e){const i=this.FM;return i[0]===Math.fround(t)&&i[1]===Math.fround(e)}nM(t){this.FM[0]=t}sM(t,e){const i=this.FM;i[0]=t,i[1]=e}}}{const Ac=self.Ee,Mc=self.oe,Ic=Mc.me,Oc=Mc.ce,Dc=0,xc=1,Cc=2,Rc=3,Lc=4,kc=5,Gc=6,Nc=7,jc=8,Fc=9,Bc=10,zc=11,Uc=12,Hc=13,Vc=14,Wc=15,$c=16,Yc=17,Jc=18,qc=19,Qc=20,Zc=21,Xc=22,Kc=23,tl=24,el=25,il=26,rl=27,sl=28,nl=29,ol=30;Ac.qv.WM=class{constructor(t){this.$M=t,this.HA=Oc.create(),this.BA=Oc.create(),this.bP=null,this._P=null,this.YM=!1,this.VA=null,this.JM=new Ac.Rect,this.clearColor=Ac.$s(Ac.ba,0,0,0,0)}},Ac.qv.qM=class{constructor(t){const e=new ArrayBuffer(96);this.Yl=0,this.QM=t,this.$P=t.$M.DT(),this.ZM=0,this.XM=0,this.KM=null,this.tI=new Float32Array(e,0,16),this.eI=new Float32Array(e,64,4),this.iI=new Float32Array(e,80,4),this.rI=[]}sI(t,e){this.Yl=1,this.ZM=t,this.XM=e}nI(){const t=this.$P;t.drawElements(t.TRIANGLES,this.XM,t.UNSIGNED_SHORT,this.ZM)}oI(t){this.Yl=2,this.KM=t}aI(){const t=this.$P,e=this.KM;t.bindTexture(t.TEXTURE_2D,e?e.VT():null)}hI(t){this.Yl=20,t.Ba(this.eI,0)}uI(){const t=this.eI,e=this.QM.VA;e.cA.DA()&&e.cA.cM(t[0],t[1],t[2],t[3])}cI(t){this.Yl=3;const e=this.tI;e[0]=t.length;for(let i=0,r=t.length;i<r;++i)e[i+1]=t[i]}lI(){const t=this.$P,e=this.tI,i=e[0],r=e[1],s=e[2];let n=r,o=s,a=t.FUNC_ADD,h=t.FUNC_ADD;i>=4&&(n=e[3],o=e[4]),6===i&&(a=e[5],h=e[6]),t.blendFuncSeparate(r,s,n,o),t.blendEquationSeparate(a,h)}fI(t,e,i,r){this.Yl=4;const s=this.eI;s[0]=t,s[1]=e,s[2]=i,s[3]=r}pI(){const t=this.eI;this.$P.viewport(t[0],t[1],t[2],t[3])}dI(t){this.Yl=5,Oc.v(this.tI,t)}mI(){const t=this.QM,e=t.$M.bw,i=t.VA,r=this.tI;for(let t=0,s=e.length;t<s;++t){const s=e[t];s===i?s.zA(r,!0):s.aM()}Oc.v(t.BA,r)}yI(t){this.Yl=6,Oc.v(this.tI,t)}gI(){const t=this.QM,e=t.$M.bw,i=t.VA,r=this.tI;for(let t=0,s=e.length;t<s;++t){const s=e[t];s===i?s.UA(r,!0):s.hM()}Oc.v(t.HA,r)}vI(t){this.Yl=7,this.KM=t}wI(){const t=this.$P,e=this.KM,i=this.QM;e?(i.bP=e.EP(),i._P=e.TP(),i.YM&&i._P?t.bindFramebuffer(t.FRAMEBUFFER,i._P):t.bindFramebuffer(t.FRAMEBUFFER,i.bP)):(i.bP=null,i._P=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}SI(t){this.Yl=8,t.Ba(this.tI,0)}bI(t,e,i,r){this.Yl=8;const s=this.tI;s[0]=t,s[1]=e,s[2]=i,s[3]=r}_I(){const t=this.$P,e=this.tI,i=this.QM.clearColor,r=e[0],s=e[1],n=e[2],o=e[3];i.Wa(r,s,n,o)||(t.clearColor(r,s,n,o),i.Aa(r,s,n,o)),t.clear(t.COLOR_BUFFER_BIT)}EI(t){this.Yl=14,t.Ba(this.tI,0)}TI(){const t=this.tI;this.QM.JM.set(t[0],t[1],t[2],t[3])}AI(t,e,i){this.Yl=9,this.ZM=t,this.XM=1,this.tI[0]=e,i.Ba(this.eI,0)}MI(){const t=this.$P,e=this.QM,i=e.$M.Tw;t.useProgram(i.N_),i.zA(e.BA,!1),i.UA(e.HA,!1);const r=e.JM;i.nA.DA()&&i.nA.HM(r.Kh(),r.tu()),i.oA.DA()&&i.oA.HM(r.eu(),r.iu());const s=this.tI[0];if(i.aA.DA()&&i.aA.zM(s),i.rA.DA()){const t=this.eI;i.rA.cM(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.ZM/4,this.XM),t.useProgram(e.VA.N_)}II(t){this.Yl=10,this.KM=t}OI(){const t=this.$P,e=this.QM,i=this.KM;e.VA=i,t.useProgram(i.N_),i.zA(e.BA,!1),i.UA(e.HA,!1)}DI(){this.Yl=11}xI(){const t=this.QM.VA,e=this.$P,i=this.tI,r=this.eI,s=this.iI;if(t.fA.DA()){const t=this.QM.$M,i=this.KM;t.CI!==i&&(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i?i.VT():null),t.CI=i,e.activeTexture(e.TEXTURE0))}t.SA.DA()&&t.SA.HM(i[0],i[1]),t.dA.DA()&&t.dA.HM(i[2],i[3]),t.mA.DA()&&t.mA.HM(i[4],i[5]),t._A.DA()&&t._A.zM(this.XM),t.EA.DA()&&t.EA.zM(i[6]),t.TA.DA()&&t.TA.zM(i[7]),t.yA.DA()&&t.yA.HM(i[12],i[13]),t.gA.DA()&&t.gA.HM(i[14],i[15]),t.vA.DA()&&t.vA.HM(s[0],s[1]),t.wA.DA()&&t.wA.HM(s[2],s[3]),t.PA.DA()&&t.PA.HM(r[0],r[1]),t.AA.DA()&&t.AA.HM(r[2],r[3]),t.bA.DA()&&t.bA.zM(this.ZM)}RI(){this.Yl=12}LI(){const t=this.QM.VA.xA,e=this.rI;for(let i=0,r=t.length;i<r;++i){const r=t[i],s=e[i];r.BM()?r.VM(s.ka(),s.Ga(),s.Na()):r.zM(s)}}kI(t){this.Yl=13,this.KM=t}GI(){const t=this.$P,e=this.KM,i=this.QM.bP;e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,e),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}NI(t,e,i){this.Yl=16;const r=this.tI,s=this.QM.$M;r[0]=t.Eg(),r[1]=t.Pg(),r[2]=e?e.Eg():s.Eg(),r[3]=e?e.Pg():s.Pg(),r[4]=t.MP()?1:0,r[5]="stretch"===i;const n=this.rI;Ac.So(n),n.push(t.EP()),n.push(e?e.EP():null)}jI(){const t=this.tI,e=this.rI,i=this.$P,r=t[0],s=t[1],n=t[2],o=t[3],a=0!==t[4],h=0!==t[5],u=e[0],c=e[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,c),h)i.blitFramebuffer(0,0,r,s,0,0,n,o,i.COLOR_BUFFER_BIT,a?i.LINEAR:i.NEAREST);else{const t=Math.min(r,n),e=Math.min(s,o),a=Math.max(s-o,0),h=Math.max(o-s,0);i.blitFramebuffer(0,a,t,e+a,0,h,t,e+h,i.COLOR_BUFFER_BIT,i.NEAREST)}}FI(t){this.Yl=17,this.KM=t}BI(){this.KM.zI(),this.KM=null}UI(t){this.Yl=18,this.KM=t}HI(){this.KM.VI(),this.KM=null}WI(t,e,i){this.Yl=19;const r=this.tI;r[0]=t,r[1]=e,r[2]=i}$I(){const t=this.QM.VA,e=this.tI;t.SA.DA()&&t.SA.HM(e[0],e[1]),t.lA.DA()&&t.lA.zM(e[2])}YI(t,e,i,r,s,n,o){this.Yl=15;const a=this.tI;t.Ba(a,0),a[4]=1/e,a[5]=1/i,a[6]=r/e,a[7]=s/i,a[8]=n/e,a[9]=o/i}JI(){const t=this.QM.VA,e=this.tI;t.yA.DA()&&t.yA.HM(e[0],e[1]),t.SA.DA()&&t.SA.HM(e[4],e[5]),t.hA.DA()&&t.hA.HM(e[6],e[7]),t.uA.DA()&&t.uA.HM(e[8],e[9])}qI(t,e,i,r,s,n,o){this.Yl=28;const a=this.tI;a[0]=1/t,a[1]=1/e,a[2]=i,a[3]=r,a[4]=s,a[5]=n,a[6]=o}QI(){const t=this.QM.VA,e=this.tI;t.SA.DA()&&t.SA.HM(e[0],e[1]),t.hA.DA()&&t.hA.HM(e[2],e[3]),t.lA.DA()&&t.lA.zM(e[4]),t.uA.DA()&&t.uA.HM(e[5],e[6])}ZI(t){this.Yl=21,this.ZM=t?1:0}XI(){const t=this.$P,e=0!==this.ZM;e||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),e||t.depthMask(!1)}KI(t){this.Yl=22,this.ZM=t?1:0}tO(){const t=this.$P;0===this.ZM?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}eO(t){this.Yl=23,this.ZM=t?1:0}iO(){const t=this.$P,e=this.QM,i=e.$M,r=0!==this.ZM;e.YM=r,t.activeTexture(t.TEXTURE2),r?(e._P&&t.bindFramebuffer(t.FRAMEBUFFER,e._P),t.bindTexture(t.TEXTURE_2D,i.yP())):(t.bindTexture(t.TEXTURE_2D,null),e._P&&t.bindFramebuffer(t.FRAMEBUFFER,e.bP)),t.activeTexture(t.TEXTURE0)}rO(){this.Yl=24}sO(){const t=this.$P;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}nO(){this.Yl=25}oO(){const t=this.$P;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}aO(){this.Yl=26}hO(){const t=this.$P;t.disable(t.STENCIL_TEST)}uO(t,e,i,r,s){this.Yl=27,this.ZM=t?1:0;const n=this.tI;n[0]=e,n[1]=i,n[2]=r,n[3]=s}cO(){const t=this.$P,e=this.tI;1===this.ZM?(t.enable(t.SCISSOR_TEST),t.scissor(e[0],e[1],e[2],e[3])):t.disable(t.SCISSOR_TEST)}lO(t){this.Yl=29,this.ZM=t}fO(){const t=this.$P,e=this.ZM;0===e?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===e?t.cullFace(t.BACK):t.cullFace(t.FRONT))}pO(t){this.Yl=30,this.ZM=t}dO(){const t=this.$P;t.frontFace(0===this.ZM?t.CW:t.CCW)}mO(){switch(this.Yl){case 1:return void this.nI();case 2:return void this.aI();case 3:return void this.lI();case 4:return void this.pI();case 5:return void this.mI();case 6:return void this.gI();case 7:return void this.wI();case 8:return void this._I();case 9:return void this.MI();case 10:return void this.OI();case 11:return void this.xI();case 12:return void this.LI();case 13:return void this.GI();case 14:return void this.TI();case 15:return void this.JI();case 16:return void this.jI();case 17:return void this.BI();case 18:return void this.HI();case 19:return void this.$I();case 20:return void this.uI();case 21:return void this.XI();case 22:return void this.tO();case 23:return void this.iO();case 24:return void this.sO();case 25:return void this.oO();case 26:return void this.hO();case 27:return void this.cO();case 28:return void this.QI();case 29:return void this.fO();case 30:return void this.dO()}}}}{let al=function(t,e,i,r,s,n){e?t.strokeRect(i,r,s,n):t.fillRect(i,r,s,n)},hl=function(t){return t*(4/3)},ul=function(t,e){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?e*i/100:i:0};fillOrStrokeRect=al,ptToPx=hl,getOffsetParam=ul;const cl=self.Ee,ll=4096,fl=4,pl=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),dl={timeout:60},ml=new cl.ba(0,0,0,1),yl=new Set(["left","center","right"]),gl=new Set(["top","center","bottom"]),vl=new Set(["word","cjk","character"]),wl=new Set(["ltr","rtl"]),Sl=1e3,bl=10,_l=2,El=new Set;cl.yO&&cl.yO.addEventListener("fontload",t=>{const e=t.font.Dl();for(const t of El)(t.gO()||cl.Zr(t.vO(),e))&&(t.wO(),t.SO())});let Tl=!1,Pl=!1;cl.qv.e_=class{constructor(t,e){e=Object.assign({},dl,e),this.r_=t,this.bO="Arial",this._O=16,this.EO=1,this.TO=0,this.PO=!1,this.AO=!1,this.MO="black",this.IO=!1,this.eg=null,this.OO=!0,this.DO=null,this.xO=new Set,this.CO="left",this.RO="top",this.Bl="",this.LO=null,this.kO=cl.$s(cl.Ky),this.GO="word",this.NO="ltr",this.jO=!1,this.FO=!1,this.BO=!1,this.zO=!1,this.UO=-1,this.HO=0,this.VO=0,this.WO=0,this.Ug=0,this.Hg=0,this.$O=1,this.YO=null,this.JO=null,this.qO=null,this.QO=null,this.ZO=-1,this.XO=-1,this.KO="",this.tD="",this.eD="",this.iD=1,this.rD=1,this.sD=t=>this.nD(t),this.oD=new Map,this.aD=new cl.kf(()=>this.SO(!0),2),this.wT=null,this.hD=!0,this.uD=new cl.Rect,this.cD=1,this.lD=new cl.kf(()=>{this.fD(),this.pD(8,8),this.dD()},e.timeout),this.mD=null,this.yD=!1,El.add(this)}Ys(){this.DO=null,this.xO.clear(),this.eg=null,this.LO=null,this.YO=null,this.JO=null,this.qO=null,this.QO=null,this.sD=null,this.SO(),this.aD.Ys(),this.lD.Ys(),this.mD=null,this.fD(),this.kO.Rc(),this.kO=null,this.r_=null,this.yD=!0,El.delete(this)}dD(){this.BO=!0}gD(){this.dD(),this.FO=!0}wO(){this.gD(),this.jO=!0}vD(t){if(t=!!t,this.IO===t)return;this.IO=t;const e=this.IO?"alphabetic":"top";this.JO&&(this.JO.textBaseline=e),this.qO&&(this.qO.textBaseline=e),this.SO(),this.wO()}gO(){return this.IO}ag(t){this.eg!==t&&(this.eg=t,this.kO.ag(t),this.eg&&this.eg.Gv()&&this.eg.Nv().then(()=>this.dD()),this.wO())}wD(t){t=!!t,this.OO!==t&&(this.OO=t,this.dD())}SD(t){t||(t="serif"),this.bO!==t&&(this.bO=t,this.SO(),this.wO())}vO(){return this.bO}bD(t){t<.1&&(t=.1),this._O!==t&&(this._O=t,this.SO(),this.wO())}_D(){return this._O}ED(t){this.EO!==t&&(this.EO=t,this.SO(),this.wO())}TD(t){this.TO!==t&&(this.TO=t,this.gD())}PD(){return this.TO}AD(t){t=!!t,this.PO!==t&&(this.PO=t,this.SO(),this.wO())}MD(){return this.PO}ID(t){t=!!t,this.AO!==t&&(this.AO=t,this.SO(),this.wO())}OD(){return this.AO}DD(t){t=Math.floor(t),this.UO!==t&&(this.UO=t,this.dD())}xD(){return this.UO}CD(t,e){let i=[];(this.PO||e.nv("b"))&&i.push("bold"),(this.AO||e.nv("i"))&&i.push("italic");const r=e.sv("size"),s=(r?parseFloat(r.ky):this._O)*this.EO;t?i.push(s+"pt"):i.push(s*this.RD()+"pt");let n=this.bO;const o=e.sv("font");return o&&o.ky&&(n=o.ky,this.DO&&!this.xO.has(n)&&(this.DO(n),this.xO.add(n))),n&&(pl.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}Y_(t){t instanceof cl.ba&&(t=t.Xa()),this.MO!==t&&(this.MO=t,this.dD())}LD(t,e,i){ml.Ma(t,e,i),this.Y_(ml)}kD(t){if(!yl.has(t))throw new Error("invalid horizontal alignment");this.CO!==t&&(this.CO=t,this.gD())}GD(){return this.CO}ND(t){if(!gl.has(t))throw new Error("invalid vertical alignment");this.RO!==t&&(this.RO=t,this.gD())}jD(){return this.RO}FD(t){if(!vl.has(t))throw new Error("invalid word wrap mode");this.GO!==t&&(this.GO=t,this.SO(),this.wO())}BD(){return this.GO}zD(t){if(!wl.has(t))throw new Error("invalid text direction");this.NO!==t&&(this.NO=t,this.JO&&(this.JO.direction=this.NO),this.qO&&(this.qO.direction=this.NO),this.SO(),this.wO())}UD(){return this.NO}Hl(t){this.Bl!==t&&(this.Bl=t,this.SO(),this.wO())}HD(){return this.Bl}RD(){return this.cD*this.$O*self.devicePixelRatio}VD(t){t=!!t,this.hD!==t&&(this.hD=t,this.zO=!0)}WD(){return this.hD}$D(t,e,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.VO===t&&this.WO===e&&this.$O===i)return;const r=this.VO;this.VO=t,this.WO=e,this.$O=i;const s=self.devicePixelRatio;this.Ug=this.VO*this.$O*s,this.Hg=this.WO*this.$O*s;const n=Math.max(this.Ug,this.Hg),o=Math.min(this.r_.OT(),4096);let a=1;n>o&&(a=o/n,this.Ug=Math.min(this.Ug*a,o),this.Hg=Math.min(this.Hg*a,o)),this.cD=a,this.VO!==r?this.wO():this.gD()}Eg(){return this.Ug}Pg(){return this.Hg}YD(){return this.$O}JD(){return this.qD(),this.kO.Bg()}QD(){return this.qD(),this.kO.zg()+this.kO.og()*(this.TO+4)-this.TO}ZD(){this.qD();let t=0;for(const e of this.kO.ng())for(const i of e.Uy())t+=i.hg();return t}PP(){return this.lD.Bf(),this.XD(),this.wT}KD(t,e){this.qD();const i=this.RD(),r=this.kO.ng();for(const s of r){const r=s.Mg()*i;if(e>=s.tv()-s.Pg()*i+r&&e<s.tv()+r)for(const e of s.Uy())if(t>=e.Xg()&&t<e.Xg()+e.Eg()*i)return e}return null}*tx(t){this.qD();const e=this.kO.ng();for(const i of e)for(const e of i.Uy()){const i=e.sv("tag");i&&cl.Zr(i.ky,t)&&(yield e)}}ix(t,e){for(const i of this.tx(t)){if(0===e)return i;--e}return null}sx(t){let e=0;for(const i of this.tx(t))++e;return e}XD(){(!this.wT||this.BO||this.FO||this.jO||this.zO)&&(this.yD||this.Ug<=0||this.Hg<=0||this.nx())}nx(){this.yD||(this.qD(),this.ox(),this.hx(),this.lD.Bf())}pD(t,e){this.YO||(this.YO=cl.ua(16,16));let i=!1;this.ZO===t&&this.XO===e||(this.ZO=t,this.XO=e,this.YO.width=t,this.YO.height=e,i=!0),this.JO||(this.JO=this.YO.getContext("2d"),i=!0),i?(this.JO.textBaseline=this.IO?"alphabetic":"top",this.JO.direction=this.NO,this.JO.font=this.KO,this.JO.fillStyle=this.eD,this.JO.strokeStyle=this.eD,this.JO.globalAlpha=this.iD,this.JO.lineWidth=this.rD):this.JO.clearRect(0,0,t,e)}ux(){this.qO||(this.qO=cl.ua(16,16).getContext("2d"),this.QO=cl.ua(16,16).getContext("2d"),this.qO.textBaseline=this.IO?"alphabetic":"top",this.QO.textBaseline="top",this.qO.direction=this.NO,this.QO.direction=this.NO)}lx(t){this.tD!==t&&(this.tD=t,this.qO.font=t,this.QO.font=t)}mx(){if(!Tl){Tl=!0,this.ux();const t=this.qO.measureText("test");Pl="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Pl}qD(){this.yx(),this.gx()}yx(){this.jO&&(this.ux(),!this.IO||this.LO&&this.LO.toString()===this.Bl||(this.LO=new cl.ds(this.Bl,{Sy:!0})),this.aD.Bf(),this.kO.Ky(this.IO?this.LO.Ry():this.Bl,this.sD,this.VO,this.GO,0),this.jO=!1)}gx(){this.FO&&(this.vx(),this.FO=!1)}SO(t){this.oD.clear(),t||this.aD.zf()}wx(t,e){const i=this.oD;if(i.set(t,e),i.size>1e3){let t=0;for(const e of i.keys())if(i.delete(e),t++,t>=10)break}}nD(t){const e=t.qy()?t.Xy().join(""):" ",i=this.CD(!0,t),r=i+"|"+e,s=this.oD;let n=s.get(r);if(n)return s.delete(r),s.set(r,n),n;this.lx(i);const o=this.qO.measureText(e);let a=0;if(this.IO&&this.mx()){const t=this.QO.measureText(e);a=o.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const h=t.sv("size"),u=(h?parseFloat(h.ky):this._O)*this.EO;return n={width:o.width,height:hl(u),fontBoundingBoxAscent:o.fontBoundingBoxAscent||0,fontBoundingBoxDescent:o.fontBoundingBoxDescent||0,Hy:a},this.wx(r,n),n}Sx(t){this.KO!==t&&(this.KO=t,this.JO.font=t)}bx(t){this.eD!==t&&(this.eD=t,this.JO.fillStyle=t,this.JO.strokeStyle=t)}_x(t){this.iD!==t&&(this.iD=t,this.JO.globalAlpha=t)}Ex(t){this.rD!==t&&(this.rD=t,this.JO.lineWidth=t)}vx(){const t=this.RD(),e=(4+this.TO)*t;let i=0;const r=this.kO.ng();if(0===r.length)return;for(const t of r){t.Zg(NaN),t.Kg(NaN);for(const e of t.Uy())e.Zg(NaN),e.Kg(NaN)}const s=this.IO&&this.mx();let n=r[0].Pg()*t;if("center"===this.RO){const o=r.reduce((i,r)=>i+r.Pg()*t+e,0)-e;i=Math.max(this.Hg/2-o/2,0),s&&(n=r[0].Ig()*t)}else if("bottom"===this.RO){const n=r.reduce((i,r)=>i+r.Pg()*t+e,0)-this.TO*t,o=s?r.at(-1).Mg()*t:0;i=this.Hg-n-o-2}for(let s=0,o=r.length;s<o;++s){const o=r[s],a=o.Pg()*t,h=i;if(this.IO){if(i+=0===s?n:a,s>0&&i>this.Hg-4*t)break}else if(s>0&&i>=this.Hg-a)break;h>=0&&this.Tx(o,i,t),this.IO||(i+=a),i+=e}}Tx(t,e,i){let r=0;"center"===this.CO?r=Math.floor((this.Ug-t.Eg()*i)/2):"right"===this.CO&&(r=this.Ug-t.Eg()*i),t.Zg(r),t.Kg(e);for(const s of"ltr"===this.NO?t.Uy():t.qg())this.Px(s,r,e,i),r+=s.Eg()*i}Px(t,e,i,r){const s=t.sv("offsetx");e+=s?ul(s.ky,t.Pg())*r:0;const n=t.sv("offsety");if(i+=n?ul(n.ky,t.Pg())*r:0,t.Sg()){const e=t.sv("iconoffsety");i+=e?ul(e.ky,t.Pg())*r:.2*t.Pg()*r}t.Zg(e),t.Kg(i)}ox(){if(!this.BO)return;this.pD(Math.max(cl._n(Math.ceil(this.Ug)),128),Math.max(cl._n(Math.ceil(this.Hg)),64)),this.JO.imageSmoothingEnabled=this.OO,this.JO.imageSmoothingQuality="high",this.HO=0;const t=this.RD(),e=this.kO.ng();for(const i of e)this.Ax(i,t);this.BO=!1}Ax(t,e){const i=t.Xg(),r=t.tv();if(Number.isFinite(i)&&Number.isFinite(r))for(const i of"ltr"===this.NO?t.Uy():t.qg())this.Mx(i,e,t.Pg())}Mx(t,e,i){const r=this.JO,s=t.Xg(),n=t.tv();if(!Number.isFinite(s)||!Number.isFinite(n))return;const o=i/16;let a=t.Eg()*e;const h=t.Pg()*e,u=t.Pg()/16,c=(4+this.TO)*e;let l=t.qy()?t.Xy():null;if(-1!==this.UO){if(this.HO>=this.UO)return;t.qy()&&this.HO+l.length>this.UO&&(l=l.slice(0,this.UO-this.HO),a=this.nD(t).width*e),this.HO+=t.hg()}const f=t.sv("background"),p=t.nv("u"),d=t.nv("s");if(t.qy()&&cl.bm(l)&&!f&&!p&&!d||t.nv("hide"))return;const m=t.sv("color"),y=t.sv("opacity");this._x(y?parseFloat(y.ky)/100:1),f&&(this.bx(f.ky),r.fillRect(s,n-h,a,h+c));const g=t.sv("linethickness"),v=g?parseFloat(g.ky):1,w=t.nv("stroke");if(w&&this.Ex(.5*u*v*this.RD()),t.qy()){const e=l.join("");if(this.Sx(this.CD(!1,t)),!w){this.Ex(.5*u*v*this.RD());const i=t.sv("outlineback");i&&(this.bx(i.ky),this.Ix(!0,e,s,n,a))}if(this.bx(m?m.ky:this.MO),this.Ix(w,e,s,n,a),!w){this.Ex(.5*u*v*this.RD());const i=t.sv("outline");i&&(this.bx(i.ky),this.Ix(!0,e,s,n,a))}}else if(t.Sg()&&t.Eg()>0){const e=t.pv(this.eg);e&&r.drawImage(e,s,n-h,a,h)}if(this.bx(m?m.ky:this.MO),p&&al(r,w,s,n+e*o,a,e*o*v),d){const t=e*u,i=n-h/4+t/2;r.fillRect(s,i-t*v/2,a,t*v)}}Ix(t,e,i,r,s){"rtl"===this.NO&&(i+=s),t?"Gecko"===cl.Je.ti?this.JO.strokeText(e,i,r,s):this.JO.strokeText(e,i,r):"Gecko"===cl.Je.ti?this.JO.fillText(e,i,r,s):this.JO.fillText(e,i,r)}hx(){this.r_.Ox()||(this.wT&&!this.zO||(this.fD(),this.wT=this.r_.mP(this.YO.width,this.YO.height,{dT:this.hD,mT:"high"}),this.zO=!1),this.r_.Dx(this.YO,this.wT),this.uD.set(0,0,this.Ug/this.wT.Eg(),this.Hg/this.wT.Pg()),this.mD&&this.mD())}xx(){return this.uD}fD(){this.wT&&(this.r_.Ox()||this.r_.wP(this.wT),this.wT=null)}static J_(){for(const t of El)t.fD()}static Cx(){return El.values()}}}{const Al=self.Ee;class Ml{constructor(t){this.$P=t.DT(),this.Rx=t.xT(),this.Lx=t.kx(),this.Gx=null,this.Ff=!1,this.Nx=!1,this.jx=0,1===this.Rx?this.Gx=this.Lx.createQueryEXT():this.Gx=this.$P.createQuery()}Ys(){this.Fx(),this.$P=null,this.Lx=null,this.Nx=!1}Fx(){this.Gx&&(1===this.Rx?this.Lx.deleteQueryEXT(this.Gx):this.$P.deleteQuery(this.Gx),this.Gx=null)}zI(){if(this.Ff)throw new Error("query already active");1===this.Rx?this.Lx.beginQueryEXT(this.Lx.TIME_ELAPSED_EXT,this.Gx):this.$P.beginQuery(this.Lx.TIME_ELAPSED_EXT,this.Gx),this.Ff=!0}VI(){if(!this.Ff)throw new Error("query not active");1===this.Rx?this.Lx.endQueryEXT(this.Lx.TIME_ELAPSED_EXT):this.$P.endQuery(this.Lx.TIME_ELAPSED_EXT),this.Ff=!1}Bx(){if(!this.Gx||this.Nx||this.Ff)return;let t=!1;t=1===this.Rx?this.Lx.getQueryObjectEXT(this.Gx,this.Lx.QUERY_RESULT_AVAILABLE_EXT):this.$P.getQueryParameter(this.Gx,this.$P.QUERY_RESULT_AVAILABLE);const e=this.$P.getParameter(this.Lx.GPU_DISJOINT_EXT);t&&!e&&(1===this.Rx?this.jx=this.Lx.getQueryObjectEXT(this.Gx,this.Lx.QUERY_RESULT_EXT):this.jx=this.$P.getQueryParameter(this.Gx,this.$P.QUERY_RESULT),this.jx/=1e9,this.Nx=!0),(t||e)&&this.Fx()}zx(){return this.Nx}Ux(){if(!this.Nx)throw new Error("no result available");return this.jx}}Al.qv.Hx=class{constructor(t){this.r_=t,this.Yw=t.Hb(),this.Ff=!1,this.Vx=null,this.Wx=!1,this.$x=null,this.Yx=[]}Ys(){for(const t of this.Yx)t instanceof Ml&&t.Ys();Al.So(this.Yx),this.Vx=null,this.$x=null,this.r_=null}zI(){if(this.Ff)throw new Error("query already active");const t=this.r_.Jx();t.length>0?(this.Wx=!0,this.Vx=t.at(-1),this.Vx.qx(),this.Vx.Yx.push(this)):(this.Wx=!1,this.Vx=null),this.Ff=!0,t.push(this),this.Qx()}VI(){if(!this.Ff)throw new Error("query not active");if(this.r_.Jx().pop()!==this)throw new Error("can only end most nested query");this.Ff=!1,this.qx(),this.Vx&&(this.Vx.Qx(),this.Vx=null)}Qx(){this.$x=Al.$s(Ml,this.r_),this.Yx.push(this.$x),this.$x.zI()}qx(){this.$x.VI(),this.$x=null}Bx(){for(const t of this.Yx)t.Bx()}Zx(){return this.Wx}zx(){return this.Yx.every(t=>t.zx())}Ux(){return this.Yx.reduce((t,e)=>t+e.Ux(),0)}Hb(){return this.Yw}}}{const Il=self.Ee;Il.qv.Xx=class{constructor(t,e=1e3){this.r_=t,this.Kx=e,this.tC=[],this.r_.eC(this)}Ys(){this.Rc(),this.r_.iC(this),this.r_=null}Rc(){for(const t of this.tC)t.Ys();Il.So(this.tC)}rC(){const t=new Il.qv.Hx(this.r_);return this.tC.push(t),this.tC.length>this.Kx&&this.tC.shift().Ys(),t}sC(t){for(const e of this.tC){if(e.Hb()>=t)return;if(e.Zx())return;e.Bx()}}nC(t,e){if(e<=t)return NaN;let i=0;for(const r of this.tC){if(r.Hb()>=e)break;if(!(r.Hb()<t)){if(!r.zx())return NaN;i+=r.Ux()}}return i}oC(t){for(let e=0,i=this.tC.length;e<i;++e){const i=this.tC[e];if(!(i.Hb()<t))return void(e>0&&this.tC.splice(0,e));i.Ys()}}}}{let Ol=function(){ql=-1;for(const t of Jl)t.aC()&&(t.resolve(),Jl.delete(t));Jl.size>0&&(ql=self.requestAnimationFrame(Ol))};CheckPendingPolls=Ol;const Dl=self.Ee,xl=self.assert,Cl=self.oe,Rl=Cl.de,Ll=Cl.me,kl=Cl.ce,Gl={powerPreference:"default",hC:!0,alpha:!1,depth:!1,uC:!1,cC:2,failIfMajorPerformanceCaveat:!1},Nl=new Set(["default","low-power","high-performance"]),jl=65535,Fl=393210,Bl=8e3,zl=7996,Ul=new Dl.Ou(0,0,1,0,1,1,0,1),Hl=kl.create(),Vl=kl.create(),Wl=new Dl.Ou,$l=new Dl.Rect;let Yl=null;Dl.Ce&&(self.lC=function(){Yl?Yl.loseContext():console.warn("WEBGL_lose_context not supported")},self.fC=function(){Yl?Yl.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jl=new Set;let ql=-1;Dl.qv.pC=class extends Dl.qv.fw{constructor(t,e){if(super(e),e=Object.assign({},Gl,e),!Nl.has(e.powerPreference))throw new Error("invalid power preference");const i={alpha:!!e.alpha,depth:!1,antialias:!1,powerPreference:e.powerPreference,failIfMajorPerformanceCaveat:!!e.failIfMajorPerformanceCaveat};let r=null,s=0;if(e.cC>=2&&(r=t.getContext("webgl2",i),s=2),r||(r=t.getContext("webgl",i),s=1),!r)throw new Error("renderer-unavailable (could not get WebGL context)");this.$P=r,this.dC=r.getContextAttributes(),this.mC=r.getParameter(r.VERSION),this.Rx=s,this.yC=Ll.create(),this.gC=!1,this.vC=kl.create(),this.wC=!!e.depth,this.SC=!(!e.depth||!e.uC),this.bC=this.wC,this._C=!1,this.EC=null,this.TC=!0,this.PC=0,this.AC=0,this.qP=null,this.QP=null,this.ZP=null,this.MC=null,this.KP=null,this.IC=this.Rx>=2&&void 0!==globalThis.Float16Array,this.OC=new Float32Array(196605),this.DC=new Uint16Array(393210),this.xC=new Float32Array(131070),this.CC=this.IC?new globalThis.Float16Array(262140):new Float32Array(262140),this.RC=new Float32Array(32e3),this.LC=0,this.kC=0,this.GC=0,this.NC=null,this.jC=null,this.FC=[],this.BC=0,this.zC=0,this.UC=null,this.HC=0,this.QM=Dl.$s(Dl.qv.WM,this),this.VC=Dl.$s(Dl.ba,1,1,1,1),this.WC=null,this.CI=null,this.$C=0,this.YC=new Dl.Rect,this.JC=Dl.$s(Dl.Rect,0,0,-1,-1),this.qC=0,this.QC=0,this.ZC=0,this.XC=-1,this.KC=0,this.tR=0,this.eR="(unavailable)",this.iR="(unavailable)",this.rR=[],this.sR=!1,this.nR=null,this.oR=null,this.aR=null,this.hR=null,this.uR=null,this.cR=null,this.lR=null,this.fR=null,this.pR=0,this.dR=!!e.hC,this.Lx=null,this.mR=new Set,this.yR=[]}qb(){return!0}async Xw(){super.Xw();const t=this.$P;this.VC.Aa(1,1,1,1),this.WC=null,this.CI=null,this.LC=0,this.kC=0,this.GC=0,Dl.So(this.FC),this.BC=0,this.zC=0,this.NC=null,this.UC=null,this.YC.set(0,0,1,1),this.HC=0;const e=this.QM;e.VA=null,e.bP=null,e._P=null,e.clearColor.Aa(0,0,0,0),e.JM.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),this.$C=0,1===this.Rx?this.fR=t.getExtension("EXT_blend_minmax"):this.fR=null,this.gR(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.QC=0,t.frontFace(t.CW),this.ZC=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.wC?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.bC=this.wC,this._C=!1,this.KP=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.KP),t.bufferData(t.ARRAY_BUFFER,this.RC.byteLength,t.DYNAMIC_DRAW),this.qP=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qP),t.bufferData(t.ARRAY_BUFFER,this.OC.byteLength,t.DYNAMIC_DRAW),this.QP=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.QP),t.bufferData(t.ARRAY_BUFFER,this.xC.byteLength,t.DYNAMIC_DRAW),this.ZP=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ZP),t.bufferData(t.ARRAY_BUFFER,this.CC.byteLength,t.DYNAMIC_DRAW),this.MC=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.MC),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.DC.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.XC=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.KC=i[0],this.tR=i[1],this.tR>2048&&(this.tR=2048),this.rR=t.getSupportedExtensions();const r=t.getExtension("WEBGL_debug_renderer_info");if(r&&(this.eR=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.iR=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.nR=t.getExtension("KHR_parallel_shader_compile"),this.Rx>=2&&("Chromium"!==Dl.Je.ti||Dl.Je.Ke>=135)&&(this.aR=t.getExtension("EXT_conservative_depth")),Dl.Ce&&(Yl=t.getExtension("WEBGL_lose_context")),this.dR&&(1===this.xT()?this.Lx=t.getExtension("EXT_disjoint_timer_query"):this.Lx=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.oR=t.getExtension("EXT_texture_filter_anisotropic"),this.oR?this.pR=t.getParameter(this.oR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.pR=0,this.xT()<2&&this.wC&&this.SC&&(this.hR=t.getExtension("WEBGL_depth_texture"),!this.hR))throw new Error("no depth texture support");this.xT()<2&&(this.uR=t.getExtension("EXT_frag_depth"),this.cR=t.getExtension("OES_standard_derivatives"),this.lR=t.getExtension("EXT_shader_texture_lod"));const s=Dl.qv.BP,n=s.pM(!1);let o=s.mM(),a=n,h=s.TM(),u=s._M(),c=s.vM(),l=s.pM(!0),f=!1;this.wC&&(this.xT()<2?this.uR&&(o=s.yM(),h=s.PM(),c=s.wM(),f=!0):(a=s.dM(),o=s.gM(this.vR()),h=s.AM(this.vR()),u=s.EM(),c=s.SM(this.vR()),l=s.dM(!0)));const p=s.bM(this.xT(),f,this.cR&&this.lR,this.vR()),d=this.xT()>=2?s.dM():n,m=[[o,a,"<default>"],[o,a,"<default-device-transform>"],[h,u,"<point>"],[s.MM(),n,"<fill>"],[s.IM(),n,"<lineargradient>"],[s.OM(),n,"<penumbra>"],[s.xM(),n,"<hardellipse>"],[s.CM(),n,"<hardellipseoutline>"],[s.RM(),n,"<smoothellipse>"],[s.LM(),n,"<smoothellipseoutline>"],[s.DM(),n,"<smoothline>"],[c,l,"<tilemap>"],[p,d,"<tilerandomization>"]],y=await Promise.all(m.map(t=>this.wR({src:t[0],UP:t[1],name:t[2]})));this.Ew=y[0],this.jC=y[1],this.Tw=y[2],this.Mw=y[3],this.Iw=y[4],this.Ow=y[5],this.Dw=y[6],this.xw=y[7],this.Cw=y[8],this.Rw=y[9],this.Lw=y[10],this.Pw=y[11],this.Aw=y[12],this._S()}async wR(t){const e=await Dl.qv.BP.WP(this,t);return this.vS(e),e}SR(){this.NC=null}$D(t,e,i){if(this.Ug===t&&this.Hg===e&&!i)return;this.Ub();const r=this.$P,s=this.QM;this.Ug=t,this.Hg=e,this.bR(0,0,t,e),this.pS(this.vC,t/e),this._R(this.vC),this.jC&&(r.useProgram(this.jC.$A()),this.jC.FA(this.mw),this.NC=this.jC,this.QM.VA=this.jC),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE0),this.WC=null,this.CI=null,this.wC&&this.TC&&this.ER(this.Ug,this.Hg),this.UC&&this.UC.vP(this.Ug,this.Hg),r.bindFramebuffer(r.FRAMEBUFFER,null),this.UC=null,s.bP=null,s._P=null}ER(t,e){const i=this.$P;this.EC&&this.PC===t&&this.AC===e||(this.SC?(this.EC&&i.deleteTexture(this.EC),this.EC=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.EC),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.xT()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,e,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.hR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,e,0,i.DEPTH_STENCIL,this.hR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.EC&&i.deleteRenderbuffer(this.EC),this.EC=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.EC),i.renderbufferStorage(i.RENDERBUFFER,this.Rx>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,e),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.PC=t,this.AC=e)}TR(t,e){this.wC&&(this.TC=!1,this.ER(t,e))}PR(){this.wC&&(this.TC=!0,this.ER(this.Ug,this.Hg))}bR(t,e,i,r){const s=this.yC;s[0]===t&&s[1]===e&&s[2]===i&&s[3]===r||(this.AR().fI(t,e,i,r),Ll.set(s,t,e,i,r),this.zC=0)}hS(t){super.hS(t),this.pS(this.vC,this.Ug/this.Hg)}sS(t){super.sS(t),this.pS(this.vC,this.Ug/this.Hg)}oS(t){super.oS(t),this.pS(this.vC,this.Ug/this.Hg)}_R(t){kl.L(this.mw,t)||(this.AR().dI(t),kl.v(this.mw,t),this.zC=0,this.gC=!0)}MR(){let t,e,i;const r=this.UC;null===r?(t=this.vC,e=this.Eg(),i=this.Pg()):(t=r.AP(),e=r.Eg(),i=r.Pg()),this._R(t),this.bR(0,0,e,i)}IR(t){kl.L(this.yw,t)||(this.AR().yI(t),kl.v(this.yw,t),this.zC=0,this.gC=!0)}OR(){this.gC=!1}DR(){return this.gC}SP(){return this.QM}AR(){const t=this.FC;return this.BC===t.length&&t.push(new Dl.qv.qM(this.QM)),t[this.BC++]}Ub(){0!==this.BC&&(this.Ox()||(this.xR(),this.CR(),this.BC=0,this.LC=0,this.kC=0,this.GC=0,this.zC=0))}xR(){const t=this.$P;this.LC>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.qP),t.bufferSubData(t.ARRAY_BUFFER,0,this.OC.subarray(0,3*this.LC)),t.bindBuffer(t.ARRAY_BUFFER,this.QP),t.bufferSubData(t.ARRAY_BUFFER,0,this.xC.subarray(0,2*this.LC)),t.bindBuffer(t.ARRAY_BUFFER,this.ZP),t.bufferSubData(t.ARRAY_BUFFER,0,this.CC.subarray(0,4*this.LC))),this.kC>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.MC),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.DC.subarray(0,this.kC))),this.GC>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.KP),t.bufferSubData(t.ARRAY_BUFFER,0,this.RC.subarray(0,this.GC)))}CR(){const t=this.FC;for(let e=0,i=this.BC;e<i;++e)t[e].mO()}RR(){return this.VC.ja()}LR(t,e,i,r){const s=this.VC;s.Wa(t,e,i,r)||(s.Aa(t,e,i,r),this.Gw=null,2===this.zC&&(this.zC=0))}kR(t){const e=this.VC;e.ja()!==t&&(e.Ra(t),this.Gw=null,2===this.zC&&(this.zC=0))}Y_(t){const e=this.VC;e.equals(t)||(e.set(t),this.Gw=null,2===this.zC&&(this.zC=0))}GR(){this.LR(1,1,1,1)}NR(){return this.VC}jR(t){t!==this.WC&&(this.AR().oI(t),this.WC=t,this.zC=0)}kT(){this.WC=null}W_(t){this.$C!==t&&(this.$C=t,this.FR(this.YS(t)))}BR(t){this.W_(this.JS(t))}FR(t){this.AR().cI(t),this.zC=0,this.Gw=null}zR(){return 0===this.$C}UR(){this.W_(0)}Nb(t){this.QC!==t&&(this.AR().lO(t),this.QC=t,this.zC=0,this.Gw=null)}HR(){return this.QC}jb(t){this.ZC!==t&&(this.AR().pO(t),this.ZC=t,this.zC=0,this.Gw=null)}VR(){return this.ZC}WR(){this.W_(3)}Rect(t){this.$R(t.Kh(),t.tu(),t.eu(),t.iu())}$R(t,e,i,r){this.Bb(t,e,i,e,i,r,t,r)}YR(t,e){(this.LC+t>65535||this.kC+e>393210)&&this.Ub(),1===this.zC?this.FC[this.BC-1].XM+=e:(this.AR().sI(2*this.kC,e),this.zC=1)}JR(){const t=this.LC;let e=this.kC;this.kC+=6;const i=this.DC;i[e++]=t,i[e++]=t+1,i[e++]=t+2,i[e++]=t,i[e++]=t+2,i[e]=t+3}Ou(t){this.qR(t,Ul)}Bb(t,e,i,r,s,n,o,a){this.YR(4,6),this.JR();const h=this.OC,u=this.LC;this.LC+=4;let c=3*u;const l=this.Fw+this.Bw;h[c++]=t,h[c++]=e,h[c++]=l,h[c++]=i,h[c++]=r,h[c++]=l,h[c++]=s,h[c++]=n,h[c++]=l,h[c++]=o,h[c++]=a,h[c]=l,Ul.Ba(this.xC,2*u),this.VC.za(this.CC,4*u)}hb(t,e){this.YR(4,6),this.JR();const i=this.LC;this.LC+=4,t.qu(this.OC,3*i,this.Fw+this.Bw),e.nu(this.xC,2*i),this.VC.za(this.CC,4*i)}qR(t,e){this.YR(4,6),this.JR();const i=this.LC;this.LC+=4,t.qu(this.OC,3*i,this.Fw+this.Bw),e.Ba(this.xC,2*i),this.VC.za(this.CC,4*i)}QR(t,e,i){this.YR(4,6),this.JR();const r=this.LC;this.LC+=4,t.qu(this.OC,3*r,this.Fw+this.Bw),e.Ba(this.xC,2*r),this.CC.set(i,4*r)}ZR(t,e,i,r,s,n,o,a,h,u,c,l,f){this.YR(4,6),this.JR();const p=this.OC,d=this.LC;this.LC+=4;let m=3*d;const y=this.Fw+this.Bw;p[m++]=t,p[m++]=e,p[m++]=y+i,p[m++]=r,p[m++]=s,p[m++]=y+n,p[m++]=o,p[m++]=a,p[m++]=y+h,p[m++]=u,p[m++]=c,p[m]=y+l,f.nu(this.xC,2*d),this.VC.za(this.CC,4*d)}rb(t,e,i,r,s,n,o,a,h,u,c,l,f){this.YR(4,6),this.JR();const p=this.OC,d=this.LC;this.LC+=4;let m=3*d;const y=this.Fw+this.Bw;p[m++]=t,p[m++]=e,p[m++]=y+i,p[m++]=r,p[m++]=s,p[m++]=y+n,p[m++]=o,p[m++]=a,p[m++]=y+h,p[m++]=u,p[m++]=c,p[m]=y+l,f.Ba(this.xC,2*d),this.VC.za(this.CC,4*d)}XR(t,e,i,r,s,n,o,a,h,u,c,l,f,p){this.YR(4,6),this.JR();const d=this.OC,m=this.LC;this.LC+=4;let y=3*m;const g=this.Fw+this.Bw;d[y++]=t,d[y++]=e,d[y++]=g+i,d[y++]=r,d[y++]=s,d[y++]=g+n,d[y++]=o,d[y++]=a,d[y++]=g+h,d[y++]=u,d[y++]=c,d[y]=g+l,f.Ba(this.xC,2*m),this.CC.set(p,4*m)}tT(t,e,i,r){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.YR(t.length,i.length);const s=this.LC;this.OC.set(t,3*s),this.xC.set(e,2*s);const n=this.DC;if(0===s)n.set(i,this.kC);else{let t=this.kC;for(let e=0,r=i.length;e<r;++e)n[t++]=i[e]+s}const o=this.CC;if(null!=r)o.set(r,4*s);else{const e=this.VC,i=e.ka(),r=e.Ga(),n=e.Na(),a=e.ja();let h=4*s;for(let e=0,s=t.length;e<s;++e)o[h++]=i,o[h++]=r,o[h++]=n,o[h++]=a}this.LC+=t.length/3,this.kC+=i.length}KR(t,e){this.ZS(0),kl.v(Hl,this.mw),kl.v(Vl,this.yw),this.MR();const[i,r]=this.tL(this.UC),s=this.gS(0,0,this.tS(r),0,0,0,r);if(this.IR(s),"crop"===t&&this.UC&&e){const t=this.Ug/2,i=this.Hg/2,r=e.Eg(),s=e.Pg(),n=this.UC.Eg(),o=this.UC.Pg(),a=Math.min(n,r),h=Math.min(o,s),u=Math.max(s-o,0),c=Math.max(o-s,0);$l.set(-t,i-c,-t+a,i-h-c),Wl.Qu($l),$l.set(0,u,a,h+u),$l.wt(r,s),this.hb(Wl,$l)}else{const t=i/2,e=r/2;this.$R(-t,e,t,-e)}this._R(Hl),this.IR(Vl)}eL(t){this.YC.equals(t)||(this.YC.v(t),this.AR().EI(t),this.zC=0)}iL(){}rL(t,e,i,r){this.GC>=7996&&this.Ub();let s=this.GC;const n=this.Fw+this.Bw;2===this.zC&&this.HC===n?this.FC[this.BC-1].XM++:(this.AR().AI(s,n,this.VC),this.zC=2,this.HC=n);const o=this.RC;o[s++]=t,o[s++]=e,o[s++]=i,o[s++]=r,this.GC=s}ES(t){this.NC!==t&&(this.AR().II(t),this.NC=t,this.zC=0,this.Gw=null)}sL(){return this.NC}nL(){this.ES(this.jC)}oL(t){this.AR().hI(t),this.zC=0}aL(t,e,i=1){this.AR().WI(t,e,i),this.zC=0}hL(t,e,i,r,s,n,o){if(this.NC!==this.Pw)throw new Error("must set tilemap fill mode first");this.AR().YI(t,e,i,r,s,n,o),this.zC=0}uL(t,e,i,r,s,n,o){if(this.NC!==this.Aw)throw new Error("must set tile randomization mode first");this.AR().qI(t,e,i,r,s,n,o),this.zC=0}cL(t,e,i,r,s,n,o,a,h,u,c){const l=this.NC;if(c%=10800,!l.OA||l.tM(e,i,r,s,n,o,a,h,u,c))return;const f=this.AR();f.DI(),l.rM(e,i,r,s,n,o,a,h,u,c);const p=f.tI;p[0]=n,p[1]=o,e.Ba(p,2),p[6]=h,p[7]=u,i.Ba(p,12);const d=f.eI;s.Ba(d,0);const m=d[1];d[1]=d[3],d[3]=m,r.Ba(f.iI,0),f.ZM=c,f.XM=a,l.fA.DA()?f.KM=t?t.PP():null:f.KM=null,this.zC=0}lL(t){const e=this.NC;if(0===t.length||e.QA(t))return;const i=this.AR();i.RI(),e.XA(t),Dl.To(i.rI,t),this.zC=0}fL(t,e,i,r){this.AR().bI(t,e,i,r),this.zC=0}Rc(t){this.AR().SI(t),this.zC=0}pL(){}zb(){super.zb(),this.$P.flush()}dL(){this.wC&&this.UC&&this.UC.DP()&&(this.AR().ZI(this.bC),this.zC=0)}mL(t){t=!!t,this.bC!==t&&this.wC&&(this.bC=t,this.AR().KI(t),this.zC=0)}yL(){return this.bC}yP(){return this.EC}gP(){return this.SC}gL(t){if(t=!!t,this.SC&&this._C!==t){if(t&&this.yL())throw new Error("depth still enabled");this._C=t,this.AR().eO(t),this.zC=0}}vL(t,e,i,r,s=0){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),r=Math.floor(r),this.JC.Xh(t,e,i,r)||(this.JC.Wh(t,e,i,r),e=(s||this.tL(this.wL())[1])-e-r,this.AR().uO(!0,t,e,i,r),this.zC=0)}SL(){-1!==this.JC.eu()&&(this.JC.set(0,0,-1,-1),this.AR().uO(!1,0,0,0,0),this.zC=0)}bL(){for(const t of this.mR)t.sC(this.Yw)}Ox(){return!this.$P||this.$P.isContextLost()||this.sR}J_(){super.Kw(),Dl.qv.vT.J_(),Dl.qv.tP.J_(),Dl.qv.e_.J_();for(const t of this.mR)t.Rc();this.rR=[],this.Lx=null,this.nR=null,this.aR=null,this.oR=null,this.hR=null,this.uR=null,this.cR=null,this.lR=null,this.pR=0,this.eR="(unavailable)",this.iR="(unavailable)",this.NC=null,this.jC=null,this.EC=null;for(const t of this.kw.values())t.J_()}async q_(){this.sR=!0,await this.Xw(),this.sR=!1;for(const t of this.kw.values())t.q_(this);this.$D(this.Ug,this.Hg,!0)}_L(t,e){if(this.Ox())throw new Error("context lost");this.Ub();const i=Dl.$s(Dl.qv.vT,this);return i.IT(t,e),i}async EL(t,e){if(this.Ox())throw new Error("context lost");if(e=Object.assign({},e),Dl.Mi.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const r=e.uT&&"clamp-to-edge"!==e.uT||e.cT&&"clamp-to-edge"!==e.cT,s=Dl.bn(i.width)&&Dl.bn(i.height);return this.CT()||s||!r?e.yT=!1:Dl.Mi.xi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Dl._n(i.width),resizeHeight:Dl._n(i.height)}),e.yT=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Dl.df(()=>this._L(i,e))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const e=await Dl.ha(t);t=e}return await Dl.df(()=>this._L(t,e))}mP(t,e,i){this.Ub();const r=Dl.$s(Dl.qv.vT,this);return r.GT(t,e,i),r}Dx(t,e,i){this.Ub(),e.zT(t,i)}wP(t){t&&(t.$T(),t.YT()>0||(this.Ub(),t===this.WC&&(this.$P.bindTexture(this.$P.TEXTURE_2D,null),this.WC=null),t===this.CI&&(this.$P.activeTexture(this.$P.TEXTURE1),this.$P.bindTexture(this.$P.TEXTURE_2D,null),this.$P.activeTexture(this.$P.TEXTURE0),this.CI=null),t.UT()))}TL(t){let e=this.Ug,i=this.Hg,r=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),r=!1),"number"==typeof t.height&&(i=Math.floor(t.height),r=!1)),e<=0||i<=0)throw new Error("invalid size");this.Ub();const s=Dl.$s(Dl.qv.tP,this);return s.pP(e,i,Object.assign({XT:r},t)),this.UC=null,this.QM.bP=null,this.QM._P=null,s}PL(t,e=!0){t!==this.UC&&(t&&t.xP()&&t.vP(this.Ug,this.Hg),this.AR().vI(t),this.UC=t,this.zC=0,e&&this.MR())}wL(){return this.UC}tL(t){return t?[t.Eg(),t.Pg()]:[this.Ug,this.Hg]}AL(t,e="stretch"){this.Rx<2||this.UC&&this.UC.CP()>0?(this.WR(),this.GR(),this.ML(t,e)):(this.AR().NI(t,this.UC,e),this.zC=0)}ML(t,e="stretch"){const i=t.PP();if(!i)throw new Error("not a texture-backed render target");this.jR(i),this.KR(e,i)}IL(t){this.Rx<2||(this.AR().kI(t.EP()),this.zC=0)}OL(t){this.PL(null),this.Ub();const e=t.PP();e===this.WC&&(this.$P.bindTexture(this.$P.TEXTURE_2D,null),this.WC=null),e===this.CI&&(this.$P.activeTexture(this.$P.TEXTURE1),this.$P.bindTexture(this.$P.TEXTURE_2D,null),this.$P.activeTexture(this.$P.TEXTURE0),this.CI=null),t.UT()}async NP(t,e,i){this.Ub();const r=this.UC;let s,n,o;t?(s=t.Eg(),n=t.Pg(),o=t.EP()):(s=this.Eg(),n=this.Pg(),o=null);let a=0,h=0,u=s,c=n;if(i){a=Dl.Xs(Math.floor(i.Kh()),0,s-1),h=Dl.Xs(Math.floor(i.tu()),0,n-1);let t=i.width();t=0===t?s-a:Dl.Xs(Math.floor(t),0,s-a);let e=i.height();e=0===e?n-h:Dl.Xs(Math.floor(e),0,n-h),u=t,c=e,h=n-(h+c)}const l=this.$P;l.bindFramebuffer(l.FRAMEBUFFER,o);const f=()=>{l.bindFramebuffer(l.FRAMEBUFFER,null),this.UC=null,this.QM.bP=null,this.QM._P=null,this.PL(r)};let p;if(!e&&this.xT()>=2){l.bindFramebuffer(l.READ_FRAMEBUFFER,o);const t=l.createBuffer(),e=u*c*4,i=l.PIXEL_PACK_BUFFER;l.bindBuffer(i,t),l.bufferData(i,e,l.STREAM_READ),l.readPixels(a,h,u,c,l.RGBA,l.UNSIGNED_BYTE,0),l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindBuffer(i,null),f();const r=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0);await this.VP(()=>l.getSyncParameter(r,l.SYNC_STATUS)===l.SIGNALED),l.deleteSync(r),p=new ImageData(u,c),l.bindBuffer(i,t),l.getBufferSubData(i,0,new Uint8Array(p.data.buffer),0,e),l.bindBuffer(i,null),l.deleteBuffer(t)}else p=new ImageData(u,c),l.readPixels(a,h,u,c,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(p.data.buffer)),f();return p}DL(){this.mL(!0),this.AR().rO(),this.zC=0,this.qC=1}xL(t=!1){this.mL(t),this.AR().nO(),this.zC=0,this.qC=2}CL(){return 2===this.qC}RL(t=!0){this.mL(t),this.AR().aO(),this.zC=0,this.qC=0}LL(t){this.kL()&&(this.AR().FI(t),this.zC=0)}GL(t){this.kL()&&(this.AR().UI(t),this.zC=0)}VP(t){const e=new Promise(e=>Jl.add({resolve:e,aC:t}));return-1===ql&&(ql=self.requestAnimationFrame(Ol)),e}Qb(){return this.Ug*this.Hg*(this.dC.alpha?4:3)}Zb(){let t=0;for(const e of Dl.qv.tP.jP())e.PP()||(t+=e.qT());return t}Xb(){let t=0;for(const e of Dl.qv.vT.QT())t+=e.qT();return t}NL(){return this.mC}xT(){return this.Rx}XP(){return this.IC}jL(){return"webgl"+this.xT()}CT(){return this.xT()>=2}OT(){return this.XC}FL(){return this.KC}BL(){return this.tR}zL(){return this.eR}UL(){return this.iR}HL(){if(this.xT()>=2)return"webgl2";{const t=[];return this.uR&&t.push("EXT_frag_depth"),this.cR&&t.push("OES_standard_derivatives"),this.lR&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}VL(){return this.rR}kL(){return!!this.Lx}kx(){return this.Lx}HP(){return this.nR}vR(){return!!this.aR}FT(){return this.oR}BT(){return this.pR}eC(t){this.mR.add(t)}iC(t){this.mR.delete(t)}Jx(){return this.yR}DT(){return this.$P}gR(t){let e=t.FUNC_ADD,i=t.FUNC_ADD;this.Rx>=2?(e=t.MAX,i=t.MIN):this.fR&&(e=this.fR.MAX_EXT,i=this.fR.MIN_EXT),this.$S([["normal",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["additive",[t.ONE,t.ONE]],["xor",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["copy",[t.ONE,t.ZERO]],["destination-over",[t.ONE_MINUS_DST_ALPHA,t.ONE]],["source-in",[t.DST_ALPHA,t.ZERO]],["destination-in",[t.ZERO,t.SRC_ALPHA]],["source-out",[t.ONE_MINUS_DST_ALPHA,t.ZERO]],["destination-out",[t.ZERO,t.ONE_MINUS_SRC_ALPHA]],["source-atop",[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA]],["destination-atop",[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]],["lighten",[t.ONE,t.ONE,t.ONE,t.ONE,e,e]],["darken",[t.ONE,t.ONE,t.ONE,t.ONE,i,i]],["multiply",[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA]],["screen",[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA]]])}WL(){return this.t_()}}}{const Ql=self.Ee,Zl=self.oe,Xl=Zl.de,Kl=Zl.ce,tf=self.assert,ef=self.GPUBufferUsage,rf=self.GPUShaderStage,sf=self.GPUMapMode,nf=self.GPUTextureUsage,of={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,$L:!1,YL:"bilinear",JL:!1,uC:!1,qL:!0},af=65535,hf=393210,uf=Math.floor(65535/4),cf=65535,lf=4*uf-16,ff=1,pf=2,df=4,mf=8,yf=16,gf=32,vf=64,wf=128,Sf=256,bf=512,_f=1024,Ef=2048,Tf=4096,Pf=8192,Af=16384,Mf=32768,If=65536,Of=1<<17,Df=1<<18,xf=1<<19,Cf=1<<20,Rf=1<<21,Lf=1<<22,kf=1<<23,Gf=1<<24,Nf=1<<25,jf=1<<26,Ff=1<<27,Bf=1<<28,zf=1<<29,Uf=1<<30,Hf=1,Vf=8688,Wf=8697,$f=25072,Yf=7680,Jf=2,qf=4,Qf=2,Zf=4,Xf=new Ql.Ou(0,0,1,0,1,1,0,1),Kf=Ql.$s(Ql.Oh),tp=Ql.$s(Ql.Rect),ep=Ql.$s(Ql.Rect),ip=Ql.$s(Ql.Ou);Ql.qv.QL=class extends Ql.qv.fw{constructor(t){super(t),this.ZL=null,this.XL=null,this.KL=null,this.tk=null,this.ek=null,this.ik=null,this.rk="",this.sk=null,this.nk=null,this.ak=0,this.hk=0,this.uk=Kl.create(),this.EC=null,this.ck=null,this.lk=null,this.fk=null,this.pk=null,this.dk=null,this.PC=0,this.AC=0,this.mk=null,this.yk=null,this.gk=null,this.vk=null,this.qP=null,this.QP=null,this.wk=null,this.ZP=null,this.MC=null,this.Sk=null,this.KP=null,this.bk=Ql.qv.Ek._k(),this.Tk=Ql.qv.Ek.Pk(),this.Ak=null,this.Mk=null,this.Ik=Ql.qv.Ek.Ok(),this.Dk=Ql.qv.Ek.xk(),this.Ck=null,this.Rk=null,this.Lk=Ql.qv.Ek.kk(),this.Gk=Ql.qv.Ek.Nk(),this.jk=null,this.Fk=null,this.Bk=null,this.OC=new Float32Array(196605),this.xC=new Float32Array(131070),this.zk=new Uint32Array(65535),this.CC=null,this.DC=new Uint16Array(393210),this.RC=new Float32Array(4*uf),this.LC=0,this.kC=0,this.Uk=0,this.Hk=Ql.$s(Ql.ba,1,1,1,1),this.GC=0,this.Vk=Ql.$s(Ql.qv.Wk,this),this.$k=32768,this.Yk=0,this.Jk=0,this.qk=0,this.Qk=0,this.Zk=0,this.Xk=0,this.Kk=0,this.tG=0,this.eG=0,this.iG=Ql.$s(Ql.Rect,0,0,0,0),this.rG=Ql.$s(Ql.ba,1,1,1,1),this.sG=Ql.$s(Ql.ba,1,1,1,1),this.nG=Ql.$s(Ql.Rect,0,0,0,0),this.oG=0,this.aG="",this.hG=null,this.uG=null,this.cG=null,this.lG=null,this.fG=null,this.pG=null,this.dG=null,this.mG=null,this.yG=null,this.gG=null,this.vG=null,this.wG=null,this.SG=null,this.bG=new Set,this._G=new Set,this.XC=8192,this.EG=null,this.TG=null,this.PG=null,this.AG=null,this.MG=0,this.IG=0,this.OG=0,this.DG=0,this.xG=null,this.CG=null,this.LG=new Map,this.kG=null,this.GG=null,this.NG=[],this.jG=null,this.UC=null,this.FG=!1,this.BG="bilinear",this.zG=!1,this.SC=!1,this.UG=null,this.HG=!1,this.VG=-1,this.WG=-1,this.$G=new Set,this.YG=null,this.JG=null,this.gR()}dS(){return!0}qG(t,e){e?this.$k|=t:this.$k&=~t}QG(t){return 0!==(this.$k&t)}ZG(t,e){e?this.Yk|=t:this.Yk&=~t}XG(t){return 0!==(this.Yk&t)}async WP(t,e){if(e=Object.assign({},of,e),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");if("Safari"===Ql.Je.Ze||"iOS"===Ql.Je.qe)throw new Error("WebGPU is currently disabled in Safari - see https://bugs.webkit.org/show_bug.cgi?id=301627");e.depth&&(this.$k|=524288),e.qL&&(this.$k|=65536),this.FG=!!e.$L,this.BG=e.YL,this.zG=!!e.JL,this.ZL={},this.SC=!(!e.depth||!e.uC),"default"!==e.powerPreference&&(this.ZL.powerPreference=e.powerPreference),this.ek=t,await this.KG(e.failIfMajorPerformanceCaveat)}async KG(t){for(this.tk=null,await this.tN(t);!this.tk;)this.XL=null,await this.tN(t);await this.Xw()}async tN(t){if(!this.XL){if(this.XL=await navigator.gpu.requestAdapter(this.ZL),!this.XL)throw new Error("renderer-unavailable (no WebGPU adapter available)");const e=this.XL.info;if(t&&e.isFallbackAdapter)throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===e.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056");if("intel"===e.vendor&&("gen-7"===e.architecture||"gen7"===e.architecture))throw new Error("WebGPU disabled on Intel Gen7 GPUs - see https://issues.chromium.org/issues/462468373")}const e=[];if(this.XL.features.has("timestamp-query")&&e.push("timestamp-query"),this.XL.features.has("shader-f16")&&e.push("shader-f16"),this.tk=await this.XL.requestDevice({requiredFeatures:e,requiredLimits:{maxTextureDimension2D:this.XL.limits.maxTextureDimension2D}}),!this.tk)return null;this.XC=this.tk.limits.maxTextureDimension2D,this.qG(134217728,this.tk.features.has("timestamp-query")),this.qG(268435456,this.tk.features.has("shader-f16")),this.qG(536870912,this.QG(268435456)&&void 0!==globalThis.Float16Array),this.tk.lost.then(t=>this.eN(t)),this.qG(32768,!1)}async eN(t){console.log("[WebGPU] Device lost: ",t),super.Kw(),this.Vk.J_(),Ql.qv.iN.J_(),Ql.qv.rN.J_(),Ql.qv.e_.J_(),this.rk="",this.sk=null,this.nk=null,this.EC=null,this.lk=null,this.ck=null,this.fk=null,this.pk=null,this.dk=null,this.qP=null,this.QP=null,this.wk=null,this.ZP=null,this.MC=null,this.Sk=null,this.KP=null,this.mk=null,this.yk=null,this.gk=null,this.vk=null,this.uG=null,this.hG=null,this.wG=null,this.cG=null,this.lG=null,this.fG=null,this.EG=null,this.AG=null,this.pG=null,this.dG=null,this.mG=null,this.yG=null,this.gG=null,this.vG=null,this.TG=null,this.PG=null,this.jG=null,this.UC=null,this.SG=null,this.UG=null,this.xG=null,this.CG=null,this.bG.clear(),this._G.clear(),this.LG.clear();for(const t of this.kw.values())t.J_();this.tk=null,this.XL=null,this.KL=null,this.$k|=32768,this.YG&&this.YG(),await this.KG();for(const t of this.kw.values())t.q_(this);this.$D(this.Ug,this.Hg,!0),this.JG&&this.JG()}async Xw(){super.Xw();const t=this.tk;this.rk=navigator.gpu.getPreferredCanvasFormat(),this.sk=null,this.nk=null;let e=nf.RENDER_ATTACHMENT;this.FG&&(e|=nf.TEXTURE_BINDING),this.zG&&(e|=nf.COPY_SRC),this.rk.startsWith("rgba8")||this.rk.startsWith("bgra8")?this.aG=this.rk:this.aG="rgba8unorm",this.$k&=940113920,this.$k|=7680,this.Yk=0,this.QG(524288)&&(this.$k|=70254592),this.LC=0,this.kC=0,this.MG=0,this.OG=0,this.DG=0,this.IG=0,this.Hk.Aa(1,1,1,1),this.rG.Aa(1,1,1,1),this.sG.Aa(1,1,1,1),this.CC=this.XP()?new globalThis.Float16Array(262140):new Float32Array(262140),this.Ak=new ArrayBuffer(this.Tk),this.Mk=new Float32Array(this.Ak),this.Ck=new ArrayBuffer(this.Dk),this.Rk=new Float32Array(this.Ck),this.jk=new ArrayBuffer(this.Gk),this.Fk=new Float32Array(this.jk),this.Bk=new Uint32Array(this.jk),this.qP=t.createBuffer({label:"vertexbuffer",size:this.OC.byteLength,usage:ef.VERTEX|ef.COPY_DST}),this.QP=t.createBuffer({label:"texcoordbuffer",size:this.xC.byteLength,usage:ef.VERTEX|ef.COPY_DST}),this.wk=t.createBuffer({label:"texindexbuffer",size:this.zk.byteLength,usage:ef.VERTEX|ef.COPY_DST}),this.ZP=t.createBuffer({label:"colorbuffer",size:this.CC.byteLength,usage:ef.VERTEX|ef.COPY_DST}),this.MC=t.createBuffer({label:"indexbuffer",size:this.DC.byteLength,usage:ef.INDEX|ef.COPY_DST}),this.Sk=t.createBuffer({label:"pointsindexbuffer",size:6*uf*2,usage:ef.INDEX,mappedAtCreation:!0});const i=this.Sk.getMappedRange();this.sN(i),this.Sk.unmap(),this.KP=t.createBuffer({label:"pointbuffer",size:this.RC.byteLength,usage:ef.VERTEX|ef.STORAGE|ef.COPY_DST}),this.hG=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:rf.VERTEX,buffer:{type:"uniform",minBindingSize:this.Tk}},{binding:1,visibility:rf.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.Dk}},{binding:3,visibility:rf.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.RC.byteLength}},{binding:4,visibility:rf.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.Gk}},{binding:5,visibility:rf.FRAGMENT,buffer:{type:"uniform"}}]});const r=[],s=Ql.qv.oN.nN();for(let t=0;t<s;++t)r.push({binding:2*t,visibility:rf.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:rf.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.cG=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:r}),this.lG=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:rf.FRAGMENT,sampler:{type:"nearest"===this.BG?"non-filtering":"filtering"}},{binding:1,visibility:rf.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.fG=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:rf.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:rf.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.EG=t.createPipelineLayout({bindGroupLayouts:[this.hG,this.cG,this.lG,this.fG]});const n=Ql.qv.Ek,o=this.aN(),a=this.XP();this.TG=t.createShaderModule({label:"<default vertex module>",code:n.hN(n.pM(a),o)}),this.TG.getCompilationInfo().then(t=>n.uN("<default>","vertex",t)),this.PG=t.createShaderModule({label:"<normalized vertex module>",code:n.hN(n.cN(a),o)}),this.PG.getCompilationInfo().then(t=>n.uN("<normalized>","vertex",t));const h=await Promise.all([n.WP(this,{name:"<default>",src:n.lN(!1,a),fN:n.lN(!0,a),UP:n.pN(a),dN:n.mN(a)}),n.WP(this,{name:"<single-texture-fill>",src:n.yN(!1,a),fN:n.yN(!0,a),UP:n.pN(a),dN:n.mN(a)}),n.WP(this,{name:"<generate-mipmap>",src:n.gN(),UP:n.vN()}),n.WP(this,{name:"<point>",src:n.wN(!1),fN:n.wN(!0),UP:n.SN()}),n.WP(this,{name:"<tilemap>",src:n.bN(!1),fN:n.bN(!0)}),n.WP(this,{name:"<fill>",src:n._N()}),n.WP(this,{name:"<lineargradient>",src:n.EN()}),n.WP(this,{name:"<penumbra>",src:n.TN()}),n.WP(this,{name:"<hardellipse>",src:n.PN()}),n.WP(this,{name:"<hardellipseoutline>",src:n.AN()}),n.WP(this,{name:"<smoothellipse>",src:n.MN()}),n.WP(this,{name:"<smoothellipseoutline>",src:n.IN()}),n.WP(this,{name:"<tilerandomization>",src:n.bM(!1),fN:n.bM(!0)}),n.WP(this,{name:"<smoothline>",src:n.ON()})]);this.Ew=h[0],this.CG=h[1],this.xG=h[2],this.Tw=h[3],this.Pw=h[4],this.Mw=h[5],this.Iw=h[6],this.Ow=h[7],this.Dw=h[8],this.xw=h[9],this.Cw=h[10],this.Rw=h[11],this.Aw=h[12],this.Lw=h[13];for(const t of h)this.vS(t);65536&this.$k?(this.$k|=393216,this.AG=this.Ew):this.AG=this.CG,this.SG=this.xG.DN(),this.mk=t.createBuffer({label:"vertexuniformbuffer",size:this.Tk,usage:ef.UNIFORM|ef.COPY_DST}),this.yk=t.createBuffer({label:"fragmentuniformbuffer",size:this.Dk,usage:ef.UNIFORM|ef.COPY_DST}),this.gk=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.Gk,usage:ef.UNIFORM|ef.COPY_DST}),this.vk=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:ef.UNIFORM|ef.COPY_DST}),this.Qk=0,this.Zk=this.Tk,this.xN(),this.CN(),this.RN(),this.Xk=0,this.Kk=this.Dk,this.LN(),this.kN(),this.uG=this.GN(this.vk),this.wG=this.uG;const u=Ql.ua(32,32);u.getContext("2d"),this.pG=await this.EL(u),this.dG=null,this.mG=this.pG.NN(),this.Uk=0,this.yG=null,this.gG=this.pG.jN(),this.pG.FN(),this.ck=this.tk.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.BN(),usage:nf.TEXTURE_BINDING}),this.fk=this.ck.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.dk=this.tk.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.fG,entries:[{binding:0,resource:this.zN({lT:"nearest"})},{binding:1,resource:this.fk}]}),this.vG=this.dk,this.jG=Ql.$s(Ql.qv.rN,this,!0),this.jG.PP().UN(e,this.rk),this.UC=this.jG,this.HN(),this.KL=this.XL.info,this.ik||(this.ik=this.ek.getContext("webgpu")),this.ik.configure({device:t,format:this.rk,usage:e,alphaMode:"premultiplied"})}GN(t){return this.tk.createBindGroup({layout:this.hG,entries:[{binding:0,resource:{buffer:this.mk}},{binding:1,resource:{buffer:this.yk}},{binding:3,resource:{buffer:this.KP}},{binding:4,resource:{buffer:this.gk}},{binding:5,resource:{buffer:t}}]})}sN(t){const e=new Uint16Array(t);let i=0,r=e.length,s=0;for(;i<r;)e[i++]=s,e[i++]=s+1,e[i++]=s+2,e[i++]=s,e[i++]=s+2,e[i++]=s+3,s+=4}VN(){return this.tk}WN(){return this.TG}$N(){return this.PG}async wR(t){const e=await Ql.qv.Ek.WP(this,t);return this.vS(e),e}jL(){return"webgpu"}YN(){return this.rk}BN(){return"depth24plus-stencil8"}JN(){return this.sk}qN(){return this.nk}QN(){return this.FG}ZN(){return this.zG}XN(){return this.EG}KN(){return this.cG}tj(){return this.lG}ej(){return this.BG}ij(){return this.aG}OT(){return this.XC}Ox(){return this.QG(32768)}kL(){return this.QG(134217728)}aN(){return this.QG(268435456)}XP(){return this.QG(536870912)}Qb(){const t=this.Eg()*this.Pg();let e=t*Ql.qv.iN.rj(this.rk);return this.sj()&&(e+=t*Ql.qv.iN.rj(this.BN())),e}Zb(){let t=0;for(const e of Ql.qv.rN.jP())e.nj()||(t+=e.PP().qT());return t}Xb(){let t=0;for(const e of Ql.qv.iN.QT())e.oj()||(t+=e.qT());return t}CT(){return!0}aj(){return this.Vk}$D(t,e,i){(this.Ug!==t||this.Hg!==e||i)&&(this.Ub(),this.Ug=t,this.Hg=e,this.ak=t,this.hk=e,this.jG.dP(),this._R(this.jG.AP()),this.UC&&this.UC.vP(this.Ug,this.Hg),this.QG(524288)&&this.QG(67108864)&&this.ER(t,e))}ER(t,e){if(this.EC){if(this.PC===t&&this.AC===e)return;this.EC.destroy()}let i=nf.RENDER_ATTACHMENT;this.SC&&(i|=nf.TEXTURE_BINDING),this.EC=this.tk.createTexture({label:"depthbuffer",size:[t,e,1],format:this.BN(),usage:i}),this.lk=this.EC.createView({label:"depthbufferview"}),this.SC&&(this.pk=this.tk.createBindGroup({label:"depthbufferbindgroup",layout:this.fG,entries:[{binding:0,resource:this.zN({lT:"nearest"})},{binding:1,resource:this.EC.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.PC=t,this.AC=e}TR(t,e){this.sj()&&(this.qG(67108864,!1),this.ER(t,e))}PR(){this.sj()&&(this.qG(67108864,!0),this.ER(this.Ug,this.Hg))}_R(t){Kl.L(this.mw,t)||(Kl.v(this.mw,t),this.xN())}MR(){this._R(this.UC.AP())}IR(t){Kl.L(this.yw,t)||(Kl.v(this.yw,t),this.xN())}OR(){this.ZG(1,!1)}DR(){return this.XG(1)}_L(t,e){if(t&&!Ql.qv.iN.hj(t)){const e=t.width||t.videoWidth,i=t.height||t.videoHeight,r=Ql.ua(e,i);r.getContext("2d").drawImage(t,0,0,e,i),t=r}this.Ub();const i=Ql.$s(Ql.qv.iN,this);return i.pP(t,e),i}async EL(t,e){if(Ql.qv.iN.hj(t))return this._L(t,e);{if(!Ql.Mi.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this._L(i,e)}}zN(t){const e=t.uT||"clamp-to-edge",i=t.cT||"clamp-to-edge",r=t.lT;let s=t.fT||0;"trilinear"!==r&&(s=0);const n=`${e},${i},${r},${s}`;let o=this.LG.get(n);if(o)return o;const a={addressModeU:e,addressModeV:i,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==r&&"trilinear"!==r||(a.magFilter="linear",a.minFilter="linear"),"trilinear"===r&&(a.mipmapFilter="linear",s>1&&(a.maxAnisotropy=s)),o=this.tk.createSampler(a),this.LG.set(n,o),o}DN(){return this.SG}mP(t,e,i){this.Ub();const r=Ql.$s(Ql.qv.iN,this);return r.GT(t,e,i),r}Dx(t,e,i){return e.zT(t,i)}wP(t){t&&(t.$T(),t.YT()>0||(this.Ox()||(this.Ub(),this.dG===t&&this.jR(null),this.yG===t&&this.uj(null)),t.UT()))}cj(t,e){this.Ox()||(e?this.bG.add(t):this.bG.delete(t))}lj(t,e){e?this._G.add(t):this._G.delete(t)}fj(t){const e=[t],i=Ql.qv.oN.nN();for(const t of this._G)t.Ys();for(const r of this.bG){if(e.length>=i)break;r!==t&&e.push(r)}e.length<2||Ql.$s(Ql.qv.oN,this,e)}pL(){this.pj()}dj(){this.pj()}pj(){this.sk=this.ik.getCurrentTexture(),this.nk=this.sk.createView({label:"swapchaintextureview"}),this.jG.PP().mj()}zb(){null===this.GG&&this.jG.yj()&&this.gj(),super.zb(),this.Vk.vj(this.Yw),this.jG.PP().wj(),this.sk=null,this.nk=null}HN(){this.kG=this.tk.createCommandEncoder(),this.$k&=-16385}Sj(t){if(!this.kL())throw new Error("GPU profiling not supported");if(this.UG)throw new Error("already started frame timing");return this.HG=!1,this.$G.clear(),this.UG=Ql.$s(Ql.qv.bj,this,t),this.UG}_j(t,e){if(this.kL()){if(!this.UG)throw new Error("not started frame timing");if(t<0||e<0||t===e)throw new Error("invalid timestamp index");this.Ej(),this.HG=!0,this.VG=t,this.WG=e}}Tj(){this.HG&&(this.Ej(),this.HG=!1)}YR(t,e){if(this.LC+t>65535||this.kC+e>393210)this.Ub();else if(1&this.$k)return void(this.qk+=e);null===this.GG&&this.gj(),this.$k|=1,this.Jk=this.kC,this.qk=e}JR(){const t=this.LC;let e=this.kC;this.kC+=6;const i=this.DC;i[e++]=t,i[e++]=t+1,i[e++]=t+2,i[e++]=t,i[e++]=t+2,i[e]=t+3}Pj(){const t=this.$k;if(!(1&t))return;const e=this.GG;if(16&t){const i=this.UC;e.setViewport(0,0,i.Eg(),i.Pg(),0,1),2&t?e.setIndexBuffer(this.Sk,"uint16"):e.setIndexBuffer(this.MC,"uint16"),e.setVertexBuffer(0,this.qP),e.setVertexBuffer(1,this.QP),e.setVertexBuffer(2,this.ZP),e.setVertexBuffer(3,this.wk),25165824&t&&e.setStencilReference(1),4&t&&this.Aj(e,this.iG,i)}if(32&t){let i=0;1073741824&t?i=4:8388608&t?i=2:16777216&t?i=3:3145728&~t||(i=1),e.setPipeline(this.AG.Mj(this.MG,i,this.OG,this.DG,this.IG))}if(8192&t&&e.setBindGroup(0,this.wG),64&t&&e.setBindGroup(1,this.mG),128&t&&e.setBindGroup(2,this.gG),256&t&&e.setBindGroup(3,this.vG),8&t){const i=this.UC;4&t?this.Aj(e,this.iG,i):e.setScissorRect(0,0,i.Eg(),i.Pg())}e.drawIndexed(this.qk,1,this.Jk,0,0),this.$k&=-8698}Aj(t,e,i){const r=i.Eg(),s=i.Pg();let n=Ql.Xs(e.Kh(),0,r),o=Ql.Xs(e.tu(),0,s),a=Ql.Xs(e.eu(),n,r),h=Ql.Xs(e.iu(),o,s);Number.isNaN(n)&&(n=0),Number.isNaN(o)&&(o=0),Number.isNaN(a)&&(a=r),Number.isNaN(h)&&(h=s),t.setScissorRect(n,o,a-n,h-o)}gj(){const t=this.$k;7680&t&&this.Ij();let e=null;e=8388608&t?this.Oj():16777216&t?this.Dj():this.xj(),this.GG=this.kG.beginRenderPass(e),this.$k|=25072}xj(){const t=this.$k,e=this.UC,i={colorAttachments:[{view:e.Cj(),loadOp:e.yj()?"clear":"load",clearValue:e.Rj().toJSON(),storeOp:"store"}]};return this.Lj(i),e.kj(!1),3145728&~t||(i.depthStencilAttachment={view:this.lk,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.$k&=-4194305),i}Oj(){const t=this.$k,e={colorAttachments:[],depthStencilAttachment:{view:this.lk,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.Lj(e),this.$k&=-37748737,e}Dj(){const t=this.UC,e={colorAttachments:[{view:t.Cj(),loadOp:t.yj()?"clear":"load",clearValue:t.Rj().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.lk,depthReadOnly:!0,stencilReadOnly:!0}};return this.Lj(e),t.kj(!1),e}Lj(t){if(!this.HG)return;const e={querySet:this.UG.Gj(),endOfPassWriteIndex:this.WG};this.$G.has(this.VG)||(e.beginningOfPassWriteIndex=this.VG,this.$G.add(this.VG)),t.timestampWrites=e}Nj(t){t.yj()&&(this.Ej(),this.kG.beginRenderPass({colorAttachments:[{view:t.Cj(),loadOp:"clear",clearValue:t.Rj().toJSON(),storeOp:"store"}]}).end(),this.$k|=16384,t.kj(!1))}Ej(){null!==this.GG&&(this.Pj(),this.GG.end(),this.GG=null)}Ub(t=!1){this.Ej(),this.UG&&t&&(this.UG.jj(this.kG),this.$k|=16384),16384&this.$k&&(this.NG.push(this.kG.finish()),this.HN()),0!==this.NG.length&&(this.xR(),this.tk.queue.submit(this.NG),Ql.So(this.NG),this.Vk.Fj(),this.UG&&t&&(this.UG.Bj(),this.UG=null))}xR(){const t=this.tk.queue;if(this.LC>0){const e=this.LC;t.writeBuffer(this.qP,0,this.OC.buffer,0,3*e*4),t.writeBuffer(this.QP,0,this.xC.buffer,0,2*e*4),65536&this.$k&&t.writeBuffer(this.wk,0,this.zk.buffer,0,4*e);const i=this.XP()?2:4;t.writeBuffer(this.ZP,0,this.CC.buffer,0,4*e*i),this.LC=0}this.kC>0&&(this.kC%2!=0&&(this.DC[this.kC++]=0),t.writeBuffer(this.MC,0,this.DC.buffer,0,2*this.kC),this.kC=0),this.GC>0&&(t.writeBuffer(this.KP,0,this.RC.buffer,0,4*this.GC),this.GC=0)}xN(){this.$k|=512,this.Yk|=1,this.zj(this.bk.transform)}CN(){const t=this.bk.Uj;this.nG.Ba(this.Mk,t.offset/4),this.zj(t)}RN(){const t=this.bk.Hj;this.Mk[t.offset/4]=this.oG,this.zj(t)}zj(t){const e=t.offset,i=t.end;1024&this.$k?(this.Qk=Math.min(this.Qk,e),this.Zk=Math.max(this.Zk,i)):(this.$k|=1024,this.Qk=e,this.Zk=i,this.Ej())}LN(){this.Vj(this.rG,this.Ik.Wj)}kN(){this.Vj(this.sG,this.Ik.$j)}Vj(t,e){t.Ba(this.Rk,e.offset/4),this.Yj(e)}Jj(t,e){t.Ba(this.Rk,e.offset/4),this.Yj(e)}Yj(t){const e=t.offset,i=t.end;2048&this.$k?(this.Xk=Math.min(this.Xk,e),this.Kk=Math.max(this.Kk,i)):(this.$k|=2048,this.Xk=e,this.Kk=i,this.Ej())}qj(t,e){this.Fk[e.offset/4]!==Math.fround(t)&&(this.Fk[e.offset/4]=t,this.Qj(e))}Zj(t,e){this.Bk[e.offset/4]!==t&&(this.Bk[e.offset/4]=t,this.Qj(e))}Xj(t,e){t.$a(this.Fk,e.offset/4)||(t.Ba(this.Fk,e.offset/4),this.Qj(e))}Qj(t){const e=t.offset,i=t.end;4096&this.$k?(this.tG=Math.min(this.tG,e),this.eG=Math.max(this.eG,i)):(this.$k|=4096,this.tG=e,this.eG=i,this.Ej())}Ij(){const t=this.$k;512&t&&(Kl.multiply(this.uk,this.mw,this.yw),this.Mk.set(this.uk,this.bk.transform.offset/4)),1024&t&&this.Vk.Kj(this.kG,this.mk,this.Ak,this.Qk,this.Zk-this.Qk),2048&t&&this.Vk.Kj(this.kG,this.yk,this.Ck,this.Xk,this.Kk-this.Xk),4096&t&&this.Vk.Kj(this.kG,this.gk,this.jk,this.tG,this.eG-this.tG),this.$k=-7681&t|16384}TL(t){let e=this.Ug,i=this.Hg,r=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),r=!1),"number"==typeof t.height&&(i=Math.floor(t.height),r=!1)),e<=0||i<=0)throw new Error("invalid size");this.Ub();const s=Ql.$s(Ql.qv.rN,this);return s.pP(e,i,Object.assign({XT:r},t)),s}PL(t,e=!0){null===t&&(t=this.jG),this.UC!==t&&(this.Ej(),this.UC=t,this.qG(2097152,t.DP()),t.xP()&&!t.nj()&&t.vP(this.Ug,this.Hg),e&&this.MR())}IL(t){}wL(){return this.UC===this.jG?null:this.UC}tL(t){return null===t?[this.Ug,this.Hg]:[t.Eg(),t.Pg()]}tF(){return this.jG}OL(t){this.Ub(),this.UC===t&&this.PL(null);const e=t.PP();this.dG===e&&this.jR(null),this.yG===e&&this.uj(null),t.UT()}async NP(t,e,i){this.Nj(t),this.Ub(),null===t&&(t=this.jG);const r=this.tk,s=t.Eg(),n=t.Pg();let o=0,a=0,h=s,u=n;if(i){o=Ql.Xs(Math.floor(i.Kh()),0,s-1),a=Ql.Xs(Math.floor(i.tu()),0,n-1);let t=i.width();t=0===t?s-o:Ql.Xs(Math.floor(t),0,s-o);let e=i.height();e=0===e?n-a:Ql.Xs(Math.floor(e),0,n-a),h=t,u=e}const c=r.createCommandEncoder(),l=t.PP();let f=l.VT(),p=null;"rgba8unorm"===l.eF()?l.iF()||Ql.Ss():(p=this.rF(l,"rgba8unorm",c),f=p);const d=4*h,m=256*Math.ceil(d/256),y=r.createBuffer({size:m*u,usage:ef.MAP_READ|ef.COPY_DST});c.copyTextureToBuffer({texture:f,origin:[o,a,0]},{buffer:y,bytesPerRow:m},[h,u,1]);const g=c.finish();r.queue.submit([g]),p&&p.destroy(),await y.mapAsync(self.GPUMapMode.READ);const v=y.getMappedRange().slice(0);let w;if(m===d)w=new ImageData(new Uint8ClampedArray(v),h,u);else{const t=new ArrayBuffer(d*u),e=new Uint8Array(t);for(let t=0;t<u;++t){const i=t*m,r=t*d;e.set(new Uint8Array(v,i,d),r)}w=new ImageData(new Uint8ClampedArray(t),h,u)}return y.destroy(),w}rF(t,e,i){const r=this.tk,s=t.Eg(),n=t.Pg();if(t.eF()===e)throw new Error("no conversion necessary");t.OP()||Ql.Ss();const o=r.createTexture({size:[s,n,1],format:e,usage:nf.COPY_SRC|nf.RENDER_ATTACHMENT}),a=this.xG.DN(e),h=a.getBindGroupLayout(0),u=this.zN({lT:"nearest"}),c=t.VT().createView({baseMipLevel:0,mipLevelCount:1}),l=o.createView({baseMipLevel:0,mipLevelCount:1}),f=i.beginRenderPass({colorAttachments:[{view:l,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),p=r.createBindGroup({layout:h,entries:[{binding:0,resource:u},{binding:1,resource:c}]});return f.setPipeline(a),f.setBindGroup(0,p),f.draw(4),f.end(),o}mL(t){524288&this.$k&&(t=!!t,!!(1048576&this.$k)!==t&&(2097152&this.$k&&this.Ej(),this.qG(1048576,t)))}yL(){return this.QG(1048576)}sj(){return this.QG(524288)}gL(t){if(!this.SC)return;if(t&&this.yL())throw new Error("depth still enabled");const e=t?this.pk:this.dk;this.vG!==e&&(this.Pj(),this.vG=e,this.$k|=256)}Rc(t){this.Ej(),this.UC.kj(!0),this.UC.Rj().set(t)}fL(t,e,i,r){this.Ej(),this.UC.kj(!0),this.UC.Rj().Aa(t,e,i,r)}dL(){2621440&~this.$k||(this.Ej(),this.$k|=4194304)}vL(t,e,i,r){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),r=Math.floor(r),4&this.$k&&this.iG.Xh(t,e,i,r)||(this.Pj(),this.$k|=12,this.iG.Wh(t,e,i,r))}SL(){4&this.$k&&(this.Pj(),this.$k&=-5,this.$k|=8)}bS(){return 65536&this.$k?this.Ew:this.CG}_S(){this.ES(this.bS())}ES(t){if(this.AG!==t){if(t===this.Ew&&!(65536&this.$k))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.Pj(),this.AG=t,this.Gw=null,this.$k|=32,this.sF(t===this.Ew)}}sL(){return this.AG}sF(t){if(t=!!t,!!(131072&this.$k)===t)return;this.qG(131072,t);const e=null===this.dG?this.pG:this.dG;this.nF(e)}oF(t){t=!!t,!!(262144&this.$k)!==t&&(this.Pj(),this.qG(262144,t),this.qG(32,!0))}aF(t){t=!!t,!!(1073741824&this.$k)!==t&&(this.Pj(),this.qG(1073741824,t),this.$k|=32)}hF(){return this.QG(1073741824)}jR(t){t!==this.dG&&(this.dG=t,null===t&&(t=this.pG),this.nF(t))}nF(t){if(131072&this.$k){const e=t.uF();if(null!==e)return this.cF(e),this.Uk=t.lF(),void this.oF(!0)}this.cF(t.NN()),this.Uk=0,this.oF(!1)}cF(t){t!==this.mG&&(this.Pj(),this.mG=t,this.$k|=64)}fF(t){this.dG===t&&(this.Pj(),this.mG=t.NN(),this.$k|=64)}pF(t){if(this.mG!==t)return;this.Pj();const e=null===this.dG?this.pG:this.dG;this.mG=e.NN(),this.Uk=0,this.$k|=64}uj(t){t!==this.yG&&(this.yG=t,null===t&&(t=this.pG),this.Pj(),this.gG=t.jN(),this.$k|=128)}dF(t,e,i,r,s,n){const o=t.mF(),a=e.mF();if(0===(o&nf.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(a&nf.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===e)throw new Error("invalid destination");const h=Math.min(t.Eg(),e.Eg()),u=Math.min(t.Pg(),e.Pg());s=Math.min(s,h-i),n=Math.min(n,u-r),s<=0||n<=0||(this.Ej(),this.kG.copyTextureToTexture({texture:t.VT(),origin:[i,r]},{texture:e.VT(),origin:[i,r]},[s,n]),this.$k|=16384)}yF(t){return t>=2?4:1}gF(t){t=this.yF(t),this.IG!==t&&(this.Pj(),this.IG=t,this.$k|=32)}W_(t){t!==this.MG&&(this.Pj(),this.MG=t,this.Gw=null,this.$k|=32)}BR(t){this.W_(this.JS(t))}UR(){this.W_(0)}WR(){this.W_(3)}LR(t,e,i,r){const s=this.Hk;s.Wa(t,e,i,r)||(s.Aa(t,e,i,r),this.Gw=null)}kR(t){const e=this.Hk;e.ja()!==t&&(e.Ra(t),this.Gw=null)}RR(){return this.Hk.ja()}Y_(t){const e=this.Hk;e.equals(t)||(e.set(t),this.Gw=null)}GR(){this.LR(1,1,1,1)}NR(){return this.Hk}Nb(t){t!==this.OG&&(this.Pj(),this.OG=t,this.Gw=null,this.$k|=32)}HR(){return this.OG}jb(t){t!==this.DG&&(this.Pj(),this.DG=t,this.Gw=null,this.$k|=32)}VR(){return this.DG}Rect(t){this.$R(t.Kh(),t.tu(),t.eu(),t.iu())}$R(t,e,i,r){this.Bb(t,e,i,e,i,r,t,r)}vF(t){const e=this.zk,i=this.Uk;e[t++]=i,e[t++]=i,e[t++]=i,e[t]=i}Ou(t){this.qR(t,Xf)}Bb(t,e,i,r,s,n,o,a){this.YR(4,6),this.JR();const h=this.OC,u=this.LC;this.LC+=4;let c=3*u;const l=this.Fw+this.Bw;h[c++]=t,h[c++]=e,h[c++]=l,h[c++]=i,h[c++]=r,h[c++]=l,h[c++]=s,h[c++]=n,h[c++]=l,h[c++]=o,h[c++]=a,h[c]=l,Xf.Ba(this.xC,2*u),262144&this.$k&&this.vF(u),this.Hk.za(this.CC,4*u)}hb(t,e){this.YR(4,6),this.JR();const i=this.LC;this.LC+=4,t.qu(this.OC,3*i,this.Fw+this.Bw),e.nu(this.xC,2*i),262144&this.$k&&this.vF(i),this.Hk.za(this.CC,4*i)}qR(t,e){this.YR(4,6),this.JR();const i=this.LC;this.LC+=4,t.qu(this.OC,3*i,this.Fw+this.Bw),e.Ba(this.xC,2*i),262144&this.$k&&this.vF(i),this.Hk.za(this.CC,4*i)}QR(t,e,i){this.YR(4,6),this.JR();const r=this.LC;this.LC+=4,t.qu(this.OC,3*r,this.Fw+this.Bw),e.Ba(this.xC,2*r),262144&this.$k&&this.vF(r),this.CC.set(i,4*r)}ZR(t,e,i,r,s,n,o,a,h,u,c,l,f){this.YR(4,6),this.JR();const p=this.OC,d=this.LC;this.LC+=4;let m=3*d;const y=this.Fw+this.Bw;p[m++]=t,p[m++]=e,p[m++]=y+i,p[m++]=r,p[m++]=s,p[m++]=y+n,p[m++]=o,p[m++]=a,p[m++]=y+h,p[m++]=u,p[m++]=c,p[m]=y+l,f.nu(this.xC,2*d),262144&this.$k&&this.vF(d),this.Hk.za(this.CC,4*d)}rb(t,e,i,r,s,n,o,a,h,u,c,l,f){this.YR(4,6),this.JR();const p=this.OC,d=this.LC;this.LC+=4;let m=3*d;const y=this.Fw+this.Bw;p[m++]=t,p[m++]=e,p[m++]=y+i,p[m++]=r,p[m++]=s,p[m++]=y+n,p[m++]=o,p[m++]=a,p[m++]=y+h,p[m++]=u,p[m++]=c,p[m]=y+l,f.Ba(this.xC,2*d),262144&this.$k&&this.vF(d),this.Hk.za(this.CC,4*d)}XR(t,e,i,r,s,n,o,a,h,u,c,l,f,p){this.YR(4,6),this.JR();const d=this.OC,m=this.LC;this.LC+=4;let y=3*m;const g=this.Fw+this.Bw;d[y++]=t,d[y++]=e,d[y++]=g+i,d[y++]=r,d[y++]=s,d[y++]=g+n,d[y++]=o,d[y++]=a,d[y++]=g+h,d[y++]=u,d[y++]=c,d[y]=g+l,f.Ba(this.xC,2*m),262144&this.$k&&this.vF(m),this.CC.set(p,4*m)}tT(t,e,i,r){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.YR(t.length,i.length);const s=this.LC;this.OC.set(t,3*s),this.xC.set(e,2*s),262144&this.$k&&this.zk.fill(this.Uk,s,s+t.length);const n=this.DC;if(0===s)n.set(i,this.kC);else{let t=this.kC;for(let e=0,r=i.length;e<r;++e)n[t++]=i[e]+s}const o=this.CC;if(null!=r)o.set(r,4*s);else{const e=this.Hk,i=e.ka(),r=e.Ga(),n=e.Na(),a=e.ja();let h=4*s;for(let e=0,s=t.length;e<s;++e)o[h++]=i,o[h++]=r,o[h++]=n,o[h++]=a}this.LC+=t.length/3,this.kC+=i.length}eL(t){this.nG.equals(t)||(this.nG.v(t),this.CN());const e=this.Fw+this.Bw;this.oG!==e&&(this.oG=e,this.RN()),this.sG.equals(this.Hk)||(this.sG.v(this.Hk),this.kN()),this.ES(this.TS()),this.qk=0,this.$k|=18}iL(){this.qk>0&&this.Pj(),this.$k&=-3,this.$k|=16}rL(t,e,i,r){let s=this.GC;s>lf&&(this.Ub(),s=0),1&this.$k?this.qk+=6:(null===this.GG&&this.gj(),this.$k|=1,this.Jk=s/4*6,this.qk=6);const n=this.RC;n[s++]=t,n[s++]=e,n[s++]=i,n[s++]=r,this.GC=s}oL(t){this.rG.equals(t)||(this.rG.v(t),this.LN())}aL(t,e,i=1){const r=this.Ik,s=this.Rk;Kf.set(t,e),Kf.$a(s,r.wF.offset/4)||this.Jj(Kf,r.wF),s[r.SF.offset/4]!==Math.fround(i)&&(s[r.SF.offset/4]=i,this.Yj(r.SF))}hL(t,e,i,r,s,n,o){const a=this.Ik,h=this.Rk;t.$a(h,a.bF.offset/4)||(t.Ba(h,a.bF.offset/4),this.Yj(a.bF)),Kf.set(r/e,s/i),Kf.$a(h,a._F.offset/4)||this.Jj(Kf,a._F),Kf.set(n/e,o/i),Kf.$a(h,a.EF.offset/4)||this.Jj(Kf,a.EF)}uL(t,e,i,r,s,n,o){const a=this.Ik,h=this.Rk;Kf.set(i,r),Kf.$a(h,a._F.offset/4)||this.Jj(Kf,a._F),h[a.SF.offset/4]!==Math.fround(s)&&(h[a.SF.offset/4]=s,this.Yj(a.SF)),Kf.set(n,o),Kf.$a(h,a.EF.offset/4)||this.Jj(Kf,a.EF)}cL(t,e,i,r,s,n,o,a,h,u,c){const l=this.Lk,f=this.AG;c%=10800,f.C_()&&this.uj(t),f.TF()&&(this.Xj(e,l.PF),this.Xj(i,l.bF),this.Xj(r,l.AF),this.Xj(s,l.MF)),this.qj(a,l.devicePixelRatio),this.qj(h,l.IF),this.qj(u,l.OF),this.qj(c,l.ey),this.qj(this.nS(),l.DF),this.qj(this.aS(),l.xF)}lL(t){t&&(t.CF()&&(this.Ej(),t.RF(this.kG)),this.LF(t.kF()))}GF(t){this.Zj(t?1:0,this.Lk.NF)}LF(t){t!==this.wG&&(this.Pj(),this.wG=t,this.$k|=8192)}jF(t){this.wG===t&&this.LF(this.uG)}AL(t){if(t.yj())return this.UC.kj(!0),void this.UC.Rj().set(t.Rj());t.CP()>=2&&this.UC.CP()<2?this.FF(t):(this.fL(0,0,0,0),this.WR(),this.GR(),this.ML(t))}ML(t){this.Nj(t);const e=t.PP();this.jR(e),this.KR()}KR(){const t=this.hF();t||this.aF(!0),this.ZS(0);const e=ip,i=tp;e.set(0,-1,0,-1,2,1,0,1),i.set(0,-1,2,1),this.hb(e,i),t||this.aF(!1)}FF(t){this.Nj(t),this.Ej(),this.kG.beginRenderPass({colorAttachments:[{view:t.PP().Cj(),resolveTarget:this.UC.PP().Cj(),loadOp:"load",storeOp:"store"}]}).end(),this.$k|=16384}DL(){this.Ej(),this.mL(!0),this.$k|=41943040}xL(t=!1){this.Ej(),this.mL(t),this.$k&=-8388609,this.$k|=16777216}CL(){return this.QG(16777216)}RL(t=!0){this.Ej(),this.mL(t),this.$k&=-16777217}gR(){this.$S([["normal",["one","one-minus-src-alpha"]],["additive",["one","one"]],["xor",["one","one-minus-src-alpha"]],["copy",["one","zero"]],["destination-over",["one-minus-dst-alpha","one"]],["source-in",["dst-alpha","zero"]],["destination-in",["zero","src-alpha"]],["source-out",["one-minus-dst-alpha","zero"]],["destination-out",["zero","one-minus-src-alpha"]],["source-atop",["dst-alpha","one-minus-src-alpha"]],["destination-atop",["one-minus-dst-alpha","src-alpha"]],["lighten",["one","one","one","one","max","max"]],["darken",["one","one","one","one","min","min"]],["multiply",["dst","one-minus-src-alpha","one","one-minus-src-alpha"]],["screen",["one","one-minus-src","one","one-minus-src-alpha"]]])}BF(){return this.XL?[...this.XL.features]:[]}zF(){return this.KL}UF(){const t=this.KL;if(!t)return"unknown/unknown";const e=t.vendor||"unknown",i=t.architecture||"unknown",r=[];return t.device&&r.push(t.device),t.description&&r.push(t.description),t.type&&r.push(t.type),t.backend&&r.push(t.backend),e+"/"+i+(r.length>0?` (${r.join(", ")})`:"")}}}{const rp=self.Ee,sp=!0;rp.qv.Wk=class{constructor(t){this.r_=t,this.HF=new Map,this.VF=[],this.WF=[],this.$F=[],this.YF=0,this.JF=0,this.qF=0,this.QF=0,this.ZF=0,this.XF=0}E_(){return this.r_}J_(){this.HF.clear(),rp.So(this.VF),rp.So(this.WF),rp.So(this.$F)}KF(t){return Math.max(rp._n(t),16)}tB(t){this.ZF++;const e=this.KF(t);{const t=this.HF.get(e);if(void 0!==t&&t.length>0){const i=t.pop();return i.eB(),0===t.length&&this.HF.delete(e),i}}return this.YF++,this.JF+=e,this.qF++,rp.$s(rp.qv.iB,this,e)}rB(t){this.XF++;const e=t.Nc(),i=this.HF.get(e);void 0===i?this.HF.set(e,[t]):i.push(t)}sB(t){this.$F.push(t)}Fj(){for(const t of this.VF)t.nB();rp.So(this.VF);for(const t of this.WF)this.YF--,this.JF-=t.Nc(),t.Ys();rp.So(this.WF);for(const t of this.$F)t.destroy();rp.So(this.$F)}vj(t){t%30==0&&this.oB(t)}oB(t){for(const[e,i]of this.HF.entries()){let r=0;for(let e=0,s=i.length;e<s;++e){const s=i[e];s.aB(t)?(this.YF--,this.JF-=s.Nc(),s.Ys(),this.QF++):(i[r]=s,++r)}0===r?this.HF.delete(e):rp.wo(i,r)}this.hB()}Kj(t,e,i,r,s){const n=this.tB(s),o=n.uB(),a=o.getMappedRange(0,s);new Uint8Array(a).set(new Uint8Array(i,r,s)),o.unmap(),t.copyBufferToBuffer(o,0,e,r,s),this.VF.push(n)}hB(){this.qF=0,this.QF=0,this.ZF=0,this.XF=0}}}{const np=self.Ee,op=self.GPUBufferUsage,ap=self.GPUMapMode,hp=self.assert,up=0,cp=1,lp=2;np.qv.iB=class{constructor(t,e){this.Vk=t,this.cB=1,this.lB=e,this.tC=this.E_().VN().createBuffer({mappedAtCreation:!0,size:e,usage:op.COPY_SRC|op.MAP_WRITE}),this.fB=0}E_(){return this.Vk.E_()}pB(){return this.cB}Nc(){return this.lB}uB(){return this.tC}eB(){this.cB=1}async nB(){this.cB=2;try{await this.tC.mapAsync(ap.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.E_().Ox()||(this.cB=0,this.fB=this.E_().Hb(),this.Vk.rB(this))}dB(){this.cB=0}aB(t){return this.fB<=t-25}Ys(){this.tC.destroy(),this.tC=null,this.Vk=null}}}{const fp=self.Ee,pp=self.assert,dp=self.GPUBufferUsage;fp.qv.mB=class{constructor(t){const e=t.E_();this.N_=t,this.yB=t.gB(),this.vB=new ArrayBuffer(this.yB),this.wB=new Float32Array(this.vB),this.SB=!1,this.tC=e.VN().createBuffer({size:this.yB,usage:dp.UNIFORM|dp.COPY_DST}),this.bB=e.GN(this.tC)}Ys(){this.E_().jF(this.bB),this.E_().aj().sB(this.tC),this.tC=null,this.N_=null,this.vB=null,this.wB=null,this.bB=null}E_(){return this.N_.E_()}$A(){return this.N_}kF(){return this.bB}_B(t,e){const i=this.N_.EB(t),r=i.type,s=i.offset/4,n=this.wB;if("color"===r){if(e.Ya(n,s))return;e.Ua(n,s),this.SB=!0}else{if("float"!==r&&"percent"!==r)throw new Error(`unexpected shader param type '${r}'`);if(n[s]===Math.fround(e))return;n[s]=e,this.SB=!0}}CF(){return this.SB}RF(t){this.E_().aj().Kj(t,this.tC,this.vB,0,this.yB),this.SB=!1}}}{let mp=function(t){for(const e of Object.values(t))e.end=e.offset+e.size},yp=function(t){const e=[];for(let i=0;i<t;++i)e.push(null);return e},gp=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},vp=function(t,e,i,r,s){return t<<10|e<<7|i<<5|r<<4|s};UpdateLayoutEndValues=mp,makeNullFilledArray=yp,GetFragmentInputStructDeclaration=gp,HashPipelineState=vp;const wp=self.Ee,Sp=4,bp=2,_p=4,Ep=8,Tp=16,Pp=64,Ap="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",Mp={transform:{offset:0,size:64,end:0},Uj:{offset:64,size:16,end:0},TB:{offset:64,size:8,end:0},PB:{offset:72,size:8,end:0},Hj:{offset:80,size:4,end:0}};mp(Mp);const Ip=Mp.Hj.end,Op="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",Dp={Wj:{offset:0,size:16,end:0},$j:{offset:16,size:16,end:0},_F:{offset:32,size:8,end:0},EF:{offset:40,size:8,end:0},bF:{offset:48,size:16,end:0},AB:{offset:48,size:8,end:0},MB:{offset:56,size:8,end:0},wF:{offset:64,size:8,end:0},SF:{offset:72,size:4,end:0}};mp(Dp);const xp=Dp.SF.end,Cp="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",Rp=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Lp=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],kp={bF:{offset:0,size:16,end:0},IB:{offset:0,size:8,end:0},OB:{offset:8,size:8,end:0},AF:{offset:16,size:16,end:0},DB:{offset:16,size:8,end:0},xB:{offset:24,size:8,end:0},MF:{offset:32,size:16,end:0},CB:{offset:32,size:8,end:0},RB:{offset:40,size:8,end:0},PF:{offset:48,size:16,end:0},LB:{offset:48,size:8,end:0},kB:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},IF:{offset:68,size:4,end:0},OF:{offset:72,size:4,end:0},ey:{offset:76,size:4,end:0},DF:{offset:80,size:4,end:0},xF:{offset:84,size:4,end:0},NF:{offset:88,size:4,end:0}};mp(kp);const Gp=kp.NF.end,Np="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",jp=new Map([["float",4],["percent",4],["color",12]]),Fp=new Map([["float",4],["percent",4],["color",16]]),Bp="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";wp.qv.Ek=class extends wp.qv.i_{constructor(t,e){if(super(t,e),this.GB=e.NB,this.jB=e.BB,this.zB=e.UB,this.PG=e.HB,this.VB=new Map,this.WB=new Map,this.$B=!1,this.YB=!1,this.Ne=[],this.JB=0,e.parameters){let t=0;for(const i of e.parameters){const e=i[2];if(!jp.has(e))throw new Error(`unrecognized effect param type '${e}'`);const r=jp.get(e),s=Fp.get(e),n=t%s;0!==n&&(t+=s-n),this.Ne.push({type:e,offset:t,size:r,end:t+r}),t+=r}this.JB=16*Math.ceil(t/16)}}static async WP(t,e){const i=t.VN(),r=e.name,s=t.aN(),n=t.XP(),o=e.src,a=wp.qv.Ek.qB(o,s,n),h=i.createShaderModule({label:r,code:a});let u,c=null;if(e.fN){const t=wp.qv.Ek.qB(e.fN,s,n);c=i.createShaderModule({label:r,code:t})}h.getCompilationInfo().then(t=>wp.qv.Ek.uN(r,"fragment",t));const l=wp.qv.Ek.hN(e.UP,s);let f;l?(u=i.createShaderModule({label:r,code:l}),u.getCompilationInfo().then(t=>wp.qv.Ek.uN(r,"vertex",t))):u=t.WN();const p=wp.qv.Ek.hN(e.dN,s);p?(f=i.createShaderModule({label:r,code:p}),f.getCompilationInfo().then(t=>wp.qv.Ek.uN(r,"vertex (norm)",t))):f=t.$N();const d=wp.$s(wp.qv.Ek,t,Object.assign({NB:h,BB:c,UB:u,HB:f},e));if(d.b_=o.includes("%%C3PARAMS_STRUCT%%")&&Rp.some(t=>o.includes(t)),d.$B=d.b_||o.includes("%%C3PARAMS_STRUCT%%")&&Lp.some(t=>o.includes(t)),d.YB=o.includes("%%C3PARAMS_STRUCT%%")&&o.includes("isSrcTexRotated"),"<generate-mipmap>"!==r){const e=d.QB(0,0,0,0,0);let i=null;t.sj()&&(i=d.QB(0,1,0,0,0));const[r,s]=await Promise.all([e,i]);d.VB.set(vp(0,0,0,0,0),r),s&&d.VB.set(vp(0,1,0,0,0),s)}return d}static ZB(t,e){if(!t)return t;let i="";return i=e?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",i+t}static qB(t,e,i){return t=wp.qv.Ek.ZB(t,e),wp.Hm(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":gp(i),"%%FRAGMENTOUTPUT_STRUCT%%":Np,"%%C3PARAMS_STRUCT%%":Cp,"%%C3_UTILITY_FUNCTIONS%%":Bp})}static hN(t,e){return wp.qv.Ek.ZB(t,e)}static uN(t,e,i){for(const r of i.messages){const i=`[WebGPU] Message (${r.type}) compiling ${e} shader '${t}': ${r.message} (line ${r.lineNum}, pos ${r.linePos})`;"error"===r.type?console.error(i):"warning"===r.type?console.warn(i):console.log(i)}}Ys(){this.GB=null,this.jB=null,this.zB=null,this.PG=null,this.VB.clear(),this.WB.clear(),super.Ys()}VN(){return this.r_.VN()}XN(){return this.r_.XN()}E_(){return this.r_}TF(){return this.$B}G_(){return this.YB}YA(){return this.Ne.length}JA(t){return t<0||t>=this.Ne.length?null:this.Ne[t].type}gB(){return this.JB}EB(t){return this.Ne[t]}XB(t,e,i,r,s){const n=this.r_,o=n.XP(),a=n.YS(t);let h=a[0],u=a[1],c=h,l=u,f="add",p="add";a.length>=4&&(c=a[2],l=a[3]),6===a.length&&(f=a[4],p=a[5]);let d="none";switch(i){case 1:d="back";break;case 2:d="front"}const m={label:`${this.Dl()} blendMode ${t} variant ${e} multisampleCount ${s}`,layout:this.XN(),primitive:{cullMode:d,frontFace:0===r?"cw":"ccw"},vertex:{module:4===e?this.PG:this.zB,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(o?2:4),attributes:[{shaderLocation:2,offset:0,format:o?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.GB,entryPoint:"main",targets:[{format:n.YN(),blend:{color:{srcFactor:h,dstFactor:u,operation:f},alpha:{srcFactor:c,dstFactor:l,operation:p}}}]}};if(s>=2&&(m.multisample={count:s}),1===e)m.fragment.module=this.jB||this.GB,m.depthStencil={format:n.BN(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===e){m.fragment.module=this.jB||this.GB,m.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};m.depthStencil={format:n.BN(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===e){m.fragment.module=this.jB||this.GB;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};m.depthStencil={format:n.BN(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return m}KB(t,e,i,r,s){return this.VN().createRenderPipeline(this.XB(t,e,i,r,s))}QB(t,e,i,r,s){return this.VN().createRenderPipelineAsync(this.XB(t,e,i,r,s))}Mj(t,e,i,r,s){const n=vp(t,e,i,r,s);let o=this.VB.get(n);return o||(o=this.KB(t,e,i,r,s),this.VB.set(n,o),o)}static _k(){return Mp}static Pk(){return 16*Math.ceil(Ip/16)}static Ok(){return Dp}static xk(){return 16*Math.ceil(xp/16)}static kk(){return kp}static Nk(){return 16*Math.ceil(Gp/16)}static pM(t){const e=t?"f16":"f32";return`\n\t\t${Ap}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${e}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static cN(t){const e=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${e}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static pN(t){const e=t?"f16":"f32";return`\n\t\t${Ap}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${e}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static mN(t){const e=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${e}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static lN(t,e){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static yN(t,e){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${e?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static vN(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static gN(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}DN(t){t||(t=this.r_.ij());let e=this.WB.get(t);return e||(e=this.VN().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.zB,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.GB,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.WB.set(t,e)),e}static SN(){return`\n\t\t${Ap}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static wN(t){return`\n\t\t${Op}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static bN(t){return`\n\t\t${Op}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static bM(t){return`\n${Op}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static _N(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static EN(){return`\n\t\t${Op}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static TN(){return`\n\t\t${Op}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static PN(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static AN(){return`\n\t\t${Op}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static MN(){return`\n\t\t${Op}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static IN(){return`\n\t\t${Op}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static ON(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const zp=self.Ee,Up=new Set(["nearest","bilinear","trilinear"]),Hp=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Vp=self.GPUTextureUsage,Wp={uT:"clamp-to-edge",cT:"clamp-to-edge",lT:"trilinear",fT:0,dT:!0,tz:!1,ZT:!1,ez:!1,iz:!1,KT:0,width:-1,height:-1},$p=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],Yp=new Map;for(const[Qp,Zp]of $p)for(const Xp of Zp)Yp.set(Xp,Qp);const Jp=new Set,qp={yT:!0,flipY:!1};zp.qv.iN=class{constructor(t,e){this.r_=t,this.wT=null,this.rz="",this.sz=null,this.nz=null,this.oz=null,this.az=null,this.Ug=0,this.Hg=0,this.ST=!0,this.bT="clamp-to-edge",this._T="clamp-to-edge",this.ET="trilinear",this.TT=0,this.AT=!1,this.Wd=0,this.hz=!1,this.aP=!1,this.uz=!1,this.cz=!1,this.hP=0,this.lz=0,this.fz=!0,this.pz=null,this.dz=0,this.mz=!!e,this.mz&&(this.rz=this.r_.YN(),this.hz=!0,this.aP=this.r_.QN(),this.ET=this.r_.ej(),this.nz=this.r_.zN({lT:this.ET}))}yz(t){if(this.bT=t.uT,this._T=t.cT,this.ET=t.lT,this.TT=t.fT,this.AT=!!t.dT&&this.r_.$b()&&"nearest"!==t.lT,this.hz=!!t.tz,this.aP=!!t.ZT,this.uz=!!t.ez,this.cz=!!t.iz,this.hP=this.r_.yF(t.KT),!Up.has(this.ET))throw new Error("invalid sampling");if(!Hp.has(this.bT)||!Hp.has(this._T))throw new Error("invalid wrap mode");if(this.hP>=2&&this.aP)throw new Error("invalid use of multisampling");"nearest"===this.ET&&(this.TT=0),this.nz=this.r_.zN({uT:this.bT,cT:this._T,lT:this.ET,fT:this.TT}),this.gz(),this.Wd=1}gz(){const t=this.r_,e=t.VN();this.lz=0,this.hz?(this.lz=Vp.RENDER_ATTACHMENT,this.aP&&(this.lz|=Vp.TEXTURE_BINDING),this.cz&&(this.lz|=Vp.COPY_DST),this.rz=this.r_.YN()):(this.lz=Vp.COPY_DST|Vp.TEXTURE_BINDING,this.rz=this.r_.ij()),this.uz&&(this.lz|=Vp.COPY_SRC),this.wT=e.createTexture({size:[this.Ug,this.Hg,1],mipLevelCount:this.vz(),format:this.rz,usage:this.lz,sampleCount:this.hP>=2?this.hP:1}),this.sz=this.wT.createView();const i=[],r=zp.qv.oN.nN();for(let t=0;t<r;++t)i.push({binding:2*t,resource:this.nz},{binding:2*t+1,resource:this.sz});this.hz&&!this.aP||(this.oz=e.createBindGroup({layout:t.KN(),entries:i}),this.az=e.createBindGroup({layout:t.tj(),entries:[{binding:0,resource:this.r_.zN({lT:this.r_.ej()})},{binding:1,resource:this.sz}]})),this.wz()&&this.cj(!0),Jp.add(this)}Sz(){Jp.delete(this),this.pz&&this.pz.Ys(),this.cj(!1),this.wT.destroy(),this.wT=null,this.sz=null,this.oz=null,this.az=null}static hj(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static bz(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}_z(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}pP(t,e){if(t&&!zp.qv.iN.hj(t))throw new TypeError("invalid texture source");if(e=Object.assign({},Wp,e),this.wT)throw new Error("already created texture");if(this.ST=!0,t){const[e,i]=this._z(t);this.Ug=e,this.Hg=i}else if(this.Ug=e.width,this.Hg=e.height,this.Ug<=0||this.Hg<=0)throw new Error("invalid texture size");if(this.yz(e),this.hz||this.aP)throw new Error("static texture cannot be render target");t&&this.Ez(t)}Ez(t,e=!0){if(this.AT)this.Tz(t,this.vz(),e);else{const i=this.r_.VN(),r=i.createCommandEncoder(),s=i.createTexture({size:[this.Ug,this.Hg,1],mipLevelCount:1,format:this.rz,usage:Vp.COPY_SRC|Vp.COPY_DST|Vp.RENDER_ATTACHMENT});this.Pz(s,t,0,e),r.copyTextureToTexture({texture:s,mipLevel:0},{texture:this.wT,mipLevel:0},[this.Ug,this.Hg,1]),i.queue.submit([r.finish()]),s.destroy()}}Pz(t,e,i,r=!0){const[s,n]=this._z(e);this.r_.VN().queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:i,premultipliedAlpha:!!r},[s,n,1])}vz(){return this.AT?Math.floor(Math.log2(Math.max(this.Ug,this.Hg))+1):1}Tz(t,e,i=!0){const r=this.r_.VN(),s=r.createTexture({size:[this.Ug,this.Hg,1],mipLevelCount:this.vz(),format:this.rz,usage:Vp.COPY_DST|Vp.COPY_SRC|Vp.TEXTURE_BINDING|Vp.RENDER_ATTACHMENT}),n=this.r_.DN(),o=n.getBindGroupLayout(0),a=this.r_.zN({lT:"bilinear"}),h=r.createCommandEncoder();this.Pz(s,t,0,i),h.copyTextureToTexture({texture:s,mipLevel:0},{texture:this.wT,mipLevel:0},[this.Ug,this.Hg,1]);const u=[];for(let t=0;t<e;++t)u.push(s.createView({baseMipLevel:t,mipLevelCount:1}));let c=this.Ug,l=this.Hg;for(let t=1;t<e;++t){c/=2,l/=2;const e=Math.max(Math.floor(c),1),i=Math.max(Math.floor(l),1),f=h.beginRenderPass({colorAttachments:[{view:u[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),p=r.createBindGroup({layout:o,entries:[{binding:0,resource:a},{binding:1,resource:u[t-1]}]});f.setPipeline(n),f.setBindGroup(0,p),f.draw(4),f.end(),h.copyTextureToTexture({texture:s,mipLevel:t},{texture:this.wT,mipLevel:t},[e,i,1])}r.queue.submit([h.finish()]),s.destroy()}GT(t,e,i){if(i=Object.assign({},Wp,i),this.wT)throw new Error("already created texture");this.ST=!1,this.Ug=t,this.Hg=e,this.yz(i)}async zT(t,e){if(!zp.qv.iN.hj(t)&&!zp.qv.iN.bz(t))throw new Error("invalid texture source");if(!this.wT||this.Wd<=0)throw new Error("texture not created");if(this.ST)throw new Error("cannot update static texture");if(e=Object.assign({},qp,e),(zp.qv.iN.bz(t)||e.flipY||!e.yT)&&(t=await createImageBitmap(t,{premultiplyAlpha:e.yT?"premultiply":"none",imageOrientation:e.flipY?"flipY":"none"}),!this.wT))return;this.r_.Ub();const[i,r]=this._z(t);this.Ug===i&&this.Hg===r||(this.Sz(),this.Ug=i,this.Hg=r,this.gz(),this.r_.fF(this)),this.Ez(t,e.yT)}UT(){if(this.Wd>0)throw new Error("texture still has references");if(!this.wT)throw new Error("already deleted texture");this.Sz()}FN(){this.fz=!1,this.cj(!1)}wz(){return this.ST&&this.fz&&!this.hz}cj(t){this.r_.cj(this,t)}Az(t,e){if(this.pz)throw new Error("already in a group");this.pz=t,this.dz=e,this.cj(!1)}Mz(){this.pz=null,this.dz=0,this.wz()&&this.cj(!0)}NN(){return this.oz}jN(){return this.az}uF(){return null!==this.pz?this.pz.Iz():this.wz()?(this.r_.fj(this),null!==this.pz?this.pz.Iz():null):null}lF(){return this.dz}Eg(){return this.mz?this.r_.Eg():this.Ug}Pg(){return this.mz?this.r_.Pg():this.Hg}E_(){return this.r_}VT(){return this.wT}Cj(){return this.sz}eF(){return this.rz}zN(){return this.nz}Oz(){return this.ET}MP(){return"nearest"!==this.ET}oj(){return this.hz}OP(){return this.aP}iF(){return this.uz}WT(){this.Wd++}$T(){if(this.Wd<=0)throw new Error("no more references");this.Wd--}YT(){return this.Wd}mF(){return this.lz}UN(t,e){this.lz=t,this.rz=e}mj(){const t=this.r_,e=t.VN();this.wT=t.JN(),this.sz=t.qN(),t.QN()&&(this.az=e.createBindGroup({layout:t.tj(),entries:[{binding:0,resource:this.nz},{binding:1,resource:this.sz}]}))}wj(){this.wT=null,this.sz=null,this.az=null}qT(){let t=this.Eg()*this.Pg()*zp.qv.iN.rj(this.eF());return this.AT&&(t+=Math.floor(t/3)),t}static J_(){}static QT(){return Jp.values()}static rj(t){const e=Yp.get(t);return"number"==typeof e?e:NaN}}}{const Kp=self.Ee;Kp.qv.oN=class{constructor(t,e){if(e.length<2)throw new Error("invalid multi-texture group");this.r_=t,this.Dz=e,this.xz=null;for(let t=0,i=e.length;t<i;++t)e[t].Az(this,t);e.length<Kp.qv.oN.nN()&&this.r_.lj(this,!0),this.Cz()}Ys(){this.r_.lj(this,!1);for(const t of this.Dz)t.Mz();this.Rz(),Kp.So(this.Dz),this.r_=null}Cz(){this.Rz();const t=this.r_.VN(),e=[],i=Kp.qv.oN.nN();for(let t=0;t<i;++t){const i=this.Dz[Math.min(t,this.Dz.length-1)];e.push({binding:2*t,resource:i.zN()},{binding:2*t+1,resource:i.Cj()})}this.xz=t.createBindGroup({layout:this.r_.KN(),entries:e})}Rz(){null!==this.xz&&this.r_.pF(this.xz),this.xz=null}Iz(){return this.xz}static nN(){return 14}}}{const td=self.Ee,ed=self.oe,id=ed.de,rd=ed.ce,sd={lT:"trilinear",alpha:!0,depth:!1,ZT:!0,ez:!1,iz:!1,XT:!0,KT:0},nd=new Set;td.qv.rN=class{constructor(t,e){this.r_=t,this.Lz=!!e,this.oP=!!e&&t.sj(),this.kz=null,this.sP=!0,this.hP=0,this.Gz=!1,this.Nz=td.$s(td.ba),this.uP=rd.create(),this.cP=0,this.lP=0,this.fP=0,this.Lz&&(this.kz=td.$s(td.qv.iN,t,!0))}pP(t,e,i){if(i=Object.assign({},sd,i),this.kz)throw new Error("already created render target");if(this.oP=!!i.depth,this.sP=!!i.XT,this.hP=this.r_.yF(i.KT),this.hP>=2&&i.ZT)throw new Error("invalid use of multisampling");this.kz=this.r_.mP(t,e,{lT:i.lT,dT:!1,tz:!0,ZT:i.ZT,ez:i.ez,iz:i.iz,KT:this.hP}),this.dP(),nd.add(this)}UT(){nd.delete(this),this.kz.Sz(),this.kz=null,this.r_=null}vP(t,e){if(t===this.Eg()&&e===this.Pg())return;const i=this.kz.Oz(),r=this.kz.OP(),s=this.kz.iF();this.kz.Sz(),this.kz=null,this.kz=this.r_.mP(t,e,{lT:i,dT:!1,tz:!0,ZT:r,ez:s}),this.dP()}Cj(){return this.Lz?this.r_.qN():this.kz.Cj()}dP(){this.r_.pS(this.uP,this.Eg()/this.Pg()),this.cP=this.r_.uS(),this.lP=this.r_.nS(),this.fP=this.r_.aS()}xP(){return this.sP}nj(){return this.Lz}DP(){return this.oP}Eg(){return this.Lz?this.r_.Eg():this.kz.Eg()}Pg(){return this.Lz?this.r_.Pg():this.kz.Pg()}PP(){if(this.kz)return this.kz;throw new Error("no texture")}E_(){return this.r_}CP(){return this.hP}AP(){return this.r_.uS()===this.cP&&this.r_.nS()===this.lP&&this.r_.aS()===this.fP||this.dP(),this.uP}MP(){return this.kz.MP()}OP(){return this.kz.OP()}iF(){return this.kz.iF()}LP(t){return"nearest"!==(t=Object.assign({},sd,t)).lT===this.MP()&&!!t.ZT===this.OP()&&!!t.ez===this.iF()&&!!t.depth===this.DP()&&("number"==typeof t.width||"number"==typeof t.height?!this.xP()&&this.Eg()===Math.floor(t.width)&&this.Pg()===Math.floor(t.height):this.xP())}kj(t){this.Gz=!!t}yj(){return this.Gz}Rj(){return this.Nz}static J_(){}static jP(){return nd.values()}}}{const od=self.Ee;od.qv.bj=class{constructor(t,e){this.r_=t,this.Yw=this.r_.Hb(),this.jz=e;const i=this.r_.VN();this.Fz=i.createQuerySet({count:this.jz,type:"timestamp"});const r=self.GPUBufferUsage;this.Bz=i.createBuffer({size:this.zz(),usage:r.QUERY_RESOLVE|r.COPY_SRC}),this.Uz=i.createBuffer({size:this.zz(),usage:r.COPY_DST|r.MAP_READ}),this.jx=null}zz(){return 8*this.jz}Gj(){return this.Fz}jj(t){t.resolveQuerySet(this.Fz,0,this.jz,this.Bz,0),t.copyBufferToBuffer(this.Bz,0,this.Uz,0,this.zz())}async Bj(){const t=this.zz();await this.Uz.mapAsync(self.GPUMapMode.READ,0,t);const e=this.Uz.getMappedRange(0,t);this.jx=new BigUint64Array(e.slice(0)),this.Uz.destroy(),this.Uz=null,this.Bz.destroy(),this.Bz=null,this.Fz.destroy(),this.Fz=null}zx(){return null!==this.jx}Ux(){if(!this.jx)throw new Error("not yet got result");return this.jx}Hb(){return this.Yw}}}{const ad=self.Ee,hd={Vz:null,Wz:null,$z:null,getTime:null,Yz:null};ad.qv.Jz=class{constructor(t){t=Object.assign({},hd,t),this.qz=t.Vz,this.Qz=t.Wz,this.Zz=t.$z,this.Xz=t.getTime,this.Kz=t.Yz,this.tU=null,this.eU=new Set}iU(t){this.eU.add(t)}rU(t){this.eU.delete(t)}J_(){this.tU=null;for(const t of this.eU)t.J_()}sU(t){return this.qz?this.qz(t):[t.Eg(),t.Pg()]}wL(t){return this.Qz(t)}nU(t,e){this.Zz(t,e)}oU(){return this.Xz()}Ld(t){this.Kz(t)}aU(t,e,i){return e=Math.floor(e),i=Math.floor(i),!this.tU||this.tU.Eg()===e&&this.tU.Pg()===i||(t.wP(this.tU),this.tU=null),null===this.tU&&(this.tU=t._L(null,{width:e,height:i,lT:"nearest",dT:!1})),this.tU}}}{const ud=self.Ee,cd=self.assert,ld=self.oe,fd=ld.ce,pd=ud.$s(ud.Rect),dd=ud.$s(ud.Rect),md=ud.$s(ud.Rect),yd=ud.$s(ud.Rect),gd=fd.create(),vd=fd.create(),wd={hU:null,uU:null,cU:null,lU:!1},Sd={fU:null,pU:!1,dU:!1,mU:!1,yU:!1,gU:!1,vU:!1};ud.qv.wU=class{constructor(t,e){e=Object.assign({},wd,e),this.Hd=t,this.SU=e.hU,this.bU=e.uU,this._U=e.cU,this.EU=null,this.TU=[],this.PU=[],this.AU=[],this.MU=!1,this.F_=0,this.IU=!1,this.OU=!1,this.DU=!1,this.xU=!1,this.CU=!1,this.RU=!1,this.gC=!1,this.LU=!1,this.kU=!1,this.GU=!1,this.NU=!1,this.jU=!1,this.FU=0,this.BU=[null,null,null],this.zU=!!e.lU,this.UU=0,this.HU=0,this.VU=0,this.WU=0,this.$U=null,this.YU=null,this.JU=ud.$s(ud.Rect),this.qU=ud.$s(ud.Rect),this.QU=ud.$s(ud.Rect),this.ZU=ud.$s(ud.Rect),this.XU=ud.$s(ud.Rect),this.KU=1,this.tH=1,this.eH=0,this.iH=0,this.rH=null,this.sH=null,this.nH=0,this.oH=0,this.aH=0,this.hH=0,this.uH=!1,this.uP=fd.create(),this.cH=fd.create(),this.Hd.iU(this)}Ys(){this.Hd.rU(this),ud.So(this.AU),ud.So(this.TU),ud.So(this.PU),this.$U=null,this.YU=null,this.SU=null,this.bU=null,this._U=null}J_(){this.MU=!0,ud.So(this.AU),ud.So(this.TU),ud.So(this.PU)}lH(){return this.MU}fH(t,e){if(e=Object.assign({},Sd,e),ud.So(this.AU),this.UU=0,this.HU=0,this.IU=!1,this.OU=!1,this.DU=!1,this.xU=!1,this.CU=!1,this.RU=!1,this.FU=0,this.jU=!!e.yU,this.NU=!!e.vU,this.MU=!1,ud.To(this.TU,t),0===t.length)return;if(e.fU){if(e.fU.length!==t.length)throw new Error("incorrect indexMap length");ud.To(this.PU,e.fU)}else{ud.So(this.PU);for(let e=0,i=t.length;e<i;++e)this.PU.push(e)}for(const e of t)this.UU+=e.P_(),this.HU+=e.A_(),e.x_()&&(this.IU=!0),e.R_()&&(this.OU=!0),e.C_()&&(this.DU=!0),e.M_()&&(this.xU=!0),e.G_()&&(this.CU=!0);this.RU=this.pH(t[0].E_());const i=this.dH(t[0],e),r=this.mH(t.at(-1),e);if(1===t.length&&!i&&!r)return void(this.GU=!0);this.GU=!1;let s=0;i&&(this.FU=1,this.AU.push(ud.$s(ud.qv.wU.gH.yH,this,-1,1)),s=1);for(let e=0,n=t.length;e<n;++e)if(0!==e||i){let t=1===s?2:1;e!==n-1||r||(t=0),this.FU=Math.max(this.FU,t),this.AU.push(ud.$s(ud.qv.wU.gH.vH,this,s,t,e)),s=t}else this.FU=1,this.AU.push(ud.$s(ud.qv.wU.gH.wH,this,-1,1,e)),s=1;r&&this.AU.push(ud.$s(ud.qv.wU.gH.SH,this,s,0))}dH(t,e){return!!(e.pU||t.I_()||e.mU&&!t.D_()||t.R_()&&!this.NU||0!==this.UU||0!==this.HU)||(t.E_().qb()?t.C_()&&(e.gU||e.yU)||t.L_()&&e.yU:t.C_()&&!this.RU&&e.gU)}mH(t,e){return!!e.dU||(t.E_().qb()?t.C_()||t.M_():(t.C_()||t.M_())&&this.bH())}pH(t){return t.dS()&&this.DU&&!this.xU}_H(t,e,i){t.dS()&&null===e&&(e=t.tF()),this.rH=e,this.$U=i.EH||null,this.YU=i.TH||null,this.F_=i.PH||0,this.KU=i.devicePixelRatio||1,this.tH=i.IF||1,this.eH=i.OF||0,this.iH="number"==typeof i.time?i.time:this.Hd.oU(),this.gC=!1,t.OR(),this.IU&&this.AH();let r=!1;if(this.MH()&&(this.IH(t,i),r=!0,this.sH=this.Hd.aU(t,this.VU,this.WU),pd.v(this.qU),pd.bu(),t.dS()&&t.Nj(this.rH),t.dF(this.rH.PP(),this.sH,pd.Kh(),pd.tu(),pd.width(),pd.height())),this.GU)this.OH(t,i);else if(r||this.IH(t,i),0!==this.QU.width()||0!==this.QU.height()){t.UR(),t.Gb(),t.GR(),t.qS(0),t.ZS(0),this.EU=i.DH||null,this.nH=i.xH||0,this.oH=i.CH||0,this.aH=i.RH||0,this.hH=i.LH||0,this.uH=!!i.kH,this.GH(t),this.BU[0]=e,this.BU[1]=this.FU>=1?this.NH():null,this.BU[2]=2===this.FU?this.NH():null;for(const e of this.AU){const i=this.jH(e.FH()),r=this.jH(e.BH());t.dS()?e.zH(t,i,r):e.UH(t,i,r)}t.jR(null),this.BU[1]&&this.HH(this.BU[1]),this.BU[2]&&this.HH(this.BU[2]),this.BU.fill(null),this.VH(t),this.rH=null,this.sH=null,this.$U=null,this.YU=null,this.EU=null}}IH(t,e){const[i,r]=this.Hd.sU(t);this.WH(t,i,r),this.$H(e)}WH(t,e,i){if(e<=0||i<=0)throw new Error("invalid draw size");this.VU===e&&this.WU===i||this.YH(t,e,i,0,0,this.uP,this.cH),this.VU=e,this.WU=i}YH(t,e,i,r,s,n,o){const a=e/2+r,h=i/2+s;t.pS(n,e/i);const u=t.gS(a,h,t.tS(i),a,h,0,i);fd.v(o,u)}$H(t){if(this.JU.v(t.MF),t.JH?this.qU.v(t.JH):this.qU.set(0,0,this.VU,this.WU),this.GU){const e=t.xH??0,i=t.CH??0;this.qU.offset(-e,-i)}this.QU.v(this.qU),this.QU.wt(this.VU,this.WU);const e=this.tH*this.KU;this.qU.fu(this.UU*e,this.HU*e),this.XU.v(this.qU),this.XU.wt(this.VU,this.WU),this.qU._u(0,0,this.VU,this.WU),this.ZU.v(this.qU),this.ZU.wt(this.VU,this.WU)}GH(t){if(this.LU=t.yL(),this.kU=t.CL(),this.NU)t.mL(!1),this.OU&&t.gL(!0);else{if(pd.v(this.qU),t.qb()){const t=this.tH*this.KU;pd.fu(Math.max(this.UU,1)*t,Math.max(this.HU,1)*t),pd.bu(),pd.Xs(0,0,this.VU,this.WU)}else pd.bu();t.vL(pd.Kh(),pd.tu(),pd.width(),pd.height(),this.WU)}}qH(t){t.GR(),this.NU||(this.kU?t.RL(!1):t.mL(!1),this.OU&&t.gL(!0)),t.dS()&&t.aF(!0)}VH(t){t.gL(!1),this.kU?t.xL(this.LU):t.mL(this.LU),this.NU||t.SL(),t.dS()&&t.aF(!1),this.gC=t.DR()}QH(){this.XU.Xs(0,0,1,1)}jH(t){return t<0?null:this.BU[t]}NH(){return this.Hd.wL(this)}ZH(){return this.rH}HH(t){this.Hd.nU(t,this)}XH(t){return this.TU[t]}KH(t){this.EU?this.EU(this,t,()=>this.SU(t,this)):this.SU(t,this),this.GU||this.qH(t)}tV(t){if(this.NU)return!0;if(0!==this.nH||0!==this.oH||0!==this.aH||0!==this.hH)return!1;const[e,i]=t.tL(t.wL());return e===this.VU&&i===this.WU}eV(t,e){let i=this.uP,r=this.cH;if(e&&!this.tV(t)){let e,s;i=gd,r=vd,0!==this.aH&&0!==this.hH?[e,s]=[this.aH,this.hH]:[e,s]=t.tL(t.wL()),this.YH(t,e,s,this.nH,this.oH,i,r),this.NU||t.SL()}t._R(i),t.IR(r)}AH(){this.Hd.Ld(this)}iV(t,e){return this._U(this.PU[t],e)}rV(t,e){let i=this.XU,r=this.ZU,s=this.QU;t.qb()&&(dd.v(i),dd.mu(1),i=dd,md.v(r),md.mu(1),r=md,yd.v(s),yd.mu(1),s=yd),this.sV(t,e,r,s,i,1/this.VU,1/this.WU)}nV(t,e){let i=this.ZU,r=this.QU,s=1/this.VU,n=1/this.WU;if(this.bU){let{oV:t,aV:e,hV:o}=this.bU(this.$U);t||(pd.set(0,0,0,0),t=pd),e||(e=this.VU),o||(o=this.WU),i=t,r=t,s=1/e,n=1/o}else t.qb()&&(md.v(i),md.mu(1),i=md,yd.v(r),yd.mu(1),r=yd);let o=this.XU;t.qb()&&(o=dd,o.v(this.XU),o.mu(1)),this.sV(t,e,i,r,o,s,n),t.dS()&&this.CU&&t.GF(this.jU)}uV(t){return this.DU?t.dS()?this.MH()?this.sH:this.rH.PP():this.rH:null}sV(t,e,i,r,s,n,o){t.cL(this.uV(t),s,i,r,this.JU,n,o,this.KU,this.tH,this.eH,this.iH),t.lL(this.iV(e,t))}OH(t,e){const i=this.TU[0],r=t.yL(),s=i.R_();s&&(t.mL(!1),t.gL(!0),this.XU.set(0,0,1,1),this.QU.set(0,0,1,1)),t.ES(i),t.W_(this.F_),t.PL(this.rH),t.Gb();let n=0,o=1;if(this.QU.set(0,0,1,1),i.L_()&&this.bU){const{oV:t,aV:e,hV:i}=this.bU(this.$U);t&&this.QU.v(t),n=Number.isFinite(e)?1/e:0,o=Number.isFinite(i)?1/i:0}else{const[e,i]=this.Hd.sU(t);n=1/e,o=1/i}e.MF?this.JU.v(e.MF):this.JU.set(0,0,0,0),t.cL(this.uV(t),this.XU,this.QU,this.QU,this.JU,n,o,this.KU,this.tH,this.eH,this.iH),t.lL(this.iV(0,t)),t.dS()&&this.CU&&t.GF(this.jU),t.qS(0),this.KH(t),s&&(t.gL(!1),t.mL(r))}MH(){return this.RU}bH(){return!this.RU}cV(){return this.DU}lV(){return!!this.GU&&!this.MH()}fV(){return this.NU}pV(){return this.$U}dV(){return this.YU}mV(){return this.F_}yV(){return this.uH}DR(){return this.gC}gV(){return this.qU}vV(){return this.ZU}wV(){return this.zU}async SV(t,e,i){}}}{const bd=self.Ee;bd.qv.wU.gH=class{constructor(t,e,i,r=-1){this.bV=t,this._V=e,this.EV=i,this.Uv=r}TV(){return this.bV}FH(){return this._V}BH(){return this.EV}PV(){return this.Uv}$A(){return this.TV().XH(this.PV())}UH(t,e,i){}zH(t,e,i){}}}{const _d=self.Ee;_d.qv.wU.gH.yH=class extends _d.qv.wU.gH{constructor(t,e,i,r){super(t,e,i,r)}UH(t,e,i){const r=this.TV();t.UR(),t.Gb(),t._S(),t.PL(i,r.yV()),t.fL(0,0,0,0),r.KH(t),r.QH()}zH(t,e,i){const r=this.TV();t.UR(),t.Gb(),t._S(),t.PL(i,!1),t.fL(0,0,0,0),r.KH(t),r.QH()}}}{const Ed=self.Ee,Td=Ed.$s(Ed.Rect),Pd=Ed.$s(Ed.Ou);Ed.qv.wU.gH.SH=class extends Ed.qv.wU.gH{constructor(t,e,i,r){super(t,e,i,r)}UH(t,e,i){const r=this.TV();t._S(),t.PL(i),r.eV(t,!0),t.W_(r.mV()),t.jR(e.PP()),Pd.Qu(r.gV()),Td.v(r.vV()),Td.mu(1),t.hb(Pd,Td),r.wV()&&t.IL(e)}zH(t,e,i){const r=this.TV();t._S(),t.PL(i,!1),r.tV(t)?Pd.Qu(r.vV()):(t.aF(!1),r.eV(t,!0),Pd.Qu(r.gV())),t.uj(null),t.W_(r.mV()),t.jR(e.PP()),r.fV()?t.KR():t.hb(Pd,r.vV())}}}{const Ad=self.Ee;Ad.qv.wU.gH.wH=class extends Ad.qv.wU.gH{constructor(t,e,i,r){super(t,e,i,r)}UH(t,e,i){const r=this.TV();t.PL(i,r.yV()),t.fL(0,0,0,0),t.WR(),t.ES(this.$A()),r.nV(t,this.PV()),r.KH(t),r.QH()}zH(t,e,i){const r=this.TV();t.PL(i,!1),t.fL(0,0,0,0),t.WR(),t.ES(this.$A()),r.nV(t,this.PV()),r.KH(t),r.QH()}}}{const Md=self.Ee,Id=Md.$s(Md.Rect),Od=Md.$s(Md.Ou);Md.qv.wU.gH.vH=class extends Md.qv.wU.gH{constructor(t,e,i,r){super(t,e,i,r)}UH(t,e,i){const r=this.TV();t.PL(i);const s=0===this.BH();s?t.W_(r.mV()):(t.fL(0,0,0,0),t.WR()),t.ES(this.$A()),r.rV(t,this.PV()),t.jR(e.PP()),r.eV(t,s),Od.Qu(r.gV()),Id.v(r.vV()),Id.mu(1),t.hb(Od,Id),r.wV()&&t.IL(e)}zH(t,e,i){const r=this.TV();t.PL(i,!1),0===this.BH()?(t.W_(r.mV()),t.uj(null),r.tV(t)?Od.Qu(r.vV()):(t.aF(!1),r.eV(t,!0),Od.Qu(r.gV()))):(t.fL(0,0,0,0),t.WR(),Od.Qu(r.vV())),t.ES(this.$A()),r.rV(t,this.PV()),t.jR(e.PP()),r.fV()?t.KR():t.hb(Od,r.vV())}}}{let Dd=function(t,e){const i=t[0]-e[0];return 0!==i?i:t[1]-e[1]};SortZOrderList=Dd;const xd=self.Ee,Cd=self.Le;let Rd=null;const Ld=new Set,kd=[],Gd=[];let Nd=!1,jd=!1,Fd=!1;const Bd=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.AV=class{constructor(t){Rd=t,Object.defineProperties(this,{MV:{value:Rd.OV().IV(),writable:!1},DV:{value:Rd.CV().xV(),writable:!1},RV:{value:{},writable:!1},LV:{value:{},writable:!1},kV:{value:Rd.GV(),writable:!1},NV:{value:Rd.jV(),writable:!1},FV:{value:Rd.BV(),writable:!1},zV:{value:Rd.UV(),writable:!1},HV:{value:new Date(Rd.VV()),writable:!1},storage:{value:new self.WV(Rd),writable:!1},$V:{value:Rd.YV(),writable:!1},JV:{value:Rd.qV(),writable:!1},QV:{value:Rd.ZV(),writable:!1},lT:{value:Rd.Oz(),writable:!1},XV:{value:new self.KV(t),writable:!1},tW:{value:new self.eW(t),writable:!1}}),Rd.iW().addEventListener("keydown",t=>{Ld.has(t.key)?t.stopPropagation():Ld.add(t.key)}),Rd.iW().addEventListener("keyup",t=>Ld.delete(t.key)),Rd.wf().addEventListener("window-blur",()=>Ld.clear()),Rd.YV()&&(self.alert=t=>(Nd||(Nd=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}rW(t){Object.defineProperties(this.RV,t)}sW(t){Object.defineProperties(this.LV,t)}addEventListener(t,e){Rd.iW().addEventListener(t,e)}removeEventListener(t,e){Rd.iW().removeEventListener(t,e)}nW(t,...e){Cd.ar(t);const i=Rd.oW(),r=i.aW(t);if(!r)throw new Error(`cannot find function name '${t}'`);if(!r.Dc())return r.hW();if(e.length<r.uW())throw new Error(`not enough function parameters passed for '${t}' (${e.length} passed, ${r.uW()} expected)`);const s=r.cW();let n=s.lW();const o=i.fW();if(o){n=n.slice(0);const t=new Set(n);for(const e of o.lW())t.has(e)||(n.push(e),t.add(e));for(const e of i.pW())t.has(e)||(n.push(e),t.add(e))}return s.dW(n,r.mW(),r.yW(),r.hW(),null,...e)}gW(t){const e=Rd.wW().vW();if(!e)throw new Error("not in a function which returns a value");switch(e.SW()){case 1:"number"==typeof t&&e.bW(t);break;case 2:"string"==typeof t&&e.bW(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||e.bW(t)}}signal(t){Cd.ar(t),Rd.oW()._W(t)}EW(t){return Cd.ar(t),Rd.oW().TW(t)}PW(){return[Rd.qV(),Rd.ZV()]}get AW(){return Rd.MW()}get IW(){return Rd.OW()}get DW(){return Rd.xW()}get RW(){return Rd.LW()}get kW(){return Rd.GW()}get NW(){return Rd.jW()}get FW(){return Rd.BW()}set FW(t){Cd.ir(t),Rd.zW(t)}get UW(){return jd||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),jd=!0),Rd.HW()}get framesPerSecond(){return Rd.HW()}get VW(){return Rd.WW()}get $W(){return Rd.YW()}get JW(){return Rd.qW()}get QW(){return Rd.ZW()}set QW(t){if(!Bd.has(t))throw new Error("invalid framerate mode");Rd.XW(t)}get KW(){return Rd.t$()}set KW(t){Cd.ir(t),Rd.e$(t)}get i$(){return Rd.r$()}set i$(t){Rd.s$(t)}set n$(t){Rd.o$(!!t)}get n$(){return Rd.a$()}get h$(){return Rd.OV().u$()}get c$(){return Rd.OV().l$()}random(){return Rd.f$()}get layout(){const t=Rd.p$();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.d$()}m$(t){const e=Rd.y$();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=e.g$(t),!i)throw new Error("invalid layout");return i.d$()}v$(){return Rd.y$().w$().map(t=>t.d$())}S$(t){const e=Rd.y$();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=e.g$(t),!i)throw new Error("invalid layout");e.b$()||e._$(i)}get keyboard(){const t=Rd.E$().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get T$(){const t=Rd.E$().T$;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get P$(){const t=Rd.E$().P$;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get A$(){const t=Rd.E$().A$;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get $M(){return Rd.I$().M$()}O$(t,e){Cd.ar(t),Cd.ar(e),Rd.D$(t,e)}x$(t){Cd.ir(t);const e=Rd.C$(t);return e?e.R$():null}L$(t,e){Cd.Dr(e);const i=Rd.k$();for(const e of t){const t=Rd.G$(e),i=t.N$();i.j$()||(kd.push([i.F$().PV(),i.B$()]),Gd.push(t))}if(0===kd.length)return;kd.sort(Dd),Gd.sort((t,i)=>e(t.R$(),i.R$()));let r=!1;for(let t=0,e=kd.length;t<e;++t){const e=Gd[t],s=i.z$(kd[t][0]),n=kd[t][1],o=s.U$();o[n]!==e&&(o[n]=e,e.N$().H$(s,!0),s.V$(e),r=!0)}r&&Rd.W$(),xd.So(kd),xd.So(Gd)}$$(t){for(const e of t){const t=Rd.G$(e);Rd.Y$(t)}Rd.oW().J$()||Rd.y$().q$()||Rd.oW().Q$()||Rd.Z$()}async X$(t,e){Fd||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Fd=!0);const i=new MessageChannel,r=i.port1,s=i.port2;return await Rd.K$("runtime","script-create-worker",{url:t,opts:e,port2:s},[s]),r}alert(t){return Rd.K$("runtime","alert",{message:t+(Rd.YV()?" [via Web Worker]":"")})}tY(t){return Cd.ir(t),Rd.eY(t)}iY(t){Rd.rY(t)}async sY(t,e,i){Cd.hr(t),Cd.Xi(e),Cd.Fr(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const r=Rd.I$();if(!r)return;Rd.W$();const s=await r.nY(t||"image/png",e,i.x,i.y,i.width,i.height);return await Rd.oY(xd.cY.uY.hY.aY,null),s}}}{const zd=self.Ee,Ud=self.Le;let Hd=null;self.lY=class{constructor(t){Hd=t,Object.defineProperties(this,{fY:{value:!0,writable:!1}})}pY(t){const e=self.mY.dY(t);if(!e)throw new Error("invalid IImageInfo");e.yY(Hd.gY())}vY(t){return Hd.ta(t)}wY(t){return Hd.ea(t)}SY(t){return Hd.ia(t)}bY(t){return Hd.ra(t)}_Y(t){return Promise.resolve(Hd.EY(t))}TY(t){return Hd.PY(t)}get AY(){return Hd.MY()}async IY(t,e){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}OY(...t){return Hd.DY(...t)}xY(t){return Hd.CY(t)}RY(t){return Hd.LY(t)}get kY(){return Hd.GY()}}}{const Vd=self.Ee,Wd=self.Le;let $d=null;self.NY=class{constructor(t){$d=t,Object.defineProperties(this,{runtime:{value:$d.gY(),writable:!1}})}jY(t,e){const i=$d.gY(),r=i.G$(t),s=i.G$(e);return $d.FY(r,s)}BY(t,e){const i=$d.gY(),r=i.G$(t);for(const t of e){const e=i.G$(t);if($d.FY(r,e))return t}return null}zY(t){const e=$d.gY().G$(t),i=$d.UY(e);return i?i.R$():null}HY(t,e){if(Wd.ir(t),Wd.ir(e),t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid cell size");$d.VY(t,e)}WY(){return $d.$Y()}YY(t,e){const i=$d.gY();let r;r=Array.isArray(t)?t.map(t=>i.JY(t)):[i.JY(t)];const s=Vd.Rect.Zh(e),n=[];return $d.qY(null,r,s,n),n.map(t=>t.R$())}}}{const Yd=self.Ee,Jd=self.Le;let qd=null;const Qd=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Zd=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Xd=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.KV=class{constructor(t){qd=t,Object.defineProperties(this,{QY:{value:Yd.Je.ri,writable:!1},os:{value:Qd.get(Yd.Je.qe)||"unknown",writable:!1},ZY:{value:Yd.Je.Qe,writable:!1},browser:{value:Zd.get(Yd.Je.Ze)||"unknown",writable:!1},XY:{value:Yd.Je.Xe,writable:!1},KY:{value:Xd.get(Yd.Je.ti)||"unknown",writable:!1}})}get tJ(){let t=qd.eJ();return qd.iJ()?t="windows-webview2":"cordova"===t?t="Android"===Yd.Je.qe?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get $M(){return qd.I$().rJ()}get sJ(){return qd.I$().nJ()}get oJ(){return qd.I$().aJ()}get hJ(){return qd.I$().uJ()}get cJ(){return qd.I$().lJ()}get fJ(){return qd.I$().pJ()}get dJ(){return qd.I$().mJ()}get yJ(){return qd.I$().gJ()}get devicePixelRatio(){return qd.vJ()}}}{const Kd=self.Ee,tm=self.Le;self.WV=class{constructor(t){this.wJ=t.SJ()}getItem(t){return tm.ar(t),this.wJ.getItem(t)}setItem(t,e){return tm.ar(t),this.wJ.setItem(t,e)}removeItem(t){return tm.ar(t),this.wJ.removeItem(t)}clear(){return this.wJ.clear()}keys(){return this.wJ.keys()}}}{const em=self.Ee,im=self.Le,rm=em.Te();self.bJ=class{#t;constructor(){const t=em.EJ._J(rm);this.#t=t,Object.defineProperties(this,{runtime:{value:t.gY().TJ(),writable:!1},id:{value:t.PJ(),writable:!1},AJ:{value:t.MJ(),writable:!1},IJ:{value:t.OJ(),writable:!1},DJ:{value:t.xJ(),writable:!1},CJ:{value:t.RJ(),writable:!1},LJ:{value:t.kJ(),writable:!1},GJ:{value:t.NJ(),writable:!1},jJ:{value:t.FJ(),writable:!1},BJ:{value:t.zJ(),writable:!1}}),t.gY().UJ(this,t)}static HJ(t){if(!t)return null;const e=em.EJ.VJ(t);return e?e.WJ():null}$J(){return this.#t.JJ().YJ()}qJ(){return this.#t.QJ().R$()}}}{const sm=globalThis.Ee,nm=globalThis.Le,om=sm.Te();globalThis.ZJ=class{#t;constructor(){const t=sm.EJ._J(om);this.#t=t,Object.defineProperties(this,{name:{value:t.Dl(),writable:!1},runtime:{value:t.gY().TJ(),writable:!1},XJ:{value:t.KJ().WJ(),writable:!1}}),t.gY().UJ(this,t)}addEventListener(t,e){nm.ar(t),nm.Dr(e),this.#t.iW().addEventListener(t,e)}removeEventListener(t,e){nm.ar(t),nm.Dr(e),this.#t.iW().removeEventListener(t,e)}tq(){return[...this.eq()]}iq(){return sm.Fo(this.eq())}rq(){return[...this.sq()]}nq(){return sm.Fo(this.sq())}oq(t){const e=this.#t,i=e.gY().aq(t),r=e.hq(i);return r?r.R$():null}*eq(){for(const t of this.#t.uq())yield t.R$()}*sq(){for(const t of this.#t.lq().cq())yield t.R$()}fq(t,e,...i){nm.ar(t);const r=this.#t,s=r.gY(),n=s.oW(),o=n.pq(r,t);if(!o)throw new Error(`cannot find '${this.name}' custom action '${t}'`);if(!o.Dc())return null;if(i.length<o.uW())throw new Error(`not enough function parameters passed for '${this.name}' custom action '${t}' (${i.length} passed, ${o.uW()} expected)`);const a=o.cW();let h=a.lW();const u=n.fW();if(u){h=h.slice(0);const t=new Set(h);for(const e of u.lW())t.has(e)||(h.push(e),t.add(e));for(const e of n.pW())t.has(e)||(h.push(e),t.add(e))}if(r.mq()&&o.yq()){const n=new Map,u=[];for(const i of e){const e=s.aq(i),r=e.gq();if(r.vq(t)){const t=n.get(r);Array.isArray(t)?t.push(e):n.set(r,[e])}else u.push(e)}const c=[];if(u.length>0){const t={wq:r,Sq:u},e=a.dW(h,o.mW(),0,null,t,...i);c.push(e)}if(n.size>0)for(const[e,r]of n){const s=e.bq(t).cW(),n=[...new Set([...h,...s._q()])],a={wq:e,Sq:r},u=s.dW(n,o.mW(),0,null,a,...i);c.push(u)}return Promise.all(c)}{const t={wq:o.gq(),Sq:(Array.isArray(e)?e:[...e]).map(t=>s.aq(t))},r=a.dW(h,o.mW(),0,null,t,...i);return r instanceof Promise?r:Promise.resolve()}}}}{const am=globalThis.Ee,hm=globalThis.Le,um=am.Te();globalThis.Eq=class extends globalThis.ZJ{#t;constructor(){super();const t=am.EJ._J(um);this.#t=t}Tq(t){hm.Dr(t);const e=this.#t;if(e.Pq()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");e.Aq(t)}_i(t,e,i,r,s){if(hm.Zi(e),hm.Zi(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#t,o=n.gY(),a=o.p$().F$(t);if(!a)throw new Error("invalid layer");const h=o.Mq(n,a,e,i,r,s);r&&a.Iq(h);const u=o.oW();return u.Oq(!0),h.Dq(),u.Oq(!1),u.J$()||o.y$().q$()||o.Z$(),h.R$()}xq(){return this.#t.Cq().map(t=>t.YJ())}*Rq(){for(const t of this.#t.Cq())yield t.YJ()}Lq(t){return hm.jr(t,globalThis.kq),t.Gq(this)}}}{const cm=globalThis.Ee,lm=globalThis.Le,fm=globalThis.Eq,pm=cm.Te();globalThis.kq=class extends globalThis.ZJ{#t;constructor(){super();const t=cm.EJ._J(pm);this.#t=t}Nq(){return this.#t.jq().map(t=>t.YJ())}*Fq(){for(const t of this.#t.jq())yield t.YJ()}Gq(t){lm.jr(t,fm);const e=this.#t,i=e.gY().JY(t);return e.Bq(i)}}}{const dm=self.Ee,mm=self.Le,ym=["above","below","top-sublayer","bottom-sublayer"];self.zq=class{#t;constructor(t){this.#t=t;const e=[],i=t.Uq(),r=i.Hq().length;for(let t=0;t<r;++t)e.push(new self.Vq(i,t));Object.defineProperties(this,{runtime:{value:t.gY().TJ(),writable:!1},name:{value:t.Dl(),writable:!1},index:{value:t.PV(),writable:!1},effects:{value:e,writable:!1}})}addEventListener(t,e){mm.ar(t),mm.Dr(e),this.#t.iW().addEventListener(t,e)}removeEventListener(t,e){mm.ar(t),mm.Dr(e),this.#t.iW().removeEventListener(t,e)}get width(){return this.#t.Eg()}set width(t){mm.ir(t),this.#t.cg(t)}get height(){return this.#t.Pg()}set height(t){mm.ir(t),this.#t.lg(t)}Wq(t,e){mm.ir(t),mm.ir(e);const i=this.#t;i.cg(t),i.lg(e)}getSize(){const t=this.#t;return[t.Eg(),t.Pg()]}set scale(t){mm.ir(t),this.#t.$q(t)}get scale(){return this.#t.Yq()}set angle(t){mm.ir(t),this.#t.Jq(t)}get angle(){return this.#t.qq()}set scrollX(t){mm.Zi(t),this.#t.Qq(t)}get scrollX(){return this.#t.Zq()}set scrollY(t){mm.Zi(t),this.#t.Xq(t)}get scrollY(){return this.#t.Kq()}scrollTo(t,e){mm.Zi(t),mm.Zi(e);const i=this.#t;i.Qq(t),i.Xq(e)}tQ(){const t=this.#t;return[t.Zq(),t.Kq()]}get eQ(){return this.#t.iQ()}rQ(t){const e=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=e.F$(t),i?i.sQ():null}nQ(){return this.#t.oQ().map(t=>t.sQ())}*aQ(){for(const t of this.#t.aQ())yield t.sQ()}hQ(t,e,i){const r=this.#t,s=self.uQ;mm.ar(t),mm.Fr(e,s);const n=e?r.gY().cQ(e):null,o=ym.indexOf(i);if(o<0)throw new Error("invalid location");r.lQ(t,n,o)}fQ(t,e,i){const r=this.#t,s=r.gY(),n=self.uQ;mm.jr(t,n);const o=s.cQ(t);if(!o)throw new Error("invalid layer");mm.Fr(e,n);const a=e?s.cQ(e):null,h=ym.indexOf(i);if(h<0)throw new Error("invalid location");r.pQ(o,a,h)}dQ(t){const e=this.#t,i=self.uQ;mm.jr(t,i);const r=e.gY().cQ(t);if(!r)throw new Error("invalid layer");const s=r.gY();e.mQ(r),s.oW().J$()||s.Z$()}yQ(){const t=this.#t,e=t.gY();t.gQ(),e.oW().J$()||e.Z$()}vQ(t,e){mm.ir(t),mm.ir(e),this.#t.wQ(t,e)}SQ(){return this.#t.bQ()}set V(t){mm.ar(t);const e=this.#t;if("perspective"===t)e._Q();else{if("orthographic"!==t)throw new Error("invalid projection");e.EQ()}}get V(){return this.#t.TQ()?"orthographic":"perspective"}}}{const gm=self.Ee,vm=self.Le,wm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),Sm=new Map([...wm.entries()].map(t=>[t[1],t[0]])),bm=new Set(["2d","3d"]),_m=gm.$s(gm.ba);self.uQ=class{#t;constructor(t){this.#t=t;const e=[],i=t.Uq(),r=i.Hq().length;for(let t=0;t<r;++t)e.push(new self.Vq(i,t));Object.defineProperties(this,{runtime:{value:t.gY().TJ(),writable:!1},name:{value:t.Dl(),writable:!1},layout:{value:t.g$().d$(),writable:!1},effects:{value:e,writable:!1}}),t.gY().UJ(this,t)}addEventListener(t,e){this.#t.iW().addEventListener(t,e)}removeEventListener(t,e){this.#t.iW().removeEventListener(t,e)}get PQ(){const t=this.#t.AQ();return t?t.sQ():null}*MQ(){for(const t of this.#t.MQ())yield t.sQ()}*IQ(){for(const t of this.#t.OQ())yield t.sQ()}*DQ(){for(const t of this.#t.OQ())for(const e of t.xQ())yield e.sQ()}get index(){return this.#t.PV()}get isVisible(){return this.#t.CQ()}set isVisible(t){this.#t.RQ(t)}get LQ(){return this.#t.kQ()}get GQ(){return this.#t.NQ()}set GQ(t){this.#t.jQ(t)}get FQ(){return this.#t.BQ()}set FQ(t){this.#t.zQ(!!t)}get UQ(){return this.#t.HQ()}get opacity(){return this.#t.RR()}set opacity(t){t=gm.Xs(+t,0,1),isNaN(t)||this.#t.kR(t)}set scale(t){vm.ir(t),this.#t.VQ(t)}get scale(){return this.#t.WQ()}set $Q(t){vm.ir(t),this.#t.YQ(t)}get $Q(){return this.#t.JQ()}set angle(t){vm.ir(t),this.#t.Jq(t)}get angle(){return this.#t.qQ()}set QQ(t){vm.ir(t),this.#t.ZQ(t)}get QQ(){return this.#t.XQ()}set KQ(t){vm.ir(t),this.#t.tZ(t)}get KQ(){return this.#t.eZ()}set Hj(t){vm.ir(t),this.#t.uE(t)}get Hj(){return this.#t.hE()}set renderingMode(t){if(!bm.has(t))throw TypeError("invalid rendering mode");this.#t.iZ("3d"===t)}get renderingMode(){return this.#t.rZ()?"3d":"2d"}set sZ(t){this.#t.nZ(t)}get sZ(){return this.#t.oZ()}set aZ(t){this.#t.hZ(t)}get aZ(){return this.#t.uZ()}set PH(t){vm.ar(t);const e=wm.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");this.#t.W_(e)}get PH(){return Sm.get(this.#t.cZ())}set backgroundColor(t){if(vm.Er(t),t.length<3)throw new Error("expected 3 elements");_m.Ma(t[0],t[1],t[2]);const e=this.#t,i=e.lZ();i.Ha(_m)||(i.La(_m),e.gY().W$())}get backgroundColor(){const t=this.#t.lZ();return[t.ka(),t.Ga(),t.Na()]}set scrollX(t){vm.Zi(t);const e=this.#t;e.fZ(!0),e.Qq(t)}get scrollX(){return this.#t.Zq()}set scrollY(t){vm.Zi(t);const e=this.#t;e.fZ(!0),e.Xq(t)}get scrollY(){return this.#t.Kq()}scrollTo(t,e){vm.Zi(t),vm.Zi(e);const i=this.#t;i.fZ(!0),i.Qq(t),i.Xq(e)}tQ(){const t=this.#t;return[t.Zq(),t.Kq()]}pZ(){this.#t.fZ(!1)}getViewport(){return this.#t.dZ().ru()}mZ(t,e,i=0){vm.Zi(t),vm.Zi(e),vm.Zi(i);const r=this.#t,s=r.gY();return r.yZ(t-s.aJ(),e-s.uJ(),i)}gZ(t,e,i=0){vm.Zi(t),vm.Zi(e),vm.Zi(i);const r=this.#t,s=r.gY(),[n,o]=r.vZ(t,e,i);return[n+s.aJ(),o+s.uJ()]}wZ(t,e,i=0){return vm.Zi(t),vm.Zi(e),vm.Zi(i),this.#t.SZ(t,e,i)}bZ(t,e,i=0){return vm.Zi(t),vm.Zi(e),vm.Zi(i),this.#t._Z(t,e,i)}get EZ(){return this.#t.TZ()}}}{let Em=function(t){let e=Am.get(t);return e||(e=Tm.$s(Tm.Event.wf),Am.set(t,e),e)};GetDispatcher=Em;const Tm=self.Ee,Pm=self.Le,Am=new WeakMap,Mm=Tm.Te();self.PZ=class{#t;constructor(){const t=Tm.EJ._J(Mm);this.#t=t;const e={runtime:{value:t.gY().TJ(),writable:!1},objectType:{value:t.gq().YJ(),writable:!1},XJ:{value:t.KJ().WJ(),writable:!1}};t.AZ(e),t.MZ(e),Object.defineProperties(this,e),t.gY().UJ(this,t)}static IZ(){return Tm.EJ.OZ()}DZ(){const t=Am.get(this);t&&(t.Ys(),Am.delete(this))}addEventListener(t,e,i){Pm.ar(t),Pm.Dr(e),Em(this).addEventListener(t,e,i)}removeEventListener(t,e,i){Pm.ar(t),Pm.Dr(e),Em(this).removeEventListener(t,e,i)}dispatchEvent(t){Em(this).dispatchEvent(t)}destroy(){const t=this.#t,e=t.gY();e.Y$(t),e.oW().J$()||e.y$().q$()||e.oW().Q$()||e.Z$()}xZ(){const t=this.#t.CZ();return t?t.map(t=>t.R$()):[]}*RZ(){const t=this.#t;if(t.LZ())for(const e of t.kZ())yield e.R$()}get uid(){return this.#t.GZ()}get NZ(){return this.#t.jZ()}get FZ(){return this.#t.BZ()}set FW(t){Pm.ir(t),this.#t.zW(t)}get FW(){return this.#t.zZ()}UZ(){this.#t.HZ()}get IW(){const t=this.#t;return t.gY().OW(t)}VZ(t){return Pm.ar(t),this.#t.WZ(t)}$Z(...t){Pm.Er(t);const e=new Set(t.map(t=>t.toLowerCase())),i=this.#t.YZ();return e.isSubsetOf(i)}JZ(t){t instanceof Set||(t=new Set(t)),this.#t.qZ(t)}QZ(){return new Set(this.#t.ZZ())}signal(t){Pm.ar(t);const e=this.#t;e.gY().oW().XZ(e,t)}EW(t){Pm.ar(t);const e=this.#t;return e.gY().oW().KZ(e,t)}fq(t,...e){return this.objectType.fq(t,[this],...e)}}}{const Im=self.Ee,Om=self.Le,Dm=Im.Te();self.tX=class extends self.PZ{#t;#e=!1;#i=null;#r=!1;#s=null;#n;#o;constructor(t){super(),this.#t=Im.EJ._J(Dm),this.#e=!1,this.#i=null,this.#r=!1,this.#s=null,this.#n=t?.eX,this.#o=t?.iX}DZ(){this.rX(!1),this.sX(!1),super.DZ()}nX(){return Im.EJ.oX()}aX(t){const e=this.#t;e.gY().hX(t,e)}uX(t){const e=this.#t;return e.gY().oY(t,e)}cX(t,e){if(Om.ar(t),Om.Dr(e),!this.#n)throw new Error("no DOM component id set");this.#t.gY().lX(this.#n,t,e)}fX(t){Om.Er(t);for(const[e,i]of t)this.cX(e,i)}pX(t,e){if(Om.ar(t),!this.#n)throw new Error("no DOM component id set");this.#t.gY().Ul(this.#n,t,e)}dX(t,e){if(Om.ar(t),!this.#n)throw new Error("no DOM component id set");return this.#t.gY().K$(this.#n,t,e)}mX(t,e){if(!this.#t.gY().YV())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#n,handler:t,data:e,responseId:null});this.pX(t,e)}rX(t){if(t=!!t,this.#e===t)return;this.#e=t;const e=this.#t.gY();if(t){if(!this.#i)if(this.#t.gY().yX()){const t=globalThis.gX,e=this.XJ;this.#i=()=>{const i=performance.now();this.vX(),t.wX(e,performance.now()-i)}}else this.#i=()=>this.vX();e.wf().addEventListener("tick",this.#i)}else e.wf().removeEventListener("tick",this.#i)}SX(){return this.#e}vX(){}sX(t){if(t=!!t,this.#r===t)return;this.#r=t;const e=this.#t.gY();if(t){if(!this.#s)if(this.#t.gY().yX()){const t=globalThis.gX,e=this.XJ;this.#s=()=>{const i=performance.now();this.bX(),t.wX(e,performance.now()-i)}}else this.#s=()=>this.bX();e.wf().addEventListener("tick2",this.#s)}else e.wf().removeEventListener("tick2",this.#s)}_X(){return this.#r}bX(){}EX(){return[]}TX(){return null}PX(t){}AX(){if(!this.#o)throw new Error("no wrapper component id set");return this.#t.gY().MX(this.#o)}IX(t,e){if(Om.ar(t),Om.Dr(e),!this.#o)throw new Error("no wrapper component id set");this.#t.gY().OX(this.#o,t,e)}DX(t){Om.Er(t);for(const[e,i]of t)this.IX(e,i)}xX(t,e){if(!this.#o)throw new Error("no wrapper component id set");this.runtime.tW.CX(this.#o,t,e)}RX(t,e){if(!this.#o)throw new Error("no wrapper component id set");return this.runtime.tW.LX(this.#o,t,e)}}}{let xm=function(t){return class e extends t{#t;#e;constructor(t){super(t);const e=Cm.EJ._J(Fm),i=e.N$();this.#t=e,this.#e=i,jm.set(this,e);const r=[],s=i.kX();if(s){const t=i.gq().Uq().Hq().length;for(let e=0;e<t;++e)r.push(new self.Vq(s,e))}const n={effects:{value:r,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#e.g$().d$()}get GX(){return this.#e.F$().sQ()}get x(){return this.#e.rE()}set x(t){t=+t;const e=this.#e;isNaN(t)||e.rE()===t||(e.sE(t),e.NX())}get y(){return this.#e.oE()}set y(t){t=+t;const e=this.#e;isNaN(t)||e.oE()===t||(e.aE(t),e.NX())}setPosition(t,e){t=+t,e=+e;const i=this.#e;isNaN(t)||isNaN(e)||i.rE()===t&&i.oE()===e||(i.jX(t,e),i.NX())}FX(){const t=this.#e;return[t.rE(),t.oE()]}offsetPosition(t,e){if(t=+t,e=+e,isNaN(t)||isNaN(e)||0===t&&0===e)return;const i=this.#e;i.BX(t,e),i.NX()}set zX(t){t=+t;const e=this.#e;isNaN(t)||e.UX()===t||(e.HX(t),e.NX())}get zX(){return this.#e.UX()}set VX(t){t=+t;const e=this.#e;isNaN(t)||e.WX()===t||(e.$X(t),e.NX())}get VX(){return this.#e.WX()}YX(t,e){t=+t,e=+e;const i=this.#e;isNaN(t)||isNaN(e)||i.UX()===t&&i.WX()===e||(i.HX(t),i.$X(e),i.NX())}JX(){const t=this.#e;return[t.UX(),t.WX()]}get Hj(){return this.#e.hE()}set Hj(t){t=+t;const e=this.#t,i=this.#e;isNaN(t)||i.hE()===t||(i.uE(t),e.gY().W$())}get qX(){return this.#e.QX()}get width(){return this.#e.Eg()}set width(t){t=+t;const e=this.#e;isNaN(t)||e.Eg()===t||(e.cg(t),e.NX())}get height(){return this.#e.Pg()}set height(t){t=+t;const e=this.#e;isNaN(t)||e.Pg()===t||(e.lg(t),e.NX())}Wq(t,e){t=+t,e=+e;const i=this.#e;isNaN(t)||isNaN(e)||i.Eg()===t&&i.Pg()===e||(i.$D(t,e),i.NX())}getSize(){const t=this.#e;return[t.Eg(),t.Pg()]}get angle(){return this.#e.qq()}set angle(t){t=Cm.Ks(+t);const e=this.#e;isNaN(t)||e.qq()===t||(e.Jq(t),e.NX())}get ZX(){return Cm.en(this.angle)}set ZX(t){this.angle=Cm.tn(t)}Ku(t){return t?(this.#e.XX(Gm,Nm,!1),Gm.ru()):this.#e.KX().ru()}tK(t){return t?(this.#e.XX(Gm,Nm,!1),Nm.Yu()):this.#e.eK().Yu()}iK(){return this.#e.rK()}get isVisible(){return this.#e.kQ()}set isVisible(t){t=!!t;const e=this.#t,i=this.#e;i.kQ()!==t&&(i.RQ(t),e.gY().W$())}get opacity(){return this.#e.RR()}set opacity(t){t=Cm.Xs(+t,0,1);const e=this.#t,i=this.#e;isNaN(t)||i.RR()===t||(i.kR(t),e.gY().W$())}set sK(t){if(Rm.Er(t),t.length<3)throw new Error("expected 3 elements");Um.Ma(t[0],t[1],t[2]);const e=this.#t,i=this.#e;i.nK().Ha(Um)||(i.oK(Um),e.gY().W$())}get sK(){const t=this.#e.nK();return[t.ka(),t.Ga(),t.Na()]}set PH(t){Rm.ar(t);const e=Bm.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");const i=this.#t;this.#e.W_(e),i.gY().W$()}get PH(){return zm.get(this.#e.cZ())}aK(){this.#e.hK()}uK(){this.#e.cK()}lK(t){Rm.jr(t,km);const e=this.#t,i=e.gY().cQ(t);if(!i)throw new Error("invalid layer");e.N$().fK(i)}pK(t,i){Rm.jr(t,e),this.#e.dK(jm.get(t),i)}get zIndex(){return this.#e.B$()}get mK(){return this.#e.yK()}set mK(t){this.#e.gK(!!t)}Pu(t,e){return Rm.Zi(t),Rm.Zi(e),this.#e.vK(+t,+e)}jY(t){Rm.jr(t,e);const i=this.#t,r=jm.get(t);return i.gY().CV().FY(i,r)}zY(){const t=this.#t,e=t.gY().CV().UY(t);return e?e.R$():null}getParent(){const t=this.#t.wK();return t?t.R$():null}SK(){const t=this.#t.bK();return t?t.R$():null}*_K(){for(const t of this.#t._K())yield t.R$()}EK(){return this.#t.TK()}PK(t){const e=this.#t.AK(t);return e?e.R$():null}*children(){for(const t of this.#t.children())yield t.R$()}*MK(){for(const t of this.#t.MK())yield t.R$()}IK(t,i){Rm.jr(t,e),Rm.yr(i),i||(i={});const r=this.#t,s=jm.get(t);r.DK(s,i)}removeChild(t){Rm.jr(t,e);const i=this.#t,r=jm.get(t);i.xK(r)}CK(){const t=this.#t;t.RK()&&t.wK().xK(t)}LK(){const t=this.#e;return{kK:t.GK(),NK:t.jK(),FK:t.BK(),zK:t.UK(),HK:t.VK(),WK:t.$K(),YK:t.JK(),qK:t.QK(),ZK:t.XK()}}KK(t,e){Rm.ir(t),Rm.ir(e),this.#e.t0(t,e)}e0(){const t=this.#e;t.i0(),t.NX()}r0(t,e,i){Rm.ir(t),Rm.ir(e),Rm.mr(i);const r=this.#e;r.s0(t,e,i)&&r.NX()}n0(t,e){let i=NaN,r=NaN,s=NaN,n=NaN,o=NaN;const a=this.#e;if(a.o0()){const h=a.a0().$E(t,e);null!==h&&(i=h.rE(),r=h.oE(),s=h.hE(),n=h.cE(),o=h.fE())}return{x:i,y:r,Hj:s,h0:n,u0:o}}c0(){const t=this.#e;if(!t.o0())return[0,0];const e=t.a0();return[e.kE(),e.GE()]}}};MakeIWorldInstanceClass=xm;const Cm=self.Ee,Rm=self.Le,Lm=self.PZ,km=self.uQ,Gm=Cm.$s(Cm.Rect),Nm=Cm.$s(Cm.Ou),jm=new WeakMap,Fm=Cm.Te(),Bm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),zm=new Map([...Bm.entries()].map(t=>[t[1],t[0]])),Um=Cm.$s(Cm.ba);self.l0=xm(self.PZ),self.f0=xm(self.tX)}{const Hm=self.Ee,Vm=self.Le;self.p0=class extends self.l0{#t;constructor(){super(),this.#t=self.PZ.IZ()}d0(){return this.#t.y0().m0()}focus(){this.#t.y0().g0()}blur(){this.#t.y0().v0()}w0(t,e){Vm.ar(t),this.#t.y0().S0(t,e)}}}{let Wm=function(t){let e=Jm.get(t);return e||(e=$m.$s($m.Event.wf),Jm.set(t,e),e)};GetDispatcher=Wm;const $m=self.Ee,Ym=self.Le,Jm=new WeakMap,qm=$m.Te();self.b0=class{#t;constructor(){const t=$m.EJ._J(qm);this.#t=t;const e={runtime:{value:t.gY().TJ(),writable:!1},behavior:{value:t.E0()._0(),writable:!1},T0:{value:t.A0().P0(),writable:!1}};Object.defineProperties(this,e),t.gY().UJ(this,t)}static IZ(){return $m.EJ.OZ()}get M0(){return this.#t.I0().R$()}DZ(){const t=Jm.get(this);t&&(t.Ys(),Jm.delete(this))}addEventListener(t,e,i){Ym.ar(t),Ym.Dr(e),Wm(this).addEventListener(t,e,i)}removeEventListener(t,e,i){Ym.ar(t),Ym.Dr(e),Wm(this).removeEventListener(t,e,i)}dispatchEvent(t){Wm(this).dispatchEvent(t)}}}{const Qm=self.Ee,Zm=self.Le,Xm=Qm.Te();self.O0=class{constructor(){const t=Qm.EJ._J(Xm),e={runtime:{value:t.gY().TJ(),writable:!1},behavior:{value:t.E0()._0(),writable:!1},name:{value:t.Dl(),writable:!1}};Object.defineProperties(this,e)}}}{const Km=self.Ee,ty=self.Le,ey=Km.Te();self.D0=class{#e;constructor(){const t=Km.EJ._J(ey);this.#e=t;const e={runtime:{value:t.gY().TJ(),writable:!1},id:{value:t.PJ(),writable:!1}};Object.defineProperties(this,e),t.gY().UJ(this,t)}tq(){return this.#e.cq().map(t=>t.R$())}static HJ(t){if(!t)return null;const e=Km.EJ.x0(t);return e?e._0():null}}}{const iy=self.Ee,ry=self.Le,sy=iy.$s(iy.ba);self.Vq=class{#t;constructor(t,e){this.#t=t;const i={index:{value:e,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.Hq()[this.index].Dl()}get isActive(){return this.#t.C0(this.index)}set isActive(t){t=!!t;const e=this.#t;e.C0(this.index)!==t&&(e.R0(this.index,t),e.L0(),e.gY().W$())}setParameter(t,e){ry.ir(t),t=Math.floor(+t);const i=this.#t,r=i.k0(this.index,t);if(null===r)throw new RangeError("invalid index");if(r instanceof iy.ba){if(!Array.isArray(e)||e.length<3)throw new TypeError("expected array with 3 elements");sy.Ma(e[0],e[1],e[2]),e=sy}else if("number"!=typeof e)throw new TypeError("expected number");i.G0(this.index,t,e)&&i.C0(this.index)&&i.gY().W$()}getParameter(t){ry.ir(t),t=Math.floor(+t);const e=this.#t.k0(this.index,t);if(null===e)throw new RangeError("invalid index");return e instanceof iy.ba?[e.ka(),e.Ga(),e.Na()]:e}}}{const ny=self.Ee,oy=self.Le;self.N0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Dl(),writable:!1}})}get speed(){return this.#t.j0()}get F0(){return this.#t.B0()}get z0(){return this.#t.U0()}get H0(){return this.#t.V0()}get W0(){return this.#t.$0()}get frameCount(){return this.#t.Y0()}J0(){return this.#t.q0().map(t=>t.Q0())}*frames(){for(const t of this.#t.q0())yield t.Q0()}}}{const ay=self.Ee,hy=self.Le;self.mY=class{#e;constructor(t){this.#e=t}static dY(t){return t.#e}get width(){return this.#e.Eg()}get height(){return this.#e.Pg()}getSize(){const t=this.#e;return[t.Eg(),t.Pg()]}Z0(t){return t.X0(this)}K0(){return this.#e.xx().ru()}}}{const uy=self.Ee,cy=self.Le;self.t1=class extends self.mY{#e;constructor(t){super(t.e1()),this.#e=t,Object.defineProperties(this,{duration:{value:t.i1(),writable:!1},zX:{value:t.UX(),writable:!1},VX:{value:t.WX(),writable:!1}})}JX(){const t=this.#e;return[t.UX(),t.WX()]}s1(){return this.#e.n1()}o1(t){return this.a1(t)[0]}h1(t){return this.a1(t)[1]}a1(t){const e=this.#e;let i=null;if("number"==typeof t)i=e.u1(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=e.c1(t)}return i?[i.rE(),i.oE()]:this.JX()}l1(){const t=this.#e.f1();return t?t.vc():0}d1(t){return this.m1(t)[0]}g1(t){return this.m1(t)[1]}m1(t){cy.ir(t),t=Math.floor(t);const e=this.#e.f1();if(!e||t<0||t>=e.vc())return[0,0];const i=e.yc();return[i[2*t],i[2*t+1]]}get tag(){return this.#e.v1()}}}{let ly=function(t){const e=dy.get(t);if(e.w1())throw new Error("timeline/tween was released and is no longer valid");return e};GetTimelineState=ly;const fy=self.Ee,py=self.Le,dy=new WeakMap;self.S1=class{constructor(t){dy.set(this,t),t.gY().UJ(this,t)}pause(){ly(this).b1()}resume(){ly(this)._1()}stop(){ly(this).Bf()}$Z(t){return ly(this).E1(t)}set time(t){py.ir(t),ly(this).T1(t)}get time(){return ly(this).oU()}set totalTime(t){py.ir(t),ly(this).P1(t)}get totalTime(){return ly(this).A1()}set F0(t){ly(this).M1(!!t)}get F0(){return ly(this).I1()}set W0(t){ly(this).O1(!!t)}get W0(){return ly(this).D1()}set playbackRate(t){py.ir(t),ly(this).C1(t)}get playbackRate(){return ly(this).R1()}get progress(){const t=ly(this);return t.oU()/t.A1()}get tags(){return ly(this).L1()}get finished(){return ly(this).G1()}get N1(){return ly(this).IsPlaying()}get j1(){return ly(this).F1()}get B1(){return dy.get(this).w1()}}}{let my=function(t){const e=vy.get(t);if(e.w1())throw new Error("timeline was released and is no longer valid");return e};GetTimelineState=my;const yy=self.Ee,gy=self.Le,vy=new WeakMap;let wy=null;self.z1=class extends self.S1{constructor(t){super(t),vy.set(this,t);const e={name:{value:t.Dl(),writable:!1}};Object.defineProperties(this,e)}}}{let Sy=function(t){const e=Ey.get(t);if(e.w1())throw new Error("tween was released and is no longer valid");return e};GetTweenState=Sy;const by=self.Ee,_y=self.Le,Ey=new WeakMap,Ty=new WeakMap;let Py=null;self.U1=class extends self.S1{constructor(t,e,i){super(t),Py||(Py=i.H1),Ey.set(this,t),e&&Ty.set(this,e)}stop(){const t=Sy(this);Ty.get(this).V1(t)}W1(t){_y.ar(t);const e=self.$c.cl(Py(t));Sy(this).Y1(e)}get M0(){const t=Sy(this).J1();return t?t.R$():null}get q1(){return Sy(this).Q1()}set q1(t){Sy(this).Z1(!!t)}get finished(){const t=Sy(this);return t.G1().then(()=>new Promise(e=>{t.X1()&&e()}))}get released(){return Sy(this).K1()}get value(){const t=Sy(this);if("value"!==t.t2())throw new Error("not a value tween");return t.i2("value").e2()}}}{const Ay=self.Ee,My=self.Le;self.s2=class extends self.bJ{constructor(){super()}}}{const Iy=self.Ee,Oy=self.Le,Dy=Iy.Te();self.n2=class extends self.s2{#t;#i;#e=0;#n=new Map;constructor(t){if(super(),this.#t=Iy.EJ._J(Dy),!t?.eX)throw new Error("no DOM component ID specified");this.#i=t.eX,this.o2("elem-focused",t=>t.a2()),this.o2("elem-blurred",t=>{t&&t.h2()})}u2(t){const e=this.#e++;return this.#n.set(e,t),e}c2(t){this.#n.delete(t)}o2(t,e){this.#t.gY().lX(this.#i,t,t=>{const i=this.#n.get(t.elementId);e(i,t)})}l2(t){Oy.Er(t);for(const[e,i]of t)this.l2(e,i)}}}{const xy=self.Ee,Cy=self.Le,Ry=new WeakMap,Ly=xy.Te();self.f2=class extends self.Eq{#t;constructor(){super(),this.#t=xy.EJ._J(Ly)}d2(){}m2(){return this.#t.e1().g2()}v2(t){}w2(t){}S2(){}b2(t){}}}{const ky=self.Ee,Gy=self.Le,Ny=new WeakMap,jy=ky.Te();self._2=class extends self.f0{#t;#s=null;#e=null;constructor(t){super(t),this.#t=ky.EJ._J(jy)}DZ(){if(super.DZ(),this.#s){const t=this.#t.gY().wf();t.removeEventListener("renderercontextlost",this.#s),t.removeEventListener("renderercontextrestored",this.#e),this.#s=null,this.#e=null}}E2(){if(this.#s)return;this.#s=()=>this.T2(),this.#e=()=>this.P2();const t=this.#t.gY().wf();t.addEventListener("renderercontextlost",this.#s),t.addEventListener("renderercontextrestored",this.#e)}T2(){}P2(){}A2(t){}M2(){return!0}c_(){return!1}}}{const Fy=self.Ee,By=self.Le,zy=Fy.$s(Fy.Rect),Uy=new WeakMap,Hy=Fy.Te();self.I2=class extends self._2{#t=-1;#e=!0;#n=!1;#r=!1;#i=-.2;#o=Fy.$s(Fy.Rect,0,0,-1,-1);#a=0;#h=0;#u=-1;#c=-1;#l=!1;constructor(t){if(!t?.eX)throw new Error("no DOM component ID specified");super(t);const e=Fy.EJ._J(Hy);Uy.set(this,e),this.#t=this.XJ.u2(this);const i=e.gY().I$();this.#a=i.O2(),this.#h=i.D2(),this.rX(!0)}DZ(){super.DZ(),this.XJ.c2(this.#t),this.C2("destroy"),this.#t=-1,Uy.delete(this)}R2(){if(Uy.get(this).gY().YV())throw new Error("not valid in worker mode");return this.L2("get-element")}C2(t,e){e||(e={}),e.elementId=this.#t,this.pX(t,e)}L2(t,e){return e||(e={}),e.elementId=this.#t,this.mX(t,e)}G2(t,e){return e||(e={}),e.elementId=this.#t,this.dX(t,e)}N2(t){t||(t={});const e=Uy.get(this).N$();t.elementId=this.#t,t.isVisible=e.kQ(),t.htmlIndex=e.F$().j2(),t.htmlZIndex=e.F2(),Object.assign(t,this.B2()),this.#e=!!t.isVisible,this.mX("create",t),this.z2(!0)}U2(t){t=!!t,this.#e!==t&&(this.#e=t,this.C2("set-visible",{isVisible:t}))}vX(){this.z2(!1)}H2(){const t=Uy.get(this).gY().I$().V2();return"Android"===Fy.Je.qe&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}z2(t){const e=Uy.get(this);if(e.j$())return;const i=e.N$(),r=i.F$(),s=i.KX();let[n,o]=r.vZ(s.Kh(),s.tu()),[a,h]=r.vZ(s.eu(),s.iu());const u=e.gY().I$(),c=u.lJ(),l=u.pJ();if(!i.kQ()||!r.kQ())return void this.U2(!1);if(!this.H2()&&(a<=0||h<=0||n>=c||o>=l))return void this.U2(!1);zy.set(n,o,a,h);const f=u.O2(),p=u.D2(),d=r.j2(),m=i.F2();if(!t&&zy.equals(this.#o)&&this.#a===f&&this.#h===p&&this.#u===d&&this.#c===m)return void this.U2(!0);this.#o.v(zy),this.#a=f,this.#h=p,this.#u=d,this.#c=m,this.U2(!0);let y=null;this.#r&&(y=r.W2()+this.#i),this.C2("update-position",{left:Math.round(this.#o.Kh()),top:Math.round(this.#o.tu()),width:Math.round(this.#o.width()),height:Math.round(this.#o.height()),htmlIndex:d,htmlZIndex:m,fontSize:y})}Y2(){this.L2("focus",{focus:!0})}J2(){this.L2("focus",{focus:!1})}a2(){this.#n=!0}h2(){this.#n=!1}q2(){return this.#n}Q2(t,e){this.Z2("set-css-style",{prop:Fy.va(t),val:e})}X2(t,e){this.Z2("set-attribute",{name:t,val:e})}K2(t){this.Z2("remove-attribute",{name:t})}t3(){this.#l||(this.#l=!0,Promise.resolve().then(()=>{this.#l=!1,this.C2("update-state",this.B2())}))}B2(){}e3(){return this.#t}}}{const Vy=self.Ee,Wy=self.Le;self.i3=class extends self.D0{constructor(){super()}}}{const $y=self.Ee,Yy=self.Le;self.r3=class extends globalThis.O0{constructor(){super()}d2(){}}}{const Jy=self.Ee,qy=self.Le,Qy=new WeakMap,Zy=Jy.Te();self.s3=class extends self.b0{#r=!1;#e=!1;#t=!1;constructor(){super(),Qy.set(this,Jy.EJ._J(Zy))}DZ(){super.DZ(),this.rX(!1),this.sX(!1),this.n3(!1),Qy.delete(this)}nX(){return Jy.EJ.oX()}o3(){}aX(t){const e=Qy.get(this);e.gY().hX(t,e.I0(),e.A0())}uX(t){const e=Qy.get(this);return e.gY().oY(t,e.I0(),e.A0())}rX(t){if(t=!!t,this.#r===t)return;this.#r=t;const e=Qy.get(this).gY();t?e.a3(this):e.h3(this)}SX(){return this.#r}vX(){}sX(t){if(t=!!t,this.#e===t)return;this.#e=t;const e=Qy.get(this).gY();t?e.u3(this):e.c3(this)}_X(){return this.#e}bX(){}n3(t){if(t=!!t,this.#t===t)return;this.#t=t;const e=Qy.get(this).gY();t?e.l3(this):e.f3(this)}d3(){return this.#t}m3(){}EX(){return[]}TX(){return null}PX(t){}}}{const Xy=self.Ee,Ky=self.Le;let tg=null;self.eW=class{constructor(t){tg=t,Object.defineProperties(this,{y3:{value:tg.g3(),writable:!1}})}v3(){tg.W$()}iY(t){tg.rY(t)}w3(t){return Ky.ar(t),tg.MX(t)}CX(t,e,i){Ky.ar(t),Ky.ar(e),Ky.Tr(i),tg.S3(t,e,i)}LX(t,e,i){return Ky.ar(t),Ky.ar(e),Ky.Tr(i),tg.b3(t,e,i)}_3(t){return Ky.hr(t),new self.E3(tg,t)}set T3(t){tg.P3(!!t)}get T3(){return tg.A3()}M3(t){tg.I3(!!t)}O3(t){Ky.Zi(t);const e=tg.D3(t);return e?e.YJ():null}}}{const eg=self.Ee,ig=self.Le;self.E3=class{#t;#e;#o;#i;#n;#s;constructor(t,e){this.#t=t;const i=t.oW(),r=t.fW();this.#e=r,this.#o=r._q();const s=t.wW();this.#i=s.x3(),this.#n=s.C3(r);const n=i.R3().C3();this.#s=n,e&&n.L3(e),t.G3(!1)}N3(){const t=this.#t.oW(),e=this.#o,i=this.#s;t.j3(e),this.#e.F3(this.#i,this.#n),t.B3(e),i.z3(i.PV()+1)}get U3(){return this.#s.H3()}release(){const t=this.#t,e=t.wW(),i=t.oW().R3();t.G3(!0),i.V3(),e.V3()}}}{let rg=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=rg;const sg=self.Ee,ng=self.Le;let og=null,ag=null;const hg=["none","back","front"],ug=["cw","ccw"];self.W3=class{constructor(t,e){ag=t,og=e}Y3(){og.UR()}J3(t){og.BR(t)}q3(){og.IS()}Q3(){og._S()}Z3(){og.kS()}setColor(t){og.LR(t[0],t[1],t[2],t[3])}X3(t,e,i,r){og.LR(t,e,i,r)}K3(){og.GR()}t4(t){og.kR(t)}e4(t){og.ZS(t)}i4(){return og.XS()}r4(t){const e=hg.indexOf(t);if(-1===e)throw new Error("invalid cull mode");og.Nb(e)}s4(){return hg[og.HR()]}n4(t){const e=ug.indexOf(t);if(-1===e)throw new Error("invalid front face winding");og.jb(e)}o4(){return og.VR()}rect(t){og.$R(t.left,t.top,t.right,t.bottom)}a4(t,e,i,r){og.$R(t,e,i,r)}h4(t){og.Ou(sg.Ou.Ju(t))}u4(t,e,i,r,s,n,o,a){og.Bb(t,e,i,r,s,n,o,a)}c4(t,e){og.hb(sg.Ou.Ju(t),sg.Rect.su(e))}l4(t,e){og.qR(sg.Ou.Ju(t),sg.Ou.Ju(e))}f4(t,e,i){og.QR(sg.Ou.Ju(t),sg.Ou.Ju(e),i)}d4(t,e,i,r,s,n,o,a,h,u,c,l,f){og.ZR(t,e,i,r,s,n,o,a,h,u,c,l,sg.Rect.su(f))}m4(t,e,i,r,s,n,o,a,h,u,c,l,f){og.rb(t,e,i,r,s,n,o,a,h,u,c,l,sg.Ou.Ju(f))}y4(t,e,i,r,s,n,o,a,h,u,c,l,f,p){og.XR(t,e,i,r,s,n,o,a,h,u,c,l,sg.Ou.Ju(f),p)}g4(t,e,i,r){og.tT(t,e,i,r)}v4(t){og.Fb(t)}line(t,e,i,r){og.Dg(t,e,i,r)}w4(t,e,i,r,s,n){og.sb(t,e,i,r,s,n)}S4(t,e,i,r){og.ub(t,e,i,r)}b4(t){og.pb(sg.Rect.su(t))}_4(t){og.mb(sg.Ou.Ju(t))}E4(t){og._b(t)}T4(){og.Eb()}P4(t){og.Mb(t)}A4(){og.xb()}M4(t){ng.Fr(t,self.I4);const e=t?ag.cQ(t):null;og.jR(e)}O4(t,e){const i=self.mY.dY(t);if(!i)throw new Error("invalid IImageInfo");return i.D4(og,{uT:e?.uT??"clamp-to-edge",cT:e?.cT??"clamp-to-edge",lT:e?.lT??"trilinear",dT:e?.dT??!0})}x4(t){const e=self.mY.dY(t);if(!e)throw new Error("invalid IImageInfo");e.fD()}X0(t){const e=self.mY.dY(t);if(!e)throw new Error("invalid IImageInfo");const i=e.PP();return self.I4.C4(ag,i)}R4(t,e){if(!rg(t))throw new TypeError("invalid texture data");const i=og._L(t,{uT:e?.uT??"clamp-to-edge",cT:e?.cT??"clamp-to-edge",lT:e?.lT??"trilinear",dT:e?.dT??!0});return self.I4.C4(ag,i)}L4(t,e,i){ng.ir(t),ng.ir(e);const r=og.mP(t,e,{uT:i?.uT??"clamp-to-edge",cT:i?.cT??"clamp-to-edge",lT:i?.lT??"trilinear",dT:i?.dT??!0});return self.I4.C4(ag,r)}G4(t,e,i){ng.jr(e,self.I4);const r=ag.cQ(e);og.Dx(t,r,{yT:i?.yT??!0})}deleteTexture(t){ng.jr(t,self.I4);const e=ag.cQ(t);og.wP(e)}N4(){const t=og.t_();return new self.j4(ag,t)}F4(){ag.I$().B4(og)}z4(t){ng.jr(t,globalThis.uQ),ag.cQ(t).U4(og)}}}{const cg=self.Ee,lg=self.Le,fg=new WeakMap,pg=new WeakMap;self.I4=class{constructor(t,e){fg.set(this,{runtime:t,texture:e}),pg.set(e,this),t.UJ(this,e),Object.defineProperties(this,{width:{value:e.Eg(),writable:!1},height:{value:e.Pg(),writable:!1}})}static C4(t,e){if(!e)return null;return pg.get(e)||new self.I4(t,e)}}}{let dg=function(t){return gg.get(t).H4};getActual=dg;const mg=self.Ee,yg=self.Le,gg=new WeakMap;self.j4=class{constructor(t,e){gg.set(this,{runtime:t,H4:e}),t.UJ(this,e)}release(){dg(this).Ys()}set V4(t){yg.ar(t),dg(this).SD(t)}get V4(){return dg(this).vO()}set W4(t){yg.ir(t),dg(this).bD(t)}get W4(){return dg(this)._D()}set lineHeight(t){yg.ir(t),dg(this).TD(t)}get lineHeight(){return dg(this).PD()}set Y4(t){dg(this).AD(t)}get Y4(){return dg(this).MD()}set J4(t){dg(this).ID(t)}get J4(){return dg(this).OD()}setColor(t){yg.Er(t),this.q4(t[0],t[1],t[2])}q4(t,e,i){dg(this).LD(t,e,i)}Q4(t){yg.ar(t),dg(this).Y_(t)}set Z4(t){dg(this).kD(t)}get Z4(){return dg(this).GD()}set verticalAlign(t){dg(this).ND(t)}get verticalAlign(){return dg(this).jD()}set X4(t){dg(this).FD(t)}get X4(){return dg(this).BD()}set K4(t){dg(this).zD(t)}get K4(){return dg(this).UD()}set text(t){yg.ar(t),dg(this).Hl(t)}get text(){return dg(this).HD()}Wq(t,e,i){yg.ir(t),yg.ir(e),yg.ir(i),dg(this).$D(t,e,i)}Z0(){const{runtime:t,H4:e}=gg.get(this),i=e.PP();return self.I4.C4(t,i)}K0(){return dg(this).xx().ru()}t5(t){yg.Dr(t),dg(this).mD=t}e5(){dg(this).fD()}get i5(){return dg(this).JD()}get r5(){return dg(this).QD()}}}{let vg=function(t){if(!t)return"";const e=t.split(".");if(e.length<2)return"";const i=e.at(-1).toLowerCase();return _g.get(i)||""},wg=function(t){return new Promise((e,i)=>{const r=document.createElement("script");r.onload=e,r.onerror=i,r.async=!1,r.type="module",r.src=t,document.head.appendChild(r)})};GetTypeFromFileExtension=vg,AddScript=wg;const Sg=self.Ee,bg=new Set(["local","remote"]),_g=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);Sg.s5=class extends Sg.Vs{constructor(t,e){super();const i=e.exportType;this.Fl=t,this.n5=new Map,this.o5="cordova"===i,this.a5=!!e.isiOSCordova,this.h5=e.swClientId,this.u5=e.supportedAudioFormats||{},this.c5=new Map,this.l5=!1,this.f5=e.scriptFolder,this.p5="",this.d5="",this.m5="",this.y5=e.fileMap||new Map,this.g5=new Map,this.v5=[];const r="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.w5=r?"remote":"local",this.S5=new Map,this.b5=[],this._5=[],this.E5=!1,this.T5=0,this.P5=0,this.A5=0,this.M5=!1,this.I5=Sg.$s(Sg.Kp,()=>this.O5(),50),this.D5=Sg.$s(Sg.Vp,Math.max(Sg.hardwareConcurrency,8)),this.x5=Sg.$s(Sg.Vp,20),this.C5=new self.lY(this)}Ys(){for(const t of this.S5.values())t.Ys();this.S5.clear(),Sg.So(this._5),this.Fl=null}gY(){return this.Fl}R5(){return this.f5}L5(t){this.p5=t}MY(){return this.p5}k5(t){this.d5=t}G5(){return this.d5}N5(t){this.m5=t}j5(){return this.m5}F5(t){this.v5=t}GY(){return this.v5}ia(t,e){return e=e||this.w5,Sg.Zo(t)?"playable-ad-single-file"===this.Fl.eJ()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===e?this.D5.Hc(()=>Sg.ia(t)):this.x5.Hc(()=>Sg.ia(t)):Sg.ia(t)}ra(t){return Sg.Zo(t)?"playable-ad-single-file"===this.Fl.eJ()?Sg.na(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.w5?this.D5.Hc(()=>Sg.ra(t)):this.x5.Hc(()=>Sg.ra(t)):Sg.ra(t)}ta(t){return Sg.Zo(t)?"playable-ad-single-file"===this.Fl.eJ()?Sg.oa(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.w5?this.D5.Hc(()=>Sg.ta(t)):this.x5.Hc(()=>Sg.ta(t)):Sg.ta(t)}async ea(t){const e=await this.ta(t);return JSON.parse(e)}PY(t){let e=this.p5+t;return"Gecko"===Sg.Je.ti&&"preview"===this.Fl.eJ()&&(e=this.B5(e)),e}EY(t){return"playable-ad-single-file"===this.Fl.eJ()&&Sg.Zo(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}z5(t){if(Sg.Qo(t)||"preview"!==this.Fl.eJ()||!this.h5||!t)return t;try{const e=new URL(t,location.href);return e.searchParams.set("__c3_client_id",this.h5),e.toString()}catch(e){return console.warn("Invalid iframe URL: "+t),t}}U5(t,e){return(e?"true":"false")+"|"+t}H5(t){const e=!!t.V5;if(t.W5&&!bg.has(t.W5))throw new Error("invalid load policy");const i=this.U5(t.url,e);let r=this.S5.get(i);return r||(r=Sg.$s(Sg.Y5,this,{url:t.url,size:t.size||0,W5:t.W5||this.w5,V5:e}),this.S5.set(i,r),this.E5||(this.T5+=r.Nc(),this._5.push(r.J5().then(()=>this.q5(r.Nc())))),r)}Q5(t){const e=this.U5(t.Z5(),t.X5());this.S5.delete(e)}async K5(t){try{await Promise.all(this._5),this.A5=1,t&&0===this.T5&&this.O5()}catch(t){console.error("Error loading: ",t),this.M5=!0,this.O5()}}t8(){this.E5=!0}e8(){return this.M5}q5(t){this.P5+=t,this.I5.md()}O5(){const t=Sg.$s(Sg.Event,"loadingprogress");0===this.T5?this.A5=1:this.A5=Sg.Xs(this.P5/this.T5,0,1),t.progress=this.A5,this.Fl.wf().dispatchEvent(t),this.Fl.i8(Sg.$s(Sg.Event,"loadingprogress"))}u$(){return this.A5}l$(){return this.Fl.s8().r8()}n8(t){Sg.To(this.b5,t),this.b5.length&&this._5.push(this.o8())}async o8(){const t=[],e=[];for(const[i,r,s]of this.b5)this.T5+=s,t.push(this.a8(i,r,e).then(()=>this.q5(s)));await Promise.all(t),this.Fl.YV()&&e.length>0&&await this.Fl.K$("runtime","load-webfonts",{webfonts:e})}async a8(t,e,i){try{let r=this.EY(e);"Gecko"===Sg.Je.ti&&(t=`'${t}'`),("Gecko"===Sg.Je.ti&&"preview"===this.Fl.eJ()||"playable-ad-single-file"===this.Fl.eJ())&&(r=this.B5(r));const s=new FontFace(t,`url('${r}')`);this.Fl.YV()?self.fonts.add(s):document.fonts.add(s),await s.load(),this.Fl.YV()&&i.push({name:t,url:r})}catch(e){console.warn(`[C3 runtime] Failed to load web font '${t}': `,e)}}h8(t){return!!this.u5[t]}u8(t,e){this.l5=!!e;for(const[e,i,r]of t)this.c5.set(e,{fileName:e,c8:i.map(t=>({type:t[0],l8:t[1],fullName:e+t[1],fileSize:t[2]})),f8:r})}p8(t){const e=this.c5.get(t);if(!e)return null;let i=null;for(const t of e.c8)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.h8(t.type))return t;return i}d8(t){const e=this.p8(t);return e?{url:this.PY(e.fullName),type:e.type}:null}m8(){if(this.l5){const t=[];for(const e of this.c5.values()){if(e.f8)continue;const i=this.p8(e.fileName);i&&t.push({y8:e.fileName,url:this.PY(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}g8(t){return"preview"===this.Fl.eJ()&&(t=new URL(t,location.href).toString()),this.y5.get(t)||null}B5(t){let e=this.g5.get(t);if(e)return e;const i=this.g8(t);return i?(e=URL.createObjectURL(i),this.g5.set(t,e),e):t}IV(){return this.C5}async DY(...t){const e=t.map(t=>this.EY(t));if(this.Fl.YV())if(1===t.length){const e=t[0];await import(new URL(e,location.href).toString())}else{const e=t.map(t=>`import "${new URL(t,location.href).toString()}";`).join("\n"),i=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(i)}else await Promise.all(e.map(t=>wg(t)))}async CY(t){if(WebAssembly.compileStreaming){const e=this.EY(t);return await WebAssembly.compileStreaming(fetch(e))}{const e=await Sg.ra(t);return await WebAssembly.compile(e)}}async LY(t){const e=this.EY(t);return await this.Fl.K$("runtime","add-stylesheet",{url:e})}}}{const Eg=self.Ee;Eg.v8=class extends Eg.Vs{constructor(t,e){super(),this.w8=t,this.Fl=t.gY(),this.S8=e.url||"",this.lB=e.size,this.b8=e.W5,this._8=e.blob||null,this.E8=!!this._8,this.Cv=null}Ys(){this.Cv=null,this.w8=null,this.Fl=null,this._8=null}Z5(){return this.S8}Nc(){return this.lB}J5(){return"local"===this.b8||this._8?(this.E8=!0,Promise.resolve()):(this.Cv||(this.Cv=this.w8.ia(this.S8,this.b8).then(t=>(this.E8=!0,this.Cv=null,this._8=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Cv=null})),this.Cv)}T8(){return this.E8}P8(){return this._8?Promise.resolve(this._8):this.Cv?this.Cv:this.w8.ia(this.S8,this.b8)}}}{const Tg=self.Ee,Pg=new Tg.Vp,Ag=new Set;Tg.Y5=class extends Tg.v8{constructor(t,e){super(t,e),this.A8=null,this.M8=null,this.Wd=0,this.I8=-1,this.O8=-1,this.D8=!!e.V5,Ag.add(this)}Ys(){if(0!==this.Wd)throw new Error("released image asset which still has references");this.w8.Q5(this),this.A8=null,Ag.delete(this),super.Ys()}static x8(){for(const t of Ag)t.A8=null,t.M8=null,t.Wd=0}D4(t,e){return e=e||{},this.Wd++,this.M8?Promise.resolve(this.M8):(this.A8||(e.fT=this.Fl.I$().C8(),this.A8=this.L8(t,e)),this.A8)}async L8(t,e){try{const i=await this.P8();return 0===this.Wd?(this.A8=null,null):await Pg.Hc(async()=>{const r=await t.EL(i,e);return this.A8=null,0===this.Wd?(t.wP(r),null):(this.M8=r,this.I8=r.Eg(),this.O8=r.Pg(),this.M8)})}catch(t){throw console.error("Failed to load texture: ",t),t}}fD(){if(this.Wd<=0)throw new Error("texture released too many times");this.Wd--,0===this.Wd&&this.M8&&(this.M8.E_().wP(this.M8),this.M8=null)}k8(){this.Wd++}G8(){return this.Wd}N8(){this.Wd--}PP(){return this.M8}Eg(){return this.I8}Pg(){return this.O8}X5(){return this.D8}async j8(){const t=await this.P8();return Tg.Mi.ImageBitmap?await createImageBitmap(t):await Tg.ha(t)}}}{let Mg=function(t,e){return t.N$().F8()-e.N$().F8()};SortByInstLastCachedZIndex=Mg;const Ig=self.Ee,Og=self.assert;Ig.B8=class extends Ig.Vs{constructor(t,e,i){super(),this.z8=t,this.Dh=e,this.xh=i,this.U8=[],this.H8=!0,this.V8=new Set,this.W8=!1}Ys(){Ig.So(this.U8),this.V8.clear(),this.z8=null}Bf(){Ig.So(this.U8),this.H8=!0,this.V8.clear(),this.W8=!1}Y8(){this.H8=!1}Lc(){return!this.U8.length||!(this.U8.length>this.V8.size)&&(this.J8(),!0)}q8(t){if(this.V8.has(t))return this.V8.delete(t),void(0===this.V8.size&&(this.W8=!1));this.U8.push(t),this.H8=1===this.U8.length}Xf(t){this.V8.add(t),this.W8=!0,this.V8.size>=50&&this.J8()}J8(){this.W8&&(this.U8.length!==this.V8.size?(Ig.Oo(this.U8,this.V8),this.V8.clear(),this.W8=!1):this.Bf())}Q8(){this.H8||(this.U8.sort(Mg),this.H8=!0)}Z8(t){this.J8(),this.Q8(),this.U8.length&&t.push(this.U8)}}}{const Dg=self.Ee;Dg.X8=class extends Dg.Vs{constructor(t,e){super(),this.K8=t,this.t6=e,this.e6=Dg.$s(Dg.xc)}Ys(){this.e6.Ys(),this.e6=null}i6(t,e,i){let r=this.e6.Ue(t,e);return r||(i?(r=Dg.$s(Dg.B8,this,t,e),this.e6.Set(t,e,r),r):null)}r6(t){return Math.floor(t/this.K8)}s6(t){return Math.floor(t/this.t6)}n6(t,e,i){if(e)for(let r=e.Kh(),s=e.eu();r<=s;++r)for(let s=e.tu(),n=e.iu();s<=n;++s){if(i&&i.Pu(r,s))continue;const e=this.i6(r,s,!1);e&&(e.Xf(t),e.Lc()&&this.e6.kc(r,s))}if(i)for(let r=i.Kh(),s=i.eu();r<=s;++r)for(let s=i.tu(),n=i.iu();s<=n;++s)e&&e.Pu(r,s)||this.i6(r,s,!0).q8(t)}o6(t,e){let i=this.r6(t.Kh());const r=this.s6(t.tu()),s=this.r6(t.eu()),n=this.s6(t.iu());for(;i<=s;++i)for(let t=r;t<=n;++t){const r=this.i6(i,t,!1);r&&r.Z8(e)}}a6(t){let e=t.Kh();const i=t.tu(),r=t.eu(),s=t.iu();for(;e<=r;++e)for(let t=i;t<=s;++t){const i=this.i6(e,t,!1);i&&i.Y8()}}}}{let xg=function(t,e){return t.N$().F8()-e.N$().F8()},Cg=function(t,e){return t.N$().hE()-e.N$().hE()};SortByInstLastCachedZIndex=xg,SortByInstZElevation=Cg;const Rg=self.Ee,Lg=self.assert,kg=new Rg.Rect,Gg=new Rg.Ou,Ng=[],jg=new Rg.Rect,Fg=new Rg.Rect,Bg=self.oe,zg=Bg.de,Ug=Bg.me,Hg=Bg.ce,Vg=Hg.create(),Wg=zg.create(),$g=Ug.create(),Yg=zg.create(),Jg=zg.create(),qg=zg.create(),Qg=Rg.$s(Rg.Oh),Zg=Rg.$s(Rg.Rect),Xg=[],Kg=[],tv=[],ev={name:"",h6:-1,u6:!1,isVisible:!0,GQ:!0,FQ:!1,backgroundColor:[1,1,1,1],sZ:!0,c6:[1,1],opacity:1,aZ:!1,l6:!1,f6:!1,p6:!1,$Q:1,PH:0,Hj:0,d6:[],m6:[],y6:[]},iv=new Map,rv=t=>{if(!t.M0.gq().g6())return;const e=t.M0.GZ();iv.has(e)&&(iv.delete(e),iv.size||t.M0.gY().wf().removeEventListener("instancedestroy",rv))};Rg.v6=class extends Rg.Vs{constructor(t,e,i){super(),i=Object.assign({},ev,i),this.w6=t,this.Fl=t.gY(),this.S6=e,this.Qs=i.name,this.Uv=-1,this.b6=!!i.FQ,this._6=-1,this.E6=i.h6,this.T6=!!i.u6,this.P6=!!i.isVisible,this.A6=!!i.GQ,this.M6=Rg.$s(Rg.ba),this.M6.wh(i.backgroundColor),this.I6=!!i.sZ,this.O6=i.c6[0],this.D6=i.c6[1],this.B_=Rg.$s(Rg.ba,1,1,1,i.opacity),this.x6=Rg.$s(Rg.ba),this.C6=!!i.aZ,this.R6=!!i.l6,this.L6=!!i.f6,this.k6=!!i.p6,this.G6=i.$Q,this.F_=i.PH,this.N6=null,this.j6=1,this.z_=i.Hj,this.F6=0,this.B6=0,this.z6=0,this.U6=!1,this.yC=Rg.$s(Rg.Rect),this.H6=Rg.$s(Rg.Rect),this.V6=Rg.$s(Rg.Rect),this.W6=!0,this.uP=Hg.create(),this.Y6=!0,this.cH=Hg.create(),this.J6=!0,this.q6=Rg.$s(Rg.qv.Kv),this.Q6=!0,this.Z6=[],this.X6=i.d6,this.K6=[],this.t7=[],this.e7=new Map,this.U8=[],this.i7=!1,this.r7=!1,this.s7=!1;const r=this.Fl.I$();this.n7=Rg.$s(Rg.o7,this,i.m6),this.bV=Rg.$s(Rg.qv.wU,r.a7(),{hU:(t,e)=>{const i=e.pV(),s=i.wL();t.Y_(i.h7()),t.ML(s),t.IL(s),r.u7(s)},cU:t=>this.Uq().c7(t)}),this.l7=!0,this.f7=!0,this.p7=null,this.d7=[],this.m7=!1,this.y7=Rg.$s(Rg.Rect,0,0,-1,-1),this.g7=Rg.$s(Rg.Rect,0,0,-1,-1),this.v7=new self.uQ(this),this.w7=Rg.$s(Rg.Event.wf),this.S7(),this.b7()&&(this.p7=Rg.$s(Rg.X8,this.Fl.qV(),this.Fl.ZV())),this._7=i.y6.map(t=>Rg.v6.E7(this.w6,this,t))}T7(){for(const t of this.X6){const e=this.Fl.P7(t[1]);this.w6.A7(e),e.M7()||(e.I7(t),e.O7(this.Uv)),this.K6.push(t),this.e7.set(t[2],t)}Rg.To(this.Z6,this.K6),this.X6=null}static E7(t,e,i){return Rg.$s(Rg.v6,t,e,{name:i[0],h6:i[2],isVisible:i[3],GQ:i[13],FQ:i[19],backgroundColor:i[4].map(t=>t/255),sZ:i[5],c6:[i[6],i[7]],opacity:i[8],aZ:i[9],l6:i[17],f6:i[18],p6:i[10],$Q:i[11],PH:i[12],Hj:i[16],d6:i[14],m6:i[15],y6:i[20]})}Ys(){for(const t of this._7)t.Ys();Rg.So(this._7);for(const t of this.U8)this.Fl.Y$(t);Rg.So(this.U8),this.n7.Ys(),this.n7=null,this.bV.Ys(),this.bV=null,this.v7=null,this.S6=null,this.w6=null,this.Fl=null}Js(){return!this.w6}D7(t){return this.e7.get(t)}x7(t){const e=this.w6.C7(),i=this.K6;let r=0;for(let s=0,n=i.length;s<n;++s){const n=i[s],o=this.Fl.P7(n[1]);let a=!0;if(!o.R7()||e)if(o.g6()&&iv.has(n[2]))a=!1;else{const e=this.Fl.L7(n,this,!0);t.push(e),o.g6()&&(iv.size||this.Fl.wf().addEventListener("instancedestroy",rv),iv.set(e.GZ(),e),a=!1,this.t7.push(e.GZ()))}a&&(i[r]=i[s],++r)}Rg.wo(i,r),this.Fl.Z$(),this.V$()}k7(t,e){if(!t.KJ().OJ())throw new Error("instance is not of world type");const i=t.N$();if(i.F$()!==this)throw new Error("instance added to wrong layer");this.U8.push(t),0!==i.hE()&&(this.s7=!0),e&&this.b7()&&t.N$().NX(),this.V$(t)}G7(t){this.U8.includes(t)||(this.U8.push(t),0!==t.N$().hE()&&(this.s7=!0),this.V$(t))}N7(t,e){const i=t.N$();if(i.F$()!==this)throw new Error("instance added to wrong layer");this.U8.unshift(t),0!==i.hE()&&(this.s7=!0),this.V$(t),e&&this.b7()&&t.N$().NX()}j7(t,e){const i=this.U8.indexOf(t);i<0||(e&&this.b7()&&t.N$().F7(),this.U8.splice(i,1),this.V$(t),this.B7())}z7(){this.s7=!0}B7(){0===this.U8.length&&(this.s7=!1)}U7(t){if(t){const t=new Set;for(const e of this.U8){const i=e.N$().F8();i>=0&&t.add(i)}let e=-1;for(const i of this.U8){const r=i.N$();if(!(r.F8()>=0)){for(++e;t.has(e);)++e;r.H7(e)}}}this.U8.sort(xg)}V7(){}W7(){for(const t of this.U8)t.gq().g6()||this.Fl.Y$(t);this.Fl.Z$(),Rg.So(this.U8),this.s7=!1,this.V$()}Y7(t,e,i,r,s,n){const o=this.Fl.oW(),a=this.Fl.J7(),h=t.mq(),u=[];for(const c of this.K6){const l=c[0],f=l[0],p=l[1];if(!e.Pu(f,p))continue;const d=a[c[1]];if(d!==t){if(!h)continue;if(!t.Bq(d))continue}let m=s;if(!m){const t=this.Fl.k$();this.g$()===t?m=this:(m=t.q7(this.Dl()),m||(m=t.z$(this.PV())))}const y=this.Fl.L7(c,m,!1,void 0,void 0,!1,n,void 0,n);n&&m.Iq(y);const g=y.N$();g.BX(i,r),g.NX(),o.Oq(!0),y.Dq(),o.Oq(!1),u.push(y)}return u}Pq(){return this.U8.length}g$(){return this.w6}Dl(){return this.Qs}Q7(t){this.Uv=t}PV(){return this.Uv}Z7(t){this._6=t}j2(){return this._6}BQ(){return this.b6}zQ(t){t=!!t,this.b6!==t&&(this.b6=t,this.w6.X7(),this.Fl.W$())}K7(){let t=-1;const e=this.AQ();return t=e?e.OQ().indexOf(this):this.g$().t9().indexOf(this),t}e9(){return this.E6}gY(){return this.Fl}i9(){return this.T6}r9(){for(const t of this.MQ())if(t.i9())return!0;return!1}vJ(){return this.Fl.vJ()}Uq(){return this.n7}TV(){return this.s9(),this.bV}s9(){const t=this.n9();if(!this.l7&&t===this.f7&&!this.bV.lH())return;const e=this.Uq().o9();this.bV.fH(e.map(t=>t.$A()),{fU:e.map(t=>t.PV()),pU:!t,vU:!0}),this.l7=!1,this.f7=t}L0(){this.Uq().L0(),this.l7=!0}b7(){return this.k6&&!this.L6}a9(){return this.p7}h9(){this.m7=!1}kQ(){for(const t of this.u9())if(!t.CQ())return!1;return!0}CQ(){return this.P6}RQ(t){t=!!t,this.P6!==t&&(this.P6=t,this.Fl.W$())}jQ(t){this.A6=!!t}NQ(){return this.A6}HQ(){for(const t of this.u9())if(!t.NQ())return!1;return!0}fZ(t){if(t=!!t,this.U6!==t){if(this.U6=t,t){const t=this.g$();this.B6=t.Zq(),this.z6=t.Kq()}this.c9(),this.Fl.W$()}}l9(){return this.U6}Qq(t){const e=this.g$(),i=e.f9(),r=e.p9();t>r&&(t=r),t<i&&(t=i),this.B6!==t&&(this.B6=t,this.l9()&&(this.c9(),this.Fl.W$()))}Xq(t){const e=this.g$(),i=e.d9(),r=e.m9();t>r&&(t=r),t<i&&(t=i),this.z6!==t&&(this.z6=t,this.l9()&&(this.c9(),this.Fl.W$()))}Zq(){return this.l9()?this.B6:this.g$().Zq()}Kq(){return this.l9()?this.z6:this.g$().Kq()}dZ(){return this.y9(),this.yC}g9(){return this.y9(),this.H6}v9(){return this.y9(),this.V6}w9(){return this.g$().bQ()}tS(t){return this.Fl.tS(t)}S9(t,e){const i=this.g9();if(0===t)e.v(i);else{let r=i.au(),s=i.hu();const n=this.b9(t),o=i.width()/n,a=i.height()/n,[h,u]=this.w9();if(.5!==h||.5!==u){const e=this._9(),i=this.Fl,n=this.tS()/e;let o=(h-.5)*i.E9()/n,a=(u-.5)*i.T9()/n;const c=this.qq();0!==c&&(Qg.set(o,a),Qg.rotate(c),o=Qg.Lh(),a=Qg.Gh());const l=Rg.yn(e,0,t);r+=Rg.Mt(o,0,l),s+=Rg.Mt(a,0,l)}e.set(r-o/2,s-a/2,r+o/2,s+a/2)}}RR(){return this.B_.ja()}kR(t){t=Rg.Xs(t,0,1),this.B_.ja()!==t&&(this.B_.Ra(t),this.S7(),this.Fl.W$())}S7(){this.x6.v(this.B_),this.x6.qa()}h7(){return this.x6}n9(){return this.B_.Wa(1,1,1,1)}JQ(){return this.G6}YQ(t){this.G6!==t&&(this.G6=t,this.c9(),this.Fl.W$())}XQ(){return this.O6}eZ(){return this.D6}P9(t,e){this.O6===t&&this.D6===e||(this.O6=t,this.D6=e,this.c9(),this.Fl.W$())}ZQ(t){this.P9(t,this.eZ())}tZ(t){this.P9(this.XQ(),t)}uE(t){this.z_!==t&&(this.z_=t,this.Fl.W$())}hE(){return this.z_}Jq(t){t=Rg.Ks(t),this.F6!==t&&(this.F6=t,this.c9(),this.Fl.W$())}qq(){return Rg.Ks(this.w6.qq()+this.F6)}qQ(){return this.F6}A9(){return this.U8.length>0}U$(){return this.U8}M9(){return this.I9()&&this.L6?(Rg.To(tv,this.U$()),tv.sort((t,e)=>this.O9(t,e)),tv):this.U$()}D9(t){Rg.Ls(t,this.M9());for(const e of this._7)e.kQ()&&e.RR()>0&&e.D9(t)}O9(t,e){const i=this.g$().x9(),r=i[0],s=i[1],n=i[2],o=t.N$(),a=e.N$(),h=o.rE()-r,u=o.oE()-s,c=o.hE()-n,l=a.rE()-r,f=a.oE()-s,p=a.hE()-n;return l*l+f*f+p*p-(h*h+u*u+c*c)}lZ(){return this.M6}oZ(){return this.I6}nZ(t){t=!!t,this.I6!==t&&(this.I6=t,this.Fl.W$())}uZ(){return this.C6}hZ(t){t=!!t,this.C6!==t&&(this.C6=t,this.Fl.W$())}iZ(t){t=!!t,this.R6!==t&&(this.R6=t,this.c9(),this.Fl.W$())}rZ(){return this.R6}C9(){return!this.gY().R9()||!this.R6}I9(){return!this.C9()}L9(){return this.I9()&&this.g$().k9()}G9(){if(!this.L9())return!1;for(const t of this._7)if(!t.G9())return!1;return!0}W_(t){this.F_!==t&&(this.F_=t,this.Fl.W$())}cZ(){return this.F_}N9(){return!this.S6}AQ(){return this.S6}j9(t){this.S6=t}OQ(){return this._7}F9(){return this._7.length>0}B9(t,e=!0){e?this._7.push(t):this._7.unshift(t)}z9(t,e,i){let r=this._7.indexOf(e);if(-1===r)throw new Error("cannot find layer to insert by");i&&++r,this._7.splice(r,0,t)}U9(t){const e=this._7.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");this._7.splice(e,1)}H9(){for(const t of this._7)if(t.V9())return!0;return!1}*xQ(){for(const t of this._7)yield*t.xQ();yield this}*MQ(){let t=this.AQ();for(;t;)yield t,t=t.AQ()}*u9(){yield this,yield*this.MQ()}W9(t){for(const e of this.MQ())if(e===t)return!0;return!1}Y9(t){return this===t||this.O6===t.O6&&this.D6===t.D6&&this.j6===t.j6&&this.G6===t.G6&&this.F6===t.F6&&this.Zq()===t.Zq()&&this.Kq()===t.Kq()}J9(){return{parallaxX:this.XQ(),parallaxY:this.eZ(),scale:this.WQ(),scaleRate:this.JQ(),angle:this.qQ(),hasOwnScroll:this.l9(),scrollX:this.Zq(),scrollY:this.Kq()}}q9(t){this.P9(t.parallaxX,t.parallaxY),this.VQ(t.scale),this.YQ(t.scaleRate),this.Jq(t.angle),this.fZ(t.hasOwnScroll),this.Qq(t.scrollX),this.Xq(t.scrollY),this.y9()}Q9(t){0!==t.size&&Rg.Oo(this.U8,t)>0&&(this.B7(),this.V$())}V$(t){this.i7=!1,this.m7=!1,t&&!t.gq().KJ().xJ()||(this.r7=!1)}Z9(){if(!this.i7){if(this.U8.sort(Cg),this.b7())for(let t=0,e=this.U8.length;t<e;++t){const e=this.U8[t].N$();e.H7(t),this.p7.a6(e.X9())}else for(let t=0,e=this.U8.length;t<e;++t)this.U8[t].N$().H7(t);this.i7=!0}}K9(){if(this.r7)return;const t=this.w6.ttt(this.j2()).map(t=>[...t.xQ()]).flat();let e=0;for(const i of t){for(const t of i.U$())t.gq().KJ().xJ()&&t.N$().ett(e++);i.itt()}}itt(){this.r7=!0}stt(){return{isVisible:this.kQ(),opacity:this.RR(),isInteractive:this.NQ()}}ntt(t,e,i){const r=t.N$(),s=e.N$();if(r.F$()!==this||s.F$()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const n=r.B$();let o=s.B$();return n!==o+(i?1:-1)&&(Rg.Po(this.U8,n),n<o&&o--,i&&o++,o===this.U8.length?this.U8.push(t):this.U8.splice(o,0,t),this.V$(t),!0)}ott(t,e){const i=[];let r=0,s=0,n=t.length,o=e.length;for(;r<n&&s<o;){const n=t[r],o=e[s];n.N$().F8()<o.N$().F8()?(i.push(n),++r):(i.push(o),++s)}for(;r<n;++r)i.push(t[r]);for(;s<o;++s)i.push(e[s]);return i}att(t){const e=[],i=t.length;for(let r=0;r<i-1;r+=2){const i=t[r],s=t[r+1];e.push(this.ott(i,s))}return i%2==1&&e.push(t[i-1]),e}htt(t){for(;t.length>1;)t=this.att(t);return t[0]}utt(){return this.Z9(),Rg.So(Ng),this.p7.o6(this.dZ(),Ng),Ng.length?1===Ng.length?Ng[0]:this.htt(Ng):[]}V9(){return this.kQ()&&this.RR()>0&&this.ctt()}ctt(){if(this.A9()||!this.oZ()||this.w7.Tf("beforedraw")||this.w7.Tf("afterdraw"))return!0;for(const t of this._7)if(t.ctt())return!0;return!1}ltt(){return this.uZ()||!this.n9()||0!==this.cZ()||this.n7.ftt()}ptt(){if(this.ltt())return!0;for(const t of this._7)if(t.ptt())return!0;return!1}wL(){return this.N6}b9(t){if(this.w6.TQ())return 1;{const e=this.dtt();return e/(e-t)}}mtt(t){const e=this.Fl.TZ();if(this.w6.TQ())return e;{const i=this.dtt();return this.tS()/Math.abs(i-t)*e}}c9(){this.J6=!0,this.Q6=!0,this.W6=!0}ytt(t){return this.J6&&(this.gtt(t,this.cH,0,0,null),this.J6=!1),this.cH}_9(t){return this.tS(t)/this.vtt()}dtt(){return this.L9()?this.g$().x9()[2]:this._9()}wtt(){if(this.L9()){const t=this.g$().x9();return[t[0],t[1],t[2]]}return this.Stt()}Stt(t=0,e=0,i=0){const r=this.Fl,s=this.g$(),n=r.btt(),o=r._tt();let a=(this.Zq()-n)*this.O6+n,h=(this.Kq()-o)*this.D6+o;r.a$()&&(a=Math.round(a),h=Math.round(h));let u=a+t,c=h+e;const l=s.TQ()?this.tS(i):this._9(i),[f,p]=this.w9();if(.5!==f||.5!==p){const t=this.tS(i)/l;let e=(f-.5)*r.E9()/t,s=(p-.5)*r.T9()/t;const n=this.qq();0!==n&&(Qg.set(e,s),Qg.rotate(n),e=Qg.Lh(),s=Qg.Gh()),u+=e,c+=s}return[u,c,l]}gtt(t,e,i,r,s){const n=this.Fl,o=this.g$();if(this.L9()){zg.v(Yg,o.x9()),zg.v(Jg,o.Ett()),zg.v(qg,o.Ttt());const t=n.btt(),e=n._tt(),i=Jg[0]-Yg[0],r=Jg[1]-Yg[1],s=Jg[2]-Yg[2];Yg[0]=(Yg[0]-t)*this.O6+t,Yg[1]=(Yg[1]-e)*this.D6+e,Yg[2]*=Math.max(this.O6,this.D6),Jg[0]=Yg[0]+i,Jg[1]=Yg[1]+r,Jg[2]=Yg[2]+s}else{const[t,e,n]=this.Stt(i,r,s);zg.set(Yg,t,e,n),zg.set(Jg,t,e,n-100);const o=this.qq();0===o?zg.set(qg,0,1,0):zg.set(qg,Math.sin(o),Math.cos(o),0)}t.yS(e,Yg,Jg,qg,s||n.T9())}Ptt(){this.Y6=!0,this.Q6=!0,this.W6=!0}Att(t){return this.Y6&&(this.Mtt(t),this.Y6=!1),this.uP}Mtt(t){const e=this.Fl.I$(),[i,r]=this.w9();if(this.w6.TQ())t.mS(this.uP,e.Itt(),e.Ott());else if(.5===i&&.5===r)Hg.v(this.uP,e.Dtt());else{const s=e.Itt(),n=e.Ott();t.pS(this.uP,s/n,i,r)}}U4(t,e=!0,i=0,r=0,s=0){e&&t._R(this.Att(t));let n=null;0===i&&0===r&&0===s?n=this.ytt(t):(this.gtt(t,Vg,i,r,s),n=Vg),t.IR(n)}xtt(t){this.U4(t),t.qS(this.hE())}Ctt(t){let e=null;if(t.qb()&&this.Fl.Rtt()){const i=this.Fl.I$().Ltt(this);i&&(e=i.rC(),t.LL(e))}return e}ktt(t){if(t.dS()&&this.Fl.Rtt()){const e=2*(this.PV()+1);t._j(e,e+1)}}Gtt(t,e){if(this.w7.Tf(e)){t._S(),t.jR(null),t.UR(),t.Gb(),t.LR(1,1,1,1),t.qS(this.hE()),t.ZS(0);const i=new Rg.Event(e);i.$M=this.Fl.I$().M$(),this.i8(i)}}KE(t,e,i){const r=this.Fl.I$(),s=this.ltt();let n=null;const o=this.Ctt(t);if(this.ktt(t),s){const e={lT:this.Fl.Oz(),ZT:!0,ez:!!t.dS()&&this.Fl.Ntt()};"low"===r.jtt()&&(e.width=r.Itt(),e.height=r.Ott()),n=this.Fl.Ftt(e),this.N6=n,t.PL(n),this.oZ()&&t.fL(0,0,0,0)}else this.N6=e,t.PL(e);if(this.oZ()||t.Rc(this.M6),this.w6.Btt(t,this.N6,this._7,s&&this.oZ()),this.ktt(t),this.U4(t),t.qS(this.hE()),t.mL(this.I9()),this.Gtt(t,"beforedraw"),this.vtt()>Number.EPSILON){this.Z9();const e=this.b7()&&0===this.hE()&&!this.s7;this.L9()?this.ztt(t):e?this.Utt(t):this.Htt(t,this.M9())}this.Gtt(t,"afterdraw"),t.qS(0),t.ZS(0),s&&(t.mL(!1),this.Vtt(t,n,e,i)),o&&t.GL(o),this.N6=null}Htt(t,e){const i=this.dZ(),r=this.N6,s=this.g$().TQ(),n=this.g$().Wtt();let o=null;for(let a=0,h=e.length;a<h;++a){const h=e[a];if(h===o)continue;o=h;const u=h.N$();u.kQ()&&u.$tt(i,n,s)&&this.Ytt(h,u,t,r)}}ztt(t){const e=this.N6,i=this.Jtt(),r=Xg,s=Kg,n=this.M9();for(let o=0,a=n.length;o<a;){const h=n[o],u=h.N$();if(!u.kQ()||!u.qtt(i)){++o;continue}(!h.Qtt()||u.Ztt()>0)&&s.push(h);const c=h.N$().QX();r.push(h);let l=o+1;for(;l<a;++l){const t=n[l],e=t.N$();if(e.kQ()&&e.qtt(i)){if(e.QX()!==c)break;t.Qtt()?(e.Ztt()>0&&s.push(t),r.push(t)):s.push(t)}}if(1!==r.length||r[0].Xtt()){this.Ktt(t,r);for(let i=0,r=s.length;i<r;++i){const r=s[i],n=r.N$();n.tet(!0),this.Ytt(r,n,t,e),n.tet(!1)}}else{this.Ytt(h,u,t,e);for(let i=0,r=s.length;i<r;++i){const r=s[i];if(r===h)continue;const n=r.N$();n.F$().Ytt(r,n,t,e)}}o=l,Rg.So(r),Rg.So(s)}}Ktt(t,e){const i=this.N6;t.DL();for(let i=0,r=e.length;i<r;++i){const r=e[i],s=r.N$();s.eet(!0),this.iet(r,s,t)}t.xL();for(let r=0,s=e.length;r<s;++r){const s=e[r],n=s.N$();this.Ytt(s,n,t,i),n.eet(!1)}t.RL()}Utt(t){const e=this.p7,i=this.g7,r=this.y7,s=this.dZ();let n;i.set(e.r6(s.Kh()),e.s6(s.tu()),e.r6(s.eu()),e.s6(s.iu())),this.m7&&i.equals(r)?n=this.d7:(n=this.utt(),this.m7=!0,r.v(i)),this.Htt(t,n),n!==this.d7&&Rg.To(this.d7,n)}Ytt(t,e,i,r){e.ftt()?this.ret(t,e,i,r):this.iet(t,e,i)}iet(t,e,i){const r=e.net();i.NS()!==r&&r.V_(),t.KE(i)}ret(t,e,i,r){this.oet(t,e,i,r,null)&&this.U4(i)}oet(t,e,i,r,s){const n=e.kX().TV();return n._H(i,r,{EH:t,PH:e.cZ(),devicePixelRatio:this.Fl.aet(),time:t.het(),IF:this.Fl.uet()*this.vtt(),OF:this.qq(),MF:e.KX(),JH:n.lV()?null:this.cet(e),DH:s&&s.DH,xH:s&&s.xH,CH:s&&s.CH,RH:s&&s.RH,LH:s&&s.LH,kH:s&&s.kH}),i.qS(this.hE()),n.DR()}Vtt(t,e,i,r){const s=this.n7.o9(),n=this.Fl;0===s.length?(t.PL(i),t._S(),r&&0===this.F_&&this.n9()?t.AL(e):(t.W_(this.F_),t.Y_(this.x6),t.ML(e)),t.IL(e),n.u7(e)):this.TV()._H(t,i,{EH:this,PH:this.cZ(),devicePixelRatio:n.aet(),IF:n.uet()*this.vtt(),OF:this.qq(),MF:this.dZ(),JH:null,lU:!0})}WQ(){return this.j6}VQ(t){this.j6!==t&&(this.j6=t,this.w6.let(),this.c9(),this.Fl.W$())}TZ(){return this.vtt()*this.Fl.TZ()}W2(){return this.vtt()*this.Fl.W2()}vtt(){return(this.j6*this.w6.Yq()-1)*this.G6+1}y9(){if(!this.W6)return;this.W6=!1;const t=this.Fl.btt(),e=this.Fl._tt(),i=(this.Zq()-t)*this.O6+t,r=(this.Kq()-e)*this.D6+e,s=this.vtt(),n=this.Fl.E9()/s,o=this.Fl.T9()/s;let a=i-n/2,h=r-o/2;this.Fl.a$()&&(a=Math.round(a),h=Math.round(h));const u=this.H6;u.set(a,h,a+n,h+o);const c=this.qq();0!==c&&(kg.v(u),kg.offset(-u.au(),-u.hu()),Gg.Zu(kg,c),Gg.Ku(kg),kg.offset(u.au(),u.hu()),u.v(kg));const l=this.z_;this.S9(l,this.yC),this.L9()?this.fet(l,this.V6):this.V6.v(this.yC)}fet(t,e){const i=this.Fl.I$(),r=i.lJ(),s=i.pJ(),[n,o]=this.yZ(0,0,t),[a,h]=this.yZ(r,0,t),[u,c]=this.yZ(r,s,t),[l,f]=this.yZ(0,s,t);let p=Math.min(n,a,u,l),d=Math.min(o,h,c,f),m=Math.max(n,a,u,l),y=Math.max(o,h,c,f);isFinite(p)||(p=-1/0),isFinite(d)||(d=-1/0),isFinite(m)||(m=1/0),isFinite(y)||(y=1/0),e.set(p,d,m,y)}yZ(t,e,i=0){return this.pet(t,e,i,this.W2())}SZ(t,e,i=0){return this.pet(t,e,i,this.TZ()*this.vJ())}pet(t,e,i,r){const s=this.Fl,n=s.E_(),o=this.vtt(),a=s.E9()/o,h=s.T9()/o,u=$g;Ug.set(u,0,0,a,h),t/=r,e=u[3]-e/r;const c=this.Att(n),l=this.ytt(n),f=Wg;return Rg.qv.Xv(t,e,i,l,c,u,f)?[f[0],f[1]]:[NaN,NaN]}det(t,e){const i=this.j6,r=this.G6,s=this.O6,n=this.D6,o=this.F6,a=this.L9();a&&this.g$().met(!1),this.j6=1,this.G6=1,this.O6=1,this.D6=1,this.F6=0,this.c9();const h=this.yZ(t,e);return this.j6=i,this.G6=r,this.O6=s,this.D6=n,this.F6=o,this.c9(),a&&this.g$().met(!0),h}vZ(t,e,i=0){return this.yet(t,e,i,this.W2())}_Z(t,e,i=0){return this.yet(t,e,i,this.TZ()*this.vJ())}yet(t,e,i,r){const s=this.Fl,n=s.E_(),o=this.vtt(),a=s.E9()/o,h=s.T9()/o,u=$g;Ug.set(u,0,0,a,h);const c=this.Att(n),l=this.ytt(n),f=Wg;return Rg.qv.Qv(t,e,i,l,c,u,f)?[f[0]*r,(u[3]-f[1])*r]:[NaN,NaN]}vet(t,e){return t*=this.TZ()*this.vJ(),0!==e&&(t*=this.b9(e)),t}cet(t){const e=t.KX(),i=t.QX(),r=t.Ztt(),s=i+r,n=e.Kh(),o=e.tu(),a=e.eu(),h=e.iu();if(this.L9()){if(this.wet(n,o,i)||this.wet(a,o,i)||this.wet(a,h,i)||this.wet(n,h,i))return null;if(r>0&&(this.wet(n,o,s)||this.wet(a,o,s)||this.wet(a,h,s)||this.wet(n,h,s)))return null}else if(s>=this._9())return null;let[u,c]=this._Z(n,o,i),[l,f]=this._Z(a,h,i);if(0!==this.qq()||r>0||this.L9()){const[t,e]=this._Z(a,o,i),[p,d]=this._Z(n,h,i);if(r>0){const[i,r]=this._Z(n,o,s),[m,y]=this._Z(a,o,s),[g,v]=this._Z(a,h,s),[w,S]=this._Z(n,h,s);let b=Math.min(u,l,t,p,i,m,g,w);l=Math.max(u,l,t,p,i,m,g,w),u=b,b=Math.min(c,f,e,d,r,y,v,S),f=Math.max(c,f,e,d,r,y,v,S),c=b}else{let i=Math.min(u,l,t,p);l=Math.max(u,l,t,p),u=i,i=Math.min(c,f,e,d),f=Math.max(c,f,e,d),c=i}}return kg.set(u,c,l,f),kg}Jtt(){return this.Q6&&(this.bet(),this.Q6=!1),this.q6}bet(){const t=this.Fl.E_(),e=this.Att(t),i=this.ytt(t);this.q6.aw(i,e)}wet(t,e,i){return this.Jtt().uw(t,e,i)}_et(){return{d:this.i9(),s:this.WQ(),a:this.qQ(),v:this.CQ(),i:this.NQ(),html:this.BQ(),bc:this.M6.toJSON(),t:this.oZ(),sx:this.B6,sy:this.z6,hosp:this.U6,px:this.XQ(),py:this.eZ(),c:this.B_.toJSON(),sr:this.JQ(),fx:this.n7.yE(),cg:this.t7}}Eet(t){this.T6=!!t.d,this.j6=t.s,this.F6=t.a,this.P6=!!t.v,this.A6=!t.hasOwnProperty("i")||t.i,this.b6=!!t.html,this.M6.wh(t.bc),this.I6=!!t.t,t.hasOwnProperty("sx")&&(this.B6=t.sx),t.hasOwnProperty("sy")&&(this.z6=t.sy),t.hasOwnProperty("hosp")&&(this.U6=!!t.hosp),this.O6=t.px,this.D6=t.py,this.B_.wh(t.c),this.S7(),this.G6=t.sr,Rg.To(this.t7,t.cg),Rg.To(this.K6,this.Z6);const e=new Set(this.t7);let i=0;for(let t=0,r=this.K6.length;t<r;++t)e.has(this.K6[t][2])||(this.K6[i]=this.K6[t],++i);Rg.wo(this.K6,i),this.n7.gE(t.fx),this.l7=!0}Tet(){this.U7(!1),this.V$(),this.c9(),this.Ptt()}sQ(){return this.v7}iW(){return this.w7}i8(t){t.GX=this.sQ(),this.w7.dispatchEvent(t)}Iq(t,e=!1,i=!1){if(this.U8.includes(t))return e&&this.U8.sort((t,e)=>(t.N$().Pet()??0)-(e.N$().Pet()??0)),void(i&&this.U8.forEach((t,e)=>t.N$().H7(e)));if(t.Aet()){const e=[...t.MK()];e.push(t),e.sort((t,e)=>(t.N$().Pet()??0)-(e.N$().Pet()??0));for(const t of e)if(t.LZ())for(const i of t.kZ()){if(e.includes(i))continue;const t=[...i.MK()];t.push(i),t.sort((t,e)=>(t.N$().Pet()??0)-(e.N$().Pet()??0)),t&&t.length&&e.splice(e.length,0,...t)}for(const t of e)t.KJ().OJ()&&this.k7(t,!0);i&&this.U8.forEach((t,e)=>t.N$().H7(e))}else{if(t.KJ().OJ()&&this.k7(t,!0),!t.LZ())return void(i&&this.U8.forEach((t,e)=>t.N$().H7(e)));for(const e of t.kZ()){const t=[...e.MK()];if(t.push(e),t.sort((t,e)=>(t.N$().Pet()??0)-(e.N$().Pet()??0)),t&&t.length)for(const e of t)e.KJ().OJ()&&this.k7(e,!0)}i&&this.U8.forEach((t,e)=>t.N$().H7(e))}}}}{let sv=function(t,e,i,r){return t[0]===Math.fround(e)&&t[1]===Math.fround(i)&&t[2]===Math.fround(r)},nv=function(t,e){wv!==t&&(t.xtt(e),wv=t)};vec3EqualsXYZ=sv,MaybePrepareLayerDraw=nv;const ov=self.Ee,av=self.gX,hv=self.assert,uv=ov.$s(ov.Rect),cv=ov.$s(ov.Rect),lv=ov.$s(ov.Rect),fv=ov.$s(ov.ba),pv=self.oe,dv=pv.de,mv=[],yv=[],gv=[],vv=[];let wv=null;ov.Met=class extends ov.Vs{constructor(t,e,i){super(),this.Iet=t,this.Fl=t.gY(),this.Qs=i[0],this.Oet=i[1],this.Det=i[2],this.Ug=i[1],this.Hg=i[2],this.xet=!!i[3],this.Cet=!!i[4],this.Ret=i[5],this.Let=i[6],this.ket=i[7],this.Get=null,this.E6=i[8],this.Uv=e,this.B6=0,this.z6=0,this.j6=1,this.F6=0,this.Net=new Set,this.jet=new Set,this.Fet=new Set,this.Bet=[],this.zet=[],this.Uet=new Map,this.Het=new Map,this.Vet=[],this.Wet=!1,this.$et=dv.create(),this.Yet=dv.create(),this.Jet=dv.create(),this.qet=[],this.Qet=[],this.Zet=new Map,this.Xet=new Map,this.Ket=-1;const r=this.Fl.I$();this.n7=ov.$s(ov.o7,this,i[11]),this.bV=ov.$s(ov.qv.wU,r.a7(),{hU:(t,e)=>{const i=e.pV().wL();t.GR(),t.ML(i),t.IL(i),r.u7(i)},cU:t=>this.Uq().c7(t)}),this.l7=!0,this.tit=!1,this.N6=null,this.eit={},this.iit=new Map,this.rit=!0,this.sit=new self.zq(this),this.w7=ov.$s(ov.Event.wf);for(const t of i[9])this.qet.push(ov.v6.E7(this,null,t));this.nit();for(const t of this.aQ())t.T7();for(const t of i[10]){const e=this.Fl.P7(t[1]);if(!e)throw new Error("missing nonworld object class");e.M7()||e.I7(t),this.Vet.push(t),this.A7(e)}}Ys(){for(const t of this.Qet)t.Ys();ov.So(this.Qet),this.Fet.clear(),this.Get=null,this.Iet=null,this.Fl=null}gY(){return this.Fl}Dl(){return this.Qs}e9(){return this.E6}PV(){return this.Uv}Uq(){return this.n7}TV(){return this.s9(),this.bV}s9(){const t="low"===this.Fl.I$().jtt();if(!this.l7&&this.tit===t&&!this.bV.lH())return;const e=this.Uq().o9();this.bV.fH(e.map(t=>t.$A()),{fU:e.map(t=>t.PV()),dU:t,vU:!0}),this.l7=!1,this.tit=t}L0(){this.Uq().L0(),this.l7=!0}oit(){let t=this.Qet[0].vtt();for(let e=1,i=this.Qet.length;e<i;++e){const i=this.Qet[e];0===i.XQ()&&0===i.eZ()||(t=Math.min(t,i.vtt()))}return t}ait(){return.5*this.Fl.E9()/this.oit()}hit(){return.5*this.Fl.T9()/this.oit()}f9(){return this.iQ()?-1/0:this.ait()}p9(){return this.iQ()?1/0:this.Eg()-this.ait()}d9(){return this.iQ()?-1/0:this.hit()}m9(){return this.iQ()?1/0:this.Pg()-this.hit()}Qq(t){const e=this.f9(),i=this.p9();t>i&&(t=i),t<e&&(t=e),this.B6!==t&&(this.B6=t,this.uit(),this.Fl.W$())}Zq(){return this.B6}Xq(t){const e=this.d9(),i=this.m9();t>i&&(t=i),t<e&&(t=e),this.z6!==t&&(this.z6=t,this.uit(),this.Fl.W$())}Kq(){return this.z6}iQ(){return this.xet}let(){this.Qq(this.Zq()),this.Xq(this.Kq());for(const t of this.Qet)t.l9()&&(t.Qq(t.Zq()),t.Xq(t.Kq()))}wQ(t,e){this.Ret===t&&this.Let===e||(this.Ret=t,this.Let=e,this.cit()&&(this.lit(),this.uit(),this.Fl.W$()))}fit(){return this.TQ()?.5:this.Ret}pit(){return this.TQ()?.5:this.Let}bQ(){return[this.fit(),this.pit()]}Wtt(){const t=this.fit(),e=this.pit();return t<0||t>1||e<0||e>1}_Q(){this.Cet&&(this.Cet=!1,this.lit(),this.uit(),this.Fl.W$())}EQ(){this.Cet||(this.Cet=!0,this.lit(),this.uit(),this.Fl.W$())}TQ(){return this.Cet}cit(){return!this.TQ()}met(t){t=!!t,this.Wet!==t&&(this.Wet=t,this.uit(),this.Fl.W$())}k9(){return this.Wet}dit(t,e,i,r,s,n,o,a,h){sv(this.$et,t,e,i)&&sv(this.Yet,r,s,n)&&sv(this.Jet,o,a,h)||(dv.set(this.$et,t,e,i),dv.set(this.Yet,r,s,n),dv.set(this.Jet,o,a,h),this.mit())}mit(){this.uit(),this.Fl.W$()}x9(){return this.$et}Ett(){return this.Yet}Ttt(){return this.Jet}Yq(){return this.j6}$q(t){this.j6!==t&&(this.j6=t,this.uit(),this.let(),this.Fl.W$())}Jq(t){t=ov.Ks(t),this.F6!==t&&(this.F6=t,this.uit(),this.Fl.W$())}qq(){return this.F6}Eg(){return this.Ug}cg(t){!isFinite(t)||t<1||(this.Ug=t)}Pg(){return this.Hg}lg(t){!isFinite(t)||t<1||(this.Hg=t)}yit(){return this.Get}t9(){return this.qet}*aQ(){for(const t of this.qet)yield*t.xQ()}oQ(){return this.Qet}git(){return this.Qet.length}F$(t){return"number"==typeof t?this.z$(t):this.q7(t.toString())}z$(t){return t=ov.Xs(Math.floor(t),0,this.Qet.length-1),this.Qet[t]}q7(t){return this.Zet.get(t.toLowerCase())||null}vit(t){return!!this.q7(t)}wit(t){return this.Xet.get(t)||null}lit(){for(const t of this.Qet)t.Ptt()}uit(){for(const t of this.Qet)t.c9()}lQ(t,e,i){if(this.vit(t))throw new Error(`layer name '${t}' already in use`);if(!e&&i<2)throw new Error("invalid insert position");const r=i>=2?e:e.AQ(),s=ov.$s(ov.v6,this,r,{name:t,h6:Math.floor(1e15*Math.random()),u6:!0});this.Sit(s,e,i),this.gY().W$(),this.X7()}pQ(t,e,i){if(!e&&i<2)throw new Error("invalid insert position");t===e&&i<2||(this.bit(t),this.Sit(t,e,i),this.gY().W$(),this.X7())}mQ(t){if(this.bit(t)){const e=this.Fl.oW();e.Oq(!0),t.Ys(),e.Oq(!1),this.gY().W$(),this.X7()}}gQ(){const t=new Set;for(const e of this.aQ())e.i9()&&!e.r9()&&t.add(e);if(0===t.size)return;const e=this.Fl.oW();e.Oq(!0);for(const e of t)this.bit(e),e.Ys();e.Oq(!1),this.gY().W$(),this.X7()}Sit(t,e,i){if(i>=2)if(e){if(e===t||e.W9(t))throw new Error(`cannot move layer '${t.Dl()}' to sub-layer of itself`);e.B9(t,2===i),t.j9(e)}else 2===i?this.qet.push(t):this.qet.unshift(t),t.j9(null);else{const r=e.AQ();if(r){if(e.W9(t))throw new Error(`cannot move layer '${t.Dl()}' to sub-layer of itself`);r.z9(t,e,0===i),t.j9(r)}else{let r=this.qet.indexOf(e);if(-1===r)throw new Error("cannot find layer to insert by");0===i&&++r,this.qet.splice(r,0,t),t.j9(null)}}}bit(t){const e=t.AQ();if(e)return e.U9(t),!0;if(this.qet.length>1){const e=this.qet.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");return this.qet.splice(e,1),!0}return!1}nit(){this.Qet=[...this.aQ()],this.Zet.clear(),this.Xet.clear();for(let t=0,e=this.Qet.length;t<e;++t){const e=this.Qet[t];e.Q7(t),this.Zet.set(e.Dl().toLowerCase(),e),this.Xet.set(e.e9(),e)}}_it(){let t=0;for(const e of this.qet){for(const i of e.xQ())i.Z7(t);e.BQ()&&t++}}Eit(){return this.qet.at(-1).j2()+1}async X7(){this.nit(),this._it(),this.Ket=this.Eit()}Tit(){return this.Ket}Pit(){this.Ket=-1}ttt(t){const e=[];for(const i of this.qet){const r=i.j2();if(r===t)e.push(i);else if(r>t)break}return e}J9(){return{scrollX:this.Zq(),scrollY:this.Kq(),scale:this.Yq(),angle:this.qq(),vpX:this.fit(),vpY:this.pit()}}q9(t){this.Qq(t.scrollX),this.Xq(t.scrollY),this.$q(t.scale),this.Jq(t.angle),this.wQ(t.vpX,t.vpY)}Ait(){let t=this.qet.filter(t=>t.V9())[0];for(;t;){if(!t.oZ())return fv.La(t.lZ()),fv.Ra(1),fv;if(t.ltt())return fv.Aa(0,0,0,0),fv;t=t.OQ().filter(t=>t.V9())[0]}return fv.Aa(0,0,0,0),fv}C7(){return this.rit}Mit(){return[...this.Net]}A7(t){if(t.LZ())for(const e of t.Oit().Iit())this.Net.add(e);else this.Net.add(t)}Dit(){return[...this.jet]}xit(t,e){if(t===this||!e)return Promise.resolve();t&&(ov.pa(this.jet,t.jet),t.jet.clear());const i=[];for(const t of this.Net)this.jet.has(t)||(i.push(t.Cit(e)),this.jet.add(t));return Promise.all(i)}async Rit(t){if(t.mq())throw new Error("cannot load textures for family");const e=this.Fl.E_();if(!e||e.Ox()||this.jet.has(t))return;this.jet.add(t);const i=t.Cit(e);this.Lit(i),await i,t.kit(),this.Fl.W$()}Lit(t){this.Fet.add(t),t.then(()=>this.Fet.delete(t)).catch(()=>this.Fet.delete(t))}Git(){return Promise.all([...this.Fet])}Nit(t){if(t.mq()||t.Pq()>0)throw new Error("cannot unload textures");const e=this.Fl.E_();e&&this.jet.has(t)&&(this.jet.delete(t),t.jit(e))}Fit(t,e){if(t!==this&&e)for(const e of this.jet)e.g6()||t.Net.has(e)||(e.jit(),this.jet.delete(e))}Bit(){this.jet.clear()}async zit(t){const e=this.Fl,i=this.Iet,r=e.oW();this.ket&&(this.Get=r.Uit(this.ket),this.Get.Hit()),i.Vit(this),this.Ug=this.Oet,this.Hg=this.Det,this.B6=e.qV()/2,this.z6=e.ZV()/2,this.let(),this.lit(),this.uit(),this._it(),await this.Fl.I$().Wit(this.Eit(),!0),this.$it(t),this.Fl.Yit(!0),this.Jit(),this.rit||this.qit(),this.Qit(this.Bet),this.Qit(this.zet),this.Zit(),i.Xit(),e.Z$(),this.Fl.Yit(!1);const s=this.Fl.Kit();if(await Promise.all(s),ov.So(s),!e.trt()){for(const t of this.Bet)t.ert();for(const t of this.zet)t.irt(this.Uet,this.Het);for(const[t,e]of Object.entries(this.eit)){const i=this.Fl.D3(parseInt(t,10));i&&!i.mq()&&i.R7()&&ov.So(e)}for(const t of this.Bet)t.rrt();for(const t of this.zet)t.rrt();for(const t of this.Bet)t.RK()||t.srt();for(const t of this.zet)t.RK()||t.srt()}ov.So(this.Bet),ov.So(this.zet),this.Uet.clear(),this.Het.clear(),await Promise.all([...this.Net].map(t=>t.nrt(this.Fl.E_()))),t&&(e.wf().dispatchEvent(new ov.Event("beforefirstlayoutstart")),await e.ort(new ov.Event("beforeprojectstart"))),await this.art(new ov.Event("beforeanylayoutstart")),e.wf().dispatchEvent(new ov.Event("beforelayoutstart")),await this.ort(new ov.Event("beforelayoutstart")),e.trt()||await e.oY(ov.cY.uY.hY.hrt,null,null),e.wf().dispatchEvent(new ov.Event("afterlayoutstart")),await this.ort(new ov.Event("afterlayoutstart")),await this.art(new ov.Event("afteranylayoutstart")),t&&(e.wf().dispatchEvent(new ov.Event("afterfirstlayoutstart")),await e.ort(new ov.Event("afterprojectstart"))),r.urt(i),await this.Git(),this.rit=!1}$it(t){for(const t of this.Fl.J7())if(!t.mq()&&t.OJ())for(const e of t.cq()){const t=e.N$(),i=t.F$(),r=i.Dl(),s=this.q7(r);if(s)t.H$(s,!0),s.G7(e);else{const r=ov.Xs(i.PV(),0,this.Qet.length-1),s=this.Qet[r];t.H$(s,!0),s.G7(e)}}if(!t)for(const t of this.Qet)t.U7(!1)}Jit(){for(const t of this.Qet)t.x7(this.Bet),t.V7()}qit(){let t=!1;for(const[e,i]of Object.entries(this.eit)){const r=this.Fl.D3(parseInt(e,10));if(r&&!r.mq()&&r.R7())for(const e of i){let i=null;if(r.OJ()&&(i=e.hasOwnProperty("instJson")?this.wit(e.instJson.w.l):this.wit(e.w.l),!i))continue;const s=this.Fl.L7(r,i,!1,0,0,!0);e.hasOwnProperty("instJson")?s.gE(e.instJson):s.gE(e),t=!0,this.zet.push(s),e.hasOwnProperty("instJson")&&(this.Uet.set(s,e),this.Het.set(e.index,s))}}for(const t of this.Qet)t.U7(!0),t.V$();t&&(this.Fl.Z$(),this.Fl.crt())}Qit(t){for(const e of t){if(!e.LZ())continue;const i=e.N$(),r=e.jZ();for(const s of e.gq().Oit().Fq()){if(s===e.gq())continue;const n=s.cq();if(n.length>r)e.lrt(n[r]);else{let r;r=i?this.Fl.L7(s,i.F$(),!0,i.rE(),i.oE(),!0):this.Fl.L7(s,null,!0,0,0,!0),this.Fl.Z$(),s.frt(),e.lrt(r),t.push(r)}}}}Zit(){for(const t of this.Vet)this.Fl.P7(t[1]).LZ()||this.Fl.L7(t,null,!0)}prt(){const t=[],e=this.Vet;let i=0;for(let r=0,s=e.length;r<s;++r){const s=e[r],n=this.Fl.P7(s[1]);n.g6()?n.LZ()&&n.Oit().drt()||t.push(this.Fl.L7(s,null,!0)):(e[i]=s,++i)}ov.wo(e,i),this.Fl.Z$(),this.Qit(t)}Y7(t,e,i,r,s,n,o){if(i)return i.Y7(t,e,s,n,r,o);{const i=[];for(const a of this.Qet)i.push(a.Y7(t,e,s,n,r,o));return i.flat()}}async mrt(){const t=this.Iet;this.Fl.trt()||(await this.art(new ov.Event("beforeanylayoutend")),await this.ort(new ov.Event("beforelayoutend")),await this.Fl.oY(ov.cY.uY.hY.yrt,null,null),await this.ort(new ov.Event("afterlayoutend")),await this.art(new ov.Event("afteranylayoutend"))),t.grt(!0),this.Fl.oW().vrt(),this.rit||this.wrt();for(const t of this.Qet)t.W7();for(const t of this.Fl.J7())if(!(t.g6()||t.OJ()||t.KJ().MJ()||t.mq())){for(const e of t.cq())this.Fl.Y$(e);this.Fl.Z$()}t.grt(!1),t.p$()===this&&t.Vit(null)}Srt(t,e){const i=t.gq().e9().toString();this.eit.hasOwnProperty(i)||(this.eit[i]=[]);const r=this.eit[i],s={index:e,instJson:t.yE(),sceneGraphJson:{children:[]}};r.push(s),this.iit.set(t,s)}brt(t){const e=this.iit.get(t);for(const i of t._rt()){const t=this.iit.get(i);t&&e.sceneGraphJson.children.push({index:t.index,flags:ov.Trt.Ert(i.N$())})}}wrt(){this.iit.clear();let t=0;for(const e of this.Qet){e.Z9();for(const i of e.U$()){const e=i.gq();!e.g6()&&e.R7()&&(this.Srt(i,t),t++)}}for(const t of this.Qet)for(const e of t.U$()){const t=e.gq();!t.g6()&&t.R7()&&this.brt(e)}this.iit.clear()}Prt(){this.eit={},this.rit=!0}wL(){return this.N6}ltt(){const t=this.Fl,e=t.E_().qb();return"low"===t.I$().jtt()||e&&t.Ntt()||this.n7.ftt()||e&&t.R9()}Art(t){const e=this.Fl.I$();if(this.ltt()){t.PL(null),t.fL(0,0,0,0);const i={lT:this.Fl.Oz(),ZT:t.dS()||this.Fl.Ntt()||this.n7.ftt(),ez:!!t.dS()&&this.Fl.Ntt()};"low"===e.jtt()&&(i.width=e.Itt(),i.height=e.Ott()),this.N6=this.Fl.Ftt(i)}else this.N6=null}Mrt(t){this.Fl.Irt(t)&&(t.mL(!1),t.PL(null),t._S(),t.AL(this.N6))}Ort(t){this.ltt()&&(t.mL(!1),this.Drt(t,this.N6))}xrt(t){t.PL(this.N6),t.Rc(this.Ait()),this.Fl.R9()&&t.dL();const e=this.ttt(0);this.Btt(t,this.N6,e,!0),t.dS()&&t._j(0,1),this.Ort(t),this.N6=null}Crt(t,e){let i=null;this.Fl.Irt(t)&&(i=this.N6),t.PL(i),t.fL(0,0,0,0),this.Fl.R9()&&t.dL();const r=this.ttt(e);this.Btt(t,i,r,!0),this.Mrt(t),t.Ub(),this.Fl.I$().Rrt(e)}Btt(t,e,i,r){const s=i.filter(t=>t.V9());for(let i=0,n=s.length;i<n;){const o=s[i];if(o.G9()&&!o.ptt()){mv.push(o);for(let t=i+1;t<n;++t){const e=s[t];if(!e.G9()||e.ptt())break;mv.push(s[t])}if(mv.length>=2||1===mv.length&&mv[0].H9()){this.Lrt(t,e,mv),i+=mv.length,ov.So(mv);continue}ov.So(mv)}o.KE(t,e,r&&0===i),++i}}Drt(t,e){const i=this.n7.o9(),r=this.Fl;0===i.length?(t.PL(null),t._S(),t.AL(e),t.IL(e),r.u7(e)):(lv.set(0,0,r.E9(),r.T9()),this.TV()._H(t,null,{EH:this,PH:3,devicePixelRatio:this.Fl.aet(),IF:this.Fl.uet()*this.Yq(),OF:this.qq(),MF:lv,JH:null,lU:!0}))}Lrt(t,e,i){const r=i[0],s=r.Ctt(t);r.ktt(t),i[0].oZ()||(fv.La(i[0].lZ()),fv.Ra(1),t.Rc(fv)),t.mL(!0);const n=yv,o=gv,a=vv;for(const e of i)e.Z9(),e.D9(n),e.Gtt(t,"beforedraw");for(let i=0,r=n.length;i<r;){const s=n[i],h=s.N$(),u=h.F$();if(!h.kQ()||!h.qtt(u.Jtt())){++i;continue}(!s.Qtt()||h.Ztt()>0)&&a.push(s);const c=s.N$().QX();o.push(s);let l=i+1;for(;l<r;++l){const t=n[l],e=t.N$();if(e.kQ()&&e.qtt(e.F$().Jtt())){if(e.QX()!==c)break;t.Qtt()?(e.Ztt()>0&&a.push(t),o.push(t)):a.push(t)}}if(1!==o.length||o[0].Xtt()){this.krt(t,e,o);for(let i=0,r=a.length;i<r;++i){const r=a[i],s=r.N$(),n=s.F$();s.tet(!0),nv(n,t),n.Ytt(r,s,t,e),s.tet(!1)}}else{nv(u,t),u.Ytt(s,h,t,e);for(let i=0,r=a.length;i<r;++i){const r=a[i];if(r===s)continue;const n=r.N$(),o=n.F$();nv(o,t),o.Ytt(r,n,t,e)}}i=l,ov.So(o),ov.So(a)}for(const e of i)e.Gtt(t,"afterdraw");s&&t.GL(s),ov.So(n),wv=null}krt(t,e,i){t.DL();for(let e=0,r=i.length;e<r;++e){const r=i[e],s=r.N$(),n=s.F$();s.eet(!0),nv(n,t),n.iet(r,s,t)}t.xL();for(let r=0,s=i.length;r<s;++r){const s=i[r],n=s.N$(),o=n.F$();nv(o,t),o.Ytt(s,n,t,e),n.eet(!1)}t.RL()}_et(){const t={sx:this.Zq(),sy:this.Kq(),s:this.Yq(),a:this.qq(),w:this.Eg(),h:this.Pg(),ortho:this.TQ(),vpX:this.fit(),vpY:this.pit(),fv:this.rit,persist:this.eit,fx:this.n7.yE(),layers:{},dynamicLayers:[]};for(const e of this.Qet)if(e.i9()){const i=e.AQ();t.dynamicLayers.push({sid:e.e9(),name:e.Dl(),parentSid:i?i.e9():null,siblingIndex:e.K7(),data:e._et()})}else t.layers[e.e9().toString()]=e._et();return t}Eet(t){this.B6=t.sx,this.z6=t.sy,this.j6=t.s,this.F6=t.a,this.Ug=t.w,this.Hg=t.h,this.Cet=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Ret=t.vpX),t.hasOwnProperty("vpY")&&(this.Let=t.vpY),this.rit=!!t.fv,this.eit=t.persist,this.n7.gE(t.fx),this.l7=!0;for(const[e,i]of Object.entries(t.layers)){const t=parseInt(e,10),r=this.wit(t);r&&r.Eet(i)}if(t.hasOwnProperty("dynamicLayers")){this.gQ(),this.Fl.Z$();const e=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const r=i[t],s=r.sid,n=r.name,o=r.parentSid,a=r.siblingIndex,h=r.data;if(this.nit(),this.vit(n)||this.wit(s))continue;let u,c;if(null===o)u=null,c=this.qet;else{if(u=this.wit(o),!u)continue;c=u.OQ()}const l=ov.$s(ov.v6,this,u,{name:n,h6:s,u6:!0});c.push(l);let f=e.get(c);f||(f=[],e.set(c,f)),f.push({GX:l,Grt:a}),l.Eet(h)}for(const[t,i]of e){i.sort((t,e)=>t.Grt-e.Grt);for(const e of i){const i=e.GX,r=e.Grt;let s=t.indexOf(i);t.splice(s,1),t.splice(r,0,i)}}}this.X7(),this.lit(),this.uit()}d$(){return this.sit}iW(){return this.w7}i8(t){t.layout=this.d$();const e=this.Fl,i=e.yX()&&!e.oW().J$();i&&av.Nrt(),this.w7.dispatchEvent(t),i&&av.jrt()}ort(t){return t.layout=this.d$(),this.w7.Mf(t)}art(t){return t.layout=this.d$(),this.Fl.ort(t)}Frt(){this.Brt(this.qet)}Brt(t,e=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(e)}- ${t.Dl()}`),this.Brt(t.OQ(),e+1)}}}{const Sv=self.Ee;Sv.zrt=class extends Sv.Vs{#e;#i=[];#f=new Map;#h=new Map;#r=null;#t=[];#n=null;#o=0;#p=null;constructor(t){super(),this.#e=t}Ys(){this.#e=null,this.#r=null,this.#n=null,this.#p=null,Sv.So(this.#i),this.#f.clear(),this.#h.clear(),Sv.So(this.#t)}WP(t){const e=Sv.$s(Sv.Met,this,this.#i.length,t);this.#i.push(e),this.#f.set(e.Dl().toLowerCase(),e),this.#h.set(e.e9(),e)}gY(){return this.#e}Urt(t){this.#n=t}Hrt(){if(this.#n)return this.#n;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}Vrt(t){return this.#f.get(t.toLowerCase())||null}Wrt(t){return this.#h.get(t)||null}$rt(t){return t=Sv.Xs(Math.floor(t),0,this.#i.length-1),this.#i[t]}g$(t){return"number"==typeof t?this.$rt(t):this.Vrt(t.toString())}w$(){return this.#i}Vit(t){this.#r=t}p$(){return this.#r}Yrt(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Jrt(t){const e=this.#t.indexOf(t);if(-1===e)throw new Error("layout not running");this.#t.splice(e,1)}*qrt(){this.#r&&(yield this.#r),this.#t.length&&(yield*this.#t)}Qrt(t){return this.#r===t||this.#t.includes(t)}grt(t){if(t)this.#o++;else{if(this.#o<=0)throw new Error("already unset");this.#o--}}q$(){return this.#o>0}_$(t){this.#p=t}Xit(){this.#p=null}b$(){return!!this.#p}Zrt(){return this.#p}Xrt(){const t=this.p$();t&&t.lit()}Krt(){const t=this.p$();t&&t.uit()}}}{const bv=self.Ee,_v=new RegExp("<(.+?)>","g");bv.tst=class extends bv.Vs{constructor(t){super(),this.Fl=t,this.est=bv.$s(bv.ist),this.rst=null,this.sst=[],this.nst=new Map,this.ost=new Map,this.ast=new Map,this.hst=[],this.ust=[],this.cst=[],this.lst=!1,this.fst=!1,this.pst=!1,this.dst=()=>this.mst(),this.yst=()=>this.gst(),this.vst=()=>this.wst(),this.Sst=()=>this.bst(),this._st=t=>this.Est(t.M0),this.Tst=t=>this.Pst(),this.Ast=t=>this.Mst(),this.Ist=t=>this.Ost(),this.Dst=[],this.xst=0}Ys(){this.Cst(),this.dst=null,this.yst=null,this.vst=null,this.Sst=null,this._st=null,this.Ast=null;for(const t of this.sst)t.b1(),t.Ys();bv.So(this.sst),this.sst=null,this.est.Ys(),this.est=null,bv.So(this.hst),this.hst=null,bv.So(this.ust),this.ust=null,bv.So(this.cst),this.cst=null,this.nst.clear(),this.nst=null,this.ost.clear(),this.ost=null,this.ast.clear(),this.ast=null,bv.So(this.Dst),this.Dst=null,this.Fl=null}Rst(){const t=this.Fl.wf();t.addEventListener("pretick",this.dst),t.addEventListener("tick2",this.yst),t.addEventListener("beforelayoutchange",this.vst),t.addEventListener("layoutchange",this.Sst),t.addEventListener("instancedestroy",this._st),t.addEventListener("beforeload",this.Tst),t.addEventListener("afterload",this.Ast),t.addEventListener("afterlayoutstart",this.Ist)}Cst(){const t=this.Fl.wf();t.removeEventListener("pretick",this.dst),t.removeEventListener("tick2",this.yst),t.removeEventListener("beforelayoutchange",this.vst),t.removeEventListener("layoutchange",this.Sst),t.removeEventListener("instancedestroy",this._st),t.removeEventListener("beforeload",this.Tst),t.removeEventListener("afterload",this.Ast),t.removeEventListener("afterlayoutstart",this.Ist)}WP(t){this.est.Hc(t);const e=bv.kst.Lst(t,this);this.Hc(e),this.Gst(e),this.ast.set(e.Dl(),0)}Nst(t){const e=this.jst(),i=t.BZ(),r=e.Ue(i),s=bv.kst.Nst(`${i}:${this.ast.get(i)}`,r,this);return this.Fst(i),this.Hc(s),this.Fl.yX()&&globalThis.gX.Bst(s),s}zst(t){return this.ast.get(t)}Fst(t){this.ast.set(t,this.ast.get(t)+1)}Ust(){for(const t of this.sst){if(t.Hst())continue;const e=t.BZ();this.Fst(e)}}Vst(){for(const t of this.ast.keys())this.ast.set(t,0)}Hc(t){this.sst.push(t),this.nst.set(t.Dl().toLowerCase(),t)}Xf(t){t.Wst(),t.Hst()||(bv.Ao(this.sst,t),bv.Ao(this.hst,t),bv.Ao(this.ust,t),bv.Ao(this.cst,t),this.nst.delete(t.Dl().toLowerCase()),this.$st(t),this.Fl.yX()&&globalThis.gX.Yst(t),t.w1()||t.Ys())}hX(t){this.Fl.hX(t,this.rst,null)}gY(){return this.Fl}jst(){return this.est}Jst(t){this.rst=t}qst(){return this.rst}*Qst(){for(const t of this.sst)yield t}*Zst(){for(const t of this.ust)yield t}Xst(t,e){this.ost.has(t)||this.ost.set(t,new Set),this.ost.get(t).add(e)}Gst(t){for(const e of t.Kst())this.Xst(e,t)}$st(t){for(const[e,i]of this.ost.entries())i.has(t)&&(i.delete(t),0===i.size&&this.ost.delete(e))}tnt(t){if(this.ost.has(t))return this.ost.get(t)}ent(t,e){if(e)for(const i of this.sst)if(e.every(t=>i.int(t.M0,t.trackId))&&i.Dl().includes(t.Dl()))return i}rnt(t){return this.nst.get(t.toLowerCase())||null}snt(t){for(const e of this.hst)if(e.Dl()===t)return e;for(const e of this.ust)if(e.Dl()===t)return e;return null}*nnt(t){if(_v.test(t)){let e;_v.lastIndex=0;const i=new Set;do{if(e=_v.exec(t),e){const t=e[1].split(",");for(const e of t)i.add(e)}}while(e);for(const t of i.values()){const e=this.rnt(t);e&&(yield e)}i.clear()}else{const e=this.rnt(t);e&&(yield e)}}*ont(t){for(const e of this.sst)e.E1(t)&&(yield e)}ant(t){this.hst.includes(t)||this.hst.push(t),this.hnt()}unt(t){bv.Ao(this.ust,t),this.cnt()}lnt(t){this.ust.includes(t)?(t.fnt(!0),t.pnt(!1),t.dnt(!1)):(t.fnt(!1),t.pnt(!0),t.dnt(!1),this.hst.includes(t)||this.hst.push(t)),this.hnt()}mnt(t){t.fnt(!1),t.pnt(!1),t.ynt(),bv.Ao(this.hst,t),this.cnt()}gnt(t){t.fnt(!1),t.pnt(!1),this.ust.includes(t)&&(t.dnt(!0),this.cst.push(t),bv.Ao(this.ust,t)),this.hst.includes(t)&&t.dnt(!0)}vnt(t){t.fnt(!1),t.pnt(!1),t.dnt(!1),t.C1(1),bv.Ao(this.ust,t)}wnt(t){this.gnt(t),t.ynt()}mst(){const t=this.gY();if(t.trt())return;if(!this.lst)return;if(this.fst)return;let e=0;for(t.yX()&&(e=performance.now()),this.pst=!0;this.hst.length;){const t=this.hst.pop();t.Snt()?(t.bnt(),this.cst.push(t)):(t._nt(),this.ust.push(t)),0!==t.Ent()&&(this.xst=1)}const i=this.Fl.Tnt(),r=this.Fl.Pnt(),s=this.Fl.BW();for(let t=this.ust.length-1;t>=0;t--){const e=this.ust[t];e&&e.Ant(i,s,r)}this.pst=!1,t.yX()&&globalThis.gX.Mnt(performance.now()-e),0!==this.xst&&t.W$()}gst(){const t=this.gY();if(t.trt())return;if(!this.lst)return;if(this.fst)return;let e,i=0;t.yX()&&(i=performance.now());for(let t=0,i=this.cst.length;t<i;t++){const i=this.cst[t];e||(e=new Set),i.Wst(),this.Int(i),e.add(i)}if(e){bv.Oo(this.cst,e),this.xst=0;for(let t=0,e=this.ust.length;t<e;t++)if(0!==this.ust[t].Ent()){this.xst=1;break}}this.cnt(),t.yX()&&globalThis.gX.Mnt(performance.now()-i)}Int(t){t.w1()||t.Ont()&&t.X1()&&t.Dnt()&&t.xnt()}hnt(){this.lst||(this.lst=!0)}cnt(){this.cst.length||this.ust.length||this.hst.length||this.pst||(this.lst=!1)}wst(){for(this.fst=!0;this.hst.length;)this.mnt(this.hst.pop());const t=new Set;for(const e of this.ust)e.wst()&&(e.Wst(),t.add(e));bv.Oo(this.ust,t),t.clear();for(const e of this.cst)e.wst()&&(e.Wst(),t.add(e));bv.Oo(this.cst,t),this.cnt();for(const t of this.sst)t.Cnt()}bst(){this.fst=!1}Est(t){const e=t.gq(),i=this.tnt(e);if(i)if(this.Fl.trt())this.Dst.push(t);else for(const t of i)t.Hst()||(t.w1()?this.Xf(t):t.Ont()||(this.Int(t),this.Xf(t)))}Pst(){for(const t of this.hst.map(t=>t))this.Int(t),this.Xf(t);for(const t of this.ust.map(t=>t))this.Int(t),this.Xf(t)}Mst(){for(const t of this.Dst)this.Est(t);bv.So(this.Dst);for(const t of this.sst)t.Mst()}Ost(){const t=this.Fl.y$().p$();if(t)for(const e of this.sst){const i=e.Rnt();i&&t.Dl()===i&&this.lnt(e)}}_et(){return{timelinesJson:this.Lnt(),scheduledTimelinesJson:this.knt(),playingTimelinesJson:this.Gnt(),markedForRemovalTimelinesJson:this.Nnt(),hasRuntimeListeners:this.lst,changingLayout:this.fst,isTickingTimelines:this.pst}}Eet(t){t&&(this.Vst(),this.jnt(t.timelinesJson),this.Fnt(t.scheduledTimelinesJson),this.Bnt(t.playingTimelinesJson),this.znt(t.markedForRemovalTimelinesJson),this.lst=!t.hasRuntimeListeners,this.fst=!!t.changingLayout,this.pst=!!t.isTickingTimelines,this.Ust(),this.hnt(),this.cnt())}Lnt(){return this.sst.map(t=>t._et())}jnt(t){for(const e of t){let t=this.rnt(e.name);if(t)t.Eet(e);else{const i=this.Unt(e);if(!i)continue;const r=this.rnt(i);t=this.Nst(r),t.Eet(e)}t.Hnt()||this.Xf(t)}}Unt(t){const e=t.name.split(":");return e&&2===e.length?e[0]:null}knt(){return this.Vnt(this.hst)}Fnt(t){this.Wnt(t,this.hst)}Gnt(){return this.Vnt(this.ust)}Bnt(t){this.Wnt(t,this.ust)}Nnt(){return this.Vnt(this.cst)}znt(t){this.Wnt(t,this.cst)}$nt(t,e){if(!e)return!1;for(const i of e)if(i===t.Dl())return!0;return!1}Vnt(t){return t.map(t=>t.Dl())}Wnt(t,e){const i=new Set;for(const r of e)this.$nt(r,t)||i.add(r);if(bv.Oo(e,i),t){const i=t=>e=>e.Dl()===t;for(const r of t){const t=this.rnt(r);t&&(e.find(i(r))||e.push(t))}}}}}{const Ev=self.Ee,Tv=100,Pv=.01,Av=25,Mv=20,Iv=5,Ov=[0,0],Dv=[0,0],xv=[0,0],Cv=[0,0,0,0,0],Rv=new Array(4),Lv=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],kv={x:0,y:0,t:0,bt:0};Ev.Ynt=class{constructor(t,e){this.Jnt=!1,this.qnt=t,this.Qnt=[];let i=null;if(i=e?this.qnt.Znt(e):Ev.Fo(this.qnt.Xnt()),!i)return;const r=i.i2("offsetX"),s=i.i2("offsetY");if(!r||!s)return;this.Knt=r,this.tot=s;const n=r.eot(),o=s.eot();for(let t=1,e=Math.min(n.length,o.length);t<e;++t){const e=n[t],i=(e.iot(),e.rot()),r=o[t],s=(r.iot(),r.rot());i&&"cubic-bezier"===i.sot()&&s&&"cubic-bezier"===s.sot()?this.Qnt.push(Ev.$s(Ev.not,i,s,e,r,this.Qnt.length)):(i&&"line"===i.sot()&&s&&s.sot(),this.Qnt.push(Ev.$s(Ev.oot,e,r,this.Qnt.length)))}this.Jnt=!0}Ys(){for(const t of this.Qnt)t.Ys();Ev.So(this.Qnt),this.Qnt=null,this.qnt=null,this.Knt=null,this.tot=null}aot(){return this.Jnt}hot(){return this.Qnt}uot(t){const e="relative"===this.Knt.cot()?t.rE():0,i="relative"===this.tot.cot()?t.oE():0;for(const t of this.Qnt)t.uot(e,i)}Qv(t,e,i){let r=NaN,s=this.Qnt.length;for(let i=0;i<s;i++){const s=this.Qnt[i];if("cubic-bezier"===s.qA()){const i=s.Qv(t,e);(isNaN(r)||i[3]<r)&&(r=i[3],xv[0]=i[2],xv[1]=s.PV())}}return xv}lot(t,e,i){const r=i.fot;Ev.Qi(r[0])||(r[0]=0),Ev.Qi(r[1])||(r[1]=1);let s=NaN,n=this.Qnt.length;for(let i=0;i<n;i++){const n=this.Qnt[i];if("cubic-bezier"===n.qA()){const i=n.pot(t,e,r);(isNaN(s)||i[3]<s)&&(s=i[3],xv[0]=i[2],xv[1]=n.PV())}}return xv}dot(t,e){return this.Qnt[e].dot(t)}mot(t,e){return this.Qnt[e].mot(t)}},Ev.not=class{constructor(t,e,i,r,s){this.Uv=s;const n=t.yot("cubic-bezier"),o=i.yot("cubic-bezier"),a=e.yot("cubic-bezier"),h=r.yot("cubic-bezier");this.got=t.vot(),this.wot=e.vot(),this.Sot=t.vot()+n.bot(),this._ot=e.vot()+a.bot(),this.Eot=i.vot()+o.Tot(),this.Pot=r.vot()+h.Tot(),this.Aot=i.vot(),this.Mot=r.vot(),this.Iot=0,this.Oot=0,this.Dot=0,this.xot=0,this.Cot=0,this.Rot=0,this.Lot=0,this.kot=0,this.Got=0,this.Not=0,this.jot=0,this.Fot=0,this.Bot=0,this.zot=0,this.Uot=0,this.Hot=0,this.Vot=0,this.Wot=0,this.$ot=0,this.Yot=0,this.Jot=NaN,this.Jnt=!1,this.qot=100,this.Qot=new Array(this.qot+1),this.Qot[0]=0,this.Zot=0,this.Xot=[],this.Kot=[];for(let t=0;t<100;t++)this.Kot.push({x:0,y:0,t:0,bt:0});this.tat()}Ys(){Ev.So(this.Qot),this.Qot=null,Ev.So(this.Xot),this.Xot=null,Ev.So(this.Kot),this.Kot=null}qA(){return"cubic-bezier"}PV(){return this.Uv}eat(){return Math.floor(this.Zot/25)}iat(){return 1/this.eat()}uot(t,e){this.rat=t,this.sat=e,this.Qot=new Array(this.qot+1),this.Qot[0]=0,this.tat(),this.Iot=this.got+this.rat,this.Oot=this.wot+this.sat,this.Dot=this.Sot+this.rat,this.xot=this._ot+this.sat,this.Cot=this.Eot+this.rat,this.Rot=this.Pot+this.sat,this.Lot=this.Aot+this.rat,this.kot=this.Mot+this.sat,this.Got=3*(this.Dot-this.Iot),this.Not=3*(this.xot-this.Oot),this.jot=3*(this.Cot-this.Dot),this.Fot=3*(this.Rot-this.xot),this.Bot=3*(this.Lot-this.Cot),this.zot=3*(this.kot-this.Rot),this.Uot=3*(this.Dot-this.Iot),this.Hot=3*(this.Iot+this.Cot-2*this.Dot),this.Vot=this.Lot-this.Iot+3*(this.Dot-this.Cot),this.Wot=3*(this.xot-this.Oot),this.$ot=3*(this.Oot+this.Rot-2*this.xot),this.Yot=this.kot-this.Oot+3*(this.xot-this.Rot)}Map(t){if(!this.Jnt)return NaN;const e=this.nat(t);return Dv[0]=this.oat(e),Dv[1]=this.aat(e),Dv}Qv(t,e){const i=this.hat(100),r=this.uat(t,e,i),s=this.cat(t,e,i,r);return Cv[0]=s.x,Cv[1]=s.y,Cv[2]=s.t,Cv[3]=s.bt,Cv}pot(t,e,i){const r=this.hat(100),s=this.lat(t,e,r,i),n=this.cat(t,e,r,s);return Cv[0]=n.x,Cv[1]=n.y,Cv[2]=n.t,Cv[3]=n.bt,Cv}dot(t){const e=1-t,i=e*e,r=2*e*t,s=t*t,n=i*this.Got+r*this.jot+s*this.Bot,o=i*this.Not+r*this.Fot+s*this.zot,a=Ev.rn(n,o);return Ov[0]=n/a,Ov[1]=o/a,Ov}mot(t){const e=1-t,i=e*e,r=2*e*t,s=t*t,n=i*this.Got+r*this.jot+s*this.Bot,o=i*this.Not+r*this.Fot+s*this.zot;return Math.atan2(o,n)}nat(t){if(!this.Jnt)return;let e=t*this.Qot[this.qot],i=0,r=this.qot,s=0;for(;i<r;)s=i+((r-i)/2|0),this.Qot[s]<e?i=s+1:r=s;this.Qot[s]>e&&s--;const n=this.Qot[s];return n===e?s/this.qot:(s+(e-n)/(this.Qot[s+1]-n))/this.qot}oat(t){return this.Jnt?self.$c.hl("cubicbezier")(t,this.got+this.rat,this.Sot+this.rat,this.Eot+this.rat,this.Aot+this.rat):NaN}aat(t){return this.Jnt?self.$c.hl("cubicbezier")(t,this.wot+this.sat,this._ot+this.sat,this.Pot+this.sat,this.Mot+this.sat):NaN}hat(t){if(t=t||100,this.Xot.length>=t)return this.Xot;this.Xot=new Array(t),t++;for(let e=0;e<t-1;e++){const i=e/(t-1),r=i**2,s=i**3,n=this.Uot*i,o=this.Hot*r,a=this.Vot*s,h=this.Wot*i,u=this.$ot*r,c=this.Yot*s,l=this.Iot+n+o+a,f=this.Oot+h+u+c;this.Kot[e].x=l,this.Kot[e].y=f,this.Kot[e].t=i,this.Kot[e].bt=0,this.Xot[e]=this.Kot[e]}return this.Xot}uat(t,e,i,r=null,s=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.Jot))for(let r=0;r<100;r++){const o=i[r],a=o.x-t,h=o.y-e;o.bt=a*a+h*h,o.bt<s&&(s=o.bt,n=r)}else{for(let r=this.Jot;r<this.Jot+5&&!(r>=i.length);r++){const o=i[r],a=o.x-t,h=o.y-e;o.bt=a*a+h*h,o.bt<s&&(s=o.bt,n=r)}for(let r=this.Jot;r>this.Jot-5&&!(r<0);r--){const o=i[r],a=o.x-t,h=o.y-e;o.bt=a*a+h*h,o.bt<s&&(s=o.bt,n=r)}}return this.Jot=n,n}lat(t,e,i,r,s=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.Jot))for(let o=0;o<100;o++){const a=i[o],h=a.x-t,u=a.y-e;a.bt=h*h+u*u,a.t>=r[0]&&a.t<=r[1]&&a.bt<s&&(s=a.bt,n=o)}else{for(let o=this.Jot;o<this.Jot+5&&!(o>=i.length);o++){const a=i[o],h=a.x-t,u=a.y-e;a.bt=h*h+u*u,a.t>=r[0]&&a.t<=r[1]&&a.bt<s&&(s=a.bt,n=o)}for(let o=this.Jot;o>this.Jot-5&&!(o<0);o--){const a=i[o],h=a.x-t,u=a.y-e;a.bt=h*h+u*u,a.t>=r[0]&&a.t<=r[1]&&a.bt<s&&(s=a.bt,n=o)}}return this.Jot=n,n}cat(t,e,i,r){let s=i[r],n=1,o=Number.MAX_SAFE_INTEGER;t:do{const n=i.length;let a=0===r?0:r-1,h=r===n-1?n-1:r+1,u=i[a].t,c=(i[h].t-u)/4;if(c<.001)break;Rv[0]=i[a];for(let i=1;i<=2;i++){const n=u+i*c,a=n**2,h=n**3,l=this.Uot*n,f=this.Hot*a,p=this.Vot*h,d=this.Wot*n,m=this.$ot*a,y=this.Yot*h,g=this.Iot+l+f+p,v=this.Oot+d+m+y,w=g-t,S=v-e,b=w*w+S*S;if(b<o){o=b,r=i,kv.x=g,kv.y=v,kv.t=n,kv.bt=b,s=kv;break t}const _=Lv[i-1];_.x=g,_.y=v,_.t=n,_.bt=b,Rv[i]=_}Rv[3]=i[h],i=Rv}while(n++<20);return s}tat(){this.Jnt=!0;let t=this.oat(0),e=this.aat(0),i=0;for(let r=1;r<=this.qot;r++){const s=this.oat(.01*r),n=this.aat(.01*r),o=t-s,a=e-n;i+=Ev.rn(o,a),this.Qot[r]=i,t=s,e=n}this.Zot=i}},Ev.oot=class{constructor(t,e,i){this.Uv=i,this.fat=t.vot(),this.pat=e.vot(),this.rat=0,this.sat=0}Ys(){}qA(){return"line"}PV(){return this.Uv}uot(t,e){this.rat=t,this.sat=e}rE(){return this.fat+this.rat}oE(){return this.pat+this.sat}}}{const Gv=self.Ee,Nv=0,jv=1;Gv.kst=class extends Gv.Vs{constructor(t,e,i){super(),this.Fl=i.gY(),this.dat=i,this.mat=e,this.Qs=t,this.yat=[],this.gat=0,this.vat=null,this.wat=0,this.Sat(),this.bat=null,this._at=null,this.Eat=0,this.Tat=0,this.Pat=1,this.Aat=0,this.Mat=-1,this.Iat=1,this.Oat=!1,this.Dat=!1,this.xat=!1,this.Cat=!0,this.Rat=!1,this.Lat=!1,this.kat=-1,this.Gat=!1,this.Nat=!1,this.jat=!1,this.Fat=!1,this.Bat=NaN,this.zat=[""],this.Uat="",this.Hat=!1,this.xst=0,this.Vat=0,this.Wat=null,this.$at=null}static Lst(t,e){const i=e.jst(),r=i.Yat(),s=i.Ue(t[r]),n=Gv.$s(Gv.kst,t[r],s,e);return n.Jat(!0),n}static Nst(t,e,i){return Gv.$s(Gv.kst,t,e,i)}Ys(){if(this.w1())return;const t=this.Fl.wf();this.dat.mnt(this),this.dat.wnt(this);for(const t of this.yat)t.Ys();Gv.So(this.yat),this.yat=null,this.Fl=null,this.dat=null,this.mat=null,this.Rat=!0,this.bat=null,this._at=null,this.qat(t)}qat(t){const e=Gv.$s(Gv.Event,"timelinestatereleased");e.Qat=this,t.dispatchEvent(e)}qA(){return 0}Sat(){for(const t of this.mat.Xat().Zat())this.gat=this.yat.push(Gv.Kat.WP(this,t))}tht(){return this.dat}gY(){return this.Fl}Xnt(){return this.yat}eht(t,e,i,r){if(!this.Vat)return;let s;for(let n=0;n<this.yat.length;n++){let o=this.yat[n];if(t!==o.J1())continue;const a=o.i2(i);a&&e.constructor===a.iht().constructor&&a.cot()===r.cot()&&(s||(s=[]),s.push(a))}return s}Hnt(){return!!this.yat.length}Znt(t){for(const e of this.yat)if(Gv.Zr(e.t2(),t))return e;return null}rht(t){for(const e of this.yat)if(!e.sht()&&Gv.Zr(e.Dl(),t))return e;return null}L3(t){this.Qs=t}Dl(){return this.Qs}nht(){return this.mat}BZ(){return this.mat.Dl()}A1(){return this.mat.A1()}P1(t){this.mat.P1(t)}oht(){return this.mat.oht()}aht(t){this.mat.aht(t)}hht(){return this.mat.hht()}uht(t){this.mat.uht(t)}cot(){return this.mat.cot()}cht(t){this.mat.cot(t)}Y1(t){for(const e of this.Xnt())e.Y1(t)}I1(){return this.mat.I1()}M1(t){return this.mat.M1(t)}D1(){return this.mat.D1()}O1(t){return this.mat.O1(t)}U0(){return this.mat.U0()}lht(){return this.Iat}fht(t){return this.mat.fht(t)}C1(t){if(t=Number(t),Gv.Qi(t))return this.Pat=t}R1(){return this.Pat}Rnt(){return this.mat.Rnt()}pht(){return this.mat.pht()}dht(){return this.mat.dht()}mht(){return this.Aat}yht(){return!this.IsPlaying()||this.Pat>0}ght(){return this.IsPlaying()?"playing":this.F1()?"paused":this.X1()?"complete":"other"}G1(){return this.bat||(this.bat=new Promise(t=>{this._at=t})),this.bat}ynt(){this.bat&&(this._at(),this.bat=null,this._at=null)}vht(t){this.zat=Gv.kst.wht(t),this.Hat=!0}L1(){return this.zat}Sht(){return this.Hat&&(this.Uat=this.zat.join(" ")),this.Hat=!1,this.Uat}E1(t){if(!this.zat)return!1;if(!this.zat.length)return!1;const e=Gv.kst.wht(t);return!!e&&!!e.length&&e.every(Gv.kst.bht,this)}_ht(){Gv.cY.Eht&&this.constructor===Gv.kst&&(Gv.cY.Eht.hY.Tht(this),this.dat.hX(Gv.cY.Eht.hY.Pht),this.dat.hX(Gv.cY.Eht.hY.Aht),this.dat.hX(Gv.cY.Eht.hY.Mht),this.dat.hX(Gv.cY.Eht.hY.Iht),Gv.cY.Eht.hY.Oht())}Dht(){this.kat=this.Fl.GW()}xnt(){this.jat||(this.jat=!0,Gv.cY.Eht&&this.constructor===Gv.kst&&(Gv.cY.Eht.hY.Tht(this),this.dat.hX(Gv.cY.Eht.hY.xht),this.dat.hX(Gv.cY.Eht.hY.Cht),this.dat.hX(Gv.cY.Eht.hY.Rht),this.dat.hX(Gv.cY.Eht.hY.Lht),Gv.cY.Eht.hY.Oht()))}fnt(t){this.Oat=t}kht(){return this.kat===this.Fl.GW()}IsPlaying(t=!1){return!!this.kht()||!(!this.Ght()||t)||this.Oat}Nht(){return this.IsPlaying(!0)}F1(){return this.jht()}jht(){return!(this.w1()||this.Ght()||this.Nht()||this.X1())}pnt(t){this.Dat=t}Ght(){return this.Dat}Fht(t){this.Cat=t;const e=this.I1(),i=this.D1();if(e||i){if(e&&!i);else if(!e&&i){const t=this.oU();1===this.Aat&&(t<=0||t>=this.A1())&&(this.Cat=!0)}}else{const t=this.oU();(t<=0||t>=this.A1())&&(this.Cat=!0)}}X1(){return this.Cat}w1(){return this.Rat}dnt(t){this.Lat=t}Snt(){return this.Lat}Bht(t){this.Gat=t}zht(){return this.Gat}Jat(t){this.Nat=!!t}Hst(){return this.Nat}Dnt(){return this.xat}oU(){return this.Eat}T1(t){if(t=Number(t),!Gv.Qi(t))return;const e=this.oU();this.Uht(t),this.Fht(!1),this.X1()||this.Bht(!0),(this.Nht()||this.Ght()||!this.xat)&&(this.Nht()||this.Ght()||this.xat?this.Nht()?this.b1():this.Ght()&&(this.dat.mnt(this),this.Hht()):this.Hht()),this.Vht(),this.Wht(this.oU(),!1,!0,!0,e),this.$ht(),this.xst&&this.gY().W$(),this.Yht()}Uht(t){Gv.Qi(t)||(t=this.A1()),t<0?this.Eat=0:t>=this.A1()?this.Eat=this.A1():this.Eat=t}Jht(t){Gv.Qi(t)||(t=this.A1()),t<0?this.Eat=0:t>=this.A1()?this.Eat=this.A1():this.Eat=t;for(const t of this.yat)t.qht()}Yht(){Gv.cY.Eht&&this.constructor===Gv.kst&&(Gv.cY.Eht.hY.Tht(this),this.dat.hX(Gv.cY.Eht.hY.Qht),this.dat.hX(Gv.cY.Eht.hY.Zht),this.dat.hX(Gv.cY.Eht.hY.Xht),Gv.cY.Eht.hY.Oht())}Kht(){if(this.I1())return!0;if(this.D1()&&1===this.Aat){if(this.yht()){if(this.oU()>=this.A1())return!1}else if(this.oU()<=0)return!1}else if(!this.I1()&&!this.D1())if(this.yht()){if(this.oU()>=this.A1())return!1}else if(this.oU()<=0)return!1;return!0}_1(){this.w1()||this.Kht()&&this.Play(!0)}Play(t=!1){return!this.w1()&&!this.Ght()&&(this.Nht()&&this.kht()?this.tut():!this.Nht()&&!!(this.X1()||t||this.zht())&&this.eut())}tut(){return this.Bht(!1),this.dat.unt(this),this.dat.lnt(this),this.G1(),!0}eut(){return this.Bht(!1),this.dat.lnt(this),this.G1(),!0}b1(t=!1){this.w1()||(this.Fht(t),this.dat.gnt(this),this.X1()&&this.ynt())}Bf(t=!0,e=!1){if(this.w1())return;if(!this.Nht()&&this.Ght())return this.dat.mnt(this);if(this.X1())return;this.b1(!0),this.yht()?this.Uht(0):this.Uht(this.A1());const i=this.oU();this.Vht(),e?this.iut(i):this.Wht(i,!1,!1,!0),t&&this.Yht(),this.$ht(),this.xst&&t&&this.gY().W$()}rut(){this.Bf(!1,!0)}iut(t){this.Wht(t,!1,!1,!0,NaN,!1,!0)}wst(){return!!this.w1()||!(!this.gY().trt()&&this.sut())&&(this.dat.vnt(this),this.gY().trt()||this.rut(),!0)}Hht(){this._nt(!0)}bnt(){this._nt(!1,!0),this.fnt(!1),this.pnt(!1)}_nt(t=!1,e=!1){if(!this.Snt()||e)if(t){this.jat=!1,this.xat=!0,this.Fat=!0,this.Vht();for(const t of this.yat)t._nt();this.$ht()}else if(this.fnt(!0),this.pnt(!1),this._ht(),this.X1()){this.kat=-1,0!==this.Aat&&(this.Pat=Math.abs(this.Pat)),this.Aat=0,this.Mat=-1,this.Iat=1,this.Cat=!1,this.jat=!1,this.xat=!0,this.Fat=!0,this.yht()?this.Uht(0):this.Uht(this.A1()),this.Vht();for(const t of this.yat)t._nt();this.$ht()}else{-1!==this.Mat&&(this.Aat=this.Mat),this.Fat=!0,this.jat=!1,this.Vht();for(const t of this.yat)t.nut();this.$ht()}}Ent(){return this.xst}Vht(){this.Vat=0;for(const t of this.yat)t.Zx()&&(this.Vat=1)}$ht(){this.xst=0;for(const t of this.yat)t.out(),0===this.xst&&1===t.Ent()&&(this.xst=1),this.vat||1!==t.aut()||(this.vat||(this.vat=[]),this.wat=this.vat.push(t))}Ant(t,e,i){if(this.dht()){if(0===t&&0===this.Bat)return;this.Bat=t,t=i}else{if(0===i&&0===this.Bat)return;this.Bat=i,t=i,e=1}const r=this.Eat+this.Tat,s=r+t*e*this.Pat,n=this.mat.hut;s<0?(this.Eat=0,this.Tat=-s):s>=n?(this.Eat=n,this.Tat=this.Eat-s):(this.Eat=s,this.Tat=0);let o=!1,a=!1;const h=this.I1(),u=this.D1();let c;h||u?h&&!u?this.Pat>0?this.Eat>=n&&(this.Jht(0),a=!0):this.Eat<=0&&(this.Jht(n),a=!0):!h&&u?this.Pat>0?this.Eat>=n&&(this.Uht(n),this.C1(-1*this.R1()),a=!0,1===this.Aat?this.Iat<this.U0()?(this.Iat++,this.Aat=0):o=!0:0===this.Aat&&(this.Aat=1)):this.Eat<=0&&(this.Uht(0),this.C1(-1*this.R1()),a=!0,1===this.Aat?this.Iat<this.U0()?(this.Iat++,this.Aat=0):o=!0:0===this.Aat&&(this.Aat=1)):h&&u&&(this.Pat>0?this.Eat>=n&&(this.Uht(n),this.C1(-1*this.R1()),a=!0,this.Aat++,Gv.wrap(this.Aat,0,2)):this.Eat<=0&&(this.Uht(0),this.C1(-1*this.R1()),a=!0,this.Aat++,Gv.wrap(this.Aat,0,2))):this.Pat>0?this.Eat>=n&&(this.Iat<this.U0()?(this.Iat++,this.Jht(0),a=!0):(this.Uht(n),o=!0)):this.Eat<=0&&(this.Iat<this.U0()?(this.Iat++,this.Jht(n),a=!0):(this.Uht(0),o=!0));const l=this.gat;if(o){for(c=0;c<l;c++)this.yat[c].uut();return this.b1(!0),void this.Dht()}const f=this.wat;for(c=0;c<f;c++){const t=this.vat[c],e=t.cut();this.Eat-e<0&&r-e>0?t.lut(e):t.lut(this.Eat)}if(1===this.Vat)for(c=0;c<l;c++){const t=this.yat[c],e=t.cut();this.Eat-e<0&&r-e>0?t.Sl(e,!0,!1,a,this.Fat,!1):t.Sl(this.Eat,!0,!1,a,this.Fat,!1)}else for(c=0;c<l;c++)this.yat[c].Sl(this.Eat,!0,!1,a,this.Fat,!1);if(!this.IsPlaying()&&this.Wat){const t=this.Wat.oU()+this.Wat.dut().fut().cut(),e=this.Eat-t;this.Eat-=e,0!==this.Tat&&(this.Tat-=e),this.Wat=null}for(c=0;c<f;c++){const t=this.vat[c],e=t.cut();this.Eat-e<0&&r-e>0?t.mut(e):t.mut(this.Eat)}this.Fat&&(this.Fat=!1)}yut(t){this.Wat=t}gut(){return this.Wat}vut(t,e,i,r=!1){let s=t;if("number"==typeof e&&!isNaN(e)){const t=this.oU()-i.cut(),n=e-i.cut();t<0&&n>0&&(s=i.cut(),r&&this.Uht(s))}return s}Wht(t,e=!1,i=!1,r=!1,s=NaN,n=!1,o=!1){for(const e of this.yat){const r=this.vut(t,s,e);e.lut(r,i)}for(const n of this.yat){const a=this.vut(t,s,n,!0);n.Sl(a,e,i,r,this.Fat,o)}for(const e of this.yat){const r=this.vut(t,s,e);e.mut(r,i)}this.Fat&&n&&(this.Fat=!1)}wut(){const t=this.mat.Xat().Sut(),e=Gv.Kat.WP(this,t);return this.gat=this.yat.push(e),e}Wst(){if(!this.w1())for(const t of this.yat)t.but()}Cnt(){for(const t of this.yat)t.Cnt()}*cq(){for(const t of this.yat)t.J1()&&(yield t.J1())}_ut(){for(const t of this.yat)t.Eut()}Tut(t,e,i){if(e){if("number"==typeof i&&i>=0){const t=this.yat[i];if(!t)return;return t.Put(e),void this.dat.Xst(e.gq(),this)}for(const i of this.yat)if(i.sht()){if(t){if(i.t2()!==t)continue;i.Put(e),this.dat.Xst(e.gq(),this);break}if(!i.Aut()){i.Put(e),this.dat.Xst(e.gq(),this);break}}}}int(t,e){for(const i of this.yat)if(i.sht())if(e){if(e===i.t2()&&t===i.J1())return!0}else if(t===i.J1())return!0;return!1}Ont(){return this.yat.some(t=>!t.sht()||t.Mut())}sut(){return this.yat.some(t=>{if(t.sht()){if(!t.Mut())return!1;const e=t.gq();return!!e&&e.g6()}return!1})}i2(t){for(const e of this.Xnt())for(const i of e.Iut())if(i.Out()===t)return i}Dut(t){for(const e of this.yat)if(t===e.J1())return e;return null}xut(t){let e=t?t.split(" "):[];const i=new Set(e.map(t=>t.toLowerCase().trim()));e=[...i.values()];for(const t of this.Xnt())for(const i of t.Cut())if(e.every(t=>i.WZ(t)))return i}Kst(){const t=[];for(const e of this.Xnt())t.push(e.gq());return t.filter(t=>t)}Mst(){for(const t of this.Xnt())t.Mst()}_et(){return{tracksJson:this.Rut(),name:this.Qs,playheadTime:this.oU(),playbackRate:this.Pat,pingPongState:this.Aat,resumePingPongState:this.Mat,currentRepeatCount:this.Iat,isPlaying:this.Oat,isScheduled:this.Dat,initialStateSet:this.xat,finishedTriggers:this.jat,complete:this.Cat,released:this.Rat,markedForRemoval:this.Lat,completedTick:this.kat,implicitPause:this.Gat,isTemplate:this.Nat,tags:this.zat.join(" "),stringTags:this.Uat,tagsChanged:this.Hat,firstTick:this.Fat}}Eet(t){t&&(this.Lut(t.tracksJson),this.Qs=t.name,this.Eat=t.playheadTime,this.Pat=t.playbackRate,this.Aat=t.pingPongState,this.Mat=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.Iat=t.currentRepeatCount,this.Oat=!!t.isPlaying,this.Dat=!!t.isScheduled,this.xat=!!t.initialStateSet,this.jat=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Cat=!!t.complete,this.Rat=!!t.released,this.Lat=!!t.markedForRemoval,this.kat=t.completedTick,this.Gat=!!t.implicitPause,this.Nat=!!t.isTemplate,this.zat=t.tags.split(" "),this.Uat=t.stringTags,this.Hat=!!t.tagsChanged,this.Fat=!!t.firstTick)}Rut(){return this.yat.map(t=>t._et())}Lut(t){this._ut(),t.forEach((t,e)=>{this.yat[e].Eet(t)}),this.yat.filter(t=>t.Mut())}static bht(t){const e=this.L1();return""===t?1===e.length&&""===e[0]:e.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static wht(t){if(Gv._r(t))return t.slice(0);if(Gv.nr(t))return t.split(" ");throw new Error("invalid tags")}kut(){return this.$at||(this.$at=Gv.$s(self.z1,this)),this.$at}}}{const Fv=self.Ee,Bv=0,zv=1,Uv=2;Fv.Kat=class extends Fv.Vs{constructor(t,e){super(),this.qnt=t,this.Gut=e,this.Nut=e.Xat(),this.jut=NaN,this.Fut=NaN,this.But=null,this.zut=null,this.Uut=!1,this.Wx=e.cut()>0,this.Hut=!1,this.Vut=!1,this.Wut=NaN,this.$ut=null,this.Yut=this.Gut.dut().Jut(),this.qut=[],this.Qut(),this.Zut=0,this.xst=0,this.Xut=0,this.Kut=null}static WP(t,e){return Fv.$s(Fv.Kat,t,e)}Ys(){this.Yut=null;for(const t of this.qut)t.Ys();Fv.So(this.qut),this.qut=null,this.qnt=null,this.But=null,this.zut=null,this.Gut=null,this.$ut=null}Qut(){for(const t of this.Gut.ect().tct())this.qut.push(Fv.ict.WP(this,t))}but(){for(const t of this.qut)t.but()}Cnt(){for(const t of this.qut)t.Cnt();this.But=null,this.zut=null}rct(){return this.qnt}gY(){return this.qnt.gY()}Cut(){return this.Yut||(this.Yut=this.Gut.dut().Jut()),this.Yut}Iut(){return this.qut}i2(t){for(let e=0;e<this.qut.length;e++){const i=this.qut[e];if(i.Out()===t)return i}}sct(){this.But||this.J1()}nct(){return!!this.But&&!this.But.j$()}Mut(){if(!this.sht())return!1;if(this.Uut)return!1;const t=this.oct(),e=this.gY().C$(t);return!!e&&!e.j$()}gq(){if(!this.sht())return;const t=this.act();return-1!==t?this.gY().P7(t):void 0}hct(){return this.qnt.Xnt().indexOf(this)}Eut(){this.But=null,this.jut=NaN,this.zut=null,this.Fut=NaN,this.Uut=!0}Aut(){return!!this.But}J1(){if(this.Uut)return;if(this.But&&this.nct())return this.But;const t=this.oct();return this.But=this.gY().C$(t),this.But}Put(t){if(this.Uut=!1,this.But!==t){this.Cnt(),this.But=t,this.Fut=t.gq().PV(),this.jut=t.GZ(),this.zut=t.N$();for(const e of this.uct()){const i=e.cct,r=e.lct;switch(i.fct()){case"instance-variable":{r.pct();const i=t.gq(),s=i.dct(e.name),n=i.mct(s),o=i.yct(s);n===e.name&&o===e.type&&r.gct(s);break}case"behavior":{const i=e.T0,s=this.gq(),n=t.gq(),o=r.A0(n);if(i&&o){const t=i.Dl();s.vct(t),n.vct(t),r.pct(),r.wct(o.e9())}break}}}}}*uct(){for(const t of this.qut){const e=t.iht(),i=this.gq(),r={cct:t,lct:e};switch(t.fct()){case"world-instance":r.Sct=t.Out();break;case"instance-variable":{const t=e.pct();r.name=i.mct(t),r.type=i.yct(t);break}case"effect":{const t=i.Uq(),s=e.bct(t);r._ct=s;break}case"behavior":{const t=e.A0(i);r.T0=t;break}case"plugin":r.XJ=i.KJ()}yield r}}N$(){if(this.zut&&this.nct())return this.zut;const t=this.J1();return t&&(this.zut=t.N$()),this.zut}fut(){return this.Gut}oct(){return isNaN(this.jut)?this.Gut.oct():this.jut}Ect(t){this.Gut.Ect(t)}hht(){return this.Gut.hht()}uht(t){this.Gut.uht(t)}cot(){return this.Gut.cot()}t2(){return this.Gut.t2()}cut(){return this.Gut.cut()}Tct(){return this.Gut.Tct()}Pct(t){this.Gut.Pct(t)}cht(t){this.Gut.cht(t)}Y1(t){for(const e of this.Cut())e.Y1(t);for(const e of this.Iut())e.Y1(t)}Act(){return this.Gut.Act()}Mct(t){this.Gut.Mct(t)}act(){return isNaN(this.Fut)?this.Gut.act():this.Fut}Ict(t){this.Gut.Ict(t)}Oct(t){this.Gut.Oct(t)}Dct(){const t=this.J1();return t&&t.y0().xct()?t.y0().Dct():this.Gut.Dct()}Cct(t){this.Gut.Cct(t)}Rct(){const t=this.J1();return t&&t.y0().xct()?t.y0().Rct():this.Gut.Rct()}qA(){return this.Gut.qA()}Dl(){return this.Gut.Dl()}sht(){return 0===this.qA()}Lct(){return 1===this.qA()}kct(){return 2===this.qA()}Gct(){return this.Zut}Ent(){return this.xst}aut(){return this.Xut}Zx(){return this.Wx}qht(){for(const t of this.qut)t.qht();const t=this.rct(),e=t.oU();t.yht()?this.$ut=this.Nct(e):this.$ut=this.jct(e)}_nt(){if(this.sct(),!this.nct()&&this.sht())return;const t=this.rct().yht(),e=t?0:this.Tct();for(const t of this.qut)t._nt(e),0===this.Zut&&1===t.Gct()&&(this.Zut=1),0===this.xst&&1===t.Ent()&&(this.xst=1);this.Xut=0,this.qut.some(t=>t.aut())&&(this.Xut=1),this.$ut=t?this.Nct(e):this.jct(e),this.Hut=!1,this.Vut=!1,this.Sl(e),this.Fct(this.$ut)}Bct(){const t=this.zct(),e=this.Uct();let i,r;return this.qnt.yht()?(i={oU:()=>t.oU()+this.cut(),L1:()=>t.Hct()||"<no tags>"},r={oU:()=>e?e.oU()+this.cut():this.Tct(),L1:()=>e?.Hct()||"<no tags>"}):(i={oU:()=>e?e.oU()+this.cut():this.Tct(),L1:()=>e?.Hct()||"<no tags>"},r={oU:()=>t.oU()+this.cut(),L1:()=>t.Hct()||"<no tags>"}),[i,r]}zct(){const t=this.qnt.oU()-this.cut();return this.qnt.yht()?this.Nct(t):this.jct(t)}Uct(){return this.qnt.yht()?this.zct().iot():this.zct().Vct()}nut(){if(this.sct(),!this.nct()&&this.sht())return;const t=this.qnt.yht(),e=this.qnt.oU()-this.cut();this.$ut=t?this.Nct(e):this.jct(e);for(const t of this.qut)t.nut(e)}uut(){if(!this.rct().X1()&&(this.sct(),(this.nct()||!this.sht())&&!this.Wx)){const t=this.qnt.oU();t>=this.cut()+this.Tct()?this.Sl(this.Tct(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sl(0,!0,!1,!0,!1,!1,!0)}}out(){for(let t=0,e=this.qut.length;t<e;t++){const e=this.qut[t];e.out(),0===this.Zut&&1===e.Gct()&&(this.Zut=1),0===this.xst&&1===e.Ent()&&(this.xst=1)}}lut(t,e=!1){const i=this.qut.length;for(let r=0;r<i;r++)this.qut[r].lut(t,e)}Sl(t,e=!1,i=!1,r=!1,s=!1,n=!1,o=!1){this.But||this.J1();const a=this.But&&!this.But.j$(),h=0===this.Gut.Yl;if((a||!h)&&!(n&&h&&this.gq().g6()||(t-=this.cut())<0)){this.Wct(t,e),this.$ct(t,e,s),!this.rct().IsPlaying()&&this.rct().gut()&&(t=this.rct().gut().oU());for(let e=0,s=this.qut.length;e<s;e++)this.qut[e].Sl(t,i,r,o);this.Yct(t,e),0!==this.Zut&&(this.zut||(this.zut=this.But.N$()),this.zut&&this.zut.NX())}}mut(t,e=!1){const i=this.qut.length;for(let r=0;r<i;r++)this.qut[r].mut(t,e)}Wct(t,e){if(e&&this.Wx&&!this.Hut){if(this.rct().yht()){if(t<0)return}else if(t>this.Tct())return;for(const t of this.qut)t._nt();this.Hut=!0}}Yct(t,e){if(e&&this.Wx&&!this.Vut)if(this.rct().yht()){if(t>=this.Tct()){for(const t of this.qut)t.Sl(this.Tct(),!1,!0);this.Vut=!0}}else if(t<=0){for(const t of this.qut)t.Sl(0,!1,!0);this.Vut=!0}}$ct(t,e,i){if(this.Kut=null,i)return;if(!e)return;if(!Fv.cY.Eht)return;const r=this.rct();if(r.yht()){const e=this.$ut.iot(),i=this.$ut.oU(),s=e?e.oU():r.A1();(t<=i||t>=s)&&(this.$ut=this.Nut.Jct(t,this.Gut),e&&this.qct(this.$ut))}else{if(!this.Nut.Qct(t,this.Gut))return;this.$ut||(this.$ut=this.Nut.Qct(t,this.Gut));const e=this.$ut.Vct(),i=this.$ut.oU(),r=e?e.oU():0;(t>=i||t<=r)&&(this.$ut=this.Nut.Qct(t,this.Gut),this.$ut&&this.qct(this.$ut))}}Nct(t){return this.Nut.Zct(t,this.Gut)||this.Nut.Jct(t,this.Gut)}jct(t){return this.Nut.Zct(t,this.Gut)||this.Nut.Qct(t,this.Gut)}qct(t,e=!1){if(!Fv.cY.Eht)return;const i=this.rct(),r=i.tht();Fv.cY.Eht.hY.Tht(i),Fv.cY.Eht.hY.Xct(t),r.hX(Fv.cY.Eht.hY.Kct),r.hX(Fv.cY.Eht.hY.qct),i.IsPlaying()||e||i.yut(t),Fv.cY.Eht.hY.Oht(i),Fv.cY.Eht.hY.tlt(t),this.Kut=t}elt(){return this.Kut}Fct(t){this.qct(t,!0)}ilt(){return this.Gut.dut().rlt()}slt(){const t=this.Gut.ect().nlt(),e=Fv.ict.WP(this,t);return this.qut.push(e),e}olt(t){this.Gut.dut().hlt(t)}ult(t){for(const e of this.qut)e.ult(t)}clt(){for(const t of this.qut)t.clt()}llt(){if(this.sct(),this.nct()||!this.sht())for(const t of this.qut)t.llt()}flt(){if(this.sct(),!this.nct()&&this.sht())return;let t=!1;for(const e of this.qut){const i=e.flt();!t&&i&&(t=!0)}if(t){const t=this.ilt();t.T1(this.rct().oU()),t.Y1("noease"),t.Mct(!0),t.vht("")}}Mst(){isNaN(this.Wut)||this.plt(this.Wut),this.Wut=NaN}_et(){const t=this.J1(),e=t?t.GZ():this.oct();return{propertyTracksJson:this.dlt(),lastKeyframeDataItemJson:this.mlt(),initialStateOfNestedSet:this.Hut,endStateOfNestedSet:this.Vut,instanceUid:e,cleared:this.Uut}}Eet(t){if(t){this.ylt(t.propertyTracksJson),this.glt(t.lastKeyframeDataItemJson),this.Wut=t.instanceUid,this.Hut=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Hut=t.initialStateOfNestedSet),this.Vut=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Vut=t.endStateOfNestedSet),this.Uut=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.qut)0===this.Zut&&1===t.Gct()&&(this.Zut=1),0===this.xst&&1===t.Ent()&&(this.xst=1);this.Xut=0,this.qut.some(t=>t.aut())&&(this.Xut=1)}}mlt(){return this.Gut.dut().vlt(this.$ut)}dlt(){return this.qut.map(t=>t._et())}ylt(t){t.forEach((t,e)=>{this.qut[e].Eet(t)})}plt(t){if(!Fv.Qi(t))return;const e=this.gY().C$(t);e&&this.rct().Tut(this.Gut.t2(),e,this.hct())}glt(t){const e=this.Gut.dut();this.$ut=e.wlt(t)}}}{const Hv=self.Ee;Hv.ict=class extends Hv.Vs{constructor(t,e){super(),this.Slt=t,this.blt=e,this._lt=e.ect(),this.Zut=0,this.xst=0,this.Xut=0,this.Elt=this.iht(),this.Tlt=this.blt.Alt().Plt(),this.Mlt=null,this.Ilt=null}static WP(t,e){return Hv.$s(Hv.ict,t,e)}Ys(){this.Slt=null,this.Elt&&(this.Elt.Ys(),this.Elt=null),this.Tlt=null,this.blt=null,this._lt=null}Gct(){return this.Zut}Ent(){return this.xst}aut(){return this.Xut}Olt(){return!!this.Ilt}Dlt(t){this.Ilt=t}xlt(){return this.Ilt}Clt(){return this.Slt}Rlt(){return this.blt}ect(){return this._lt}rct(){return this.Slt.rct()}gY(){return this.Slt.gY()}J1(){return this.Slt.J1()}iht(){if(this.Elt)return this.Elt;let t;switch(this.blt.fct()){case"behavior":t=new Hv.ict.Llt(this);break;case"effect":t=new Hv.ict.klt(this),this.xst=1;break;case"instance-variable":t=new Hv.ict.Glt(this);break;case"plugin":t=new Hv.ict.Nlt(this),this.xst=1;break;case"world-instance":t=new Hv.ict.jlt(this),this.xst=1,this.Zut=1;break;case"value":t=new Hv.ict.Flt(this);break;case"audio":t=new Hv.ict.Blt(this)}return this.Elt=t,this.Elt}fct(){return this.blt.fct()}zlt(t){this.blt.zlt(t)}Ult(){return this.blt.Hlt()}Vlt(t){this.blt.Wlt(t)}e2(){return this.iht().$lt()}Out(){return this.blt.Ylt()}Jlt(t){this.blt.qlt(t)}Qlt(){return this.blt.qA()}Zlt(t){this.blt.Xlt(t)}Klt(){return this.ect().tft(this.blt).qA()}eft(){return this.blt.eft()}ift(t){this.blt.ift(t)}rft(){return this.blt.rft()}sft(t){this.blt.sft(t)}Act(){return this.blt.Act()}Mct(t){this.blt.Mct(t)}hht(){return this.blt.hht()}uht(t){this.blt.uht(t)}cot(){return this.blt.cot()}cht(t){this.blt.cht(t)}Y1(t){for(const e of this.nft())e.Y1(t)}oft(){return this.blt.oft()}nft(){return this.Tlt||(this.Tlt=this.blt.Alt().Plt()),this.Tlt}eot(){return this.blt.Alt().eot()}aft(t){return this._lt.aft(t,this.blt)}hft(t){return this._lt.hft(t,this.blt)}uft(t){let e,i=this._lt.aft(t,this.blt);return i?e=this._lt.cft(t,this.blt):(i=this._lt.hft(t,this.blt),e=this._lt.lft(t,this.blt)),{start:i,end:e}}*fft(){for(const t of this.nft())yield t.vot()}*pft(){for(const t of this.nft())yield t.oU()}but(){this.iht().but()}Cnt(){this.iht().Cnt()}dft(){return this.iht().dft()}qht(){this.iht().qht()}_nt(t){this.iht()._nt(),this.Mlt=this.mft(t),this.out()}nut(t){this.iht().nut(),this.Mlt=this.mft(t)}out(){const t=this.Clt();if(this.Xut=0,t.sht()){const e=this.rct(),i=t.J1(),r=this.iht(),s=this.Out();if(r.yft()){const t=e.eht(i,r,s,this);t&&t.length&&(this.Xut=1)}else this.Xut=0}}mft(t){const e=this.rct();return this._lt.aft(t,this.blt)||(e.yht()?this._lt.hft(t,this.blt):this._lt.lft(t,this.blt))}lut(t,e){let i,r;if(e)i=this._lt.hft(t,this.blt);else{if(this.Mlt){const e=this.rct(),i=this.Mlt.iot(),r=this.Mlt.oU(),s=i?i.oU():e.A1();(t<=r||t>=s)&&(this.Mlt=this._lt.hft(t,this.blt))}else this.Mlt=this._lt.hft(t,this.blt);i=this.Mlt}i&&(r=i.iot()),this.Elt.lut(i,r)}Sl(t,e=!1,i=!1,r=!1){let s,n,o=!1;if(e)s=this._lt.hft(t,this.blt);else{if(this.Mlt){const e=this.rct(),i=this.Mlt.iot(),r=this.Mlt.oU(),s=i?i.oU():e.A1();(t<=r||t>=s)&&(this.Mlt=this._lt.hft(t,this.blt),o=!0)}else this.Mlt=this._lt.hft(t,this.blt),o=!0;s=this.Mlt}s&&(n=s.iot()),this.Elt.Sl(t,s,n,e,i,r,o)}gft(t){if(this.Mlt){const e=this.rct(),i=this.Mlt.iot(),r=this.Mlt.oU(),s=i?i.oU():e.A1();(t<=r||t>=s)&&(this.Mlt=this._lt.hft(t,this.blt))}else this.Mlt=this._lt.hft(t,this.blt);const e=this.Mlt,i=e.iot();return this.Elt.gft(t,e,i)}vft(t,e,i){return this.Elt.gft(t,e,i)}mut(t,e){let i,r;if(e)i=this._lt.hft(t,this.blt);else{if(this.Mlt){const e=this.rct(),i=this.Mlt.iot(),r=this.Mlt.oU(),s=i?i.oU():e.A1();(t<=r||t>=s)&&(this.Mlt=this._lt.hft(t,this.blt))}else this.Mlt=this._lt.hft(t,this.blt);i=this.Mlt}i&&(r=i.iot()),this.Elt.mut(i,r)}static wft(t,e){const i=e.Rlt();return e._lt.hft(t,i)}static Sft(t,e){const i=e.Rlt();return e._lt.lft(t,i)}static bft(t,e,i){return e?i.rct().yht()?t.vot():e.vot():t.vot()}_ft(){const t=this.blt.Alt().Eft();return this.Mlt=null,t}ult(t){this.Mlt=null,this.blt.Alt().Tft(t)}clt(){this.iht().clt()}llt(){if(this.iht().llt()){const t=this._lt.tft(this.blt),e=this.iht().dft();t.Pft(e)}}flt(){const t=this.iht().flt();return t&&this.Aft(),this.iht().Mft(),t}Aft(){const t=this.rct().oU(),e=this.iht(),i=Hv.ict.wft(t,this),r=this._ft();r.Xlt(i.qA()),r.T1(t),r.Y1(i.Ift()),r.Mct(!0),r.Oft(e.Dft()),r.Pft(e.dft())}_et(){return{sourceAdapterJson:this.iht()._et()}}Eet(t){t&&this.iht().Eet(t.sourceAdapterJson)}}}{const Vv=self.Ee,Wv=Vv.ict;Wv.jlt=class{constructor(t){this.xft=t,this.Cft=null,this.Rft()}Ys(){this.Cft&&(this.Cft.Ys(),this.Cft=null),this.xft=null}yft(){return this.Cft.yft()}i2(){return this.xft}but(){this.Cft&&this.Cft.but()}Cnt(){this.Cft&&this.Cft.Cnt()}Rft(){return this.Cft||(this.Cft=this.Lft()),this.Cft}pct(){}PV(){return this.pct()}kft(){}qht(){this.Rft().qht()}_nt(){this.Rft()._nt()}nut(){this.Rft().nut()}lut(t,e){this.Cft.Gft(t,e)}Sl(t,e,i,r,s,n,o){let a;switch(this.xft.Klt()){case"numeric":a=Wv.Nft.Sl(t,e,i,this.xft);break;case"angle":a=Wv.jft.Sl(t,e,i,this.xft);break;case"boolean":a=Wv.Fft.Sl(t,e,i,this.xft);break;case"color":a=Wv.Bft.Sl(t,e,i,this.xft);break;case"text":a=Wv.zft.Sl(t,e,i,this.xft)}this.Cft.Uft(t,a,e,i,r,s,n,o)}gft(t,e,i){switch(this.xft.Klt()){case"numeric":return Wv.Nft.Sl(t,e,i,this.xft);case"angle":return Wv.jft.Sl(t,e,i,this.xft);case"boolean":return Wv.Fft.Sl(t,e,i,this.xft);case"color":return Wv.Bft.Sl(t,e,i,this.xft);case"text":return Wv.zft.Sl(t,e,i,this.xft)}}mut(t,e){this.Cft.Hft(t,e)}clt(){this.Rft().Vft()}Mft(){this.Rft().Mft()}dft(){return this.Rft().dft()}llt(){return this.Rft().llt()}flt(){return this.Rft().flt()}Dft(){const t=this.xft,e=t.Clt().rct().oU(),i=Wv.wft(e,t),r=i.iot();switch(t.Klt()){case"numeric":return Wv.Nft.Sl(e,i,r,t);case"angle":return Wv.jft.Sl(e,i,r,t);case"boolean":return Wv.Fft.Sl(e,i,r,t);case"color":return Wv.Bft.Sl(e,i,r,t);case"text":return Wv.zft.Sl(e,i,r,t)}}Lft(){const t=this.xft;switch(t.oft()?t.Klt():""){case"combo":case"boolean":case"text":case"string":return new Wv.$ft.Wft(this);case"numeric":case"number":case"angle":return"combo"===this.xft.Qlt()?new Wv.$ft.Wft(this):new Wv.$ft.Yft(this);case"color":case"offsetColor":return new Wv.$ft.Jft(this);default:return new Wv.$ft.Yft(this)}}_et(){return{propertyAdapterJson:this.Rft()._et()}}Eet(t){t&&this.Rft().Eet(t.propertyAdapterJson)}}}{const $v=self.Ee,Yv=0;class Jv extends $v.ict.jlt{constructor(t){super(t),this.qft=NaN}pct(){return this.xft.Rlt().Hlt()[0]}PV(){return this.qft?this.qft:super.PV()}kft(){return this.xft.Clt().J1()}gct(t){this.xft.Rlt().Hlt()[0]!==t&&(this.qft=t)}Sl(t,e,i,r,s,n,o){this.Rft().Qft(e.$lt())&&super.Sl(t,e,i,r,s,n,o)}gft(t,e,i){if(this.Rft().Qft(e.$lt()))return super.gft(t,e,i)}_et(){return Object.assign(super._et(),{index:this.qft})}Eet(t){t&&(super.Eet(t),this.qft=t.index)}}$v.ict.Glt=Jv}{const qv=self.Ee,Qv=0,Zv=1,Xv=2;class Kv extends qv.ict.jlt{constructor(t){super(t),this.E6=NaN}pct(){return this.xft.Rlt().Hlt()[1]}kft(){const t=this.xft.Rlt(),e=this.xft.Clt(),i=this.E6?this.E6:t.Hlt()[0],r=e.J1(),s=r.Zft(i);return r.Xft()[s].y0()}A0(t){const e=this.xft.Rlt().Hlt()[2];return t.Kft(e)}wct(t){this.xft.Rlt().Hlt()[0]!==t&&(this.E6=t)}Sl(t,e,i,r,s,n,o){const a=this.xft.Clt().J1();this.A0(a.gq())&&super.Sl(t,e,i,r,s,n,o)}gft(t,e,i){const r=this.xft.Clt().J1();if(this.A0(r.gq()))return super.gft(t,e,i)}_et(){return Object.assign(super._et(),{sid:this.E6})}Eet(t){t&&(super.Eet(t),this.E6=t.sid)}}qv.ict.Llt=Kv}{const tw=self.Ee,ew=0,iw=1;class rw extends tw.ict.jlt{constructor(t){super(t)}pct(){return this.xft.Rlt().Hlt()[1]}kft(){const t=this.xft.Clt().N$().kX(),e=t.Uq(),i=this.bct(e).PV();return t.C0(i)?t.tpt(i):null}bct(t){const e=this.xft.Rlt().Hlt()[0];return t.ept(e)}Sl(t,e,i,r,s,n,o){this.ipt()&&super.Sl(t,e,i,r,s,n,o)}gft(t,e,i){if(this.ipt())return super.gft(t,e,i)}ipt(){const t=this.xft.Clt().N$().kX(),e=t.Uq(),i=this.bct(e);if(!i)return;const r=i.PV();return t.C0(r)}}tw.ict.klt=rw}{const sw=self.Ee,nw=0,ow=1,aw=0;class hw extends sw.ict.jlt{constructor(t){super(t),this.rpt=null,this.spt=null,this.npt=!1}pct(){return this.xft.Rlt().Hlt()[0]}kft(){return this.xft.Clt().J1().y0()}Sl(t,e,i,r,s,n,o){const a=this.xft.Clt();a.gq().KJ()===a.J1().gq().KJ()&&super.Sl(t,e,i,r,s,n,o)}gft(t,e,i){const r=this.xft.Clt();if(r.gq().KJ()===r.J1().gq().KJ())return super.gft(t,e,i)}opt(t,e){if(!e)return!0;if(t?.vot()===e?.vot())return!0;const i=this.xft?.hht();return"discrete"===i}apt(t,e,i){const r=t.elt();return!!r&&(this.xft.rct().yht()?r.oU()===e.oU():r.oU()===i.oU())}qht(){this.Rft().qht();const t=this.xft.Clt().gq().KJ();this.npt=!1,sw.cY.hpt&&t instanceof sw.cY.hpt&&"initial-animation"===this.xft.Out()&&(this.npt=!0)}upt(){const t=this.npt;return this.npt=!1,t}cpt(t,e){const i=this.xft.Clt(),r=i.gq().KJ();if(sw.cY.hpt&&r instanceof sw.cY.hpt&&("initial-frame"===this.xft.Out()||"initial-animation"===this.xft.Out()))switch(this.xft.cot()){case"relative":return this.rpt?(this.rpt.lpt=t.yot("initial-animation")?.fpt()??0,this.rpt.ppt=this.apt(i,t,e),this.rpt.dpt=this.opt(t,e),this.rpt):(this.rpt={mpt:(t,e,r,s,n)=>{if(e!==s){const r=s/e,n=i.i2("offsetWidth"),o=i.i2("offsetScaleX");if(n||o){const a=n?.iht()?.Rft(),h=o?.iht()?.Rft();if(t.RK()&&t.BK())h&&h.ypt(s),t.cg(this.gpt(s,e,t,i,a,h));else{const e=s*((t.wpt()?.vpt()??this.Spt(t,i))/this.Spt(t,i));h&&h.ypt(s);const n=a?.bpt()??0,o=h?.bpt()??0;t.cg(e+(n+o*r))}}else t.cg(t.Eg()*r)}if(r!==n){const e=n/r,s=i.i2("offsetHeight"),o=i.i2("offsetScaleY");if(s||o){const a=s?.iht()?.Rft(),h=o?.iht()?.Rft();if(t.RK()&&t.UK())h&&h.ypt(n),t.lg(this._pt(n,r,t,i,a,h));else{const r=n*((t.wpt()?.Ept()??this.Tpt(t,i))/this.Tpt(t,i));h&&h.ypt(n);const s=a?.bpt()??0,o=h?.bpt()??0;t.lg(r+(s+o*e))}}else t.lg(t.Pg()*e)}},lpt:t.yot("initial-animation")?.fpt()??0,ppt:this.apt(i,t,e),dpt:this.opt(t,e)},this.rpt);case"absolute":return this.spt?(this.spt.lpt=t.yot("initial-animation")?.fpt()??0,this.spt.ppt=this.apt(i,t,e),this.spt.dpt=this.opt(t,e),this.spt):(this.spt={lpt:t.yot("initial-animation")?.fpt()??0,ppt:this.apt(i,t,e),dpt:this.opt(t,e)},this.spt)}}Ppt(t,e,i,r=0){const s=e.rct().Dut(t.J1());if(!s)return r;const n=s.i2(i);if(!n)return r;const o=n.Rlt().Alt();if(!o)return r;const a=o.Apt();return a?a.$lt():r}Spt(t,e){const i=e.rct().Dut(t.J1());if(i)return i.Dct();const r=t.J1().y0();return r.xct()?r.Dct():t.wpt().vpt()}Tpt(t,e){const i=e.rct().Dut(t.J1());if(i)return i.Rct();const r=t.J1().y0();return r.xct()?r.Rct():t.wpt().Ept()}gpt(t,e,i,r,s,n){const o=i.wpt().vpt(),a=o/i.wK().wpt().vpt();let h=1;const u=n?.Mpt()??0;if(0!==u){const t=o/this.Spt(i,r);h=(t+u)/(0===t?Number.EPSILON:t)}const c=o*(t/e);let l=s?.Ipt()??0;l+=c-o;const f=(o+l)/(0===o?Number.EPSILON:o);return i.wK().Eg()*a*h*f}_pt(t,e,i,r,s,n){const o=i.wpt().Ept(),a=o/i.wK().wpt().Ept();let h=1;const u=n?.Opt()??0;if(0!==u){const t=o/this.Tpt(i,r);h=(t+u)/(0===t?Number.EPSILON:t)}const c=o*(t/e);let l=s?.Dpt()??0;l+=c-o;const f=(o+l)/(0===o?Number.EPSILON:o);return i.wK().Pg()*a*h*f}}sw.ict.Nlt=hw}{const uw=self.Ee;class cw extends uw.ict.jlt{constructor(t){super(t),this.xpt=0,this.Cpt=!1}yft(){return!1}_nt(){const t=this.xft.ect();let e=this.xft.Rlt();e=t.tft(e),this.xpt=e.vot()}nut(){}$lt(){return this.Cpt||this.xft.Sl(0),this.xpt}Sl(t,e,i,r,s,n,o){this.xpt=uw.ict.Nft.Sl(t,e,i,this.xft),this.Cpt=!0}clt(){}Mft(){}dft(){return this.xpt}llt(){return!1}flt(){return!1}_et(){return{value:this.xpt,init:this.Cpt}}Eet(t){t&&(this.xpt=t.value,this.Cpt=!t.hasOwnProperty("init")||t.init)}}uw.ict.Flt=cw}{const lw=self.Ee,fw=0,pw=0,dw=1,mw=1,yw=2,gw=3;class vw extends lw.ict.jlt{constructor(t){super(t),this.Rpt=!1,this.Lpt=null,this.kpt=null,this.Gpt=null,this.qnt=this.xft.rct(),this.Slt=this.xft.Clt(),this.Npt=this.xft.Ult(),this.jpt=this.Npt[0],this.Fpt=this.Npt[1],this.Npt[3]?this.Bpt=this.Npt[3]:this.Bpt=Math.random().toString(36).slice(2),this.zpt=NaN,this.Upt=NaN,this.Hpt=NaN,this.Vpt=null,this.Wpt()}Ys(){super.Ys(),this.Lpt=null,this.kpt=null,this.Gpt=null,this.qnt=null,this.Slt=null,this.Npt=null,this.jpt=null,this.Vpt=null}Wpt(){if(!self.Ee.cY.Audio)return;const t=this.xft.gY().$pt(self.Ee.cY.Audio);t&&(this.Lpt=t.QJ().y0()),this.kpt=self.Ee.cY.Audio.Ypt,this.Gpt=self.Ee.cY.Audio.Jpt}qpt(){if(this.Vpt)return;const t=this.xft.Clt().i2("audioSource");t&&(this.Vpt=t.iht())}Qpt(){const t=this.xft.Clt().i2("volume");return t?t.iht().Upt:this.Upt}but(){super.but(),this.Rpt=!1,this.Lpt&&(this.Gpt&&(this.zpt=this.Gpt.Zpt.call(this.Lpt,this.Bpt),this.Upt=this.Gpt.Xpt.call(this.Lpt,this.Bpt)),this.kpt&&this.kpt.b1.call(this.Lpt,this.Bpt))}Kpt(){return this.Bpt}tdt(){return this.Hpt}edt(t){this.Hpt=t}_nt(){super._nt(),this.zpt=NaN,this.Rpt=!1}nut(){super.nut();const t=this.xft.rct().oU();switch(this.zpt=t-this.Fpt,this.xft.Out()){case"audioSource":break;case"volume":this.Upt=this.xft.gft(t)}this.Rpt=!1}Sl(t,e,i,r,s,n,o){if(this.Lpt)switch(this.xft.Out()){case"audioSource":{if(!this.qnt.yht())return;if(r)return void(this.kpt&&this.kpt.b1.call(this.Lpt,this.Bpt));if(t<this.Fpt)return void(this.Rpt=!1);const e=this.Gpt.idt.call(this.Lpt,this.Bpt),i=this.qnt.R1();if(i!==e&&this.kpt.C1.call(this.Lpt,this.Bpt,i),this.Rpt)return;if(!this.xft.rct().IsPlaying())return;if(this.Rpt=!0,isNaN(this.zpt)){const e=self.performance.now(),i=t-this.Fpt;if("suspended"===this.Lpt.rdt())return void(this.Rpt=!1);const r=i+(self.performance.now()-e)/1e3;if(this.kpt){let t=this.tdt();isNaN(t)?(this.edt(0),t=0):this.edt(t),this.kpt.sdt.call(this.Lpt,this.jpt,t,this.Bpt,r)}}else{const t=this.zpt;this.zpt=NaN;const e=this.Qpt();if(this.Upt=NaN,"suspended"===this.Lpt.rdt())return void(this.Rpt=!1);this.kpt&&(this.edt(e),this.kpt.sdt.call(this.Lpt,this.jpt,e,this.Bpt,t))}break}case"volume":this.qpt(),super.Sl(t,e,i,r,s,n,o)}}gft(t,e,i){if(this.Lpt)switch(this.xft.Out()){case"audioSource":return;case"volume":return this.qpt(),super.gft(t,e,i)}}ndt(t,e){return this.Vpt?this.Vpt.tdt():0}odt(t,e,i,r){this.Vpt&&this.Vpt.edt(this.ndt()+e),this.kpt&&this.Vpt&&this.kpt.edt.call(this.Lpt,this.Vpt.Kpt(),this.Vpt.tdt())}adt(t,e,i){this.Vpt&&this.Vpt.edt(e),this.kpt&&this.Vpt&&this.kpt.edt.call(this.Lpt,this.Vpt.Kpt(),this.Vpt.tdt())}hdt(){return!0}_et(){return{audioPlaybackStarted:this.Rpt,audioTag:this.Bpt,pauseTime:this.zpt,pauseVolume:this.Upt,volume:this.Hpt}}Eet(t){t&&(this.Rpt=t.audioPlaybackStarted,this.Bpt=t.audioTag,this.zpt=t.pauseTime,this.Upt=t.pauseVolume,this.Hpt=t.volume,this.Wpt())}}lw.ict.Blt=vw}{const ww=self.Ee;ww.ict.$ft=class{constructor(t){this.Elt=t,this.xft=t.i2(),this.zut=this.xft.Clt().N$(),this.udt=this.xft.Out(),this.cdt=!1,this.ldt=null,this.fdt=null}Ys(){this.Elt=null,this.xft=null,this.zut=null,this.ldt=null,this.fdt=null}yft(){return!1}but(){}Cnt(){this.zut=null,this.ldt=null,this.fdt=null}iht(){return this.Elt}i2(){return this.xft}N$(){return this.zut||(this.zut=this.xft.Clt().N$()),this.zut}pdt(t){this.cdt=!!t}ddt(){return this.cdt}qht(){}_nt(){}nut(){}Vft(){this.ldt=this.dft()}Mft(){this.ldt=null}dft(){}llt(){}flt(){}Qft(t){return typeof this.mdt()==typeof t}Gft(t,e){}Uft(t,e,i,r,s,n,o,a){}Hft(t,e){}ydt(){return this.vdt(()=>{const t=this.xft.Rlt();return this.xft.ect().tft(t)},()=>{const t=this.xft.Rlt();return this.xft.ect().Apt(t)}).gdt()}wdt(){const t=this.xft.rct().oU()-this.xft.Clt().cut();return this.vdt(()=>{const e=this.xft.Rlt();return this.xft.ect().hft(t,e)},()=>{const e=this.xft.Rlt(),i=this.xft.ect();return i.lft(t,e)||i.Apt(e)}).gdt()}vdt(t,e){return this.xft.rct().yht()?t():e()}Sdt(t,e){return"relative"===this.xft.cot()?t():e()}bdt(t,e){return this.ddt()?(this.pdt(!1),t()):e()}_dt(t){}Edt(){return this.Elt.PV()}Tdt(){return this.fdt||(this.fdt=this.Elt.kft()),this.fdt}Pdt(t,e,i,r,s,n){switch(this.xft.fct()){case"behavior":return t();case"effect":return e();case"instance-variable":return i();case"plugin":return r();case"world-instance":return s();case"audio":return n()}}_et(){return{firstAbsoluteUpdate:this.cdt,saveState:this.ldt}}Eet(t){t&&(this.cdt=t.firstAbsoluteUpdate,this.ldt=t.saveState)}Adt(t,e=!1){const i=[];for(const r of t){const t=r.Clt().cut();for(const s of r.nft())e&&0===s.oU()?i.push({time:t+s.oU(),value:s.gdt()}):e||i.push({time:t+s.oU(),value:s.gdt()})}return i.sort((t,e)=>t.time-e.time)}Mdt(t,e,i){return this.Idt(e,i)}Idt(t,e){for(let i=e.length-1;i>=0;i--)if(e[i].time<=t)return e[i];return null}}}{const Sw=self.Ee,bw=new Map,_w=[0,0,0];class Ew extends Sw.ict.$ft{constructor(t){super(t)}qht(){}_nt(){}nut(){}dft(){const t=this.xft.fct(),e=this.Tdt(),i=this.Edt();switch(t){case"behavior":case"plugin":return this.Odt(e.Ddt(i));case"effect":return this.Odt(e[i]);case"world-instance":return this.Odt(this.mdt())}}llt(){const t=this.ydt();return!this.xdt(t,this.mdt())}flt(){return!Sw.Ki(this.ldt)&&!this.xdt(this.ldt,this.mdt())}xdt(t,e){return t=this.Cdt(t),e=this.Cdt(e),t.Ha(e)}ydt(){const t=super.ydt();return this.Cdt(t)}wdt(){const t=super.wdt();return this.Cdt(t)}_dt(t){}Odt(t){return Sw.Gr(t,Sw.ba)?t.toArray().slice(0,3):t.slice(0,3)}Cdt(t){return Sw.Gr(t,Sw.ba)?t:new Sw.ba(t[0],t[1],t[2],1)}Qft(t){return!0}yft(){return!0}Gft(){const t=this.xft.rct(),e=this.xft.J1(),i=this.xft.iht(),r=t.eht(e,i,this.udt,this.xft);if(r&&r.length>1){bw.has(e)||bw.set(e,new Map);const t=bw.get(e),i=this.xft.fct();t.has(i)||t.set(i,new Map);const r=t.get(i);r.has(this.udt)||r.set(this.udt,{Rdt:!1,color:new Sw.ba(0,0,0,1)})}}Ldt(t,e,i){const r=bw.get(t).get(e).get(i);return r.Rdt=!0,r.color}Uft(t,e,i,r,s,n,o,a){const h=this.xft.rct(),u=this.xft.Clt(),c=this.xft.J1(),l=this.xft.iht(),f=this.xft.fct(),p=this.udt,d=h.eht(c,l,p,this.xft);if(d&&d.length>1){const t=this.Adt(d,!0),i=this.Mdt(h,h.oU(),t);if(i){const t=u.cut(),r=i.time-t;if(0===r)this.Ldt(c,f,this.udt).Ia(e[0],e[1],e[2]);else{if(r<0)return;const t=e[0],i=e[1],s=e[2],n=this.xft.Sl(r,!1,!0),o=Sw.ba.Eh(t,n[0]),a=Sw.ba.Eh(i,n[1]),h=Sw.ba.Eh(s,n[2]);this.Ldt(c,f,this.udt).Ia(o,a,h)}}}else this.kdt(e[0],e[1],e[2])}Hft(){const t=this.xft.J1();if(!bw.has(t))return;const e=bw.get(t),i=this.xft.fct();if(!e.has(i))return;const r=e.get(i);if(!r.has(this.udt))return;const s=r.get(this.udt),n=s.Rdt,o=s.color;n&&this.kdt(o.ka(),o.Ga(),o.Na()),0===r.size&&e.delete(i),0===e.size&&bw.delete(t)}mdt(){const t=this.xft.fct(),e=this.Tdt(),i=this.Edt();switch(t){case"behavior":case"plugin":return this.Cdt(e.Ddt(i));case"effect":return e[i].clone();case"world-instance":return this.N$().nK().clone()}}kdt(t,e,i){const r=this.xft.fct(),s=this.Tdt(),n=this.Edt();switch(r){case"behavior":case"plugin":_w[0]=t,_w[1]=e,_w[2]=i,s.Gdt(n,_w);break;case"effect":s[n].Ma(t,e,i);break;case"world-instance":this.N$().Ndt(t,e,i)}}_et(){}Eet(t){}}Sw.ict.$ft.Jft=Ew}{const Tw=self.Ee,Pw=Tw.ict;class Aw extends Tw.ict.$ft{constructor(t){super(t)}qht(){}_nt(){}nut(){}dft(){return this.mdt()}llt(){return this.ydt()!==this.dft()}flt(){return!Tw.Ki(this.ldt)&&this.ldt!==this.dft()}yft(){return!1}Uft(t,e,i,r,s,n,o,a){const h=this.xft,u=h.Clt(),c=h.fct(),l=h.rct(),f=u.J1(),p=h.iht(),d=this.udt,m=l.eht(f,p,d,h);if(m&&m.length>1){const i=this.Adt(m),r=t+u.cut(),s=this.Mdt(l,r,i);s&&(e=s.value)}switch(h.Klt()){case"numeric":if(!Pw.Nft.jdt(this.Edt(),this.Tdt(),e,c))return;this.kdt(e,i,r);break;case"angle":if(!Pw.jft.jdt(this.Edt(),this.Tdt(),e,c))return;this.kdt(e,i,r);break;case"boolean":if(!Pw.Fft.jdt(this.Edt(),this.Tdt(),e,c))return;this.kdt(e,i,r);break;case"color":if(!Pw.Bft.jdt(this.Edt(),this.Tdt(),e,c))return;this.kdt(e,i,r);break;case"text":{const t=this.Fdt();if(!Pw.zft.jdt(this.Edt(),this.Tdt(),e,c)&&!t)return;this.kdt(e,i,r);break}}}Fdt(){switch(this.xft.fct()){case"behavior":case"effect":case"instance-variable":return!1;case"plugin":return this.iht().upt()}return!1}mdt(){const t=this.xft.fct(),e=this.Tdt(),i=this.Edt();switch(t){case"behavior":case"plugin":return e.Ddt(i);case"effect":return e[i];case"instance-variable":return e.Bdt(i)}}kdt(t,e,i){const r=this.xft.fct(),s=this.Tdt(),n=this.Edt();switch(r){case"behavior":s.Gdt(n,t);break;case"effect":s[n]=t;break;case"instance-variable":s.zdt(n,t);break;case"plugin":s.Gdt(n,t,this.iht().cpt(e,i))}}}Tw.ict.$ft.Wft=Aw}{const Mw=self.Ee,Iw=Mw.ict.$ft,Ow=new Map,Dw=(t,e,i,r,s,n=!1,o=null,a=null)=>{Ow.set(t,{Udt:e,Hdt:i,Vdt:r,round:s,Wdt:n,init:o,reset:a})},xw=(t,e)=>{const i=e.rct().Dut(t.J1());if(i)return i.Dct();const r=t.J1().y0();return r.xct()?r.Dct():t.wpt().vpt()},Cw=(t,e,i,r=0)=>{const s=e.rct().Dut(t.J1());if(!s)return r;const n=s.i2(i);if(!n)return r;const o=n.Rlt().Alt();if(!o)return r;const a=o.Apt();return a?a.$lt():r},Rw=t=>{const e=[];let i=t.wK();for(;i;)e.push(i),i=i.wK();return e.reverse(),e};Dw("offsetX",(t,e,i,r)=>{"relative"===r.xft.cot()?t.$dt(e,i.rct().pht()):t.$dt(e)},(t,e)=>t.sE(e),t=>t.rE(),!0),Dw("offsetY",(t,e,i,r)=>{"relative"===r.xft.cot()?t.Ydt(e,i.rct().pht()):t.Ydt(e)},(t,e)=>t.aE(e),t=>t.oE(),!0),Dw("offsetWidth",(t,e,i,r,s=!1,n=!0)=>{if(0===e)return;const o="relative"===r.xft.cot(),a=1===r.Jdt.qA();if((o||a)&&t.RK()&&t.BK()){if(isNaN(r.qdt)){const e=Rw(t);let i;i=a?e[e.length-1].Eg():e[e.length-1].wpt().vpt(),r.qdt=0===i?Number.EPSILON:i}if(s)return;r.Qdt+=e;const i=e/r.qdt;t.jg(i,n),r.Zdt+=i}else t.jg(e),r.Zdt+=e},(t,e)=>t.cg(e),t=>t.Eg(),!0,!1,null,t=>{t.Zdt=0,t.Qdt=0}),Dw("offsetHeight",(t,e,i,r,s=!1,n=!0)=>{if(0===e)return;const o="relative"===r.xft.cot(),a=1===r.Jdt.qA();if((o||a)&&t.RK()&&t.UK()){if(isNaN(r.qdt)){const e=Rw(t);let i;i=a?e[e.length-1].Pg():e[e.length-1].wpt().Ept(),r.qdt=0===i?Number.EPSILON:i}if(s)return;r.Xdt+=e;const i=e/r.qdt;t.Kdt(i,n),r.Zdt+=i}else t.Kdt(e),r.Zdt+=e},(t,e)=>t.lg(e),t=>t.Pg(),!0,!1,null,t=>{t.Zdt=0,t.Xdt=0}),Dw("offsetAngle",(t,e,i,r,s)=>{t.tmt(e)},(t,e)=>t.Jq(e),t=>t.qq(),!1,!0),Dw("offsetOpacity",(t,e,i,r,s)=>{e/=r.emt?r.emt:1;const n=t.RR()+e;if(0===r.imt)n>1?r.imt+=n-1:n<0&&(r.imt+=n),t.rmt(e);else{const i=t.RR()+e;e>0&&r.imt>0?i>1&&(r.imt+=i-1):e>0&&r.imt<0?(r.imt+=e,r.imt>0&&(t.rmt(r.imt),r.imt=0)):e<0&&r.imt>0?(r.imt+=e,r.imt<0&&(t.rmt(r.imt),r.imt=0)):e<0&&r.imt<0&&i<0&&(r.imt+=i)}},(t,e)=>{t.kR(e)},t=>t.RR(),!1,!0,(t,e,i)=>{switch(t.imt=0,t.xft.cot()){case"relative":{t.xft.ect();const e=t.xft.Rlt().Alt().Plt();let i=t.N$().RR(),r=i;for(const s of e){const e=s.oU();r=i+t.xft.gft(e),r=Mw.Xs(r,0,1)}t.smt=i-r,t.smt=Math.round(100*(t.smt+Number.EPSILON))/100,r=i;for(let i=e.length-1;i>=0;i--){const s=e[i].oU();r-=t.xft.gft(s),r=Mw.Xs(r,0,1)}t.nmt=r,t.nmt=Math.round(100*(t.nmt+Number.EPSILON))/100;break}}const r="relative"===t.xft.cot(),s=1===t.Jdt.qA();if((r||s)&&e.RK()&&e.JK()){const r=Rw(e);let s=r[0].wpt().omt();s+=Cw(r[0],i,"offsetOpacity");for(let t=1;t<r.length;t++)s+=Cw(r[t],i,"offsetOpacity");t.emt=0===s?1:s}},t=>{switch(t.xft.cot()){case"relative":{t.imt=0;const e=t.N$();let i=e.RR();i=Math.round(100*(i+Number.EPSILON))/100,t.xft.rct().yht()?(e.kR(i+t.smt),t.jM=0):(e.kR(i-t.nmt),t.jM=t.iht().Dft());break}}}),Dw("offsetOriginX",(t,e)=>t.amt(e),(t,e)=>t.HX(e),t=>t.UX(),!1),Dw("offsetOriginY",(t,e)=>t.hmt(e),(t,e)=>t.$X(e),t=>t.WX(),!1),Dw("offsetZElevation",(t,e)=>t.umt(e),(t,e)=>t.uE(e),t=>t.hE(),!0),Dw("offsetScaleX",(t,e,i,r)=>{if(0===e)return;const s=t.Eg()<0?-1:1;if(r.cmt+=e,"relative"===r.xft.cot()&&t.RK()&&t.BK()){const n=Cw(t,i,"offsetWidth"),o=isNaN(r.lmt)?i.Dct():r.lmt,a=(o+n/(t.wpt().vpt()/o))*s*e;isNaN(r.qdt)&&Ow.get("offsetWidth").Udt(t,1,i,r,!0);const h=a/r.qdt;t.jg(h,!0),r.Zdt+=h}else{const n=(isNaN(r.lmt)?i.Dct():r.lmt)*s*e;t.jg(n),r.Zdt+=n}},(t,e,i)=>{t.cg(i.Dct()*e)},(t,e)=>{const i=t.Eg()<0?-1:1;if(t.BK()){const r=t.wK(),s=e.rct().Dut(r.J1());let n=NaN;if(s)n=r.Eg()/s.Dct();else{const t=r.J1().y0();n=t.xct()?r.Eg()/t.Dct():1}return t.Eg()*i/(e.Dct()*n)}return t.Eg()*i/e.Dct()},!1,!1,null,t=>{t.Zdt=0,t.lmt=NaN,t.cmt=0}),Dw("offsetScaleY",(t,e,i,r)=>{if(0===e)return;const s=t.Pg()<0?-1:1;if(r.fmt+=e,"relative"===r.xft.cot()&&t.RK()&&t.UK()){const n=Cw(t,i,"offsetHeight"),o=isNaN(r.lmt)?i.Rct():r.lmt,a=(o+n/(t.wpt().Ept()/o))*s*e;isNaN(r.qdt)&&Ow.get("offsetHeight").Udt(t,1,i,r,!0);const h=a/r.qdt;t.Kdt(h,!0),r.Zdt+=h}else{const n=(isNaN(r.lmt)?i.Rct():r.lmt)*s*e;t.Kdt(n),r.Zdt+=n}},(t,e,i)=>{t.lg(i.Rct()*e)},(t,e)=>{const i=t.Pg()<0?-1:1;if(t.UK()){const r=t.wK(),s=e.rct().Dut(r.J1());let n=NaN;if(s)n=r.Pg()/s.Rct();else{const t=r.J1().y0();n=t.xct()?r.Pg()/t.Rct():1}return t.Pg()*i/(e.Rct()*n)}return t.Pg()*i/e.Rct()},!1,!1,null,t=>{t.Zdt=0,t.lmt=NaN,t.fmt=0});class Lw extends Mw.ict.$ft{constructor(t){super(t),this.jM=0,this.imt=0,this.smt=0,this.nmt=0,this.emt=NaN,this.qdt=NaN,this.Zdt=0,this.lmt=NaN,this.Qdt=0,this.cmt=0,this.Xdt=0,this.fmt=0,this.pmt=void 0,this.dmt=void 0,this.mmt=null,this.ymt=null,this.gmt=null,this.vmt=null,this.wmt=null,this.Smt=null,this.bmt=null,this._mt=null,this.Emt=!1,this.Tmt=!1,Mw.Gr(this.xft.rct(),Mw.Pmt)?this.Jdt=new Mw.ict.$ft.Amt(this):this.Jdt=new Mw.ict.$ft.Mmt(this);const e=this.xft.Out();switch(this.xft.fct()){case"world-instance":{const t=Ow.get(e);this.mmt=t.Vdt,this.ymt=t.Udt,this.gmt=t.Hdt,this.Emt=t.round,this.Tmt=t.Wdt,this.wmt=t.init,this.vmt=t.reset;break}case"audio":this.Smt=t.ndt,this.bmt=t.odt,this._mt=t.adt,this.Emt=!!t.hdt(),this.Tmt=!1}}Ys(){this.Jdt=null,this.mmt=null,this.ymt=null,this.gmt=null,this.vmt=null,this.wmt=null,this.Smt=null,this.bmt=null,this._mt=null,super.Ys()}yft(){return this.Jdt.yft()}Imt(){return this.jM}Omt(t){this.jM=t}qht(){this.vmt&&this.vmt(this)}_nt(){const t=this.Jdt._nt();if("number"==typeof t&&(this.jM=t),this.wmt){const t=this.N$(),e=this.xft.Clt();this.wmt(this,t,e)}}nut(){const t=this.Jdt.nut();"number"==typeof t&&(this.jM=t)}dft(){return this.mdt()}llt(){return this.ydt()!==this.dft()}flt(){return!Mw.Ki(this.ldt)&&this.ldt!==this.dft()}Gft(t,e){this.Jdt.Gft(t,e)}Uft(t,e,i,r,s,n,o,a){return this.Jdt.Uft(t,e,i,r,s,n,o,a)}Hft(t,e){this.Jdt.Hft(t,e)}mdt(){const t=this.Tdt(),e=this.Edt(),i=this.N$(),r=this.xft.Clt();switch(this.xft.fct()){case"behavior":case"plugin":return t.Ddt(e);case"effect":return t[e];case"instance-variable":return t.Bdt(e);case"world-instance":return this.mmt(i,r);case"audio":return this.Smt.call(this.iht(),i,r)}}kdt(t,e,i,r=!0){const s=this.Tdt(),n=this.Edt(),o=this.N$(),a=this.xft.Clt();switch(this.xft.fct()){case"behavior":s.Dmt(n,t);break;case"effect":s[n]+=t;break;case"instance-variable":s.xmt(n,t);break;case"plugin":s.Dmt(n,t,this.iht().cpt(e,i));break;case"world-instance":this.ymt(o,t,a,this,!1,r);break;case"audio":this.bmt.call(this.iht(),o,t,a,this)}}Cmt(t,e,i,r,s){let n=this.xft.hht();if(n="default"===n?"continuous":n,"discrete"===n&&!e)return;if("discrete"===n&&i){const t=this.xft.rct().oU();if(!this.xft.aft(t))return}const o=this.Tdt(),a=this.Edt(),h=this.N$(),u=this.xft.Clt();switch(this.xft.fct()){case"behavior":o.Gdt(a,t);break;case"effect":o[a]=t;break;case"instance-variable":o.zdt(a,t);break;case"plugin":o.Gdt(a,t,this.iht().cpt(r,s));break;case"world-instance":this.gmt(h,t,u);break;case"audio":this._mt.call(this.iht(),h,t,u)}}Rmt(t,e,i,r,s,n,o,a){this.Jdt.Rmt(t,e,i,r,s,n,o,a)}Lmt(t,e,i,r,s){"angle"===this.xft.Qlt()&&(t=Mw.en(t));const n=(t.toString().split(".")[1]||"").length,o=this.mdt();let a;switch(a=0===n?this.Emt?Math.round(o):this.Tmt?"angle"===this.xft.Qlt()?Mw.tn(Math.round(Mw.en(o))):Number(Mw.toFixed(o,2)):o:this.Emt?Number(Mw.toFixed(o,n)):(this.Tmt,o),this.kdt(a-o,e,i,!1),this.xft.Out()){case"offsetWidth":case"offsetScaleX":{const t=this.N$(),e=t.Eg(),i=Number(Mw.toFixed(e,2));t.jg(i-e);break}case"offsetHeight":case"offsetScaleY":{const t=this.N$(),e=t.Pg(),i=Number(Mw.toFixed(e,2));t.Kdt(i-e);break}}}_et(){return Object.assign(super._et(),{v:this.jM,a:this.imt,fod:this.smt,bod:this.nmt,of:this.emt,sf:this.qdt,armorf:this.pmt,armandf:this.dmt,ca:this.Zdt,os:this.lmt,awo:this.Qdt,aho:this.Xdt,asxo:this.cmt,asyo:this.fmt})}Eet(t){t&&(super.Eet(t),this.jM=t.v,this.imt=t.a,this.smt=Mw.Qi(t.fod)?t.fod:0,this.nmt=Mw.Qi(t.bod)?t.bod:0,this.emt=Mw.Qi(t.of)?t.of:NaN,this.qdt=Mw.Qi(t.sf)?t.sf:NaN,this.pmt=Mw.Qi(t.armorf)?t.armorf:void 0,this.dmt=Mw.Qi(t.armandf)?t.armandf:void 0,this.Zdt=Mw.Qi(t.ca)?t.ca:0,this.lmt=Mw.Qi(t.os)?t.os:NaN,this.Qdt=Mw.Qi(t.awo)?t.awo:0,this.Xdt=Mw.Qi(t.aho)?t.aho:0,this.cmt=Mw.Qi(t.asxo)?t.asxo:0,this.fmt=Mw.Qi(t.asyo)?t.asyo:0)}ypt(t){this.lmt=t}bpt(){return this.Zdt}Ipt(){return this.Qdt}Dpt(){return this.Xdt}Mpt(){return this.cmt}Opt(){return this.fmt}}Mw.ict.$ft.Yft=Lw}{const kw=self.Ee;class Gw{constructor(t){this.kmt=!1,this.xpt=0,this.Gmt=!1,this.Nmt=!1,this.qut=t;for(let t=0,e=this.qut.length;t<e;t++)this.qut[t].Dlt(this)}Iut(){return this.qut}jmt(){this.kmt=!0}Fmt(){return this.kmt}Oft(t){this.xpt=t}$lt(){return this.xpt}Bmt(t){this.Gmt=t}zmt(){return this.Gmt}uut(t){this.Nmt=t}Umt(){return this.Nmt}Bf(){this.kmt=!1,this.xpt=0,this.Gmt=!1,this.Nmt=!1}}class Nw{constructor(t){this.Hmt=t}Ys(){this.Hmt=null}qA(){return 0}_nt(){const t=this.Hmt;return this.Hmt.i2(),t.Sdt(()=>t.vdt(()=>0,()=>t.iht().Dft()),()=>{})}nut(){}yft(){switch(this.Hmt,this.Hmt.i2().cot()){case"relative":return!1;case"absolute":return!0}}Gft(t,e){this.Hmt;const i=this.Hmt.i2(),r=i.Out();switch(i.cot()){case"relative":break;case"absolute":if(i.Olt())i.xlt().Bf();else{const t=i.rct(),e=i.J1(),s=i.iht(),n=t.eht(e,s,r,i);n&&n.length>1&&new Gw(n)}}}Uft(t,e,i,r,s,n,o,a){const h=this.Hmt,u=this.Hmt.i2();switch(u.cot()){case"relative":{const o=h.Imt();h.kdt(e-o,i,r),n&&this.Rmt(t,i,r,s,o,e),h.Omt(e);break}case"absolute":{const t=u.rct(),s=u.Clt();if(u.J1(),u.iht(),u.Olt()){const i=u.xlt(),r=i.Iut(),n=h.Adt(r,!0),c=h.Mdt(t,t.oU(),n);if(c){const t=s.cut(),r=c.time-t;if(0===r)i.uut(o),i.Bmt(a),i.jmt(),i.Oft(i.$lt()+e);else{if(r<0)return;const t=u.gft(r);i.uut(o),i.Bmt(a),i.jmt(),i.Oft(i.$lt()+(e-t))}}}else h.Cmt(e,a,o,i,r);break}}}Hft(t,e){const i=this.Hmt,r=this.Hmt.i2();switch(r.cot()){case"relative":break;case"absolute":if(r.Olt()){const s=r.xlt();s.Fmt()&&i.Cmt(s.$lt(),s.zmt(),s.Umt(),t,e)}}}Rmt(t,e,i,r,s,n){const o=this.Hmt;r||(e&&t===e.oU()?o.Lmt(e.vot(),e,i):i&&t===i.oU()?o.Lmt(i.vot(),e,i):n-s===0&&o.Lmt(e.vot(),e,i))}}kw.ict.$ft.Mmt=Nw}{const jw=self.Ee;class Fw{constructor(t){this.Hmt=t}Ys(){this.Hmt=null}qA(){return 1}_nt(){const t=this.Hmt;return t.pdt(!0),this._dt(t.ydt())}nut(){const t=this.Hmt;if(t.ydt()!==t.wdt())return t.pdt(!0),this._dt(t.wdt())}yft(){return!1}Gft(){}Uft(t,e,i,r,s,n,o,a){const h=this.Hmt,u=h.Imt();switch(h.i2().cot()){case"relative":h.kdt(e-u,i,r),n&&this.Rmt(t,i,r,s,u,e,!1,o);break;case"absolute":h.ddt()?(h.pdt(!1),h.kdt(u,i,r)):0===t&&0===h.i2().rct().A1()?h.Cmt(e,!0,!1,i,r):(h.kdt(e-u,i,r),n&&this.Rmt(t,i,r,s,u,e,this.Vmt(),o))}h.Omt(e)}Hft(){}_dt(t){return t-this.Hmt.dft()}Vmt(){const t=this.Hmt,e=t.N$().J1(),i=t.i2().gY().tht();let r=0;for(const t of i.Zst())0===t.qA()?t.int(e)&&r++:1===t.qA()&&t.J1()===e&&r++;return r<=1}Rmt(t,e,i,r,s,n,o,a){const h=this.Hmt;r?e&&t===e.oU()?h.Lmt(e.vot(),e,i,o,a):i&&t===i.oU()?h.Lmt(i.vot(),e,i,o,a):i||h.Lmt(e.vot(),e,i,o,a):e&&t===e.oU()?h.Lmt(e.vot(),e,i,o,a):i&&t===i.oU()?h.Lmt(i.vot(),e,i,o,a):n-s===0&&h.Lmt(e.vot(),e,i,o,a)}}jw.ict.$ft.Amt=Fw}{const Bw=self.Ee,zw=self.$c;Bw.ict.Nft=class{constructor(){}static jdt(t,e,i,r){let s;switch(r){case"behavior":case"plugin":s=e.Ddt(t);break;case"effect":s=e[t];break;case"instance-variable":s=e.Bdt(t)}return s!==i}static Sl(t,e,i,r){if(!i){const t=r.Rlt();return r.ect().Apt(t).vot()}let s=r.hht();if("default"===s&&(s="continuous"),"combo"===r.Qlt()&&(s="discrete"),"discrete"===s)return Bw.ict.bft(e,i,r);if("continuous"===s||"step"===s){const n=r.rct().oht();if("step"===s&&0!==n){const e=1/n;t=Math.floor(t*e)/e}const o=e.vot(),a=i.vot(),h=e.yot("cubic-bezier"),u=i.yot("cubic-bezier"),c=h&&h.Wmt()&&u&&u.$mt();if(!c&&o===a)return o;const l=e.oU(),f=i.oU();"step"===s&&0!==n&&(t=Bw.Xs(t,l,f));const p=Bw.normalize(t,l,f),d=e.Ift();let m;if(c){const t=f-l;m=zw.hl(d)(t*p,0,1,t),m=zw.hl("cubicbezier")(m,o,o+h.bot(),a+u.Tot(),a)}else m=zw.hl(d)((f-l)*p,o,a-o,f-l);return"integer"===r.Qlt()?Math.floor(m):m}}}}{const Uw=self.Ee;Uw.ict.jft=class{constructor(){}static jdt(t,e,i,r){let s;switch(r){case"behavior":case"plugin":s=e.Ddt(t);break;case"effect":s=e[t];break;case"instance-variable":s=e.Bdt(t)}return s!==i}static Sl(t,e,i,r){if(!i){const t=r.Rlt();return r.ect().Apt(t).vot()}let s=r.hht();if("default"===s&&(s="continuous"),"combo"===r.Qlt()&&(s="discrete"),"discrete"===s)return Uw.ict.bft(e,i,r);if("continuous"===s||"step"===s){const n=r.rct().oht();if("step"===s&&0!==n){const e=1/n;t=Math.floor(t*e)/e}const o=e.oU(),a=i.oU(),h=e.vot(),u=i.vot();"step"===s&&0!==n&&(t=Uw.Xs(t,o,a));const c=e.yot("angle");if(!c){if(h===u)return h;const i=Uw.normalize(t,o,a),r=self.$c.hl(e.Ift());return Uw.fn(h,u,r(i,0,1,1))}{const i=c.Ymt();if(h===u&&0===i)return h;const r=Uw.normalize(t,o,a),s=self.$c.hl(e.Ift())(r,0,1,1);switch(c.Jmt()){case"closest":return Uw.fn(h,u,s,i);case"clockwise":return Uw.pn(h,u,s,i);case"anti-clockwise":return Uw.dn(h,u,s,i)}}}}}}{const Hw=self.Ee;Hw.ict.Fft=class{constructor(){}static jdt(t,e,i,r){let s;switch(r){case"behavior":case"plugin":s=e.Ddt(t);break;case"effect":s=e[t];break;case"instance-variable":s=e.Bdt(t)}return!!s!=!!i}static Sl(t,e,i,r){if(!i){const t=r.Rlt();return r.ect().Apt(t).vot()?1:0}return Hw.ict.bft(e,i,r)?1:0}}}{const Vw=self.Ee,Ww=[0,0,0],$w=[0,0,0],Yw=[0,0,0];Vw.ict.Bft=class{constructor(){}static jdt(t,e,i,r){let s;switch(r){case"behavior":case"plugin":s=e.Ddt(t);break;case"effect":s=e[t];break;case"instance-variable":s=e.Bdt(t)}return Array.isArray(i)?(Ww[0]=i[0],Ww[1]=i[1],Ww[2]=i[2]):(Yw.sh(i),Ww[0]=Math.floor(255*Yw.ka()),Ww[1]=Math.floor(255*Yw.Ga()),Ww[2]=Math.floor(255*Yw.Na())),Array.isArray(s)?($w[0]=s[0],$w[1]=s[1],$w[2]=s[2]):(Yw.sh(s),$w[0]=Math.floor(255*Yw.ka()),$w[1]=Math.floor(255*Yw.Ga()),$w[2]=Math.floor(255*Yw.Na())),Ww[0]!==$w[0]||Ww[1]!==$w[1]||Ww[2]!==$w[2]}static Sl(t,e,i,r){if(!i){const t=r.Rlt(),e=r.ect().Apt(t).vot();return Ww[0]=e[0],Ww[1]=e[1],Ww[2]=e[2],Ww}let s=r.hht();if("default"===s&&(s="continuous"),"discrete"===s){const t=Vw.ict.bft(e,i,r);return Ww[0]=t[0],Ww[1]=t[1],Ww[2]=t[2],Ww}if("continuous"===s||"step"===s){const n=r.rct().oht();if("step"===s&&0!==n){const e=1/n;t=Math.floor(t*e)/e}const o=e.oU(),a=i.oU(),h=e.vot(),u=i.vot();"step"===s&&0!==n&&(t=Vw.Xs(t,o,a));const c=Vw.normalize(t,o,a),l=e.Ift(),f=h[0],p=h[1],d=h[2],m=u[0],y=u[1],g=u[2],v=self.$c.hl(l),w=a-o,S=w*c;return Ww[0]=f===m?f:v(S,f,m-f,w),Ww[1]=p===y?p:v(S,p,y-p,w),Ww[2]=d===g?d:v(S,d,g-d,w),Ww}}}}{const Jw=self.Ee;Jw.ict.zft=class{constructor(){}static jdt(t,e,i,r){let s;switch(r){case"behavior":case"plugin":s=e.Ddt(t);break;case"effect":s=e[t];break;case"instance-variable":s=e.Bdt(t)}return s!==i}static Sl(t,e,i,r){if(!i){const t=r.Rlt();return r.ect().Apt(t).vot()}return Jw.ict.bft(e,i,r)}}}{const qw=self.Ee;qw.ist=class{constructor(){this.qmt=new Map}Ys(){for(const t of this.qmt.values())t.Ys();this.qmt.clear(),this.qmt=null}Hc(t){const e=new qw.Qmt(t),i=e.Dl();this.qmt.set(i,e)}Ue(t){return this.qmt.get(t)}Yat(){return 0}static Zmt(t,e,i,r){if(e)for(const s of e)qw.ist.Xmt("create",s,t,i,r)}static Kmt(t,e,i,r){if(e)for(const s of e)qw.ist.Xmt("create-including-disabled",s,t,i,r)}static tyt(t,e,i,r){t.length?e.forEach((e,i)=>{t[i].Eet(e)}):e.forEach(e=>{qw.ist.Xmt("load",e,t,i,r)})}static Xmt(t,e,i,r,s){let n;if("function"==typeof r)switch(t){case"load":n=new r(null,s);break;case"create":case"create-including-disabled":n=new r(e,s)}else if("object"==typeof r){const i=e[r.eyt],o=r.map.get(i);switch(t){case"load":n=new o(null,s);break;case"create":case"create-including-disabled":n=new o(e,s)}}switch(t){case"load":n.Eet(e),i.push(n);break;case"create":if("function"==typeof n.Act&&!n.Act())return n.Ys();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Qw=self.Ee,Zw=0,Xw=1,Kw=2,tS=3,eS=4,iS=5,rS=6,sS=7,nS=8,oS=9,aS=10,hS=11;Qw.Qmt=class{constructor(t){this.Qs="",this.hut=NaN,this.iyt=0,this.ryt="default",this.syt="default",this.nyt=!1,this.oyt=!1,this.ayt=1,this.Nut=null,this.hyt="",this.uyt=!1,this.cyt=!0,t&&(this.Qs=t[0],this.hut=t[1],this.iyt=t[2],this.ryt=t[3],this.syt=t[4],this.nyt=!!t[6],this.oyt=!!t[7],this.ayt=t[8],this.hyt=t[9],this.uyt=!!t[10],this.cyt=!!t[11],this.Nut=new Qw.lyt(t[5],this))}Ys(){this.Nut.Ys(),this.Nut=null}Xat(){return this.Nut||(this.Nut=new Qw.lyt(null,this)),this.Nut}Dl(){return this.Qs}L3(t){this.Qs=t}A1(){return this.hut}P1(t){this.hut=t}oht(){return this.iyt}aht(t){this.iyt=t}hht(){return this.ryt}uht(t){this.ryt=t}cot(){return this.syt}cht(t){this.syt=t}I1(){return this.nyt}M1(t){this.nyt=t}D1(){return this.oyt}O1(t){this.oyt=t}U0(){return this.ayt}fht(t){this.ayt=t}Rnt(){return this.hyt}pht(){return this.uyt}dht(){return this.cyt}_et(){return{trackDataJson:this.Nut._et(),name:this.Qs,totalTime:this.hut,step:this.iyt,interpolationMode:this.ryt,resultMode:this.syt,loop:this.nyt,pingPong:this.oyt,repeatCount:this.ayt,startOnLayout:this.hyt,transformWithSceneGraph:!!this.uyt,useSystemTimescale:this.cyt}}Eet(t){t&&(this.Xat().Eet(t.trackDataJson),this.Qs=t.name,this.hut=t.totalTime,this.iyt=t.step,this.ryt=t.interpolationMode,this.syt=t.resultMode,this.nyt=t.loop,this.oyt=t.pingPong,this.ayt=t.repeatCount,this.hyt=t.startOnLayout,this.uyt=!!t.transformWithSceneGraph,this.cyt=!!t.useSystemTimescale)}}}{const uS=self.Ee,cS=0,lS=1,fS=2,pS=1,dS=2,mS=3,yS=4,gS=5,vS=6,wS=7,SS=0,bS=1,_S=8,ES=0,TS=1,PS=9,AS=10;class MS{constructor(t,e){this.Nut=e,this.fyt=null,this.pyt=null,this.jut=NaN,this.Fut=NaN,this.ryt="default",this.syt="default",this.mc=!1,this.dyt=null,this._lt=null,this.zl="",this.myt=null,this.yyt=0,this.gyt=this.Nut.nht().A1(),this.Yl=0,this.Qs="",t&&(t[0]&&(this.fyt=t[0],this.jut=t[0][2],this.Fut=t[0][1]),this.ryt=t[1],this.syt=t[2],this.mc=!!t[3],t[6]&&(this.zl=t[6]),t[7]&&(this.myt=t[7],this.yyt=t[7][0],this.gyt=t[7][1]),t[8]&&(this.pyt=t[8]),t[8]&&(this.pyt=t[8]),t[9]&&(this.Yl=t[9]),t[10]&&(this.Qs=t[10]),this.dyt=new uS.vyt(t[4],this),this._lt=new uS.wyt(t[5],this))}Ys(){this.fyt=null,this.Nut=null,this.dyt&&(this.dyt.Ys(),this.dyt=null),this._lt&&(this._lt.Ys(),this._lt=null),this.myt=null}Xat(){return this.Nut}dut(){return this.dyt||(this.dyt=new uS.vyt(null,this)),this.dyt}ect(){return this._lt||(this._lt=new uS.wyt(null,this)),this._lt}Syt(){return this.fyt}act(){return this.Fut}Ict(t){this.Fut=t}oct(){return this.jut}Ect(t){this.jut=t}hht(){return this.ryt}uht(t){this.ryt=t}cot(){return this.syt}cht(t){this.syt=t}Act(){return this.mc}Mct(t){this.mc=!!t}t2(){return this.zl}cut(){return this.yyt}Tct(){return this.gyt}Pct(t){this.gyt=t}Dct(){return this.pyt[0]}Oct(t){this.pyt||(this.pyt=[]),this.pyt[0]=t}Rct(){return this.pyt||(this.pyt=[]),this.pyt[1]}Cct(t){this.pyt||(this.pyt=[]),this.pyt[1]=t}qA(){return this.Yl}Dl(){return this.Qs}_et(){return{keyframeDataJson:this.dyt._et(),propertyTrackDataJson:this._lt._et(),instanceData:this.fyt,additionalInstanceData:this.pyt,instanceUid:this.jut,objectClassIndex:this.Fut,interpolationMode:this.ryt,resultMode:this.syt,enabled:this.mc,id:this.zl,nestedData:this.myt,type:this.Yl,name:this.Qs}}Eet(t){t&&(this.fyt=t.instanceData,this.jut=t.instanceUid,this.Fut=t.objectClassIndex,this.ryt=t.interpolationMode,this.syt=t.resultMode,this.mc=t.enabled,this.zl=t.id,this.Yl=t.type?t.type:0,this.Qs=t.name?t.name:"",this.gyt=this.Nut.nht().A1(),t.nestedData&&(this.myt=t.nestedData,this.yyt=this.myt[0],this.gyt=this.myt[1]),t.additionalInstanceData&&(this.pyt=t.additionalInstanceData),this.dut().Eet(t.keyframeDataJson),this.ect().Eet(t.propertyTrackDataJson))}}uS.lyt=class{constructor(t,e){this.mat=e,this.byt=[],uS.ist.Zmt(this.byt,t,MS,this)}Ys(){this.mat=null;for(const t of this.byt)t.Ys();uS.So(this.byt),this.byt=null}nht(){return this.mat}Sut(){const t=new MS(null,this);return this.byt.push(t),t}_yt(t){return t.dut().Jut()[0]}Eyt(t){return t.dut().Jut().at(-1)}Zct(t,e){const i=e.dut().Jut(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()===t)return r}}Tyt(t,e){const i=e.dut().Jut(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()>t)return r}}Qct(t,e){const i=e.dut().Jut(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()>=t)return r}}Jct(t,e){const i=e.dut().Jut();for(let e=i.length-1;e>=0;e--){const r=i[e];if(r.oU()<=t)return r}}*Zat(){for(const t of this.byt)yield t}_et(){return{trackDataItemsJson:this.byt.map(t=>t._et())}}Eet(t){t&&uS.ist.tyt(this.byt,t.trackDataItemsJson,MS,this)}}}{const IS=self.Ee,OS=0,DS=0,xS=1,CS=2,RS=3,LS=4,kS=5,GS=6,NS=7,jS=8,FS=9;class BS{constructor(t,e){this._lt=e,this.Pyt="",this.Ayt=null,this.udt=null,this.Yl=null,this.Myt=NaN,this.Iyt=NaN,this.ryt="default",this.syt="default",this.mc=!1,this.Oyt=null,this.Dyt=!0,t&&(this.Pyt=t[0][0],this.Ayt=t[0].slice(1),this.udt=t[1],this.Yl=t[2],this.Myt=t[3],this.Iyt=t[4],this.ryt=t[5],this.syt=t[6],this.mc=!!t[7],this.Oyt=new IS.xyt(t[8],this),this.Dyt=t[9])}Ys(){this.Oyt.Ys(),this.Oyt=null,this._lt=null,this.Ayt=null}ect(){return this._lt}Alt(){return this.Oyt||(this.Oyt=new IS.xyt(null,this)),this.Oyt}fct(){return this.Pyt}zlt(t){this.Pyt=t}Hlt(){return this.Ayt}Wlt(t){this.Ayt=t}Ylt(){return this.udt}qlt(t){this.udt=t}qA(){return this.Yl}Xlt(t){this.Yl=t}eft(){return this.Myt}ift(t){this.Myt=t}rft(){return this.Iyt}sft(t){this.Iyt=t}hht(){return this.ryt}uht(t){this.ryt=t}cot(){return this.syt}cht(t){this.syt=t}Act(){return this.mc}Mct(t){this.mc=!!t}oft(){return!!this.Dyt}_et(){return{propertyKeyframeDataJson:this.Oyt._et(),sourceAdapterId:this.Pyt,sourceAdapterArguments:this.Ayt,property:this.udt,type:this.Yl,min:this.Myt,max:this.Iyt,interpolationMode:this.ryt,resultMode:this.syt,enabled:this.mc,canHavePropertyKeyframes:this.Dyt}}Eet(t){t&&(this.Pyt=t.sourceAdapterId,this.Ayt=t.sourceAdapterArguments,this.udt=t.property,this.Yl=t.type,this.Myt=t.min,this.Iyt=t.max,this.ryt=t.interpolationMode,this.syt=t.resultMode,this.mc=t.enabled,this.Dyt=t.canHavePropertyKeyframes,this.Alt().Eet(t.propertyKeyframeDataJson))}}IS.wyt=class{constructor(t,e){this.Gut=e,this.Cyt=[],IS.ist.Zmt(this.Cyt,t,BS,this)}Ys(){this.Gut=null;for(const t of this.Cyt)t.Ys();IS.So(this.Cyt),this.Cyt=null}fut(){return this.Gut}nlt(){const t=new BS(null,this);return this.Cyt.push(t),t}tft(t){return t.Alt().Plt()[0]}Apt(t){return t.Alt().Plt().at(-1)}aft(t,e){const i=e.Alt().Plt(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()===t)return r}}cft(t,e){const i=e.Alt().Plt(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()>t)return r}}lft(t,e){const i=e.Alt().Plt(),r=i.length;for(let e=0;e<r;e++){const r=i[e];if(r.oU()>=t)return r}}hft(t,e){const i=e.Alt().Plt();for(let e=i.length-1;e>=0;e--){const r=i[e];if(r.oU()<=t)return r}}*tct(){for(const t of this.Cyt)yield t}_et(){return{propertyTrackDataItemsJson:this.Cyt.map(t=>t._et())}}Eet(t){t&&IS.ist.tyt(this.Cyt,t.propertyTrackDataItemsJson,BS,this)}}}{const zS=self.Ee,US=0,HS=1,VS=2,WS=3;class $S{constructor(t,e){if(this.dyt=e,this.iH=-1,this.Ryt="noease",this.Lyt=!1,this.zat=null,this.kyt=null,!t)return;this.iH=t[0],this.Ryt=t[1],this.Lyt=!!t[2];const i=t[3];this.zat=i?i.split(" "):[],this.kyt=new Set(this.zat.map(t=>t.toLowerCase())),this.Gyt=null,this.Nyt=null}Ys(){this.dyt=null,zS.So(this.zat),this.zat=null,this.kyt.clear(),this.kyt=null,this.Gyt=null}dut(){return this.dyt}iot(){return this.Gyt}jyt(t){this.Gyt=t}Vct(){return this.Nyt}Fyt(t){this.Nyt=t}oU(){return this.iH}T1(t){this.iH=t,this.dyt.Byt()}Ift(){return this.Ryt}Y1(t){this.Ryt=t}Act(){return this.Lyt}Mct(t){this.Lyt=!!t}L1(){return this.zat}vht(t){this.zat=t?t.split(" "):[],this.kyt=new Set(this.zat.map(t=>t.toLowerCase()))}zyt(){return this.kyt}Hct(){return Array.from(this.kyt).join(",").trim()}WZ(t){return this.kyt.has(t.toLowerCase())}_et(){return{time:this.iH,ease:this.Ryt,enable:this.Lyt,tags:this.zat}}Eet(t){t&&(this.iH=t.time,this.Ryt=t.ease,this.Lyt=t.enable,this.zat=t.tags,this.kyt=new Set(this.zat.map(t=>t.toLowerCase())))}}zS.vyt=class{constructor(t,e){this.Gut=e,this.Yut=[],zS.ist.Zmt(this.Yut,t,$S,this),this.Byt()}Ys(){this.Gut=null;for(const t of this.Yut)t.Ys();zS.So(this.Yut),this.Yut=null}Byt(){this.Yut.sort((t,e)=>t.oU()-e.oU());for(let t=0;t<this.Yut.length;t++){const e=this.Yut[t];e.jyt(this.Yut[t+1]),e.Fyt(this.Yut[t-1])}}fut(){return this.Gut}Uyt(){return this.Yut.length}Jut(){return this.Yut}rlt(){const t=new $S(null,this);return this.Yut.push(t),this.Byt(),t}hlt(t){for(const e of this.Yut){if(!t(e))continue;const i=this.Yut.indexOf(e);-1!==i&&(e.Ys(),this.Yut.splice(i,1))}this.Hyt(),this.Byt()}Hyt(){this.Yut.sort((t,e)=>t.oU()-e.oU())}vlt(t){return this.Yut.indexOf(t)}wlt(t){return this.Yut[t]}*Vyt(){for(const t of this.Yut)yield t}*Wyt(){for(let t=this.Yut.length-1;t>=0;t--)yield this.Yut[t]}_et(){return{keyframeDataItemsJson:this.Yut.map(t=>t._et())}}Eet(t){t&&(zS.ist.tyt(this.Yut,t.keyframeDataItemsJson,$S,this),this.Byt())}}}{const YS=self.Ee,JS=0,qS=0,QS=1,ZS=2,XS=1,KS=2,tb=3,eb=4,ib=5;class rb{constructor(t,e){this.Oyt=e,this.xpt=null,this.$yt=null,this.Yl="",this.iH=NaN,this.Ryt="noease",this.Lyt=!1,this.Yyt=null,this.Jyt=void 0,this.qyt="line",t&&(this.xpt=t[0][0],this.$yt=t[0][1],this.Yl=t[0][2],this.iH=t[1],this.Ryt=t[2],this.Lyt=!!t[3],this.qyt=t[5],this.Yyt=null,t[4]&&(this.Yyt=new YS.Qyt(t[4],this)),this.Gyt=null,this.Zyt=null)}Ys(){this.Oyt=null,this.Yyt&&(this.Yyt.Ys(),this.Yyt=null),this.Gyt=null,this.Zyt=null}Xyt(){return this.Yyt}jyt(t){this.Gyt=t}iot(){return this.Gyt}Kyt(t){this.Zyt=t}rot(){return this.Zyt}$lt(){return this.xpt}Oft(t){"color"===this.Yl&&YS.Qi(t)?(this.xpt[0]=YS.Dn(t),this.xpt[1]=YS.xn(t),this.xpt[2]=YS.Cn(t)):this.xpt=t}gdt(){return this.$yt}Pft(t){"color"===this.Yl&&YS.Qi(t)?(this.$yt[0]=YS.Dn(t),this.$yt[1]=YS.xn(t),this.$yt[2]=YS.Cn(t)):this.$yt=t}vot(){const t=this.Oyt.Rlt().cot();return"relative"===t?this.$lt():"absolute"===t?this.gdt():void 0}qA(){return this.Yl}Xlt(t){this.Yl=t}oU(){return this.iH}T1(t){this.iH=t,this.Oyt.tgt()}Ift(){return this.Ryt}Y1(t){this.Ryt=t}Act(){return this.Lyt}Mct(t){this.Lyt=!!t}sot(){return this.qyt}yot(t){if(!this.Yyt)return;if(this.Jyt||null===this.Jyt)return this.Jyt;const e=this.Yyt.egt();if(!e)return this.Jyt=null,this.Jyt;const i=e.length;for(let r=0;r<i;r++){const i=e[r];if(i.t2()===t)return this.Jyt=i,this.Jyt}return this.Jyt=null,this.Jyt}_et(){const t=this.Yyt;return{addonDataJson:t?t._et():t,value:this.xpt,aValue:this.$yt,type:this.Yl,time:this.iH,ease:this.Ryt,enable:this.Lyt}}Eet(t){t&&(t.addonDataJson&&this.Yyt.igt(t.addonDataJson),this.xpt=t.value,this.$yt=t.aValue,this.Yl=t.type,this.iH=t.time,this.Ryt=t.ease,this.Lyt=t.enable)}}YS.xyt=class{constructor(t,e){this.blt=e,this.Tlt=[],this.rgt=[],YS.ist.Zmt(this.Tlt,t,rb,this),YS.ist.Kmt(this.rgt,t,rb,this),this.tgt()}Ys(){this.blt=null;for(const t of this.Tlt)t.Ys();YS.So(this.Tlt),this.Tlt=null;for(const t of this.rgt)t.Ys();YS.So(this.rgt),this.rgt=null}tgt(){let t=this.Tlt;t.sort((t,e)=>t.oU()-e.oU());for(let e=0;e<t.length;e++){const i=t[e];e+1<t.length&&i.jyt(t[e+1]),e-1>=0&&i.Kyt(t[e-1])}t=this.rgt,t.sort((t,e)=>t.oU()-e.oU());for(let e=0;e<t.length;e++){const i=t[e];e+1<t.length&&i.jyt(t[e+1]),e-1>=0&&i.Kyt(t[e-1])}}Eft(){const t=new rb(null,this);return this.Tlt.push(t),this.tgt(),t}Tft(t){for(const e of this.Tlt){if(!t(e))continue;const i=this.Tlt.indexOf(e);-1!==i&&(e.Ys(),this.Tlt.splice(i,1))}this.sgt(),this.tgt()}sgt(){this.Tlt.sort((t,e)=>t.oU()-e.oU())}Rlt(){return this.blt}ngt(){return this.Tlt.length}Apt(){return this.Tlt[this.Tlt.length-1]}Plt(){return this.Tlt}eot(){return this.rgt}*ogt(){for(const t of this.Tlt)yield t}*agt(){for(let t=this.Tlt.length-1;t>=0;t--)yield this.Tlt[t]}_et(){const t=this.Tlt,e=this.rgt;return{propertyKeyframeDataItemsJson:t.map(t=>t._et()),propertyKeyframeDataItemsIncludingDisabledJson:e.map(t=>t._et())}}Eet(t){t&&(YS.ist.tyt(this.Tlt,t.propertyKeyframeDataItemsJson,rb,this),YS.ist.tyt(this.rgt,t.propertyKeyframeDataItemsIncludingDisabledJson,rb,this),this.tgt())}}}{const sb=self.Ee,nb=0,ob=1;class ab{constructor(t,e){this.Yyt=e,this.zl=t[0],this.hgt=t[1]}Ys(){this.Yyt=null,this.hgt=null}Xyt(){return this.Yyt}t2(){return this.zl}_et(){return{id:this.zl,data:this.hgt}}Eet(t){t&&(this.zl=t.id,this.hgt=t.data)}}const hb=0,ub=1,cb=2,lb=3;class fb extends ab{constructor(t,e){super(t,e),this.ugt=this.hgt[0],this.cgt=!!this.hgt[1],this.lgt=this.hgt[2],this.fgt=!!this.hgt[3]}Ys(){super.Ys()}bot(){return this.ugt}Wmt(){return this.cgt}Tot(){return this.lgt}$mt(){return this.fgt}_et(){return Object.assign(super._et(),{startAnchor:this.ugt,startEnable:!!this.cgt,endAnchor:this.lgt,endEnable:!!this.fgt})}Eet(t){t&&(super.Eet(t),this.ugt=t.startAnchor,this.cgt=!!t.startEnable,this.lgt=t.endAnchor,this.fgt=!!t.endEnable)}}const pb=0,db=1;class mb extends ab{constructor(t,e){super(t,e),this.pgt=this.hgt[0],this.dgt=this.hgt[1]}Ys(){super.Ys()}Jmt(){return this.pgt}Ymt(){return this.dgt}_et(){return Object.assign(super._et(),{direction:this.pgt,revolutions:this.dgt})}Eet(t){t&&(super.Eet(t),this.pgt=t.direction,this.dgt=t.revolutions)}}const yb=0;class gb extends ab{constructor(t,e){super(t,e),this.mgt=this.hgt[0]}Ys(){super.Ys()}fpt(){return this.mgt}_et(){return Object.assign(super._et(),{startFrom:this.mgt})}Eet(t){t&&(super.Eet(t),this.mgt=t.startFrom)}}sb.Qyt=class{constructor(t,e){this.ygt=e,this.ggt=[],sb.ist.Zmt(this.ggt,t,{eyt:0,map:new Map([["cubic-bezier",fb],["angle",mb],["initial-animation",gb]])},this)}Ys(){this.ygt=null;for(const t of this.ggt)t.Ys();sb.So(this.ggt),this.ggt=null}vgt(){return this.ygt}egt(){return this.ggt}*wgt(){for(const t of this.ggt)yield t}_et(){return{addonDataItemsJson:this.ggt.map(t=>t._et())}}Eet(t){t&&sb.ist.tyt(this.ggt,t.addonDataItemsJson,{eyt:"id",map:new Map([["cubic-bezier",fb],["angle",mb],["initial-animation",gb]])},this)}}}{const vb=self.Ee,wb="start-value",Sb="current-state",bb=0,_b=1;let Eb=0;vb.Pmt=class extends vb.kst{constructor(t,e){super("tween-"+Eb++,t,e),this.zl="",this.Sgt=!1,this.bgt="start-value",this.But=null,this._gt=null,this.Egt=null,this.Tgt=null,this.Pgt=null,this.Agt=null,this.Slt=null,this.Mgt=null}Ys(){this.w1()||(this.Igt(vb.xgt.Dgt.hY.Ogt),this.Igt(vb.xgt.Dgt.hY.Cgt),this.Rgt(),super.Ys(),this.But=null,this._gt=null,this.Egt=null,this.Agt=null,this.Slt=null,this.Tgt=null,this.Pgt=null)}qat(t){const e=vb.$s(vb.Event,"tweenstatereleased");e.Lgt=this,t.dispatchEvent(e)}qA(){return 1}Sat(){for(const t of this.mat.Xat().Zat())this.yat.push(vb.kgt.WP(this,t));this.Slt=this.yat[0]}wut(){const t=this.mat.Xat().Sut(),e=vb.kgt.WP(this,t);return this.yat.push(e),this.Ggt(),e}Ggt(){this.Slt=this.yat[0]}i2(t){return this.Slt.Iut()[0]}Zlt(t){this.Ngt=t}J1(){const t=this.Xnt();if(!t||!t.length)return;const e=t[0];if(this.Slt=e,!e)return;const i=e.J1();return e.nct()?i:void 0}jgt(t){this.Agt=t}K1(){return this.Tgt||(this.Tgt=new Promise(t=>{this.Pgt=t})),this.Tgt}Rgt(){this.Tgt&&(this.Pgt&&this.Pgt(),this.Tgt=null,this.Pgt=null)}Fgt(t){this.Egt||(this.Egt=[]),this.Egt.push(t)}Bgt(t){this._gt||(this._gt=[]),this._gt.push(t)}zgt(t){if(!this.Egt)return;const e=this.Egt.indexOf(t);-1!==e&&this.Egt.splice(e,1)}Ugt(t){if(!this._gt)return;const e=this._gt.indexOf(t);-1!==e&&this._gt.splice(e,1)}Hgt(t,e){for(const i of this.yat)for(const r of i.qut){if(r.Out()!==e)continue;const i=r.ect(),s=r.Rlt(),n=i.tft(s);n.Oft(t),n.Pft(t)}}Vgt(t){for(const e of this.yat)for(const i of e.qut)if(i.Out()===t)return i}Wgt(t){let e=!1;for(const i of t){const t=this.Vgt(i);t&&(this.Hgt(t.dft(),i),e=!0)}if(e){if(this.yht()){const t=this.A1()-this.oU();this.P1(t);for(const e of this.yat)e.Pct(t);this.Uht(0)}else{const t=this.oU();this.P1(t);for(const e of this.yat)e.Pct(t);this.Uht(t)}this.Hht()}}$gt(t,e){const i=this.Vgt(e);if(!i)return;const r=i.ect(),s=i.Rlt(),n=r.Apt(s);n.T1(this.A1()),n.Oft(t),n.Pft(t)}Ygt(t){this.zl=t}t2(){return this.zl}Jgt(t){this.bgt=t}qgt(){return this.bgt}Z1(t){this.Sgt=t}Q1(){return this.Sgt}_ht(){if(this.Egt)for(const t of this.Egt)t(this);if(!this.X1())for(const t of this.yat)t.flt()}Dht(){this.kat=this.Fl.GW()}xnt(){if(!this.jat&&(this.jat=!0,this._gt))for(const t of this._gt)t(this)}T1(t){this.Qgt(),super.T1(t)}Jht(t){vb.Qi(t)||(t=this.A1()),t<0?this.Eat=0:t>=this.A1()?this.Eat=this.A1():this.Eat=t,this.Slt.qht()}_nt(t){if(!this.Dnt()&&"current-state"===this.qgt())for(const t of this.yat)t.llt();super._nt(t)}b1(t=!1){if(super.b1(t),!this.X1())for(const t of this.yat)t.clt()}Bf(t=!0,e=!1){this.Qgt(),super.Bf(t,e)}Qgt(){for(const t of this.yat){const e=t=>{const e=t.oU(),i=this.A1();return 0!==e&&e!==i};t.olt(e),t.ult(e)}}wst(){if(this.w1())return!0;const t=this.J1();return!(t&&t.gq().g6()||(this.dat.vnt(this),this.rut(),0))}Ant(t,e,i){if(this.But||(this.But=this.J1()),!this.But||this.But.j$())return this.b1(!0),void this.Dht();const r=this.But.BW();if(-1!==r&&(t=i*r),0===t&&0===this.Bat)return;this.Bat=t;const s=this.Eat+this.Tat+t*this.Pat,n=this.mat.hut;s<0?(this.Eat=0,this.Tat=-s):s>=n?(this.Eat=n,this.Tat=this.Eat-s):(this.Eat=s,this.Tat=0);let o=!1,a=!1;const h=this.I1(),u=this.D1();if(h||u?h&&!u?this.Pat>0?this.Eat>=n&&(this.Jht(0),this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),a=!0):this.Eat<=0&&(this.Jht(n),this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),a=!0):!h&&u?this.Pat>0?this.Eat>=n&&(this.Uht(n),this.C1(-1*this.R1()),a=!0,1===this.Aat?this.Iat<this.U0()?(this.Iat++,this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt),this.IsPlaying()?this.Aat=0:this.Mat=0):(this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt),o=!0):0===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt),this.IsPlaying()?this.Aat=1:this.Mat=1)):this.Eat<=0&&(this.Uht(0),this.C1(-1*this.R1()),a=!0,1===this.Aat?this.Iat<this.U0()?(this.Iat++,this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt),this.IsPlaying()?this.Aat=0:this.Mat=0):(o=!0,this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt)):0===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt),this.IsPlaying()?this.Aat=1:this.Mat=1)):h&&u&&(this.Pat>0?this.Eat>=n&&(this.Uht(n),this.C1(-1*this.R1()),a=!0,0===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt)),1===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt)),this.IsPlaying()?(this.Aat++,this.Aat=vb.wrap(this.Aat,0,2)):(this.Mat=this.Aat+1,this.Mat=vb.wrap(this.Mat,0,2))):this.Eat<=0&&(this.Uht(0),this.C1(-1*this.R1()),a=!0,0===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt)),1===this.Aat&&(this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),this.Igt(vb.xgt.Dgt.hY.Kgt),this.Igt(vb.xgt.Dgt.hY.tvt)),this.IsPlaying()?(this.Aat++,this.Aat=vb.wrap(this.Aat,0,2)):(this.Mat=this.Aat+1,this.Mat=vb.wrap(this.Mat,0,2)))):this.Pat>0?this.Eat>=n&&(this.Iat<this.U0()?(this.Iat++,this.Jht(0),this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),a=!0):(this.Uht(n),o=!0)):this.Eat<=0&&(this.Iat<this.U0()?(this.Iat++,this.Jht(n),this.Igt(vb.xgt.Dgt.hY.Zgt),this.Igt(vb.xgt.Dgt.hY.Xgt),a=!0):(this.Uht(0),o=!0)),!this.w1()&&this.IsPlaying()){if(o)return this.Slt.uut(),this.b1(!0),void this.Dht();this.Slt.Sl(this.Eat,!0,!1,a,this.Fat,!1),this.Fat&&(this.Fat=!1)}}Igt(t){const e=this.J1();this.Agt.evt(this),this.Fl.hX(t,e,this.Agt.A0()),this.Agt.ivt()}_et(){const t=super._et(),e=this.nht();return Object.assign(t,{tweenDataItemJson:e._et(),id:this.zl,destroyInstanceOnComplete:this.Sgt,initialValueMode:this.bgt})}Eet(t){t&&(this.nht().Eet(t.tweenDataItemJson),super.Eet(t),this.zl=t.id,this.Sgt=t.destroyInstanceOnComplete,this.bgt=t.initialValueMode,this.Ggt())}static IsPlaying(t){return t.IsPlaying()}static F1(t){return t.F1()}static rvt(t){return!!t.D1()&&0===t.mht()}static svt(t){return!!t.D1()&&1===t.mht()}static nvt(t){const e=t.runtime.tht(),i=new vb.Qmt;if(t.json){i.Eet(t.json.tweenDataItemJson);const r=new vb.Pmt(i,e);return r.Eet(t.json),r}{const r=new vb.Pmt(i,e);vb._r(t.ovt)||(t.ovt=[t.ovt]),r.Ygt(t.id),r.vht(t.tags),r.Jgt(t.avt),r.Z1(t.hvt),r.M1(t.loop),r.O1(t.uvt),r.P1(t.time),r.aht(0),r.uht("default"),r.cht(t.ovt[0].cvt),r.fht(t.z0);const s=r.wut();s.Ect(t.M0.GZ()),s.uht("default"),s.cht(t.ovt[0].cvt),s.Mct(!0),s.Ict(t.M0.gq().PV());const n=t.M0.y0(),o=n.xct()?n.Dct():t.M0.N$().Eg(),a=n.xct()?n.Rct():t.M0.N$().Pg();s.Oct(o),s.Cct(a);const h=s.ilt();h.T1(0),h.Y1("noease"),h.Mct(!0),h.vht("");const u=s.ilt();u.T1(t.time),u.Y1("noease"),u.Mct(!0),u.vht("");for(const e of t.ovt){const i=s.slt();i.zlt(e.lvt),i.Vlt(e.fvt),i.Jlt(e.Sct),i.Zlt(e.type),i.ift(NaN),i.sft(NaN),i.uht("default"),i.cht(e.cvt),i.Mct(!0);const r=i._ft();r.Xlt(e.valueType),r.T1(0),r.Y1(e.pvt),r.Mct(!0),r.Oft(e.dvt),r.Pft(e.dvt);const n=i._ft();n.Xlt(e.valueType),n.T1(t.time),n.Y1(e.pvt),n.Mct(!0),n.Oft(e.mvt),n.Pft(e.mvt),i.iht()}return r}}static Ect(t,e){if(!isNaN(e))for(const i of t.Xnt())i.Ect(e)}static jgt(t,e){t.jgt(e)}yvt(t,e){return this.Mgt||(this.Mgt=vb.$s(self.U1,this,t,e)),this.Mgt}}}{const Tb=self.Ee;Tb.kgt=class extends Tb.Kat{constructor(t,e){super(t,e),this.gvt=null,this.vvt=null}static WP(t,e){return Tb.$s(Tb.kgt,t,e)}wvt(){1===this.qut.length?this.gvt=this.qut[0]:(this.gvt=this.qut[0],this.vvt=this.qut[1])}Qut(){for(const t of this.Gut.ect().tct())this.qut.push(Tb.Svt.WP(this,t));this.wvt()}slt(){const t=this.Gut.ect().nlt(),e=Tb.Svt.WP(this,t);return this.qut.push(e),this.wvt(),e}_nt(){if(this.sct(),!this.nct()&&this.sht())return;const t=this.rct().yht()?0:this.Tct();for(const e of this.qut)e._nt(t),0===this.Zut&&1===e.Gct()&&(this.Zut=1),0===this.xst&&1===e.Ent()&&(this.xst=1);this.Xut=0,this.qut.some(t=>t.aut())&&(this.Xut=1),this.$ut=this.Nct(t),this.Hut=!1,this.Vut=!1,this.Sl(t)}lut(){}Sl(t,e=!1,i=!1,r=!1,s=!1,n=!1,o=!1){if(this.But||this.J1(),this.But)return!this.But.j$()&&(!n||!this.gq().g6())&&(this.vvt?(this.gvt.Sl(t,i,r,o),this.vvt.Sl(t,i,r,o)):this.gvt.Sl(t,i,r,o),void(0!==this.gvt.Gct()&&(this.zut||(this.zut=this.But.N$()),this.zut&&this.zut.NX())))}mut(){}Eet(t){super.Eet(t),this.wvt()}}}{const Pb=self.Ee;Pb.Svt=class extends Pb.ict{constructor(t,e){super(t,e),this.bvt=!1}static WP(t,e){return Pb.$s(Pb.Svt,t,e)}Sl(t,e=!1,i=!1,r=!1){let s,n;if(this.bvt)s=this.Tlt[0],n=this.Tlt[1];else if(e)s=this._lt.hft(t,this.blt),n=s.iot();else{if(this.Mlt){const e=this.rct(),i=this.Mlt.iot(),r=this.Mlt.oU(),s=i?i.oU():e.A1();(t<=r||t>=s)&&(this.Mlt=this._lt.hft(t,this.blt))}else this.Mlt=this._lt.hft(t,this.blt);s=this.Mlt,n=s.iot()}this.Elt.Sl(t,s,n,e,i,r)}_ft(){const t=this.blt.Alt().Eft();return this.Mlt=null,this.bvt=this.nft().length<=2,t}ult(t){this.Mlt=null,this.blt.Alt().Tft(t),this.bvt=this.nft().length<=2}_et(){return{sourceAdapterJson:this.iht()._et(),basic:this.bvt}}Eet(t){t&&(this.iht().Eet(t.sourceAdapterJson),this.bvt=t.basic)}}}{const Ab=self.Ee,Mb=self.$c,Ib=0,Ob=1,Db=2;Ab.bl=class extends Ab.Vs{constructor(t,e=!0){super(),this.Qs=t[0],this._vt=t[2],this.Evt=[];for(const e of t[1]){const t=Ab.Tvt.WP(this,e);this.Evt.push(t)}for(let t=0;t<this.Evt.length;t++){const e=this.Evt[t],i=this.Evt[t+1],r=this.Evt[t-1];e.jyt(i),e.Kyt(r)}this.Pvt=new Map,this.Avt=new Map,this.Mvt(),e&&Mb.El(this.Qs,(t,e,i,r)=>this.Sl(t,e,i,r),null,{transition:this})}static WP(t){return Ab.$s(Ab.bl,t)}Ys(){for(const t of this.Evt)t.Ys();Ab.So(this.Evt),this.Evt=null,this.Pvt.clear(),this.Pvt=null,this.Avt.clear(),this.Avt=null}_l(t){this._vt=!!t}Ivt(t){const e=this.Avt.get(t);if(e)return e;for(const e of this.Evt)if(e.Ovt()===t)return this.Avt.set(t,e),e}Dvt(t){for(let e=this.Evt.length-1;e>=0;e--){const i=this.Evt[e],r=i.Ovt();if(r<=t){let e=i;if(r<t)return e;if(r===t){for(;e;){const t=e.rot();if(!t)break;if(t.Ovt()!==e.Ovt())break;e=t}return e}}}}Sl(t,e,i,r){let s=t/r;if(this._vt){const s=this.Ivt(0),n=this.Ivt(1),o=e+(e+i)*s.xvt(),a=(e+i)*n.xvt()-o;return 0===r?o+a:Mb.Pl(t,o,a,r)}0===r&&(s=1);let n=this.Dvt(s),o=n.iot();if(!o){const t=n.rot(),e=n;n=t,o=e}const a=o.Ovt()-n.Ovt(),h=Ab.Zs(s,n.Ovt(),o.Ovt(),0,a);if(n.Cvt()||0===a){const t=e+(e+i)*n.xvt(),r=(e+i)*o.xvt()-t;return 0===a?1===h?t+r:t:Mb.Pl(h,t,r,a)}const u=n.Ovt(),c=n.xvt(),l=n.Ovt()+n.Rvt(),f=n.xvt()+n.Lvt(),p=o.Ovt()+o.kvt(),d=o.xvt()+o.Gvt(),m=o.Ovt(),y=o.xvt();let g=Mb.hl("spline")(h,u,c,l,f,p,d,m,y,this.Pvt.get(n));return g+=n.xvt(),(1-g)*e+g*(e+i)}Mvt(){this.Pvt.clear();for(let t=0;t<this.Evt.length-1;t++){const e=this.Evt[t];if(!e.Wmt())continue;const i=e,r=this.Evt[t+1];if(!r.$mt())continue;const s=i.Ovt(),n=i.Ovt()+i.Rvt(),o=r.Ovt()+r.kvt(),a=r.Ovt();this.Pvt.set(i,Mb.Al(s,n,o,a))}}}}{const xb=self.Ee,Cb=0,Rb=1,Lb=2,kb=3,Gb=4,Nb=5,jb=6,Fb=7,Bb=8;xb.Tvt=class extends xb.Vs{constructor(t,e){super(),this.Nvt=t,this.jvt=e[0],this.Fvt=e[1],this.Bvt=e[2],this.zvt=e[3],this.Uvt=e[4],this.Hvt=e[5],this.cgt=e[6],this.fgt=e[7],this.Vvt=e[8],this.Gyt=null,this.Zyt=null}Ys(){this.Nvt=null}static WP(t,e){return xb.$s(xb.Tvt,t,e)}jyt(t){this.Gyt=t}iot(){return this.Gyt}Kyt(t){this.Zyt=t}rot(){return this.Zyt}Ovt(){return this.jvt}xvt(){return this.Fvt}Rvt(){return this.Bvt}Lvt(){return this.zvt}kvt(){return this.Uvt}Gvt(){return this.Hvt}Wmt(){return this.cgt}$mt(){return this.fgt}Cvt(){return"linear"===this.Vvt}Wvt(){return"cubic"===this.Vvt}}}{const zb=self.Ee;zb.$vt=class extends zb.Vs{constructor(t){super(),this.Fl=t,this.Yvt=[]}Ys(){for(const t of this.Yvt)t.Ys();zb.So(this.Yvt),this.Yvt=null}WP(t){this.Yvt.push(zb.bl.WP(t))}}}{const Ub=self.Ee;Ub.Jvt=class extends Ub.Vs{constructor(t){super(),this.Fl=t,this.qvt=null,this.Qvt=null,this._st=t=>this.Est(t.M0)}Ys(){if(this.Cst(),this.qvt){for(const t of this.qvt.values())t.clear();this.qvt.clear()}this.qvt=null,this.Fl=null}WP(t){if(this.qvt||(this.qvt=new Map),!t)return;const e=t[0][16][0],i=t[1];this.qvt.has(i)||this.qvt.set(i,new Map),this.qvt.get(i).set(e,t)}Rst(){const t=this.Fl.wf();t&&t.addEventListener("instancedestroy",this._st)}Cst(){const t=this.Fl.wf();t&&t.removeEventListener("instancedestroy",this._st)}Zvt(){return!!this.qvt&&0!==this.qvt.size}Xvt(t,e){let i=0;if(i=t instanceof Ub.Kvt?t.PV():t,!this.qvt.has(i))return;const r=this.qvt.get(i).get(e);return r?JSON.parse(JSON.stringify(r)):void 0}twt(t,e){this.Qvt||(this.Qvt=new WeakMap),this.Qvt.has(t)||this.Qvt.set(t,e)}ewt(t){if(!this.Qvt)return"";return this.Qvt.get(t)||""}Est(t){this.Qvt&&this.Qvt.has(t)&&this.Qvt.delete(t)}}}{const Hb=self.Ee;Hb.iwt=class{constructor(t){this.Fl=t,this.rwt=new Hb.swt}Ys(){this.rwt.Ys(),this.rwt=null,this.Fl=null}gY(){return this.Fl}WP(t){this.rwt.Hc(t)}nwt(t){return this.rwt.Ue(t)}owt(){return this.rwt.owt()}}}{const Vb=self.Ee;Vb.awt=class{constructor(t,e,i,r,s,n,o){this.Fl=s.gY(),this.hwt=s,this.uwt=t,this.cwt=i,this.lwt=r,this.Hv=e,this.rst=n,this.fwt=o??n.J1().GZ(),this.pwt(),this.dwt=this.ywt?.mwt()??-1,this.gwt=[],this.vwt=null,this.wwt=NaN,this.Swt=null,this.bwt=null,this._wt=null,this.Ewt="",this.Twt=null,this.Pwt="",this.Awt="",this.Mwt=0,this.Iwt=!1,this.Rat=!1}Ys(){this.Rat||(Vb.So(this.gwt),this.gwt=null,this.Fl=null,this.hwt=null,this.lwt=null,this.rst=null,this.vwt=null,this.wwt=NaN,this.Swt&&this.Swt.clear(),this.Swt=null,this.bwt=null,this._wt=null,this.Ewt="",this.Twt=null,this.Pwt="",this.Awt="",this.Rat=!0)}Js(){return this.Rat}Owt(){return this.hwt}gY(){return this.Fl}Dl(){return this.uwt}Dwt(){return this.lwt}v1(){return this.Hv}qst(){return this.rst||(this.rst=this.Fl.C$(this.fwt).y0()),this.rst}xwt(){return this.Cwt(this.dwt)}Rwt(){const t=this.xwt();return t?t.v1():""}Lwt(){const t=this.xwt();return t?t.L1():[]}kwt(t){const e=this.Lwt();if(!e)return!1;if(!e.length)return!1;const i=Vb.awt.wht(t);return!(!i||!i.length)&&i.every(Vb.awt.bht,e)}Gwt(t,e){const i=this.Lwt();if(!i)return!1;if(!i.length)return!1;const r=Vb.awt.wht(t);return!(!r||!r.length)&&r.every(t=>Vb.awt.Nwt.call(i,t,e))}static bht(t){const e=this;return""===t?1===e.length&&""===e[0]:e.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static wht(t){return t.trim().split(" ")}static Nwt(t,e){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Vb.compare(i.trim(),e,t.trim()))}jwt(t){const e=this.xwt();if(e){if(Vb.Qi(t)){const i=e.Fwt(),r=i?i[t]:void 0;if(Vb.Qi(r))return this.Cwt(r)}if("string"==typeof t)for(const i of e.Fwt()){const e=this.Cwt(i);if(e.E1(t))return this.Cwt(e.mwt())}}}Bwt(t){const e=this.jwt(t);return e?e.v1():""}zwt(t){const e=this.jwt(t);return e?e.L1():""}Uwt(t){const e=this.xwt();if(!e)return-1;const i=e.Fwt();if(!i)return-1;const r=this.jwt(t);return r?i.indexOf(r.mwt()):-1}Hwt(){const t=this.xwt();if(!t)return 0;const e=t.Fwt();return e?e.length:0}Cwt(t){return this.lwt.Cwt(t)}Bf(){this.Wwt().Vwt(!0)}Vwt(t){if(this.$wt()){for(const[t,e]of this.$wt().entries())e.Vwt(!1);this.$wt().clear()}if(this.Swt=null,this.vwt=null,this.Ywt=null,this.bwt=null,this.Ewt="",this.Twt=null,this.Pwt="",this.Awt="",this.gwt=[],t){this.hwt.Jwt(this);const t=this.ywt.mwt();t!==this.dwt&&this.qwt(t)}else this.dwt=this.ywt.mwt()}Qwt(){const t=this.lwt.Cwt(this.dwt);return t?t.Xwt().Zwt():0}Kwt(t){return!(t<0)&&t===this.tSt()}tSt(){const t=this.lwt.Cwt(this.dwt);if(!t)return-1;let e=t.Xwt().eSt();return e?t.Xwt().iSt().indexOf(e):-1}rSt(t){const e=this.sSt(t);return e?e.Dl():""}nSt(t){let e;return Vb.Qi(t)&&(e=this.sSt(t)),"string"==typeof t&&(e=this.oSt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),e?e.$lt():""}aSt(t,e){if(t.Act())return t.mwt();{const i=t.Xwt().eSt();if(!i)return e.mwt();const r=i.hSt();if(!Vb.Qi(r))return e.mwt();const s=this.Cwt(r);return s?this.aSt(s,e):e.mwt()}}uSt(t,e){if(t.Act()){if("reference"===t.qA()){const e=t.cSt(),i=t.lSt(),r=this.hwt.nwt(e);if(!r)return[-1,null];const s=r.fSt(i);return s?this.uSt(s,r):this.uSt(r.pSt(),r)}return[t.mwt(),e]}{const i=t.Xwt().eSt();if(!i)return[-1,null];const r=i.hSt();if(!Vb.Qi(r))return[-1,null];const s=e.Cwt(r);return s?this.uSt(s,e):[-1,null]}}dSt(t,e){let i=this.Cwt(t);if(i){if(!i.Act()){const e=this.Cwt(this.dwt);t=this.aSt(i,e)}if(Vb.Qi(t)&&t!==this.dwt)if(i=this.Cwt(t),"reference"===i.qA()){const r=i.cSt(),s=i.lSt(),n=this.hwt.nwt(r);let o=n.fSt(s);if(o){const i=this.uSt(o,n);if(-1===i[0])return;e(this.dwt,t,i[1],i[0])}else e(this.dwt,t)}else e(this.dwt,t)}}mSt(t){let e;if(Vb.Qi(t)&&(e=this.sSt(t)),"string"==typeof t&&(e=this.oSt(t)),!e)return;let i=e.hSt();Vb.Qi(i)&&this.dSt(i,(t,e,i,r)=>{this.gwt.push(t),this.qwt(e,i,r)})}ySt(){const t=this.gSt();if(!t)return;const e=t.hSt();Vb.Qi(e)&&this.dSt(e,(t,e,i,r)=>{this.gwt.push(t),this.qwt(e,i,r)})}vSt(t){const e=this.lwt.fSt(t);if(!e)return;const i=e.mwt();Vb.Qi(i)&&this.dSt(i,(t,e,i,r)=>{this.gwt.push(t),this.qwt(e,i,r)})}wSt(){const t=this.gwt.pop();Vb.Qi(t)?this.qwt(t):this.SSt()&&(this.hwt.Jwt(this.SSt(),!0,!1,!1),this.SSt().qwt(this.bSt()),this.Wwt()._St(this.SSt()))}ESt(t){if(!this.xwt())return;const e=this.jwt(t);if(e){if(!e.Act())return;const t=e.mwt();if(!Vb.Qi(t))return;this.gwt.push(this.dwt),this.qwt(e.mwt())}}TSt(t){if(Vb.Qi(t))return!!this.lwt.Cwt(this.dwt).Xwt().iSt()[t];if("string"==typeof t){const e=this.lwt.Cwt(this.dwt).Xwt().iSt();for(let i=0;i<e.length;i++)if(e[i].Dl()===t)return!0;return!1}return!1}PSt(){this.Iwt=!0}ASt(){return this.Mwt>0}MSt(){this.Mwt++}ISt(){this.Mwt--,0===this.Mwt&&this.Iwt&&this.hwt.OSt(this)}qwt(t,e,i){const r=this.dwt,s=this.qst().J1();this.MSt(),this.hwt.DSt(this),this.Fl.hX(Vb.cY.CSt.hY.xSt,s),this.Fl.hX(Vb.cY.CSt.hY.RSt,s),this.Fl.hX(Vb.cY.CSt.hY.LSt,s),this.Fl.hX(Vb.cY.CSt.hY.kSt,s),this.dwt=t;let n=this.Cwt(this.dwt);if("dictionary"===n.qA()&&(this.Fl.hX(Vb.cY.CSt.hY.GSt,s),this.Fl.hX(Vb.cY.CSt.hY.NSt,s),this.Fl.hX(Vb.cY.CSt.hY.jSt,s),this.Fl.hX(Vb.cY.CSt.hY.FSt,s)),this.hwt.BSt(),this.ISt(),!this.Js()&&(n=this.Cwt(this.dwt),"reference"===n.qA())){const t=e?e.Dl():n.cSt();if(this.zSt(n)){this.gwt.pop();const t=this.USt(n);this.hwt.Jwt(t,!0,!0,!1),t.HSt(this,r),this.Wwt()._St(t)}else{const e="number"==typeof i?i:n.lSt();if(t){this.gwt.pop();let i=n.VSt();if(i){let t=this.hwt.WSt(i);for(;t;)i=Vb.Mm(i),t=this.hwt.WSt(i)}else{i=`${t}-ref`;let e=this.hwt.WSt(i);for(;e;)i=Vb.Mm(i),e=this.hwt.WSt(i)}const s=this.hwt.$St(t,e,i,this.rst,!0);s.HSt(this,r),this.YSt(n,s);const o=this.Wwt();s.JSt(o),o._St(s)}}}}gSt(){const t=this.lwt.Cwt(this.dwt);return t?t.Xwt().eSt():null}sSt(t){const e=this.lwt.Cwt(this.dwt);if(!e)return null;const i=e.Xwt().iSt();if(!i)return null;return i[t]||null}oSt(t){const e=this.lwt.Cwt(this.dwt);if(!e)return null;return e.Xwt().qSt(t)||null}pwt(t){if("number"==typeof t){let e=this.Cwt(t);e||(e=this.lwt.pSt()),this.ywt=e}else if("number"==typeof this.cwt){let t=this.Cwt(this.cwt);t||(t=this.lwt.pSt()),this.ywt=t}else{let t=this.lwt.fSt(this.cwt);t||(t=this.lwt.pSt()),this.ywt=t}}_et(){return this.Iwt?null:{flowchartName:this.uwt,flowchartTag:this.Hv,startNodeTag:this.cwt,currentNodeId:this.dwt,previousNodeIds:this.gwt,pluginUID:this.rst.J1().GZ(),reference:{previousFlowchartTag:this.SSt()?this.SSt().v1():"",previousStartNodeId:Vb.Qi(this.bSt())?this.bSt():NaN,referencesJson:this.QSt(),currentReferenceFlowchartTag:this.ZSt()?this.ZSt().v1():"",rootFlowchartTag:this.Wwt()?this.Wwt().v1():""}}}QSt(){if(!this.XSt())return null;const t=[];for(const[e,i]of this.$wt().entries())t.push({flowchartElementId:e.mwt(),flowchartStateTag:i.v1()});return t.length?t:null}Eet(t){if(t){if(this.uwt=t.flowchartName,this.Hv=t.flowchartTag,this.cwt=t.startNodeTag,this.dwt=t.currentNodeId,this.gwt=t.previousNodeIds,this.fwt=t.pluginUID,t.hasOwnProperty("reference")){const e=t.reference;this.Ewt=e.previousFlowchartTag,this.wwt=e.previousStartNodeId,this.Twt=e.referencesJson,this.Pwt=e.currentReferenceFlowchartTag,this.Awt=e.rootFlowchartTag}this.pwt()}}SSt(){return"string"==typeof this.Ewt&&this.Ewt&&(this.vwt=this.hwt.WSt(this.Ewt),this.Ewt=""),this.vwt}bSt(){return this.wwt}HSt(t,e){this.vwt=t,this.wwt=e}ZSt(){return"string"==typeof this.Pwt&&this.Pwt&&(this.bwt=this.hwt.WSt(this.Pwt),this.Pwt=""),this.bwt}_St(t){this.bwt=t,this.bwt===this&&(this.bwt=null)}Wwt(){return"string"==typeof this.Awt&&this.Awt&&(this._wt=this.hwt.WSt(this.Awt),this.Awt=""),this._wt?this._wt:this}JSt(t){this._wt=t}XSt(){return this.KSt(),!!this.Swt}zSt(t){return this.KSt(),this.Swt&&this.Swt.has(t)}KSt(){if(this.Twt){this.Swt&&this.Swt.clear(),this.Swt||(this.Swt=new Map);for(const t of this.Twt){const e=this.hwt.WSt(t.flowchartStateTag),i=e.Cwt(t.flowchartElementId);this.Swt.set(i,e)}this.Twt=null}}$wt(){return this.KSt(),this.Swt}USt(t){return this.KSt(),this.Swt.get(t)}YSt(t,e){this.Swt||(this.Swt=new Map),this.Swt.set(t,e)}}}{const Wb=self.Ee;Wb.tbt=class{constructor(t){this.Fl=t,this.ebt=new Map,this.ibt=null,this.rbt=[],this.sbt=()=>this.Mst(),this.nbt=null}Ys(){Wb.So(this.rbt),this.rbt=null,this.ebt.clear(),this.ebt=null,this.ibt=null,this.Fl=null,this.nbt=null}gY(){return this.Fl}nwt(t){return this.Fl.Owt().nwt(t)}$St(t,e,i,r,s,n){const o=this.Fl.Owt().nwt(t);if(!o)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.ebt.has(i)){const t=this.ebt.get(i);t&&this.OSt(t)}const a=new Wb.awt(t,i,e,o,this,r,n);return this.ebt.set(i,a),s&&this.Jwt(a,!0),a}OSt(t){if(t.PSt(),t.ASt())return;const e=t.v1();this.ebt.delete(e),t.Ys(),this.ibt===t&&(this.ibt=null)}obt(t){t.Bf()}WSt(t){return this.ebt.get(t)}DSt(t){this.rbt.push(t)}BSt(){this.rbt.pop()}Jwt(t,e=!1,i=!1,r=!0){if(r){const e=t.ZSt();t=e||t}t!==this.ibt&&(this.abt(),this.hbt(t,e,i))}ubt(t){return"string"==typeof t?this.WSt(t):this.rbt.length?this.rbt[this.rbt.length-1]:this.ibt}abt(){if(!this.ibt)return;if(this.ibt.Js())return;const t=this.ibt.qst().J1();this.ibt.MSt(),this.DSt(this.ibt),this.Fl.hX(Wb.cY.CSt.hY.cbt,t),this.BSt(),this.ibt.ISt()}hbt(t,e=!1,i=!1){if(this.ibt=t,!this.ibt)return;if(this.ibt.Js())return;const r=this.ibt.qst().J1();this.ibt.MSt(),this.DSt(this.ibt),this.Fl.hX(Wb.cY.CSt.hY.lbt,r),!0!==i&&"number"!=typeof i||this.ibt.pwt(i),e&&(this.Fl.hX(Wb.cY.CSt.hY.GSt,r),this.Fl.hX(Wb.cY.CSt.hY.NSt,r),this.Fl.hX(Wb.cY.CSt.hY.jSt,r),this.Fl.hX(Wb.cY.CSt.hY.FSt,r)),this.BSt(),this.ibt.ISt()}_et(){return{flowchartJsonObjects:[...this.ebt.values()].map(t=>t._et()),currentFlowchartTag:this.ibt?this.ibt.v1():null}}Eet(t){if(!t)return;this.nbt=t;const e=new Map;for(const t of this.nbt.flowchartJsonObjects){const i=t.flowchartTag;if(this.ebt.has(i)){const r=this.ebt.get(i);r.Eet(t),e.set(i,r)}else{const i=this.$St(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.Eet(t),e.set(t.flowchartTag,i)}}for(const[t,i]of this.ebt.entries())e.has(t)||i.Ys();this.ebt.clear(),this.ebt=e,this.Fl.trt()?this.Fl.wf().addEventListener("afterload",this.sbt):this.Mst()}Mst(){this.Fl.wf().removeEventListener("afterload",this.sbt);const t=this.ebt.get(this.nbt.currentFlowchartTag);t&&this.Jwt(t,!0),this.nbt=null}}}{const $b=self.Ee;$b.swt=class{constructor(){this.fbt=new Map}Ys(){for(const t of this.fbt.values())t.Ys();this.fbt.clear(),this.fbt=null}Hc(t){const e=new $b.pbt(t),i=e.Dl();this.fbt.set(i,e)}Ue(t){return this.fbt.get(t)}owt(){return!!this.fbt.size}static dbt(t,e,i,r){if(e)for(const s of e){const e=new i(s,r);t.push(e)}}}}{const Yb=self.Ee,Jb=0,qb=1;Yb.pbt=class{constructor(t){this.Qs=t[0],this.mbt=new Yb.ybt(t[1],this)}Ys(){this.mbt.Ys(),this.mbt=null}gbt(){return this.mbt}Cwt(t){return this.mbt.Cwt(t)}fSt(t){return this.mbt.fSt(t)}pSt(){return this.mbt.pSt()}Dl(){return this.Qs}}}{const Qb=self.Ee,Zb=0,Xb=1,Kb=2,t_=3,e_=4,i_=5,r_=6,s_=7,n_=8,o_=8,a_=9,h_=10,u_=11;class c_{constructor(t,e){this.mbt=e,this.Yl=t[7],this.vbt=t[0],this.Hv=t[1],this.Hv?this.zat=this.Hv.trim().split(" ").map(t=>t.trim()):this.zat=[],this.wbt=t[2],this.Sbt=null,this.bbt=null,this.Lyt=!1,"dictionary"===this.Yl&&(this.Sbt=t[3],this.bbt=t[4],this.Lyt=t[8]),this._bt=t[6],this.Ebt=null,this.Tbt=null,this.Pbt=null,"reference"===this.Yl&&(this.Ebt=t[8],this.Tbt=t[9],this.Pbt=t[10],this.Lyt=t[11]),this.Abt=new Qb.Mbt(t[5],this)}Ys(){this.mbt=null}gbt(){return this.mbt}Xwt(){return this.Abt}mwt(){return this.vbt}v1(){return this.Hv}L1(){return this.zat}E1(t){if(!this.zat)return!1;if(!this.zat.length)return!1;const e=Qb.awt.wht(t);return!(!e||!e.length)&&e.every(Qb.awt.bht,this.zat)}Ibt(){return this._bt}Obt(t){this._bt=!!t}Dbt(){if("dictionary"===this.Yl)return!0;if("reference"===this.Yl)return!1;throw new Error(`unexpected flowchart node type: ${this.Yl}`)}Fwt(){return this.wbt}xbt(){return this.Sbt}Cbt(){return this.bbt}qA(){return this.Yl}Act(){return this.Lyt}cSt(){return this.Ebt}lSt(){return this.Tbt}VSt(){return this.Pbt}}Qb.ybt=class{constructor(t,e){this.lwt=e,this.Rbt=[],this.Lbt=new Map,this.kbt=new Map,this.Gbt=null,Qb.swt.dbt(this.Rbt,t,c_,this);for(const t of this.Rbt){const e=t.mwt(),i=t.v1(),r=t.L1(),s=t.Ibt();if(this.Lbt.set(e,t),i)for(const e of r)this.kbt.has(e)||this.kbt.set(e,new Set),this.kbt.get(e).add(t);s&&(this.Gbt=t);const n=t.Xwt();for(const t of n.Nbt()){const e=t.mwt();this.Lbt.set(e,t)}}this.Gbt||this.jbt()}Ys(){this.lwt=null;for(const t of this.Rbt)t.Ys();Qb.So(this.Rbt),this.Rbt=null}Dwt(){return this.lwt}Cwt(t){return this.Lbt.get(t)}fSt(t){if(!t||!t.length)return null;const e=[];for(const i of t.trim().split(" ")){let t=this.kbt.get(i.trim())??new Set;if(0===t.size)return null;e.push(t)}return[...e.reduce((t,e)=>e.size<t.size?e:t)].filter(t=>e.every(e=>e.has(t)))[0]}pSt(){return this.Gbt}*Fbt(){for(const t of this.Rbt)yield t}jbt(){let t=0;for(const e of this.Fbt())e.Ibt()&&t++;if(0===t){for(const t of this.Fbt())if(t.Dbt()&&!t.Ibt())return void t.Obt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const e of this.Fbt())e.Dbt()&&(e.Ibt()&&t?t=!1:e.Ibt()&&!t&&e.Obt(!1))}}for(const t of this.Fbt())if(t.Dbt()&&t.Ibt())return void(this.Gbt=t)}}}{const l_=self.Ee,f_=0,p_=1,d_=2,m_=3,y_=4,g_=5;class v_{constructor(t,e){this.Abt=e,this.vbt=t[0],this.Qs=t[1],this.xpt=t[2],this.Bbt=t[3],this.Lyt=t[4],this.zbt=t[5]}Ys(){this.Abt=null}Xwt(){return this.Abt}mwt(){return this.vbt}Dl(){return this.Qs}$lt(){return this.xpt}hSt(){return this.Bbt}Act(){return this.Lyt}Ubt(){return this.zbt}}l_.Mbt=class{constructor(t,e){this.Hbt=e,this.Vbt=[],this.Wbt=new Map,l_.swt.dbt(this.Vbt,t,v_,this),this.$bt=this.Vbt.filter(t=>t.Act());for(const t of this.$bt)this.Wbt.set(t.Dl(),t)}Ys(){this.Hbt=null;for(const t of this.Vbt)t.Ys();l_.So(this.Vbt),this.Vbt=null,l_.So(this.$bt),this.$bt=null}Ybt(){return this.Hbt}Zwt(){return this.$bt.length}iSt(){return this.$bt}qSt(t){return this.Wbt.get(t)}eSt(){for(const t of this.$bt)if(t.Ubt())return t}*Nbt(){for(const t of this.$bt)yield t}}}{const w_=self.Ee;w_.Jbt=class extends w_.Vs{constructor(t){super(),this.qbt=t,this.Qbt=[],this.Qbt.push(w_.$s(w_.Zbt,this)),this.Uv=0,this.Xbt=this.Qbt[0]}Ys(){for(const t of this.Qbt)t.Ys();w_.So(this.Qbt),this.Xbt=null,this.qbt=null}gq(){return this.qbt}lq(){return this.Xbt}Kbt(){return this.Qbt[this.Uv-1]}Rc(){this.lq().Rc()}t_t(){const t=this.Qbt,e=++this.Uv;if(e===t.length){const e=w_.$s(w_.Zbt,this);t.push(e),this.Xbt=e}else{const i=t[e];i.Bf(),this.Xbt=i}}e_t(){const t=this.Qbt,e=++this.Uv;e===t.length&&t.push(w_.$s(w_.Zbt,this));const i=t[e];i.np(t[e-1]),this.Xbt=i}V3(){this.Xbt=this.Qbt[--this.Uv]}i_t(t){const e=this.Qbt;for(let i=0,r=e.length;i<r;++i)e[i].i_t(t)}}}{const S_=self.Ee;S_.Zbt=class extends S_.Vs{constructor(t){super(),this.Qbt=t,this.qbt=this.Qbt.gq(),this.r_t=this.qbt.gY().wW(),this.s_t=!0,this.U8=[],this.n_t=[]}Ys(){this.o_t(),this.Qbt=null,this.qbt=null,this.r_t=null}o_t(){S_.So(this.U8),S_.So(this.n_t)}gq(){return this.qbt}a_t(){return this.s_t}h_t(){return this.s_t?!!this.qbt.Pq():!!this.U8.length}cq(){return this.s_t?this.qbt.cq():this.U8}u_t(){return!!this.n_t.length}c_t(){return this.n_t}l_t(){const t=this.cq();return t.length?t:this.n_t}Bf(){this.s_t=!0,S_.So(this.n_t)}Rc(){this.s_t=!0}np(t){t.a_t()?this.Bf():(this.s_t=!1,S_.To(this.U8,t.U8),S_.So(this.n_t))}f_t(t){this.U8.push(t)}p_t(t){this.n_t.push(t)}d_t(t){this.s_t=!!t}m_t(){return this.U8}y_t(){return this.n_t}g_t(t){this.s_t=!1,S_.So(this.U8),this.U8.push(t)}v_t(t){this.s_t=!1,S_.To(this.U8,t)}w_t(t){this.s_t=!1,S_.So(this.U8);for(const e of t)this.U8.push(e)}S_t(t,e){for(const i of e)t.has(i)||this.n_t.push(i)}b_t(t){for(const e of t)this.U8.push(e);S_.Oo(this.n_t,t)}__t(){S_.So(this.n_t)}E_t(t){if(t)if(this.r_t.x3().fW().T_t()){this.a_t()&&(S_.So(this.U8),S_.To(this.n_t,t.gq().cq()),this.s_t=!1);const e=this.n_t.indexOf(t);-1!==e&&(this.U8.push(this.n_t[e]),this.n_t.splice(e,1))}else this.g_t(t)}i_t(t){S_.Oo(this.U8,t),S_.Oo(this.n_t,t)}}}{const b_=self.Ee;b_.P_t=class extends b_.Vs{constructor(t){super(),this.A_t=t,this.Fl=this.A_t.gY(),this.Qbt=[],this.Qbt.push(b_.$s(b_.M_t,this,null)),this.Uv=0,this.I_t=[]}Ys(){for(const t of this.Qbt)t.Ys();b_.So(this.Qbt),b_.So(this.I_t),this.A_t=null,this.Fl=null}oW(){return this.A_t}gY(){return this.Fl}x3(){return this.Qbt[this.Uv]}O_t(){return this.Qbt}D_t(){return this.Uv}C3(t){const e=this.Qbt,i=++this.Uv;if(i===e.length){const i=b_.$s(b_.M_t,this,t);return e.push(i),i}{const r=e[i];return r.Bf(t),r}}V3(){--this.Uv}x_t(t){this.I_t.push(t)}C_t(){this.I_t.pop()}vW(){const t=this.I_t;return 0===t.length?null:t.at(-1)}}}{const __=self.Ee;__.M_t=class extends __.Vs{constructor(t,e){super(),this.Qbt=t,this.Fl=this.Qbt.gY(),this.R_t=e,this.L_t=0,this.k_t=0,this.G_t=!1,this.N_t=!1,this.j_t=null,this.F_t=0,this.B_t=0,this.z_t=null}Ys(){this.Bf(null),this.Qbt=null,this.Fl=null}Bf(t){this.R_t=t,this.L_t=0,this.k_t=0,this.G_t=!1,this.N_t=!1,this.z_t=null}U_t(t,e){this.R_t=t,this.L_t=0,this.k_t=e}H_t(){this.L_t=0,this.k_t=0}fW(){return this.R_t}V_t(t){this.R_t=t}W_t(){return this.L_t}$_t(t){this.L_t=t}Y_t(){return this.k_t}J_t(t){this.k_t=t}q_t(t){this.G_t=!!t}Q_t(){return this.G_t}Z_t(t){this.N_t=!!t}X_t(){return this.N_t}K_t(t){this.j_t=t}tEt(){return this.j_t}eEt(t,e){this.F_t=t,this.B_t=e}SW(){return this.F_t}bW(t){this.B_t=t}iEt(){return this.B_t}rEt(){const t=this.R_t;return!!t.sEt()||this.L_t<t.nEt()-1&&!!t._q().length}oEt(t){this.z_t=t}aEt(){return this.z_t}}}{const E_=self.Ee;E_.hEt=class extends E_.Vs{constructor(t){super(),this.A_t=t,this.Fl=this.A_t.gY(),this.Qbt=[],this.Uv=-1,this.Xbt=null,this.uEt=[]}Ys(){E_.So(this.Qbt),this.A_t=null,this.Fl=null}cEt(t){this.uEt=t;const e=this.uEt.slice(0);this.Qbt.push(e),this.Uv=0,this.Xbt=e}oW(){return this.A_t}gY(){return this.Fl}lEt(){return this.Xbt}C3(){const t=++this.Uv,e=this.Qbt;t===e.length?e.push(this.uEt.slice(0)):E_.To(e[t],this.uEt),this.Xbt=e[t]}V3(){this.Xbt=this.Qbt[--this.Uv]}}}{const T_=self.Ee;T_.fEt=class extends T_.Vs{constructor(t){super(),this.A_t=t,this.Fl=this.A_t.gY(),this.Qbt=[],this.Uv=-1}Ys(){T_.So(this.Qbt),this.A_t=null,this.Fl=null}oW(){return this.A_t}gY(){return this.Fl}pEt(){return this.Uv>=0}lEt(){return this.Qbt[this.Uv]}C3(){if(++this.Uv,this.Uv===this.Qbt.length){const t=T_.$s(T_.dEt,this);return this.Qbt.push(t),t}{const t=this.Qbt[this.Uv];return t.Bf(),t}}V3(){--this.Uv}mEt(t){const e=this.Qbt;for(let i=this.Uv;i>=0;--i){const r=e[i];if(r.Dl()===t)return r}return null}yEt(){return this.Qbt.slice(0,this.Uv+1)}}}{const P_=self.Ee;P_.dEt=class extends P_.Vs{constructor(t){super(),this.gEt=t,this.Qs="",this.Uv=0,this.vEt=!1,this.wEt=NaN}Bf(){this.Qs="",this.Uv=0,this.vEt=!1,this.wEt=NaN}L3(t){this.Qs=t}Dl(){return this.Qs}z3(t){this.Uv=t}PV(){return this.Uv}b1(){this.vEt=!0}H3(){return this.vEt}SEt(t){this.wEt=t}bEt(){return this.wEt}}}{const A_=self.Ee;A_._Et=class extends A_.Vs{constructor(){super(),this.Qbt=[],this.Uv=-1}Ys(){A_.So(this.Qbt)}lEt(){return this.Qbt[this.Uv]}C3(){if(++this.Uv,this.Uv===this.Qbt.length){const t=[];return this.Qbt.push(t),t}return this.Qbt[this.Uv]}V3(){--this.Uv}}}{let M_=function(t,e){return t.PV()-e.PV()},I_=function(t,e){for(let i=0,r=t.length;i<r;++i)if(t[i]!==e[i])return!1;return!0};SortSolArray=M_,IsSolArrayIdentical=I_;const O_=self.Ee,D_=self.assert;O_.EEt=class extends O_.Vs{constructor(t){super(),this.Fl=t,this.TEt=[],this.PEt=new Map,this.AEt=[],this.MEt=new Map,this.IEt=new Map,this.OEt=new Map,this.DEt=new Map,this.xEt=new Map,this.CEt=new Map,this.REt=0,this.LEt=[],this.kEt=[],this.GEt=[],this.NEt=new Map,this.jEt=new Map,this.r_t=O_.$s(O_.P_t,this),this.FEt=O_.$s(O_.hEt,this),this.gEt=O_.$s(O_.fEt,this),this.BEt=[],this.zEt=[],this.UEt=[],this.HEt=0,this.VEt=0,this.WEt=0,this.$Et=[],this.YEt=[],this.JEt=[],this.qEt=new Map,this.QEt=new Map,self.c3_callFunction=(t,e)=>this.ZEt(t,e)}Ys(){this.vrt(),this.r_t.Ys(),this.r_t=null,this.FEt.Ys(),this.FEt=null,O_.So(this.zEt),O_.So(this.UEt),this.Fl=null,O_.So(this.TEt),this.PEt.clear()}WP(t){const e=O_.$s(O_.XEt,this,t);this.TEt.push(e),this.PEt.set(e.Dl().toLowerCase(),e)}KEt(t){this.BEt.push(t)}tTt(){for(const t of this.jEt.values())t.eTt();for(const t of this.NEt.values())t.tTt();for(const t of this.jEt.values())t.tTt();for(const t of this.TEt)t.tTt();for(const t of this.TEt)t.Hit();for(const t of this.BEt)t.tTt(!1);O_.So(this.BEt),this.FEt.cEt(this.GEt)}gY(){return this.Fl}Uit(t){return this.PEt.get(t.toLowerCase())||null}iTt(t){this.AEt.push(t),this.MEt.set(t.rTt(),t)}sTt(t){this.IEt.set(t.e9(),t)}nTt(t){this.OEt.set(t.e9(),t)}oTt(t){this.DEt.set(t.e9(),t)}aTt(t){switch(t.hTt()){case 0:this.NEt.set(t.uTt().toLowerCase(),t);break;case 1:this.jEt.set(t.uTt().toLowerCase(),t)}}cTt(t){this.CEt.set(t.e9(),t),t.g6()?this.LEt.push(t):this.kEt.push(t)}lTt(t){t.length>=2&&t.sort(M_);let e=this.xEt.get(t.length);e||(e=[],this.xEt.set(t.length,e));for(let i=0,r=e.length;i<r;++i){const r=e[i];if(I_(t,r))return r}return e.push(t),t}fTt(t){return this.GEt.push(t.pTt()),this.REt++}wW(){return this.r_t}dTt(){return this.wW().x3()}fW(){return this.dTt().fW()}mTt(){const t=this.dTt();return t.fW().yTt(t.W_t())}gTt(){const t=this.dTt();return t.fW().vTt(t.Y_t())}wTt(){return this.FEt}R3(){return this.gEt}STt(t){const e=[];for(t=t.bTt();t;)O_.Ls(e,t._Tt()),t=t.bTt();return e}ETt(t){const e={};for(const i of this.STt(t))e[i.TTt()]=i.PTt();return Object.create(Object.prototype,e)}ATt(t){return this.CEt.get(t)||null}MTt(t){return this.IEt.get(t)||null}ITt(t){return this.OEt.get(t)||null}OTt(t){return this.DEt.get(t)||null}aW(t){return this.NEt.get(t.toLowerCase())||null}pq(t,e){let i=this.jEt.get((t.Dl()+"."+e).toLowerCase());if(i)return i;if(!t.mq())for(const r of t.Cq())if(i=this.jEt.get((r.Dl()+"."+e).toLowerCase()),i)return i;return null}DTt(){return this.LEt}xTt(){return this.kEt}CTt(t){for(const t of this.LEt)t.RTt();if(t)for(const t of this.kEt)t.JT()&&t.RTt()}LTt(t){return this.MEt.get(t.toLowerCase())||null}kTt(t){const e=this.IEt.get(t);return e&&e.GTt()?e:null}NTt(){return this.AEt}jTt(){for(const t of this.AEt)t.FTt()}BTt(){for(const t of this.TEt)t.zTt()}UTt(t){this.BTt(),this.HEt++;for(const e of t.qrt()){const t=e.yit();t&&(this.Fl.HTt(e),t.mO(),this.Fl.VTt())}this.HEt--}async WTt(t){this.BTt(),this.HEt++;for(const e of this.$Tt(t))await this.Fl.YTt(e);this.HEt--}*$Tt(t){for(const e of t.qrt()){const t=e.yit();t&&(this.Fl.HTt(e),yield*t.JTt(),this.Fl.VTt())}}qTt(t,e,i,r){let s=!1;if(!t.p$())return this.QTt(e,i,r);this.VEt++;for(const n of t.qrt()){const t=n.yit();if(!t)continue;this.Fl.HTt(n);for(const n of t.ZTt()){const t=n.qTt(e,i,r);s=s||t}const o=t.qTt(e,i,r);s=s||o,this.Fl.VTt()}return this.VEt--,s}*XTt(t,e,i,r){let s=!1;if(!t.p$())return this.QTt(e,i,r);this.VEt++;for(const n of t.qrt()){const t=n.yit();if(!t)continue;this.Fl.HTt(n);for(const n of t.ZTt()){const t=yield*n.XTt(e,i,r);s=s||t}const o=yield*t.XTt(e,i,r);s=s||o,this.Fl.VTt()}return this.VEt--,s}QTt(t,e,i){return this.zEt.push([t,e,i]),!1}KTt(t,e,i){let r=null;const s=new Promise(t=>r=t);return this.UEt.push([t,e,i,r]),s}*tPt(){if(this.Fl.ePt())throw new Error("should not be in breakpoint");const t=this.Fl.y$();for(;this.UEt.length;){const[e,i,r,s]=this.UEt.shift();s(yield*this.XTt(t,e,i,r))}}async iPt(){for(const t of this.tPt())await this.Fl.YTt(t)}rPt(t,e,i,r){let s=!1;const n=t.p$(),o=n.yit();if(!o)return;this.VEt++,this.Fl.HTt(n);const a=o.ZTt();for(let t=0,n=a.length;t<n;++t){const n=a[t].rPt(e,i,r);s=s||n}const h=o.rPt(e,i,r);return s=s||h,this.Fl.VTt(),this.VEt--,s}*sPt(t,e,i,r){let s=!1;const n=t.p$(),o=n.yit();if(!o)return;this.VEt++,this.Fl.HTt(n);const a=o.ZTt();for(let t=0,n=a.length;t<n;++t){const n=yield*a[t].sPt(e,i,r);s=s||n}const h=yield*o.sPt(e,i,r);return s=s||h,this.Fl.VTt(),this.VEt--,s}nPt(){return this.VEt}oPt(){return this.nPt()>0}aPt(){return++this.VEt}hPt(){--this.VEt}uPt(){return this.HEt>0}J$(){return this.uPt()||this.oPt()}urt(t){for(const[e,i,r]of this.zEt)this.qTt(t,e,i,r);O_.So(this.zEt)}Oq(t){t?this.WEt++:this.WEt--}Q$(){return this.WEt>0}cPt(t){for(let e=0,i=t.length;e<i;++e)t[e].lPt().Rc()}fPt(t){for(let e=0,i=t.length;e<i;++e)t[e].lPt().t_t()}j3(t){for(let e=0,i=t.length;e<i;++e)t[e].lPt().e_t()}B3(t){for(let e=0,i=t.length;e<i;++e)t[e].lPt().V3()}pW(t){const e=new Set,i=this.r_t.O_t(),r=this.r_t.D_t();for(let s=0;s<=r;++s){const r=i[s].aEt();if(r)for(const i of r)t&&t.has(i)||e.add(i)}return e}pPt(t){const e=new Set([...t]),i=this.pW(e);if(i.size>0){for(const t of i)t.lPt().t_t();return[...i]}return null}dPt(){const t=O_.$s(O_.mPt,this);return this.$Et.push(t),t}yPt(){return this.$Et}gPt(){if(!this.$Et.length)return;const t=this.dTt();let e=!1;this.HEt++;for(let i=0,r=this.$Et.length;i<r;++i){const r=this.$Et[i];r.vPt()&&r.wPt(t),r.SPt()&&(e=!0)}e&&(this.bPt(),t.Bf(null)),this.HEt--}async _Pt(){if(!this.$Et.length)return;const t=this.dTt();let e=!1;this.HEt++;for(let i=0,r=this.$Et.length;i<r;++i){const r=this.$Et[i];r.vPt()&&await r.EPt(t),r.SPt()&&(e=!0)}e&&(this.bPt(),t.Bf(null)),this.HEt--}bPt(){const t=O_.Io(this.$Et,t=>t.SPt());for(const e of t)e.Ys()}vrt(){for(const t of this.$Et)t.Ys();O_.So(this.$Et)}TPt(t){for(const e of this.$Et)e.i_t(t);for(const e of t){const t=this.QEt.get(e);if(this.QEt.delete(e),t)for(const{resolve:e}of t.PPt.values())e(!0)}}APt(t){this.YEt.push({promise:t,MPt:this.nPt()})}IPt(){O_.So(this.YEt)}OPt(){const t=this.nPt(),e=Promise.all(this.YEt.filter(e=>e.MPt===t).map(t=>t.promise));return this.YEt=this.YEt.filter(e=>e.MPt<t),e}_W(t){const e=t.toLowerCase();this.JEt.push(e),this.Fl.hX(O_.cY.uY.hY.DPt,null),this.JEt.pop();for(const t of this.Fl.oW().yPt())t.xPt()&&t.CPt()===e&&t.RPt();const i=this.qEt.get(e);i&&(i.resolve(),this.qEt.delete(e))}TW(t){const e=t.toLowerCase(),i=this.qEt.get(e);if(i)return i.promise;{let t=null;const i=new Promise(e=>t=e);return this.qEt.set(e,{promise:i,resolve:t}),i}}LPt(){if(0===this.JEt.length)throw new Error("not in a signal");return this.JEt.at(-1)}kPt(t){let e=this.QEt.get(t);return e||(e={GPt:[],PPt:new Map},this.QEt.set(t,e)),e}XZ(t,e){const i=this.kPt(t),r=e.toLowerCase();i.GPt.push(r),this.Fl.hX(t.KJ().jPt().hY.NPt,t),i.GPt.pop();for(const e of this.Fl.oW().yPt())e.FPt()&&e.CPt()===r&&e.BPt(t);const s=i.PPt.get(r);s&&(s.resolve(!1),i.PPt.delete(r)),0===i.GPt.length&&0===i.PPt.size&&this.QEt.delete(t)}KZ(t,e){const i=this.kPt(t),r=e.toLowerCase(),s=i.PPt.get(r);if(s)return s.promise;{let t=null;const e=new Promise(e=>t=e);return i.PPt.set(r,{promise:e,resolve:t}),e}}zPt(t){const e=this.kPt(t);if(!e||0===e.GPt.length)throw new Error("not in a signal");return e.GPt.at(-1)}_et(){return{groups:this.UPt(),cnds:this.HPt(),acts:this.VPt(),vars:this.WPt(),waits:this.$Pt()}}Eet(t){this.YPt(t.groups),this.JPt(t.cnds),this.qPt(t.acts),this.QPt(t.vars),this.ZPt(t.waits)}UPt(){const t={};for(const e of this.NTt())t[e.e9().toString()]=e.XPt();return t}YPt(t){for(const[e,i]of Object.entries(t)){const t=parseInt(e,10),r=this.kTt(t);r&&r.KPt(i)}}HPt(){const t={};for(const[e,i]of this.OEt){const r=i._et();r&&(t[e.toString()]=r)}return t}JPt(t){const e=new Map;for(const[i,r]of Object.entries(t))e.set(parseInt(i,10),r);for(const[t,i]of this.OEt)i.Eet(e.get(t)||null)}VPt(){const t={};for(const[e,i]of this.DEt){const r=i._et();r&&(t[e.toString()]=r)}return t}qPt(t){const e=new Map;for(const[i,r]of Object.entries(t))e.set(parseInt(i,10),r);for(const[t,i]of this.DEt)i.Eet(e.get(t)||null)}WPt(){const t={};for(const[e,i]of this.CEt)i.tAt()||!i.g6()&&!i.JT()||(t[e.toString()]=i.$lt());return t}QPt(t){for(const[e,i]of Object.entries(t)){const t=parseInt(e,10),r=this.ATt(t);r&&r.Oft(i)}}$Pt(){return this.$Et.filter(t=>!t.eAt()).map(t=>t._et())}ZPt(t){this.vrt();for(const e of t){const t=O_.mPt.iAt(this,e);t&&this.$Et.push(t)}}rAt(){return[...this.Fl.y$().qrt()].map(t=>t.yit()).filter(t=>t).map(t=>t.sAt())}nAt(t){for(;t;){const e=t.bTt();if(e instanceof O_.oAt)return e;t=e}return null}ZEt(t,e){Array.isArray(e)||(e=[]);const i=this.aW(t.toLowerCase());if(!i)return null;if(!i.Dc())return i.hW();const r=i.aAt();if(e.length<r.length){e=e.slice(0);do{e.push(r[e.length].pTt())}while(e.length<r.length)}const s=i.cW();return s.dW(s.lW(),!1,i.yW(),i.hW(),null,...e)}}}{const x_=self.Ee;x_.XEt=class extends x_.Vs{constructor(t,e){super(),this.A_t=t,this.Fl=t.gY(),this.Qs=e[0],this.hAt=[],this.uAt=new Map,this.cAt=new Map,this.lAt=new Map,this.fAt=!1,this.pAt=[],this.dAt=[],this.mAt=new Set;for(const t of e[1])this.yAt(t,null,this.hAt);this.gAt=this.Fl.yX()?{type:"sheet",name:this.Qs,vAt:0,children:[]}:null}Ys(){this.A_t=null,this.Fl=null}yAt(t,e,i){switch(t[0]){case 0:case 3:this.wAt(t,e,i);break;case 1:this.SAt(t,e,i);break;case 2:this.bAt(t,e,i);break;case 4:this._At(t,e);break;case 5:this.EAt(t,e,i);break;case 6:this.TAt(t,e);break;default:throw new Error("invalid event type")}}wAt(t,e,i){const r=x_.PAt.WP(this,e,t);if(r.T_t()){i.push(r);const t=r.AAt();for(let e=0,i=t.length;e<i;++e)t[e].MAt()&&this.IAt(r,e)}else r.MAt()?this.IAt(r,0):i.push(r)}_At(t,e){const i=x_.oAt.OAt(this,e,t);this.A_t.aTt(i)}TAt(t,e){const i=x_.oAt.DAt(this,e,t);this.A_t.aTt(i)}SAt(t,e,i){const r=x_.xAt.WP(this,e,t);i.push(r)}bAt(t,e,i){const r=x_.CAt.WP(this,e,t);i.push(r)}EAt(t,e,i){const r=x_.RAt.WP(this,e,t);i.push(r)}IAt(t,e){t.T_t()||this.A_t.KEt(t);const i=t.yTt(e),r=i.LAt(),s=i.gq();if(i.kAt()){let n=this.cAt.get(s);n||(n=new Map,this.cAt.set(s,n));const o=i.GAt().toLowerCase();let a=n.get(r);a||(a=new Map,n.set(r,a));let h=a.get(o);h||(h=[],a.set(o,h)),h.push([t,e])}else{let n=this.uAt.get(s);n||(n={NAt:new Map,jAt:new Map},this.uAt.set(s,n));const o=i.A0();let a;o?(a=n.jAt.get(o),a||(a=new Map,n.jAt.set(o,a))):a=n.NAt;let h=a.get(r);h||(h=[],a.set(r,h)),h.push([t,e])}}tTt(){const t=this.hAt;for(let e=0,i=t.length;e<i;++e){const r=e<i-1&&t[e+1]instanceof x_.PAt&&t[e+1].FAt();t[e].tTt(r)}}BAt(t){this.pAt.push(t)}Hit(){x_.So(this.dAt),this.zAt(this),this.mAt.clear()}zAt(t){const e=t.dAt,i=t.mAt;for(const r of this.pAt){const s=r.UAt();r.HAt()&&t!==s&&!i.has(s)&&(i.add(s),s.zAt(t),e.push(s))}}ZTt(){return this.dAt}oW(){return this.A_t}gY(){return this.Fl}Dl(){return this.Qs}VAt(t,e){this.lAt.set(e,t)}WAt(t){return this.lAt.get(t)||null}zTt(){this.fAt=!1}mO(){if(this.fAt)return;const t=this.Fl,e=t.$At(),i=e?performance.now():0;this.fAt=!0;const r=this.oW(),s=r.dTt();for(const e of this.hAt)e.mO(s),r.cPt(e._q()),r.IPt(),t.Z$();s.Bf(null),e&&(this.gAt.vAt+=performance.now()-i)}*JTt(){if(this.fAt)return;this.fAt=!0;const t=this.Fl,e=this.oW(),i=e.dTt();for(const r of this.hAt)yield*r.JTt(i),e.cPt(r._q()),e.IPt(),t.Z$();i.Bf(null)}qTt(t,e,i){if(!e)return this.YAt(t,e,null,null);{const r=e.gq();let s=!1,n=this.YAt(t,e,r,i);s=s||n;for(const o of r.Cq())n=this.YAt(t,e,o,i),s=s||n}}YAt(t,e,i,r){const s=this.uAt.get(i);if(!s)return!1;const n=r?s.jAt.get(r):s.NAt;if(!n)return!1;const o=n.get(t);if(!o)return!1;let a=!1;for(const[t,i]of o){const r=this.JAt(e,t,i);a=a||r}return a}*XTt(t,e,i){if(!e)return yield*this.qAt(t,e,null,null);{const r=e.gq();let s=!1,n=yield*this.qAt(t,e,r,i);s=s||n;for(const o of r.Cq())n=yield*this.qAt(t,e,o,i),s=s||n}}*qAt(t,e,i,r){const s=this.uAt.get(i);if(!s)return!1;const n=r?s.jAt.get(r):s.NAt;if(!n)return!1;const o=n.get(t);if(!o)return!1;let a=!1;for(const[t,i]of o){let r;r=t.QAt()?this.JAt(e,t,i):yield*this.ZAt(e,t,i),a=a||r}return a}rPt(t,e,i){const r=e.gq(),s=this.cAt.get(r);if(!s)return!1;const n=s.get(t);if(!n)return!1;const o=n.get(i);if(!o)return!1;let a=!1;for(let t=0,e=o.length;t<e;++t){const e=o[t],i=this.JAt(null,e[0],e[1]);a=a||i}return a}*sPt(t,e,i){const r=e.gq(),s=this.cAt.get(r);if(!s)return!1;const n=s.get(t);if(!n)return!1;const o=n.get(i);if(!o)return!1;let a=!1;for(let t=0,e=o.length;t<e;++t){const e=o[t],i=e[0],r=e[1];let s;s=i.QAt()?this.JAt(null,i,r):yield*this.ZAt(null,i,r),a=a||s}return a}JAt(t,e,i){const r=this.Fl,s=this.A_t,n=s.fW(),o=s.wW(),a=s.nPt();let h=!1;n&&s.fPt(n.lW()),s.fPt(e.lW());const u=a>1;u&&s.wTt().C3();const c=o.C3(e);t&&(e.AAt()[i].gq().lq().g_t(t),t.LZ()&&t.XAt());let l=!0;if(e.wK()){const t=e.KAt();for(let e=0,i=t.length;e<i;++e)if(!t[e].tMt(c)){l=!1;break}}return l&&(e.T_t()?e.eMt(c,i):e.mO(c),h=c.Q_t()),o.V3(),u&&s.wTt().V3(),s.B3(e.lW()),n&&s.B3(n.lW()),n||1!==a||(s.IPt(),s.Q$()||r.Z$()),h}*ZAt(t,e,i){const r=this.Fl,s=this.A_t,n=s.fW(),o=s.wW(),a=s.nPt();let h=!1;n&&s.fPt(n.lW()),s.fPt(e.lW());const u=a>1;u&&s.wTt().C3();const c=o.C3(e);t&&(e.AAt()[i].gq().lq().g_t(t),t.LZ()&&t.XAt());let l=!0;if(e.wK()){const t=e.KAt();for(let e=0,i=t.length;e<i;++e)if(!(yield*t[e].iMt(c))){l=!1;break}}return l&&(e.T_t()?yield*e.rMt(c,i):yield*e.JTt(c),h=c.Q_t()),o.V3(),u&&s.wTt().V3(),s.B3(e.lW()),n&&s.B3(n.lW()),n||1!==a||(s.IPt(),s.Q$()||r.Z$()),h}sAt(){return this.gAt}}}{let C_=function(t,e){return!0};NoActions=C_;const R_=self.Ee,L_=[];function*k_(t,e){return!0}R_.PAt=class extends R_.Vs{constructor(t,e,i){super(),this.Get=t,this.Fl=t.gY(),this.sMt=e,this.nMt=null,this.r_t=this.Fl.oW().wW(),this.oMt=[],this.aMt=[],this.hMt=!1,this.uMt=!1,this.cMt=!1,this.lMt=!1,this.fMt=!!i[2],this.pMt=!1,this.dMt=null,this.mMt=[],this.kpt=[],this.yMt=[],this.gMt=C_,this.vMt=k_,this.wMt=!1,this.SMt=!1,this.bMt="",this._Mt=!1,this.EMt=null,this.gAt=null,this.E6=i[4],this.TMt=i[5],this.Get.VAt(this,this.TMt),this.PMt=this.Fl.yX()?{AMt:i[3][0],MMt:i[3][1],IMt:!1,OMt:!1,DMt:!1,xMt:!1}:null,this.oW().sTt(this),3===i[0]&&this.CMt(i[1]);let r=0;for(const t of i[6]){const e=R_.RMt.WP(this,t,r++);this.mMt.push(e),this.LMt(e.gq())}r=0;for(const t of i[7]){const e=R_.kMt.WP(this,t,r++);this.kpt.push(e)}if(9===i.length){const t=i[8];for(const e of t)this.Get.yAt(e,this,this.yMt)}this.mMt.length&&(this.pMt=null===this.mMt[0].gq()&&this.mMt[0].LAt()===R_.cY.uY.hY.GMt),0===this.mMt.length&&(this.mMt=L_),0===this.kpt.length&&(this.kpt=L_),0===this.yMt.length&&(this.yMt=L_)}static WP(t,e,i){return R_.$s(R_.PAt,t,e,i)}CMt(t){this.wMt=!0,this.SMt=!!t[0],this._Mt=this.SMt,this.bMt=t[1].toLowerCase(),this.EMt=[],this.oW().iTt(this),this.Fl.yX()&&(this.gAt={type:"group",name:t[1],vAt:0,children:[]})}NMt(t){this.EMt.push(t)}jMt(t,e){for(const i of t.Oit().Fq())e.includes(i)||e.push(i)}FMt(t,e){if(t)if(e.includes(t)||e.push(t),t.mq())for(const i of t.jq())i.LZ()&&this.jMt(i,e);else t.LZ()&&this.jMt(t,e)}LMt(t){this.FMt(t,this.oMt)}BMt(t){this.FMt(t,this.aMt)}zMt(){this.oMt=this.Fl.J7()}tTt(t){this.lMt=!!t,this.UMt(),this.HMt();for(const t of this.mMt)t.tTt();if(this.kpt.length>0){let t=!1;for(const e of this.kpt)e.tTt(),e.VMt()&&(t=!0);t?(this.gMt=this.WMt,this.vMt=this.$Mt):(this.gMt=this.YMt,this.vMt=this.JMt)}const e=this.yMt;for(let t=0,i=e.length;t<i;++t){const r=t<i-1&&e[t+1]instanceof R_.PAt&&e[t+1].FAt();e[t].tTt(r)}this.PMt&&this.qMt(),this.gAt&&this.QMt().sAt().children.push(this.gAt)}sAt(){return this.gAt}QMt(){let t=this.wK();for(;t;){if(t.GTt())return t;t=t.wK()}return this.Get}qMt(){const t=this.PMt;t.IMt=this.mMt.every(t=>t.QAt()),t.OMt=this.kpt.every(t=>t.QAt()),t.DMt=this.yMt.every(t=>t.QAt()),t.xMt=t.IMt&&t.OMt&&t.DMt}ZMt(){let t=this;do{t.qMt(),t=t.wK()}while(t)}UMt(){if(!this.GTt())return;let t=this.wK();for(this.cMt=!0;t;){if(!t.GTt()){this.cMt=!1;break}t=t.wK()}}XMt(){const t=this.Fl.J7();if(this.oMt===t)this.aMt=t;else{this.aMt=R_.Co(this.oMt);let t=this.wK();for(;t;){for(const e of t.oMt)this.BMt(e);t=t.wK()}const e=this.oW();this.oMt=e.lTt(this.oMt),this.aMt=e.lTt(this.aMt)}}HMt(){if(!this.KMt())return;this.dMt=[];let t=this.wK();for(;t;)this.dMt.push(t),t=t.wK();this.dMt.reverse()}tIt(){this.uMt=!0,this.sMt&&this.sMt.tIt()}sEt(){return this.uMt}_q(){return this.oMt}lW(){return this.hMt||(this.hMt=!0,this.XMt()),this.aMt}eIt(t){return this.oMt.includes(t)}KAt(){return this.dMt}yit(){return this.Get}oW(){return this.Get.oW()}gY(){return this.Fl}wK(){return this.sMt}iIt(t){this.nMt=t}bTt(){return this.nMt||this.sMt}rIt(){return this.TMt}sIt(){return this.PMt&&this.PMt.MMt}nIt(){return this.sIt()&&this.PMt.AMt}oIt(t){this.PMt.AMt=!!t,this.ZMt()}GTt(){return this.wMt}aIt(){return this.cMt}FAt(){return this.pMt}hIt(){return this.lMt}rTt(){return this.bMt}XPt(){return this._Mt}FTt(){this.KPt(this.SMt)}KPt(t){if(t=!!t,!this.wMt)throw new Error("not a group");if(this._Mt!==t){this._Mt=t;for(const t of this.EMt)t.uIt();if(this.EMt.length){const t=this.Fl.k$().yit();t&&t.Hit()}}}e9(){return this.E6}T_t(){return this.fMt}MAt(){return this.mMt.length&&this.mMt[0].MAt()}cIt(){return this.nMt&&this.nMt instanceof R_.oAt}KMt(){return this.cIt()||this.mMt.some(t=>t.MAt())}AAt(){return this.mMt}nEt(){return this.mMt.length}yTt(t){if((t=Math.floor(t))<0||t>=this.mMt.length)throw new RangeError("invalid condition index");return this.mMt[t]}lIt(t){return this.yTt(t)}fIt(t){let e=t.PV();if(0===e)return!0;--e;const i=t.pIt()?t.dIt():t.gq();for(;e>=0;--e){const t=this.mMt[e];if(i===t.gq()||t.pIt()&&t.dIt()===i)return!1}return!0}mIt(){return this.kpt}yIt(){return this.kpt.length}vTt(t){if((t=Math.floor(t))<0||t>=this.kpt.length)throw new RangeError("invalid action index");return this.kpt[t]}gIt(t){t=Math.floor(t);const e=this.kpt.find(e=>e.vIt()===t);if(!e)throw new RangeError("invalid action debug index");return e}wIt(t){return(t=Math.floor(t))>=0&&t<this.kpt.length}SIt(){return this.yMt}_Tt(){return this.yMt.filter(t=>t instanceof R_.xAt)}tMt(t){t.V_t(this);const e=this.mMt;let i=0===e.length;for(let r=0,s=e.length;r<s;++r){const s=e[r];if(t.$_t(r),s.B0())throw new Error("trigger cannot be used as sub-event to a loop");if(s.mO())i=!0;else if(!this.fMt)return!1}return!this.fMt||i}eMt(t,e){t.V_t(this),t.$_t(e),this.mMt[e].mO()&&(this.gMt(t,0)&&this.bIt(t),t.q_t(!0))}*iMt(t){t.V_t(this);const e=this.mMt;let i=0===e.length;for(let r=0,s=e.length;r<s;++r){const s=e[r];if(t.$_t(r),s.B0())throw new Error("trigger cannot be used as sub-event to a loop");let n;if(n=s.QAt()?s.mO():yield*s.JTt(),n)i=!0;else if(!this.fMt)return!1}return!this.fMt||i}*rMt(t,e){t.V_t(this),t.$_t(e);const i=this.mMt[e];let r;if(r=i.QAt()?i.mO():yield*i.JTt(),r){let e;e=this._It()?this.gMt(t,0):yield*this.vMt(t,0),e&&(this.EIt()?this.bIt():yield*this.TIt()),t.q_t(!0)}}mO(t){t.V_t(this),this.pMt||t.Z_t(!1),this.fMt?this.PIt(t):this.AIt(t)}*JTt(t){(this.nIt()||this.Fl.MIt())&&(yield this),t.V_t(this),this.pMt||t.Z_t(!1),this.fMt?yield*this.IIt(t):yield*this.OIt(t)}PIt(t){const e=this.mMt;let i=0===e.length;for(let r=0,s=e.length;r<s;++r){const s=e[r];if(s.MAt())continue;t.$_t(r);const n=s.mO();i=i||n}t.q_t(i),i&&(this.gMt(t,0)&&this.bIt(t),this.lMt&&t.Z_t(!0))}*IIt(t){const e=this.mMt;let i=0===e.length;for(let r=0,s=e.length;r<s;++r){const s=e[r];if(s.MAt())continue;let n;t.$_t(r),n=s.QAt()?s.mO():yield*s.JTt(),i=i||n}if(t.q_t(i),i){let e;e=this._It()?this.gMt(t,0):yield*this.vMt(t,0),e&&(this.EIt()?this.bIt():yield*this.TIt()),this.lMt&&t.Z_t(!0)}}AIt(t){const e=this.mMt;for(let i=0,r=e.length;i<r;++i){const r=e[i];if(t.$_t(i),!r.mO())return void t.q_t(!1)}t.q_t(!0),this.gMt(t,0)&&this.bIt(t),t.Q_t()&&this.lMt&&t.Z_t(!0)}*OIt(t){const e=this.mMt;for(let i=0,r=e.length;i<r;++i){const r=e[i];let s;if(t.$_t(i),s=r.QAt()?r.mO():yield*r.JTt(),!s)return void t.q_t(!1)}let i;t.q_t(!0),i=this._It()?this.gMt(t,0):yield*this.vMt(t,0),i&&(this.EIt()?this.bIt():yield*this.TIt()),t.Q_t()&&this.lMt&&t.Z_t(!0)}YMt(t,e){const i=this.kpt;for(let r=e,s=i.length;r<s;++r){const e=i[r];t.J_t(r),e.mO()}return!0}*JMt(t,e){const i=this.kpt;for(let r=e,s=i.length;r<s;++r){const e=i[r];t.J_t(r),e.QAt()?e.mO():yield*e.JTt()}return!0}WMt(t,e){const i=this.oW(),r=this.kpt;for(let s=e,n=r.length;s<n;++s){const e=r[s];t.J_t(s);const n=e.mO();if(e.DIt()&&!0===n)return!1;e.xIt()&&n instanceof Promise&&i.APt(n)}return!0}*$Mt(t,e){const i=this.oW(),r=this.kpt;for(let s=e,n=r.length;s<n;++s){const e=r[s];let n;if(t.J_t(s),n=e.QAt()?e.mO():yield*e.JTt(),e.DIt()&&!0===n)return!1;e.xIt()&&n instanceof Promise&&i.APt(n)}return!0}CIt(t){this.gMt(t,t.Y_t())&&this.bIt()}*RIt(t){(yield*this.vMt(t,t.Y_t()))&&(yield*this.TIt())}bIt(){if(!this.yMt.length)return;const t=this.GTt()&&this.Fl.$At(),e=t?performance.now():0,i=this.r_t,r=i.C3(this);this.uMt?this.LIt(r):this.kIt(r),i.V3(),t&&(this.gAt.vAt+=performance.now()-e)}LIt(t){const e=this.wMt,i=this.cMt,r=this.oW(),s=this.yMt;for(let n=0,o=s.length,a=o-1;n<o;++n){const o=s[n],h=o._q(),u=!i||!e&&n<a;u&&r.j3(h),o.mO(t),u?r.B3(h):r.cPt(h)}}kIt(t){const e=this.yMt;for(let i=0,r=e.length;i<r;++i)e[i].mO(t)}*TIt(){if(!this.yMt.length)return;const t=this.r_t,e=t.C3(this);this.uMt?yield*this.GIt(e):yield*this.NIt(e),t.V3()}*GIt(t){const e=this.wMt,i=this.cMt,r=this.oW(),s=this.yMt;for(let n=0,o=s.length,a=o-1;n<o;++n){const o=s[n],h=o._q(),u=!i||!e&&n<a;u&&r.j3(h),yield*o.JTt(t),u?r.B3(h):r.cPt(h)}}*NIt(t){const e=this.yMt;for(let i=0,r=e.length;i<r;++i)yield*e[i].JTt(t)}F3(t,e){e.H_t();const i=this.mMt;if(!this.T_t())for(let r=t.W_t()+1,s=i.length;r<s;++r){const t=i[r];if(e.$_t(r),!t.mO())return!1}return this.gMt(e,0)&&this.bIt(e),!0}*jIt(t,e){e.H_t();const i=this.mMt;if(!this.T_t())for(let r=t.W_t()+1,s=i.length;r<s;++r){const t=i[r];let s;if(e.$_t(r),s=t.QAt()?t.mO():yield*t.JTt(),!s)return!1}let r;return r=this._It()?this.gMt(e,0):yield*this.vMt(e,0),r&&(this.EIt()?this.bIt():yield*this.TIt()),!0}QAt(){return!this.nIt()&&!this.Fl.MIt()&&this.PMt.xMt}_It(){return!this.Fl.MIt()&&this.PMt.OMt}EIt(){return!this.Fl.MIt()&&this.PMt.DMt}FIt(t){if(this.wK()){const e=this.KAt();for(let i=0,r=e.length;i<r;++i)if(!e[i].tMt(t))return!1}return!0}*BIt(t){if(this.wK()){const e=this.KAt();for(let i=0,r=e.length;i<r;++i)if(!(yield*e[i].iMt(t)))return!1}return!0}zIt(t,e,i){if(e.length>0)if(i){const i=e.map(t=>t.Ue(0));t.wTt().C3(),this.nMt.UIt(i)}else this.nMt.HIt(e);else i&&t.wTt().C3()}#e(t,e,i,r){let s=null;if(e.VIt){const t=i?e.VIt.lq():e.VIt.lPt().Kbt(),r=e.WIt.lq();r.v_t(t.cq()),r.__t(),i||e.WIt.$It()}else if(e.wq){const t=e.wq.lq();t.v_t(e.Sq),t.__t()}return e.YIt&&(s=t.pPt(r)),s}JIt(t,e,i,r){let s,n;const o=t.length>0;let a=null;const h=this.Fl,u=this.r_t,c=h.oW(),l=this.nMt,f=l.xIt(),p=c.aPt()>1;this.zIt(c,e,p),o&&(i?c.j3(t):c.fPt(t)),null!==r&&(a=this.#e(c,r,i,t));const d=u.C3(this);return i&&d.oEt(t),this.FIt(d)&&(d.V_t(this),f&&([n,s]=l.qIt()),this.AIt(d),f&&l.QIt(n)),u.V3(),p&&c.wTt().V3(),null!==a&&c.B3(a),o&&c.B3(t),c.hPt(),s}*ZIt(t,e,i,r){let s,n;(this.nIt()||this.Fl.MIt())&&(yield this);const o=t.length>0;let a=null;const h=this.Fl,u=this.r_t,c=h.oW(),l=this.nMt,f=l.xIt(),p=c.aPt()>1;if(this.zIt(c,e,p),o&&(i?c.j3(t):c.fPt(t)),null!==r){if(r.VIt){const t=i?r.VIt.lq():r.VIt.lPt().Kbt(),e=r.WIt.lq();e.v_t(t.cq()),e.__t(),i||r.WIt.$It()}else if(r.wq){const t=r.wq.lq();t.v_t(r.Sq),t.__t()}r.YIt&&(a=c.pPt(t))}const d=u.C3(this);return i&&d.oEt(t),(yield*this.BIt(d))&&(d.V_t(this),f&&([n,s]=l.qIt()),yield*this.OIt(d),f&&l.QIt(n)),u.V3(),p&&c.wTt().V3(),null!==a&&c.B3(a),o&&c.B3(t),c.hPt(),s}XIt(t,e){const i=this.lW(),r=i.length>0,s=this.Fl,n=this.r_t,o=s.oW(),a=o.aPt()>1;a&&o.wTt().C3(),this.nMt.UIt(t),r&&(e?o.j3(i):o.fPt(i));const h=n.C3(this);this.FIt(h)&&(h.V_t(this),this.AIt(h)),n.V3(),a&&o.wTt().V3(),r&&o.B3(i),o.hPt()}*KIt(t,e){(this.nIt()||this.Fl.MIt())&&(yield this);const i=this.lW(),r=i.length>0,s=this.Fl,n=this.r_t,o=s.oW(),a=o.aPt()>1;a&&o.wTt().C3(),this.nMt.UIt(t),r&&(e?o.j3(i):o.fPt(i));const h=n.C3(this);(yield*this.BIt(h))&&(h.V_t(this),yield*this.OIt(h)),n.V3(),a&&o.wTt().V3(),r&&o.B3(i),o.hPt()}dW(t,e,i,r,s,...n){let o,a;const h=t.length>0;let u=null;const c=this.Fl,l=this.r_t,f=c.oW(),p=this.nMt,d=p.xIt(),m=f.aPt()>1;m&&f.wTt().C3(),n.length>0&&this.nMt.UIt(n),h&&(e?f.j3(t):f.fPt(t)),null!==s&&(u=this.#e(f,s,e,t));const y=l.C3(this);return y.eEt(i,r),e&&y.oEt(t),l.x_t(y),c.G3(!1),this.FIt(y)&&(y.V_t(this),d&&([a,o]=p.qIt()),this.AIt(y),d&&p.QIt(a)),c.G3(!0),l.V3(),l.C_t(),m&&f.wTt().V3(),null!==u&&f.B3(u),h&&f.B3(t),f.hPt(),o||y.iEt()}}}{const G_=self.Ee,N_=[];let j_=!1;G_.RAt=class extends G_.Vs{constructor(t,e,i){super();const r=t.gY(),s=t.oW();this.Get=t,this.A_t=s,this.Fl=t.gY(),this.sMt=e;const n=r.tOt(i[1]);this.eOt=n,this.TMt=i[2],this.Get.VAt(this,this.TMt),this.PMt=r.yX()?{AMt:i[3][0],MMt:i[3][1]}:null}static WP(t,e,i){return G_.$s(G_.RAt,t,e,i)}tTt(){const t=this.eOt,e=this.Fl.oW().ETt(this);this.eOt=t.bind(null,this.Fl.TJ(),e)}wK(){return this.sMt}bTt(){return this.sMt}yit(){return this.Get}rIt(){return this.TMt}sIt(){return this.PMt&&this.PMt.MMt}nIt(){return this.sIt()&&this.PMt.AMt}oIt(t){this.PMt.AMt=!!t}FAt(){return!1}_q(){return N_}lW(){return this.sMt?this.sMt.lW():N_}mO(t){t.V_t(this),this.A_t.APt(this.iOt())}async iOt(){try{await this.eOt()}catch(t){console.error(`Unhandled exception running script %c${this.yit().Dl()}, event ${this.rIt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.gX&&self.gX.rOt(this),j_||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),j_=!0)}}*JTt(t){t.V_t(this),(this.nIt()||this.Fl.MIt())&&(yield this),this.mO(t)}QAt(){return!this.nIt()&&!this.Fl.MIt()}static sOt(){return j_}static nOt(){j_=!0}}}{const F_=self.Ee,B_=self.assert;F_.oAt=class extends F_.Vs{constructor(t,e,i){super(),this.Get=t,this.Fl=t.gY(),this.sMt=e,this.oOt=0,this.aOt="",this.hOt=0,this.uOt=[],this.cOt=!0,this.lOt="",this.qbt=null,this.fOt=!1,this.pOt=[],this.dOt=!1,this.mOt=!1,this.yOt=0,this.gOt=-1,this.vOt=new Map,this.wOt=F_.PAt.WP(t,e,i),this.wOt.iIt(this)}SOt(t){this.oOt=0,this.aOt=t[0],this.hOt=t[1],this.uOt=t[2].map(t=>F_.xAt.WP(this.Get,this,t)),this.cOt=t[3],this.mOt=t[4],this.dOt=t[5]}bOt(t){this.oOt=1,this.lOt=t[1],this.qbt=this.Fl.P7(t[2]),this.wOt.LMt(this.qbt),this.aOt=this.qbt.Dl()+"."+this.lOt,this.hOt=t[3],this.uOt=t[4].map(t=>F_.xAt.WP(this.Get,this,t)),this.cOt=t[5],this.mOt=t[6],this.dOt=t[7],this.qbt._Ot(this)}static OAt(t,e,i){const r=F_.$s(F_.oAt,t,e,i),s=i[1];return r.SOt(s),r}static DAt(t,e,i){const r=F_.$s(F_.oAt,t,e,i),s=i[1];return r.bOt(s),r}eTt(){if(this.qbt&&this.qbt.mq())for(const t of this.qbt.jq())if(t.vq(this.lOt)){this.fOt=!0;break}}tTt(){for(const t of this.uOt)t.tTt();this.wOt.tTt(!1)}hTt(){return this.oOt}_Tt(){return this.uOt}aAt(){return this.uOt}uW(){return this.uOt.length}EOt(t){this.pOt.push(t)}TOt(){return this.pOt}HIt(t){const e=this.uOt;for(let i=0,r=e.length;i<r;++i)e[i].Oft(t[i].Ue(0))}UIt(t){const e=this.uOt;for(let i=0,r=e.length;i<r;++i)e[i].Oft(t[i])}POt(){return this.uOt.map(t=>t.$lt())}wK(){return this.sMt}bTt(){return this.sMt}uTt(){return this.aOt}AOt(){return this.lOt}yq(){return this.fOt}yW(){return this.hOt}gq(){return this.qbt}Dc(){return this.cOt}hW(){switch(this.hOt){case 0:return null;case 2:return"";default:return 0}}cW(){return this.wOt}mW(){return this.dOt}xIt(){return this.mOt}qIt(){const t=this.yOt++;let e;this.gOt=t;const i=new Promise(t=>e=t);return this.vOt.set(t,{resolve:e,MOt:0}),[t,i]}QIt(t){const e=this.vOt.get(t);0===e.MOt&&(e.resolve(),this.vOt.delete(t)),this.gOt=-1}IOt(){return this.vOt.get(this.gOt).MOt++,this.gOt}OOt(t){this.gOt=t,this.vOt.get(t).MOt--}DOt(t,e){const i=new Map,r=[];for(const t of this.qbt.lq().cq()){const e=t.gq();if(e.vq(this.lOt)){const r=i.get(e);Array.isArray(r)?r.push(t):i.set(e,[t])}else r.push(t)}if(r.length>0&&this.wOt.JIt(t,e,this.dOt,{wq:this.qbt,Sq:r}),i.size>0)for(const[r,s]of i){const i=r.bq(this.lOt).cW(),n=[...new Set([...t,...i._q()])];i.JIt(n,e,this.dOt,{wq:r,Sq:s})}}*xOt(t,e){const i=new Map,r=[];for(const t of this.qbt.lq().cq()){const e=t.gq();if(e.vq(this.lOt)){const r=i.get(e);Array.isArray(r)?r.push(t):i.set(e,[t])}else r.push(t)}if(r.length>0&&(yield*this.wOt.ZIt(t,e,this.dOt,{wq:this.qbt,Sq:r})),i.size>0)for(const[r,s]of i){const i=r.bq(this.lOt).cW(),n=[...new Set([...t,...i._q()])];yield*i.ZIt(n,e,this.dOt,{wq:r,Sq:s})}}}}{const z_=self.Ee,U_=[];z_.xAt=class extends z_.Vs{constructor(t,e,i){super();const r=t.oW();this.Get=t,this.A_t=r,this.Fl=t.gY(),this.sMt=e,this.FEt=r.wTt(),this.Qs=i[1],this.Yl=i[2],this.COt=i[3],this.ST=!!i[4],this.ROt=!!i[5],this.LOt=e instanceof z_.oAt,this.E6=i[6],this.kOt=this.Fl.TTt(i[8]),this.GOt=t=>this.NOt(t),this.jOt=()=>this.FOt(),this.BOt=!this.sMt||this.ST||this.ROt,this.xpt=this.COt,this.zOt=-1,this.UOt()&&(this.xpt=this.xpt?1:0),!this.HOt()||this.JT()||this.tAt()||(this.zOt=r.fTt(this)),r.cTt(this)}static WP(t,e,i){return z_.$s(z_.xAt,t,e,i)}tTt(){if(this.HOt()&&!this.JT()&&!this.tAt()&&!this.VOt()){const t=this.A_t.nAt(this);t&&t.EOt(this)}}Dl(){return this.Qs}TTt(){return this.kOt}wK(){return this.sMt}bTt(){return this.wK()}g6(){return!this.wK()}HOt(){return!this.g6()}VOt(){return this.LOt}JT(){return this.ST}tAt(){return this.ROt}Ji(){return 0===this.Yl}nr(){return 1===this.Yl}UOt(){return 2===this.Yl}FAt(){return!1}e9(){return this.E6}pTt(){return this.COt}_q(){return U_}mO(t){!this.HOt()||this.JT()||this.tAt()||this.Oft(this.pTt())}QAt(){return!0}*JTt(t){this.mO(t)}Oft(t){this.Ji()?"number"!=typeof t&&(t=parseFloat(t)):this.nr()?"string"!=typeof t&&(t=t.toString()):this.UOt()&&(t=t?1:0),this.BOt?this.xpt=t:this.FEt.lEt()[this.zOt]=t}NOt(t){if(this.tAt())throw new Error(`assignment to constant event variable '${this.Dl()}'`);this.Oft(t)}$lt(){return this.BOt?this.xpt:this.FEt.lEt()[this.zOt]}FOt(){let t=this.$lt();return this.UOt()&&(t=!!t),t}RTt(){this.xpt=this.COt}PTt(){return{configurable:!1,enumerable:!0,get:this.jOt,set:this.GOt}}}}{const H_=self.Ee,V_=self.assert,W_=[];H_.CAt=class extends H_.Vs{constructor(t,e,i){super();const r=t.oW();this.Get=t,this.A_t=r,this.Fl=t.gY(),this.sMt=e,this.WOt=null,this.$Ot=i[1],this.Ff=!0}static WP(t,e,i){return H_.$s(H_.CAt,t,e,i)}tTt(){this.WOt=this.A_t.Uit(this.$Ot),this.Get.BAt(this);let t=this.wK();for(;t;)t instanceof H_.PAt&&t.GTt()&&t.NMt(this),t=t.wK();this.uIt(),this.Fl.yX()&&this.Get.sAt().children.push(this.WOt.sAt())}wK(){return this.sMt}_q(){return W_}UAt(){return this.WOt}mO(t){const e=!!this.wK(),i=this.Fl.J7();e&&this.A_t.fPt(i),this.WOt.mO(),e&&this.A_t.B3(i)}*JTt(t){const e=!!this.wK(),i=this.Fl.J7();e&&this.A_t.fPt(i),yield*this.WOt.JTt(),e&&this.A_t.B3(i)}QAt(){return!1}HAt(){return this.Ff}uIt(){let t=this.wK();for(;t;){if(t instanceof H_.PAt&&t.GTt()&&!t.XPt())return void(this.Ff=!1);t=t.wK()}this.Ff=!0}}}{let $_=function(t,e){return t>=e?t%e:t<0?(t<=-e&&(t%=e),t<0&&(t+=e),t):t};WrapIndex=$_;const Y_=self.Ee,J_=self.assert;Y_.YOt=class extends Y_.Vs{constructor(t){super(),this.TE=t,this.Fl=t.gY()}tTt(){}static JOt(t,e){const i=e[0],r=[K_,Z_,X_,tE,q_,Q_];return Y_.$s(r[i],t,e)}};class q_ extends Y_.YOt{constructor(t,e){super(t),this.qOt=this.Fl.s8(),this.eOt=this.Fl.tOt(e[1]),this.eOt!==Y_.cY.uY.Jpt.random&&this.eOt!==Y_.cY.uY.Jpt.QOt||this.TE.ZOt()}XOt(){return this.qOt.KOt(this.eOt,this.qOt)}}class Q_ extends Y_.YOt{constructor(t,e){super(t),this.tDt=null,this.aOt=e[1],this.TE.ZOt()}tTt(){const t=this.Fl.oW();this.tDt=t.aW(this.aOt),this.aOt=null;const e=this.TE.cW(),i=this.tDt.cW();this.eDt=[...new Set([...e.lW(),...i.lW()])],this.eDt=t.lTt(this.eDt)}XOt(){const t=this.tDt;if(t.Dc()){const e=t.cW();return Y_.PAt.prototype.dW.bind(e,this.eDt,t.mW(),t.yW(),t.hW(),null)}{const e=t.hW();return()=>e}}}class Z_ extends Y_.YOt{constructor(t,e){super(t),this.qbt=this.Fl.P7(e[1]),this.eOt=this.Fl.tOt(e[2]),this.iDt=!!e[3],this.r_t=this.Fl.oW().wW(),this.TE.rDt(this.qbt)}XOt(){return this.qbt.KJ().KOt(this.eOt,this.qbt.QJ().y0())}sDt(...t){const e=this.qbt,i=e.lq().l_t(),r=i.length;if(0===r)return this.iDt?"":0;const s=$_(this.TE.nDt(),r);return this.r_t.x3().K_t(e),this.eOt.apply(i[s].y0(),t)}oDt(t,...e){const i=this.qbt,r=i.cq(),s=r.length;if(0===s||"number"!=typeof t)return this.iDt?"":0;const n=$_(t,s);return this.r_t.x3().K_t(i),this.eOt.apply(r[n].y0(),e)}}class X_ extends Y_.YOt{constructor(t,e){super(t),this.qbt=this.Fl.P7(e[1]),this.aDt=e[3],this.iDt=!!e[2],this.TE.rDt(this.qbt)}hDt(){const t=this.qbt.lq().l_t(),e=t.length;return 0===e?this.iDt?"":0:t[$_(this.TE.nDt(),e)].uDt(this.aDt)}cDt(){const t=this.qbt,e=t.lq().l_t(),i=e.length;if(0===i)return this.iDt?"":0;const r=e[$_(this.TE.nDt(),i)],s=r.gq().lDt(t.fDt());return r.uDt(this.aDt+s)}pDt(t){const e=this.qbt,i=e.cq(),r=i.length;if(0===r||"number"!=typeof t)return this.iDt?"":0;const s=i[$_(t,r)];let n=0;return e.mq()&&(n=s.gq().lDt(e.fDt())),s.uDt(this.aDt+n)}}class K_ extends Y_.YOt{constructor(t,e){super(t),this.qbt=this.Fl.P7(e[1]),this.dDt=this.qbt.Kft(e[2]),this.mDt=this.qbt.vct(e[2]),this.eOt=this.Fl.tOt(e[3]),this.iDt=!!e[4],this.r_t=this.Fl.oW().wW(),this.TE.rDt(this.qbt)}yDt(...t){const e=this.qbt,i=e.lq().l_t(),r=i.length;if(0===r)return this.iDt?"":0;const s=$_(this.TE.nDt(),r);this.r_t.x3().K_t(e);const n=i[s];let o=0;return e.mq()&&(o=n.gq().gDt(e.fDt())),this.eOt.apply(n.Xft()[this.mDt+o].y0(),t)}vDt(t,...e){const i=this.qbt,r=i.cq(),s=r.length;if(0===s||"number"!=typeof t)return this.iDt?"":0;const n=$_(t,s);this.r_t.x3().K_t(i);const o=r[n];let a=0;return i.mq()&&(a=o.gq().gDt(i.fDt())),this.eOt.apply(o.Xft()[this.mDt+a].y0(),e)}}class tE extends Y_.YOt{constructor(t,e){super(t),this.wDt=null,this.SDt=e[1]}tTt(){this.wDt=this.Fl.oW().ATt(this.SDt)}bDt(){return this.wDt}}}{let eE=function(t){const e=self._Dt[t];if(!e)throw new Error("invalid expression number");return e};GetExpressionFunc=eE;const iE=self.Ee,rE=self.assert;iE.EDt=class extends iE.Vs{constructor(t,e,i){super(),this.TE=t,this.Uv=i,this.Yl=e,this.Ue=null,this.TDt=!1,this.ROt=!1}static WP(t,e,i){const r=e[0],s=[sE,nE,fE,aE,uE,oE,cE,sE,aE,aE,pE,dE,fE,yE,nE,lE,hE,mE,gE,vE,wE,SE];return iE.$s(s[r],t,r,i,e)}tTt(){}ZOt(){this.TDt=!0}rDt(t){this.TDt||t&&(t.KJ().MJ()||(this.TDt=!0))}PDt(){return this.TDt}PV(){return this.Uv}gY(){return this.TE.gY()}cW(){return this.TE.cW()}tAt(){return this.ROt}ADt(){return 4===this.Yl}};class sE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.MDt=0;const s=r[1];this.IDt=s[0],this.ODt=[],this.DDt=null;for(let t=1,e=s.length;t<e;++t)this.ODt.push(iE.YOt.JOt(this,s[t]));this.ODt.length?this.Ue=this.xDt:(this.Ue=eE(this.IDt),this.ROt=!0)}CDt(t){if(t<0||t>=this.ODt.length)throw new RangeError("invalid numbered node");return this.ODt[t]}tTt(){for(const t of this.ODt)t.tTt();const t=eE(this.IDt);this.ODt.length?this.DDt=t(this):this.DDt=t}nDt(){return this.MDt}xDt(t){return this.MDt=t,this.DDt()}}class nE extends sE{constructor(t,e,i,r){super(t,e,i,r),this.Ue=this.RDt,14===e&&(this.cW().zMt(),this.TE instanceof iE.kMt&&this.cW().tIt())}RDt(t){this.MDt=t;const e=this.DDt();return"string"==typeof e?e:""}LDt(){return eE(this.IDt)()}}class oE extends sE{constructor(t,e,i,r){super(t,e,i,r),t.kDt()>=2?this.Ue=this.sQ:this.Ue=this.F$,this.ROt=!1}F$(t){this.MDt=t;const e=this.DDt();return this.gY().k$().F$(e)}sQ(t){const e=this.F$(t);return e?e.sQ():null}}class aE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.GDt=r[1],this.Ue=this.NDt,this.ROt=!0}NDt(){return this.GDt}}class hE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.jDt=r[1],this.Ue=this.FDt,this.ROt=!0}FDt(){return this.jDt}}class uE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.qbt=this.gY().P7(r[1]),t.kDt()>=2?this.Ue=this.YJ:this.Ue=this.gq;const s=this.cW();s.LMt(this.qbt),this.TE instanceof iE.kMt?s.tIt():s.wK()&&s.wK().tIt(),this.ROt=!0}gq(){return this.qbt}YJ(){return this.qbt?this.qbt.YJ():null}}class cE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.w6=this.gY().y$().Vrt(r[1]),t.kDt()>=2?this.Ue=this.d$:this.Ue=this.g$,this.ROt=!0}g$(){return this.w6}d$(){return this.w6?this.w6.d$():null}}class lE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.qnt=this.gY().tht().rnt(r[1]),t.kDt()>=2?this.Ue=this.kut:this.Ue=this.rct,this.ROt=!0}rct(){return this.qnt}kut(){return this.qnt?this.qnt.kut():null}}class fE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.BDt=r[1],this.Ue=this.zDt,this.ROt=!0}zDt(){return this.BDt}}class pE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.UDt=r[1];const s=this.TE.gq();this.TE instanceof iE.RMt&&this.TE.JT()?(this.Ue=this.HDt,this.ROt=!0):s&&s.mq()?(this.Ue=this.VDt,this.ZOt()):(this.Ue=this.HDt,this.ROt=!0)}HDt(){return this.UDt}VDt(t){t=t||0;const e=this.TE.gq(),i=e.lq(),r=i.cq();let s=null;if(r.length)s=r[t%r.length].gq();else if(i.u_t()){const e=i.c_t();s=e[t%e.length].gq()}else{if(!(e.Pq()>0))return 0;{const i=e.cq();s=i[t%i.length].gq()}}return this.UDt+s.lDt(e.fDt())}}class dE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.SDt=r[1],this.wDt=null,t.kDt()>=2?this.Ue=this.WDt:this.Ue=this.$Dt,this.ROt=!0}tTt(){this.wDt=this.gY().oW().ATt(this.SDt)}$Dt(){return this.wDt}WDt(){return null}}class mE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.YDt=r[1],this.tDt=null,t.kDt()>=2?this.Ue=this.JDt:this.Ue=this.qDt,this.ROt=!0}tTt(){this.tDt=this.gY().oW().aW(this.YDt),this.YDt=null}qDt(){return this.tDt}JDt(){return null}}class yE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.QDt=[],this.ZDt=[],this.ROt=!0;for(let t=1,e=r.length;t<e;++t){const e=iE.EDt.WP(this.TE,r[t],0);this.QDt.push(e),this.ZDt.push(0),e.tAt()||(this.ROt=!1)}this.Ue=this.XDt}tTt(){for(const t of this.QDt)t.tTt()}XDt(){const t=this.QDt,e=this.ZDt;for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(0);return e}}class gE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.KDt=r[1],this.Ue=this.Ift,this.ROt=!0}Ift(){return this.KDt}}class vE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.txt=r[1],this.Ue=this.ixt,this.ROt=!0}ixt(){return this.txt}}class wE extends sE{constructor(t,e,i,r){super(t,e,i,r),this.Ue=this.BZ,this.ROt=!1}BZ(){return this.DDt()}}class SE extends iE.EDt{constructor(t,e,i,r){super(t,e,i),this.lwt=this.gY().Owt().nwt(r[1]),this.Ue=this.rxt,this.ROt=!0}rxt(){return this.lwt.Dl()}}}{let bE=function(t,e){for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(0)};EvalParams=bE;const _E=self.Ee,EE=self.assert,TE=[],PE=function(){};_E.RMt=class extends _E.Vs{constructor(t,e,i){if(super(),this.wOt=t,this.Fl=t.gY(),this.Uv=i,this.eOt=this.Fl.tOt(e[1]),this.sxt=e[3]>0,this.nxt=2===e[3],this.oxt=!!e[4],this.axt=!!e[5],this.ST=!!e[6],this.E6=e[7],this.hxt=this.wOt.T_t(),this.qbt=null,this.dDt=null,this.mDt=-1,this.qOt=null,this.mO=PE,this.JTt=PE,this.Ne=[],this.uxt=[],this.cxt=!1,this.lxt=null,this.fxt=null,this.PMt=this.Fl.yX()?{AMt:e[8][0],pxt:e[8][1]}:null,-1===e[0]?this.qOt=this.Fl.s8():(this.qbt=this.Fl.P7(e[0]),e[2]&&(this.dDt=this.qbt.Kft(e[2]),this.mDt=this.qbt.vct(e[2])),this.wOt.wK()&&this.wOt.wK().tIt()),10===e.length){let t=e[9];for(let e of t)this.Ne.push(_E.EDt.WP(this,e,this.Ne.length)),this.uxt.push(0)}0===this.Ne.length&&(this.Ne=TE,this.uxt=TE),this.wOt.oW().nTt(this)}static WP(t,e,i){return _E.$s(_E.RMt,t,e,i)}tTt(){for(const t of this.Ne)t.tTt(),t.PDt()&&(this.cxt=!0);this.nxt?(this.mO=this.dxt,this.JTt=this.mxt):this.qOt?(this.yxt(),this.JTt=this.gxt):this.qbt.KJ().MJ()?(this.vxt(),this.JTt=this.wxt):this.ST?(this.mO=this.Sxt,this.JTt=this.bxt):(this.mO=this._xt,this.JTt=this.Ext)}yxt(){const t=this.qOt,e=this.qOt;this.Txt(t,e,this.Pxt)}vxt(){const t=this.qbt.KJ(),e=this.qbt.QJ().y0();this.Txt(t,e,this.Axt)}Txt(t,e,i){const r=this.eOt,s=this.axt,n=this.Ne;if(0===n.length){const i=t.KOt(r,e);this.mO=s?function(){return _E.xor(i(),s)}:i}else if(1===n.length){const i=n[0];if(!s&&i.tAt())this.mO=t.Mxt(r,e,i.Ue(0));else{const n=t.KOt(r,e);this.mO=function(){return _E.xor(n(i.Ue(0)),s)}}}else if(2===n.length){const i=n[0],o=n[1];if(!s&&i.tAt()&&o.tAt())this.mO=t.Ixt(r,e,i.Ue(0),o.Ue(0));else{const n=t.KOt(r,e);this.mO=function(){return _E.xor(n(i.Ue(0),o.Ue(0)),s)}}}else if(3===n.length){const i=n[0],o=n[1],a=n[2];if(!s&&i.tAt()&&o.tAt()&&a.tAt())this.mO=t.Oxt(r,e,i.Ue(0),o.Ue(0),a.Ue(0));else{const n=t.KOt(r,e);this.mO=function(){return _E.xor(n(i.Ue(0),o.Ue(0),a.Ue(0)),s)}}}else this.mO=i}e9(){return this.E6}LAt(){return this.eOt}gq(){return this.qbt}A0(){return this.dDt}Dxt(){return this.dDt?this.dDt.E0():this.qbt?this.qbt.KJ():null}kDt(){const t=this.Dxt();return t?t.xxt():1}cW(){return this.wOt}gY(){return this.Fl}PV(){return this.Uv}vIt(){return this.PV()}MAt(){return this.sxt}kAt(){return this.nxt}Cxt(){return this.axt}B0(){return this.oxt}JT(){return this.ST}Rxt(){return this.PMt.AMt}Lxt(){return!!this.qOt}pIt(){return this.Lxt()||this.qbt.KJ().MJ()}dIt(){for(const t of this.Ne)if(t.ADt())return t.gq();return null}kxt(t){this.PMt.AMt=!!t,this.wOt.ZMt()}Gxt(){return this.PMt.pxt}QAt(){return!this.Rxt()&&!this.Fl.MIt()&&!this.Gxt()}Nxt(){return this.lxt||(this.lxt=new Map),this.lxt}jxt(){return this.fxt||(this.fxt=new Map),this.fxt}Pxt(){const t=this.uxt;return bE(this.Ne,t),_E.xor(this.eOt.apply(this.qOt,t),this.axt)}*gxt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;bE(this.Ne,t);let e=this.eOt.apply(this.qOt,t);return _E.wa(e)&&(e=yield*e),_E.xor(e,this.axt)}return this.mO()}Axt(){const t=this.uxt;bE(this.Ne,t);const e=this.qbt.QJ().y0();return _E.xor(this.eOt.apply(e,t),this.axt)}*wxt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;bE(this.Ne,t);const e=this.qbt.QJ().y0();let i=this.eOt.apply(e,t);return _E.wa(i)&&(i=yield*i),_E.xor(i,this.axt)}return this.mO()}dxt(){return!0}*mxt(){return(this.Rxt()||this.Fl.MIt())&&(yield this),!0}Fxt(){return this.dDt?this.dDt.E0().xxt()>=2?this.dDt.P0():this.dDt:this.qbt.KJ().xxt()>=2?this.qbt.YJ():this.qbt}Sxt(){const t=this.uxt;bE(this.Ne,t);const e=this.eOt.apply(this.Fxt(),t);return this.qbt.$It(),e}*bxt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;bE(this.Ne,t);let e=this.eOt.apply(this.Fxt(),t);return _E.wa(e)&&(e=yield*e),this.qbt.$It(),e}return this.mO()}_xt(){const t=this.Ne,e=this.uxt,i=this.qbt.lq();for(let i=0,r=t.length;i<r;++i){const r=t[i];r.PDt()||(e[i]=r.Ue(0))}return i.a_t()?this.Bxt(i):this.zxt(i)}*Ext(){return(this.Rxt()||this.Fl.MIt())&&(yield this),this._xt()}Uxt(t){const e=this.Ne,i=this.uxt;for(let r=0,s=e.length;r<s;++r){const s=e[r];s.PDt()&&(i[r]=s.Ue(t))}}Bxt(t){const e=this.qbt,i=e.mq(),r=e.fDt(),s=this.mDt,n=s>=0,o=e.cq(),a=this.cxt,h=this.uxt,u=this.eOt,c=this.axt,l=this.hxt&&!this.sxt;t.o_t();for(let e=0,f=o.length;e<f;++e){const f=o[e];let p;if(a&&this.Uxt(e),n){const t=i?f.gq().gDt(r):0;p=u.apply(f.Xft()[s+t].y0(),h)}else p=u.apply(f.y0(),h);_E.xor(p,c)?t.f_t(f):l&&t.p_t(f)}return e.Hxt(!0),t.d_t(!1),e.$It(),t.h_t()}zxt(t){const e=this.qbt,i=e.mq(),r=e.fDt(),s=e.LZ(),n=this.mDt,o=n>=0,a=this.cxt,h=this.uxt,u=this.eOt,c=this.axt,l=this.hxt&&!this.sxt,f=t.m_t(),p=t.y_t(),d=l&&!this.wOt.fIt(this),m=d?p:f;let y=0,g=!1;for(let t=0,e=m.length;t<e;++t){const e=m[t];let v;if(a&&this.Uxt(t),o){const t=i?e.gq().gDt(r):0;v=u.apply(e.Xft()[n+t].y0(),h)}else v=u.apply(e.y0(),h);_E.xor(v,c)?(g=!0,d?(f.push(e),s&&e.Vxt()):(m[y]=e,s&&e.Wxt(y),++y)):d?(m[y]=e,s&&e.$xt(y),++y):l&&(p.push(e),s&&e.Yxt())}_E.wo(m,y),s&&e.Jxt(d,y);const v=g;return d&&!g&&(g=this.qxt(f)),e.Hxt(v||l),l?g:t.h_t()}qxt(t){const e=this.qbt,i=e.mq(),r=e.fDt(),s=this.cxt,n=this.mDt,o=n>=0,a=this.uxt,h=this.eOt,u=this.axt;for(let e=0,c=t.length;e<c;++e){const c=t[e];let l;if(s&&this.Uxt(e),o){const t=i?c.gq().gDt(r):0;l=h.apply(c.Xft()[n+t].y0(),a)}else l=h.apply(c.y0(),a);if(_E.xor(l,u))return!0}return!1}Qxt(t,e){return this.Ne[t].Ue(e)}GAt(){const t=this.Ne;if(!t.length)throw new Error("no parameters");return t[0].LDt()}_et(){if(!this.lxt||!this.lxt.size)return null;const t={};for(const[e,i]of this.lxt.entries()){let r=i;"collmemory"===e&&(r=[...i.entries()].map(t=>[t[0].GZ(),t[1].GZ(),t[2]])),t[e]=r}return{ex:t}}Eet(t){if(this.lxt&&(this.lxt.clear(),this.lxt=null),!t)return;const e=this.Fl,i=t.ex;if(i){const t=this.Nxt();t.clear();for(const[r,s]of Object.entries(i)){let i=s;"collmemory"===r&&(i=_E.$s(_E.xc,s.map(t=>[e.C$(t[0]),e.C$(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(r,i)}}}}}{let AE=function(t,e){for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(0)};EvalParams=AE;const ME=self.Ee,IE=self.assert,OE=[],DE=function(){},xE=function*(){},CE=1,RE=2,LE=4,kE=8,GE=16;ME.kMt=class extends ME.Vs{constructor(t,e,i){super(),this.wOt=t;const r=t.gY();this.Fl=r,this.Uv=i,this.E6=e.length>=4?e[3]:-1,this.Zxt=e.length>=5?255&e[4]:0,this.$k=e.length>=5?e[4]>>8:0,this.eOt=null,this.qbt=null,this.dDt=null,this.mDt=-1,this.qOt=null,this.Xxt="",this.Kxt=null,this.tCt=null,this.mO=DE,this.JTt=DE,this.Ne=[],this.uxt=[],this.cxt=!1;const s=-3===e[0],n=s?e[2]:e[5];if(this.PMt=r.yX()||s?{AMt:n[0],pxt:n[1],index:n[2]}:null,-1===e[0])this.qOt=r.s8(),this.eOt=r.tOt(e[1]);else if(-2===e[0])this.Xxt=e[1];else if(s){const t=r.tOt(e[1]);this.eOt=t,this.mO=this.eCt,this.JTt=this.iCt,this.$k|=8}else this.qbt=r.P7(e[0]),4&this.$k?(this.Xxt=e[1],this.Kxt=r.P7(e[2])):(e[2]&&(this.dDt=this.qbt.Kft(e[2]),this.mDt=this.qbt.vct(e[2])),this.eOt=r.tOt(e[1]));if(7===e.length){const t=e[6];for(const e of t)this.Ne.push(ME.EDt.WP(this,e,this.Ne.length)),this.uxt.push(0)}0===this.Ne.length&&(this.Ne=OE,this.uxt=OE),this.rCt()&&(this.wOt.zMt(),this.wOt.tIt()),this.wOt.oW().oTt(this)}static WP(t,e,i){return ME.$s(ME.kMt,t,e,i)}tTt(){for(const t of this.Ne)t.tTt(),t.PDt()&&(this.cxt=!0);if(this.qOt)this.yxt(),this.JTt=this.gxt;else if(this.Xxt)4&this.$k?this.sCt():this.nCt(),this.Xxt="",this.Kxt=null;else if(this.mO===this.eCt){const t=this.eOt,e=this.Fl.oW().ETt(this.wOt);this.eOt=t.bind(null,this.Fl.TJ(),e)}else this.dDt?this.xIt()?(this.mO=this.oCt,this.JTt=this.aCt):(this.mO=this.hCt,this.JTt=this.uCt):this.qbt.KJ().MJ()?(this.vxt(),this.JTt=this.wxt):this.JT()?(this.mO=this.cCt,this.JTt=this.lCt):this.xIt()?(this.mO=this.fCt,this.JTt=this.pCt):this.dCt()?(this.mO=this.mCt,this.JTt=this.yCt):this.Ne.length?this.Ne.every(t=>t.PDt())?(this.mO=this.gCt,this.JTt=this.vCt):this.cxt?(this.mO=this.wCt,this.JTt=this.SCt):this.Ne.every(t=>t.tAt())?(AE(this.Ne,this.uxt),this.mO=this.bCt,this.JTt=this._Ct):(this.mO=this.ECt,this.JTt=this.TCt):(this.mO=this.bCt,this.JTt=this._Ct)}yxt(){const t=this.qOt,e=this.qOt;this.Txt(t,e,this.Pxt)}vxt(){const t=this.qbt.KJ(),e=this.qbt.QJ().y0();this.Txt(t,e,this.Axt)}nCt(){const t=this.wOt.oW(),e=t.aW(this.Xxt);if(e.Dc()){const i=!!(2&this.$k);this.tCt=e.cW();let r=[...new Set([...this.wOt.lW(),...this.tCt.lW()])];r=t.lTt(r);const s=!e.mW()&&this.PCt()?{YIt:!0}:null;if(this.mO=ME.PAt.prototype.JIt.bind(this.tCt,r,this.Ne,i,s),this.Fl.yX()){const t=this;this.JTt=function*(){return(t.Rxt()||t.Fl.MIt())&&(yield t),yield*t.tCt.ZIt(r,t.Ne,i,s)}}else this.JTt=xE}else this.mO=DE,this.JTt=xE}sCt(){const t=this.wOt.oW(),e=t.pq(this.Kxt,this.Xxt);if(e.Dc()){const i=!!(2&this.$k);this.tCt=e.cW();let r=[...new Set([...this.wOt.lW(),...this.tCt.lW(),this.qbt,e.gq()])];r=t.lTt(r);const s=!this.qbt.mq()&&!e.gq().mq(),n=!this.qbt.mq()&&e.gq().mq(),o=this.qbt.mq();let a=null;if(!e.mW()&&this.PCt()&&(a=a||{},a.YIt=!0),!n&&i||(a=a||{},a.VIt=this.qbt,a.WIt=e.gq()),s||n||o&&!e.yq()?this.mO=ME.PAt.prototype.JIt.bind(this.tCt,r,this.Ne,i,a):o&&(this.mO=ME.oAt.prototype.DOt.bind(e,r,this.Ne)),this.Fl.yX()){const t=this;s||n||o&&!e.yq()?this.JTt=function*(){return(t.Rxt()||t.Fl.MIt())&&(yield t),yield*t.tCt.ZIt(r,t.Ne,i,a)}:o&&(this.JTt=function*(){return(t.Rxt()||t.Fl.MIt())&&(yield t),yield*e.xOt(r,t.Ne)})}else this.JTt=xE}else this.mO=DE,this.JTt=xE}Txt(t,e,i){const r=this.eOt,s=this.Ne;if(0===s.length)this.mO=t.KOt(r,e);else if(1===s.length){const i=s[0];if(i.tAt())this.mO=t.Mxt(r,e,i.Ue(0));else{const s=t.KOt(r,e);this.mO=function(){return s(i.Ue(0))}}}else if(2===s.length){const i=s[0],n=s[1];if(i.tAt()&&n.tAt())this.mO=t.Ixt(r,e,i.Ue(0),n.Ue(0));else{const s=t.KOt(r,e);this.mO=function(){return s(i.Ue(0),n.Ue(0))}}}else if(3===s.length){const i=s[0],n=s[1],o=s[2];if(i.tAt()&&n.tAt()&&o.tAt())this.mO=t.Oxt(r,e,i.Ue(0),n.Ue(0),o.Ue(0));else{const s=t.KOt(r,e);this.mO=function(){return s(i.Ue(0),n.Ue(0),o.Ue(0))}}}else this.mO=i}e9(){return this.E6}xIt(){return!!(8&this.$k)}DIt(){return!!(16&this.$k)}dCt(){return 1===this.Zxt}JT(){return 2===this.Zxt}rCt(){return!!(1&this.$k)}VMt(){return this.xIt()||this.DIt()}gq(){return this.qbt}Dxt(){return this.dDt?this.dDt.E0():this.qbt?this.qbt.KJ():null}kDt(){const t=this.Dxt();return t?t.xxt():1}cW(){return this.wOt}PCt(){let t=this.wOt;do{if(t instanceof ME.oAt&&t.mW())return!0;t=t.bTt()}while(t);return!1}gY(){return this.Fl}PV(){return this.Uv}vIt(){return this.PMt.index}Rxt(){return this.PMt.AMt}kxt(t){this.PMt.AMt=!!t,this.wOt.ZMt()}Gxt(){return this.PMt.pxt}QAt(){return!this.Rxt()&&!this.Fl.MIt()&&!this.Gxt()}Pxt(){const t=this.uxt;return AE(this.Ne,t),this.eOt.apply(this.qOt,t)}*gxt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;return AE(this.Ne,t),yield*this.eOt.apply(this.qOt,t)}return this.mO()}Axt(){const t=this.uxt;return AE(this.Ne,t),this.eOt.apply(this.qbt.QJ().y0(),t)}*wxt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;return AE(this.Ne,t),yield*this.eOt.apply(this.qbt.QJ().y0(),t)}return this.mO()}bCt(){const t=this.uxt,e=this.qbt.lq().cq();for(let i=0,r=e.length;i<r;++i)this.eOt.apply(e[i].y0(),t)}*_Ct(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt,e=this.qbt.lq().cq();for(let i=0,r=e.length;i<r;++i)yield*this.eOt.apply(e[i].y0(),t)}else this.bCt()}ECt(){const t=this.uxt;AE(this.Ne,t);const e=this.qbt.lq().cq();for(let i=0,r=e.length;i<r;++i)this.eOt.apply(e[i].y0(),t)}*TCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;AE(this.Ne,t);const e=this.qbt.lq().cq();for(let i=0,r=e.length;i<r;++i)yield*this.eOt.apply(e[i].y0(),t)}else this.ECt()}gCt(){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq();for(let s=0,n=r.length;s<n;++s){const n=r[s];for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(s);i.apply(n.y0(),e)}}*vCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq();for(let s=0,n=r.length;s<n;++s){const n=r[s];for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(s);yield*i.apply(n.y0(),e)}}else this.gCt()}wCt(){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq();for(let i=0,r=t.length;i<r;++i){const r=t[i];r.PDt()||(e[i]=r.Ue(0))}for(let s=0,n=r.length;s<n;++s){const n=r[s];for(let i=0,r=t.length;i<r;++i){const r=t[i];r.PDt()&&(e[i]=r.Ue(s))}i.apply(n.y0(),e)}}*SCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq();for(let i=0,r=t.length;i<r;++i){const r=t[i];r.PDt()||(e[i]=r.Ue(0))}for(let s=0,n=r.length;s<n;++s){const n=r[s];for(let i=0,r=t.length;i<r;++i){const r=t[i];r.PDt()&&(e[i]=r.Ue(s))}yield*i.apply(n.y0(),e)}}else this.wCt()}mCt(){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt,s=r.ACt(),n=r.lq().cq();s.MCt(i);for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let i=0,s=t.length;i<s;++i)e[i]=t[i].Ue(r);i.apply(s.y0(),e)}s.ICt(i)}*yCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt,s=r.ACt(),n=r.lq().cq();s.MCt(i);for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let i=0,s=t.length;i<s;++i)e[i]=t[i].Ue(r);yield*i.apply(s.y0(),e)}s.ICt(i)}else this.mCt()}OCt(){return this.dDt?this.dDt.E0().xxt()>=2?this.dDt.P0():this.dDt:this.qbt.KJ().xxt()>=2?this.qbt.YJ():this.qbt}cCt(){const t=this.uxt;return AE(this.Ne,t),this.eOt.apply(this.OCt(),t)}*lCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.uxt;AE(this.Ne,t);let e=this.eOt.apply(this.OCt(),t);return ME.wa(e)&&(e=yield*e),e}return this.cCt()}hCt(){const t=this.qbt,e=t.mq(),i=t.fDt(),r=this.Ne,s=this.cxt,n=this.uxt,o=this.eOt,a=this.mDt,h=t.lq().cq();for(let t=0,e=r.length;t<e;++t){const e=r[t];e.PDt()||(n[t]=e.Ue(0))}for(let t=0,u=h.length;t<u;++t){const u=h[t];if(s)for(let e=0,i=r.length;e<i;++e){const i=r[e];i.PDt()&&(n[e]=i.Ue(t))}const c=e?u.gq().gDt(i):0;o.apply(u.Xft()[a+c].y0(),n)}}*uCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.qbt,e=t.mq(),i=t.fDt(),r=this.Ne,s=this.cxt,n=this.uxt,o=this.eOt,a=this.mDt,h=t.lq().cq();for(let t=0,e=r.length;t<e;++t){const e=r[t];e.PDt()||(n[t]=e.Ue(0))}for(let t=0,u=h.length;t<u;++t){const u=h[t];if(s)for(let e=0,i=r.length;e<i;++e){const i=r[e];i.PDt()&&(n[e]=i.Ue(t))}const c=e?u.gq().gDt(i):0;yield*o.apply(u.Xft()[a+c].y0(),n)}}else this.hCt()}fCt(){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq(),s=[];for(let n=0,o=r.length;n<o;++n){const o=r[n];for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(n);s.push(i.apply(o.y0(),e))}return Promise.all(s)}*pCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.Ne,e=this.uxt,i=this.eOt,r=this.qbt.lq().cq(),s=[];for(let n=0,o=r.length;n<o;++n){const o=r[n];for(let i=0,r=t.length;i<r;++i)e[i]=t[i].Ue(n);s.push(yield*i.apply(o.y0(),e))}return Promise.all(s)}return this.fCt()}oCt(){const t=this.qbt,e=t.mq(),i=t.fDt(),r=this.Ne,s=this.uxt,n=this.eOt,o=this.mDt,a=t.lq().cq(),h=[];for(let t=0,u=a.length;t<u;++t){const u=a[t];for(let e=0,i=r.length;e<i;++e)s[e]=r[e].Ue(t);const c=e?u.gq().gDt(i):0;h.push(n.apply(u.Xft()[o+c].y0(),s))}return Promise.all(h)}*aCt(){if((this.Rxt()||this.Fl.MIt())&&(yield this),this.Gxt()){const t=this.qbt,e=t.mq(),i=t.fDt(),r=this.Ne,s=this.uxt,n=this.eOt,o=this.mDt,a=t.lq().cq(),h=[];for(let t=0,u=a.length;t<u;++t){const u=a[t];for(let e=0,i=r.length;e<i;++e)s[e]=r[e].Ue(t);const c=e?u.gq().gDt(i):0;h.push(yield*n.apply(u.Xft()[o+c].y0(),s))}return Promise.all(h)}return this.oCt()}async eCt(){try{await this.eOt()}catch(t){console.error(`Unhandled exception running script %c${this.wOt.yit().Dl()}, event ${this.wOt.rIt()}, action ${this.vIt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.gX&&self.gX.rOt(this),ME.RAt.sOt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),ME.RAt.nOt())}}*iCt(){return(this.Rxt()||this.Fl.MIt())&&(yield this),this.eCt()}_et(){return this.lxt&&this.lxt.size?{ex:ME.ya(this.lxt)}:null}Eet(t){if(this.lxt&&(this.lxt.clear(),this.lxt=null),!t)return;const e=t.ex;e&&(this.lxt=ME.ga(e))}}}{let NE=function(t){return t instanceof sT?rT.cQ(t):t.J1()},jE=function(t){return NE(t).N$()},FE=function(t){return rT.cQ(t)},BE=function(t){return FE(t).N$()},zE=function(t){return t instanceof nT?rT.cQ(t):t},UE=function(t){return t instanceof oT?rT.cQ(t):t},HE=function(t,e,i,r){e.GZ()<i.GZ()?t.Set(e,i,r):t.Set(i,e,r)},VE=function(t,e,i){e.GZ()<i.GZ()?t.kc(e,i):t.kc(i,e)},WE=function(t,e){t.Gc(e)},$E=function(t,e,i){return e.GZ()<i.GZ()?t.Ue(e,i):t.Ue(i,e)},YE=function(t,e,i,r){if(!e)return!1;const s=0!==i||0!==r,n=t.N$(),o=rT.CV(),a=rT.mTt(),h=a.cW().T_t(),u=a.gq(),c=a.Cxt(),l=e.lq(),f=u!==e;let p;lT=e,cT=f&&!c,fT=!1;let d=0,m=0,y=!1;l.a_t()?(aT.v(n.KX()),aT.offset(i,r),o.DCt(n.F$(),e,aT,uT),p=uT):h?rT.xCt()&&!l.y_t().length&&l.m_t().length?p=l.m_t():(p=l.y_t(),fT=!0):p=l.m_t(),s&&(d=n.rE(),m=n.oE(),n.BX(i,r),n.NX());for(const e of p)if(o.FY(t,e)){if(y=!0,c)break;f&&pT.add(e)}return s&&(n.jX(d,m),n.NX()),XE.So(uT),y},JE=function(t){const e=rT.fW().T_t(),i=lT.lq(),r=i.m_t(),s=i.y_t();i.a_t()?(i.w_t(pT),e&&(XE.So(s),i.S_t(pT,lT.cq()))):e?fT?i.b_t(pT):(i.S_t(pT,r),i.w_t(pT)):i.w_t(pT),lT.$It()},qE=function(t,e){cT&&(e&&JE(t),pT.clear(),lT=null,cT=!1)},QE=function(t,e){const i=rT.C$(e);if(!i)return!1;const r=t.lq();if(!r.a_t()&&!r.m_t().includes(i))return!1;if(t.mq()){if(i.gq().CCt(t))return r.E_t(i),t.$It(),!0}else if(i.gq()===t)return r.E_t(i),t.$It(),!0;return!1},ZE=function(t,e){const i=t.lq();if(i.a_t()){i.d_t(!1),i.o_t();const r=t.cq();for(let t=0,s=r.length;t<s;++t){const s=r[t];s.GZ()===e?i.p_t(s):i.f_t(s)}return t.$It(),!!i.m_t().length}{const r=i.m_t();let s=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[s]=n,n.GZ()===e?i.p_t(n):++s}return XE.wo(r,s),t.$It(),!!r.length}};GetInst=NE,GetWorldInfo=jE,GetInst_SDKv2=FE,GetWorldInfo_SDKv2=BE,GetObjectClass=zE,GetLayer=UE,CollMemory_Add=HE,CollMemory_Remove=VE,CollMemory_RemoveInstance=WE,CollMemory_Get=$E,DoOverlapCondition=YE,FinishCollisionConditionPicking=JE,FinishCollisionCondition=qE,PickByUID_Normal=QE,PickByUID_Inverted=ZE;const XE=self.Ee,KE=new XE.ba,tT={},eT={},iT={};let rT=null;XE.RCt=function(t){rT=t};const sT=self.PZ,nT=self.ZJ,oT=self.uQ;eT.LCt=function(t,e){return XE.compare(this.N$().rE(),t,e)},iT.LCt=function(t,e){return XE.compare(this.x,t,e)},eT.kCt=function(t,e){return XE.compare(this.N$().oE(),t,e)},iT.kCt=function(t,e){return XE.compare(this.y,t,e)},eT.GCt=function(){return this.N$().rK()},iT.GCt=function(){return this.iK()},tT.NCt=function(){const t=jE(this),e=t.g$(),i=t.KX();return i.eu()<0||i.iu()<0||i.Kh()>e.Eg()||i.tu()>e.Pg()},tT.jCt=function(t,e,i){const r=zE(this).lq(),s=r.cq();if(!s.length)return!1;let n=s[0],o=n.N$(),a=n,h=XE.an(o.rE(),o.oE(),e,i);for(let r=1,u=s.length;r<u;++r){n=s[r],o=n.N$();const u=XE.an(o.rE(),o.oE(),e,i);(0===t&&u<h||1===t&&u>h)&&(h=u,a=n)}return r.E_t(a),!0},eT.sE=function(t){const e=this.N$();e.rE()!==t&&(e.sE(t),e.NX())},iT.sE=function(t){this.x=+t},eT.aE=function(t){const e=this.N$();e.oE()!==t&&(e.aE(t),e.NX())},iT.aE=function(t){this.y=+t},eT.FCt=function(t,e){const i=this.N$();i.BCt(t,e)||(i.jX(t,e),i.NX())},iT.FCt=function(t,e){this.setPosition(t,e)},tT.zCt=function(t,e){if(!(t=zE(t)))return;const i=NE(this),r=t.hq(i);if(!r)return;const[s,n]=r.UCt(e),o=i.N$();o.rE()===s&&o.oE()===n||(o.jX(s,n),o.NX())},tT.HCt=function(t){if(0===t)return;const e=jE(this);e.BX(e.VCt()*t,e.WCt()*t),e.NX()},eT.$Ct=function(t,e){if(0===e)return;const i=this.N$();t=XE.tn(t),i.BX(Math.cos(t)*e,Math.sin(t)*e),i.NX()},iT.$Ct=function(t,e){0!==e&&(t=XE.tn(t),this.offsetPosition(Math.cos(t)*e,Math.sin(t)*e))},eT.rE=function(){return this.N$().rE()},iT.rE=function(){return this.x},eT.oE=function(){return this.N$().oE()},iT.oE=function(){return this.y},tT.OW=function(){return rT.OW(NE(this))},eT.YCt=function(t,e){return XE.compare(this.N$().Eg(),t,e)},iT.YCt=function(t,e){return XE.compare(this.width,t,e)},eT.JCt=function(t,e){return XE.compare(this.N$().Pg(),t,e)},iT.JCt=function(t,e){return XE.compare(this.height,t,e)},eT.cg=function(t){const e=this.N$();e.Eg()!==t&&(e.cg(t),e.NX())},iT.cg=function(t){this.width=t},eT.lg=function(t){const e=this.N$();e.Pg()!==t&&(e.lg(t),e.NX())},iT.lg=function(t){this.height=t},eT.$D=function(t,e){const i=jE(this);i.Eg()===t&&i.Pg()===e||(i.$D(t,e),i.NX())},iT.$D=function(t,e){this.Wq(t,e)},eT.Eg=function(){return this.N$().Eg()},iT.Eg=function(){return this.width},eT.Pg=function(){return this.N$().Pg()},iT.Pg=function(){return this.height},tT.qCt=function(){return jE(this).KX().Kh()},tT.QCt=function(){return jE(this).KX().tu()},tT.ZCt=function(){return jE(this).KX().eu()},tT.XCt=function(){return jE(this).KX().iu()},tT.KCt=function(){const t=jE(this).KX();return(t.Kh()+t.eu())/2},tT.tRt=function(){const t=jE(this).KX();return(t.tu()+t.iu())/2},tT.eRt=function(t,e){return XE.un(jE(this).qq(),XE.tn(e))<=XE.tn(t)},tT.iRt=function(t){return XE.ln(jE(this).qq(),XE.tn(t))},tT.rRt=function(t,e){const i=XE.tn(t),r=XE.tn(e),s=jE(this).qq();return XE.ln(r,i)?XE.ln(s,i)&&!XE.ln(s,r):!(!XE.ln(s,i)&&XE.ln(s,r))},eT.Jq=function(t){const e=this.N$(),i=XE.Ks(XE.tn(t));isNaN(i)||e.qq()===i||(e.Jq(i),e.NX())},iT.Jq=function(t){this.ZX=t},tT.sRt=function(t){if(isNaN(t)||0===t)return;const e=jE(this);e.Jq(e.qq()+XE.tn(t)),e.NX()},tT.nRt=function(t){if(isNaN(t)||0===t)return;const e=jE(this);e.Jq(e.qq()-XE.tn(t)),e.NX()},tT.oRt=function(t,e){const i=jE(this),r=i.qq(),s=XE.cn(r,XE.tn(e),XE.tn(t));isNaN(s)||r===s||(i.Jq(s),i.NX())},tT.aRt=function(t,e,i){const r=jE(this),s=r.qq(),n=e-r.rE(),o=i-r.oE(),a=Math.atan2(o,n),h=XE.cn(s,a,XE.tn(t));isNaN(h)||s===h||(r.Jq(h),r.NX())},tT.hRt=function(t,e){const i=jE(this),r=i.qq(),s=t-i.rE(),n=e-i.oE(),o=Math.atan2(n,s);isNaN(o)||r===o||(i.Jq(o),i.NX())},eT.qq=function(){return XE.en(this.N$().qq())},iT.qq=function(){return this.ZX},tT.uRt=function(t,e){return XE.compare(XE.Pn(100*jE(this).RR(),6),t,e)},eT.kQ=function(){return this.N$().kQ()},iT.kQ=function(){return this.isVisible},tT.RQ=function(t){const e=jE(this);t=2===t?!e.kQ():0!==t,e.kQ()!==t&&(e.RQ(t),rT.W$())},tT.kR=function(t){const e=XE.Xs(t/100,0,1),i=jE(this);if(i.JK()){if(i.wpt().cRt()===e)return}else if(i.RR()===e)return;i.kR(e),rT.W$()},tT.lRt=function(t){KE.Za(t);const e=jE(this);e.nK().Ha(KE)||(e.oK(KE),rT.W$())},tT.NR=function(){const t=jE(this).nK();return XE.In(t.ka(),t.Ga(),t.Na(),t.ja())},tT.RR=function(){return XE.Pn(100*jE(this).RR(),6)},tT.fRt=function(t){return!!(t=UE(t))&&jE(this).F$()===t},tT.pRt=function(t){const e=zE(this).lq(),i=e.cq();if(!i.length)return!1;let r=i[0];for(let e=1,s=i.length;e<s;++e){const s=i[e],n=s.N$(),o=r.N$(),a=n.F$().PV(),h=o.F$().PV();0===t?(a>h||a===h&&n.B$()>o.B$())&&(r=s):(a<h||a===h&&n.B$()<o.B$())&&(r=s)}return e.E_t(r),!0},eT.dRt=function(t,e,i){const r=this.N$(),s=0===t?r.hE():r.QX();return XE.compare(s,e,i)},iT.dRt=function(t,e,i){const r=0===t?this.Hj:this.qX;return XE.compare(r,e,i)},eT.mRt=function(){this.N$().hK()},iT.mRt=function(){this.aK()},eT.yRt=function(){this.N$().cK()},iT.yRt=function(){this.uK()},tT.gRt=function(t){(t=UE(t))&&jE(this).fK(t)},tT.vRt=function(t,e){const i=0===t;if(!(e=zE(e)))return;const r=NE(this),s=e.wRt(r);s&&r.N$().dK(s,i)},eT.uE=function(t){const e=this.N$();e.hE()!==t&&(e.uE(t),rT.W$())},iT.uE=function(t){this.Hj=t},tT.SRt=function(){return jE(this).F$().PV()},tT.bRt=function(){return jE(this).F$().Dl()},eT._Rt=function(){return this.N$().B$()},iT._Rt=function(){return this.zIndex},eT.ERt=function(){return this.N$().hE()},iT.ERt=function(){return this.Hj},eT.TRt=function(){return this.N$().QX()},iT.TRt=function(){return this.qX},tT.PRt=function(t){const e=NE(this),i=e.gq().Uq().ept(t);if(!i)return;const r=i.PV();return e.N$().kX().C0(r)},tT.ARt=function(t,e){const i=NE(this),r=i.gq().Uq().ept(e);if(!r)return;const s=r.PV(),n=1===t,o=i.N$().kX();o.C0(s)!==n&&(o.R0(s,n),o.L0(),rT.W$())},tT.MRt=function(t,e,i){const r=NE(this),s=r.gq().Uq().ept(t);if(!s)return;e=Math.floor(e);const n=s.$A().JA(e);if(!n)return;"color"===n?(KE.Za(i),i=KE):"percent"===n&&(i/=100);const o=s.PV(),a=r.N$().kX();a.G0(o,e,i)&&a.C0(o)&&rT.W$()};const aT=XE.$s(XE.Rect),hT=[],uT=[];let cT=!1,lT=null,fT=!1;const pT=new Set;function*dT(t){if(!t)return!1;const e=this.gY(),i=e.CV(),r=e.oW(),s=r.wW(),n=r.mTt(),o=n.gq(),a=n.Nxt(),h=n.jxt(),u=s.x3(),c=e.GW(),l=c-1,f=u.fW(),p=s.C3(f);let d=a.get("collmemory");d||(d=XE.$s(XE.xc),a.set("collmemory",d)),h.get("collisionCreatedDestroyCallback")||(h.set("collisionCreatedDestroyCallback",!0),e.wf().addEventListener("instancedestroy",t=>WE(d,t.M0)));const m=o.lq(),y=t.lq(),g=m.cq();let v=null;for(let e=0;e<g.length;++e){const s=g[e];y.a_t()?(i.DCt(s.N$().F$(),t,s.N$().KX(),hT),v=hT,i.IRt(s,t,v)):v=y.cq();for(let e=0;e<v.length;++e){const n=v[e];if(i.FY(s,n)||i.ORt(s,n)){const e=$E(d,s,n);let i=!1,a=-2;"number"==typeof e&&(i=!0,a=e);const h=!i||a<l;if(HE(d,s,n,c),h){const e=f._q();r.j3(e);const i=o.lq(),a=t.lq();if(i.d_t(!1),a.d_t(!1),o===t){const t=i.m_t();XE.So(t),t.push(s),t.push(n),o.$It()}else{const e=i.m_t(),r=a.m_t();XE.So(e),XE.So(r),e.push(s),r.push(n),o.$It(),t.$It()}yield*f.jIt(u,p),r.B3(e)}}else VE(d,s,n)}XE.So(hT)}return s.V3(),!1}tT.DRt=function(t){const e=zE(this);t=zE(t);const i=e.gY();if(i.xRt())return dT.call(e,t);if(!t)return!1;const r=i.CV(),s=i.oW(),n=s.wW(),o=s.mTt(),a=o.gq(),h=o.Nxt(),u=o.jxt(),c=n.x3(),l=i.GW(),f=l-1,p=c.fW(),d=n.C3(p);let m=h.get("collmemory");m||(m=XE.$s(XE.xc),h.set("collmemory",m)),u.get("collisionCreatedDestroyCallback")||(u.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",t=>WE(m,t.M0)));const y=a.lq(),g=t.lq(),v=y.cq();let w=null;for(let e=0;e<v.length;++e){const i=v[e];g.a_t()?(r.DCt(i.N$().F$(),t,i.N$().KX(),hT),w=hT,r.IRt(i,t,w)):w=g.cq();for(let e=0;e<w.length;++e){const n=w[e];if(r.FY(i,n)||r.ORt(i,n)){const e=$E(m,i,n);let r=!1,o=-2;"number"==typeof e&&(r=!0,o=e);const h=!r||o<f;if(HE(m,i,n,l),h){const e=p._q();s.j3(e);const r=a.lq(),o=t.lq();if(r.d_t(!1),o.d_t(!1),a===t){const t=r.m_t();XE.So(t),t.push(i),t.push(n),a.$It()}else{const e=r.m_t(),s=o.m_t();XE.So(e),XE.So(s),e.push(i),s.push(n),a.$It(),t.$It()}p.F3(c,d),s.B3(e)}}else VE(m,i,n)}XE.So(hT)}return n.V3(),!1},tT.CRt=function(t){return t=zE(t),YE(NE(this),t,0,0)},tT.RRt=function(t,e,i){return t=zE(t),YE(NE(this),t,e,i)},tT.LRt=function(){return!0},tT.RK=function(){return jE(this).RK()},tT.Aet=function(){return jE(this).Aet()},tT.kRt=function(t,e){const i=zE(this);t=zE(t);const r=i.gY(),s=this.lq().cq();if(0===s.length)return!1;const n=t.lq();let o=n.cq();if(n.a_t()){const e=[...r.GRt(t)];e.length>0&&(o=o.concat(e))}if(0===o.length)return!1;const a=n.a_t()?null:new Set(o),h=new Set;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(1===e)for(const e of r._K())e.NRt(t)&&(null===a||a.has(e))&&h.add(e);else{let i;if(0===e){if(i=r.wK(),null===i)continue}else i=r.bK();i.NRt(t)&&(null===a||a.has(i))&&h.add(i)}}return 0!==h.size&&(n.w_t(h),t.$It(),!0)},tT.jRt=function(t,e){const i=zE(this);t=zE(t);const r=i.gY(),s=i.lq().cq();if(0===s.length)return!1;const n=t.lq();let o=n.cq();if(n.a_t()){const e=[...r.GRt(t)];e.length>0&&(o=o.concat(e))}if(0===o.length)return!1;const a=n.a_t()?null:new Set(o),h=new Set;for(let i=0,r=s.length;i<r;++i){const r=s[i];2!==e||r.Aet()||!r.NRt(t)||null!==a&&!a.has(r)||h.add(r);for(const i of 0===e?r.children():r.MK())2===e&&i.Aet()||i.NRt(t)&&(null===a||a.has(i))&&h.add(i)}return 0!==h.size&&(n.w_t(h),t.$It(),!0)},tT.FRt=function(t,e,i){const r=zE(this);t=zE(t);const s=r.gY(),n=r.lq().cq();if(0===n.length)return!1;const o=t.lq();let a=o.cq();if(o.a_t()){const e=[...s.GRt(t)];e.length>0&&(a=a.concat(e))}if(0===a.length)return!1;const h=o.a_t()?null:new Set(a),u=[];for(let r=0,s=n.length;r<s;++r){const s=n[r];if(0===e){const e=s.AK(i);null!==e&&e.NRt(t)&&(null===h||h.has(e))&&u.push(e)}else if(1===e)for(const e of s.children())if(e.NRt(t)){if(0===i){(null===h||h.has(e))&&u.push(e);break}--i}}return 0!==u.length&&(o.v_t(u),t.$It(),!0)},tT.BRt=function(t,e,i){const r=NE(this);switch(t){case 0:default:return XE.compare(r.TK(),e,i);case 1:return XE.compare(r.zRt(),e,i)}},tT.DK=function(t,e,i,r,s,n,o,a,h,u){t=zE(t);const c=NE(this),l=rT.gTt().gq();for(const f of t.URt(c,l)){if(!f.KJ().FJ())return;c.DK(f,{kK:e,NK:i,FK:r,zK:s,HK:n,YK:o,WK:a,qK:h,ZK:u})}},tT.xK=function(t){t=zE(t);const e=NE(this),i=rT.gTt().gq();for(const r of t.URt(e,i))e.xK(r)},tT.HRt=function(){const t=NE(this);t.RK()&&t.wK().xK(t)},tT.VRt=function(){const t=NE(this).wK();return t?t.GZ():-1},tT.WRt=function(){return NE(this).TK()},tT.$Rt=function(){return NE(this).zRt()},tT.YRt=function(t,e){t=Math.floor(t),e=Math.floor(e);const i=jE(this);t<2||e<2||!isFinite(t)||!isFinite(e)?(i.i0(),i.NX()):i.t0(t,e)},tT.s0=function(t,e,i,r,s,n,o,a){const h=jE(this);h.s0(t,e,{mode:0===i?"absolute":"relative",x:r,y:s,Hj:n,h0:o,u0:a})&&h.NX()},tT.JRt=function(){const t=jE(this);return t.o0()?t.a0().kE():0},tT.qRt=function(){const t=jE(this);return t.o0()?t.a0().GE():0},tT.QRt=function(t){const e=jE(this);t=2===t?!e.kQ():0!==t,e.kQ()!==t&&e.RQ(t)},tT.S0=function(t,e){this instanceof self.PZ?this.Q2(t,e):this.S0(t,e)},tT.ZRt=function(t,e){this instanceof self.PZ?this.X2(t,""+e):this.ZRt(t,""+e)},tT.XRt=function(t){this instanceof self.PZ?this.K2(t):this.XRt(t)},tT.KRt=function(){this instanceof self.PZ?this.Y2():this.g0()},tT.tLt=function(){this instanceof self.PZ?this.J2():this.v0()},tT.eLt=function(){return this instanceof self.PZ?this.q2():this.eLt()},tT.iLt=function(t){this instanceof self.PZ?this.rLt(0!==t):this.sLt(0!==t)},tT.nLt=function(){return this instanceof self.PZ?this.cOt():this.oLt()},eT.aLt=function(t,e,i){return XE.compare(this.J1().Bdt(t),e,i)},iT.aLt=function(t,e,i){return XE.compare(FE(this).Bdt(t),e,i)},eT.hLt=function(t){return!!this.J1().Bdt(t)},iT.hLt=function(t){return!!FE(this).Bdt(t)},tT.uLt=function(t,e){const i=zE(this),r=i.lq(),s=r.cq();if(!s.length)return!1;const n=i.mq();let o=null,a=0;for(let r=0,h=s.length;r<h;++r){const h=s[r],u=n?h.gq().lDt(i.fDt()):0,c=h.Bdt(u+e);(null===o||0===t&&c<a||1===t&&c>a)&&(a=c,o=h)}return r.E_t(o),!0},tT.cLt=function(t){const e=zE(this);return e.gY().mTt().Cxt()?ZE(e,t):QE(e,t)},tT.E1=function(t){const e=NE(this);return t.includes(" ")?new Set(XE.ko(t.toLowerCase())).isSubsetOf(e.YZ()):!t||e.WZ(t)},tT.lLt=function(){return NE(this).Hct()},tT.fLt=function(){return NE(this).ZZ().size},tT.pLt=function(t){return NE(this).dLt(t)},tT.mLt=function(t,e){const i=XE.ko(e),r=NE(this);if(2===t)return void r.qZ(new Set(i));if(0===i.length)return;const s=new Set(r.ZZ());if(0===t)for(const t of i)s.add(t);else if(1===t)for(const t of i)if(!s.delete(t)){const e=t.toLowerCase();for(const t of s)if(t.toLowerCase()===e){s.delete(t);break}}r.qZ(s)},tT.yLt=function(){rT.Y$(NE(this))},tT.gLt=function(){return!0},tT.vLt=function(){return!0},eT.wLt=function(t,e){this.J1().zdt(t,e)},iT.wLt=function(t,e){FE(this).zdt(t,e)},eT.SLt=function(t,e){const i=this.J1(),r=i.Bdt(t);"number"==typeof r&&"number"!=typeof e?e=parseFloat(e):"string"==typeof r&&"string"!=typeof e&&(e=e.toString()),i.zdt(t,r+e)},iT.SLt=function(t,e){const i=FE(this),r=i.Bdt(t);"number"==typeof r&&"number"!=typeof e?e=parseFloat(e):"string"==typeof r&&"string"!=typeof e&&(e=e.toString()),i.zdt(t,r+e)},eT.bLt=function(t,e){const i=this.J1(),r=i.Bdt(t);"number"==typeof r&&("number"!=typeof e&&(e=parseFloat(e)),i.zdt(t,r-e))},iT.bLt=function(t,e){const i=FE(this),r=i.Bdt(t);"number"==typeof r&&("number"!=typeof e&&(e=parseFloat(e)),i.zdt(t,r-e))},eT._Lt=function(t,e){this.J1().zdt(t,e?1:0)},iT._Lt=function(t,e){FE(this).zdt(t,e?1:0)},eT.ELt=function(t){const e=this.J1();e.zdt(t,0===e.Bdt(t)?1:0)},iT.ELt=function(t){const e=FE(this);e.zdt(t,0===e.Bdt(t)?1:0)},tT.TLt=function(t){let e;try{e=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=NE(this),r="state";rT.PLt(),i.Pst(r),i.gE(e,r),rT.ALt(r,{MLt:!0})},tT.ILt=function(){return JSON.stringify(NE(this).yE("state"))},tT.OLt=function(){return NE(this).gq().Dl()},tT.DLt=function(){const t=rT.dTt().tEt();let e=t.Pq();for(const i of rT.GRt(t))++e;return e},tT.xLt=function(){return rT.dTt().tEt().lq().cq().length},eT.jZ=function(){return this.J1().jZ()},iT.jZ=function(){return FE(this).jZ()},eT.GZ=function(){return this.J1().GZ()},iT.GZ=function(){return FE(this).GZ()},tT.NPt=function(t){const e=NE(this);return t.toLowerCase()===rT.oW().zPt(e)},tT.XZ=function(t){const e=NE(this);rT.oW().XZ(e,t)},tT.CLt=function(t){const e=zE(this);return rT.oW().dPt().RLt(e.lq().cq(),t),!0},tT.LLt=function(){return NE(this).BZ()},XE.kLt=function(t,e,i){const r=t[1],s=t[3],n=t[4],o=t[5],a=t[6],h=t[7],u=t[8],c=t[10],l=t[11],f=t[12],p=t[13],d=t[14],m=t[15],y=t[16],g=e.hY,v=e.Ypt,w=e.Jpt,S=Object.assign({},tT,i>=2?iT:eT);s&&(g.LCt=S.LCt,g.kCt=S.kCt,g.GCt=S.GCt,g.NCt=S.NCt,g.jCt=S.jCt,v.sE=S.sE,v.aE=S.aE,v.FCt=S.FCt,v.zCt=S.zCt,v.HCt=S.HCt,v.$Ct=S.$Ct,w.GLt=S.rE,w.NLt=S.oE,w.IW=S.OW),n&&(g.YCt=S.YCt,g.JCt=S.JCt,v.cg=S.cg,v.lg=S.lg,v.$D=S.$D,w.jLt=S.Eg,w.FLt=S.Pg,w.BLt=S.qCt,w.zLt=S.QCt,w.ULt=S.ZCt,w.HLt=S.XCt,w.VLt=S.KCt,w.WLt=S.tRt),o&&(g.$Lt=S.eRt,g.YLt=S.iRt,g.rRt=S.rRt,v.Jq=S.Jq,v.sRt=S.sRt,v.nRt=S.nRt,v.oRt=S.oRt,v.aRt=S.aRt,v.hRt=S.hRt,w.JLt=S.qq),a&&(g.kQ=S.kQ,g.uRt=S.uRt,v.RQ=S.RQ,v.kR=S.kR,v.lRt=S.lRt,w.Opacity=S.RR,w.ColorValue=S.NR),h&&(g.fRt=S.fRt,g.pRt=S.pRt,g.dRt=S.dRt,v.mRt=S.mRt,v.yRt=S.yRt,v.gRt=S.gRt,v.vRt=S.vRt,v.uE=S.uE,w.SRt=S.SRt,w.bRt=S.bRt,w._Rt=S._Rt,w.ERt=S.ERt,w.TRt=S.TRt),u&&(g.PRt=S.PRt,v.ARt=S.ARt,v.MRt=S.MRt),p&&(g.LRt=S.LRt,g.RK=S.RK,g.Aet=S.Aet,g.kRt=S.kRt,g.jRt=S.jRt,g.FRt=S.FRt,g.BRt=S.BRt,v.DK=S.DK,v.xK=S.xK,v.HRt=S.HRt,w.VRt=S.VRt,w.WRt=S.WRt,w.$Rt=S.$Rt),d&&(v.YRt=S.YRt,v.s0=S.s0,w.JRt=S.JRt,w.qRt=S.qRt),c&&(g.kQ=S.kQ,v.RQ=S.QRt,v.qLt=S.S0,v.QLt=S.ZRt,v.ZLt=S.XRt),l&&(g.XLt=S.eLt,v.KLt=S.KRt,v.tkt=S.tLt),f&&(g.Dc=S.nLt,v.ekt=S.iLt),m&&(g.DRt=S.DRt,g.CRt=S.CRt,g.RRt=S.RRt,e.ikt=qE),r||(g.aLt=S.aLt,g.hLt=S.hLt,g.uLt=S.uLt,g.cLt=S.cLt,g.E1=S.E1,v.wLt=S.wLt,v.SLt=S.SLt,v.bLt=S.bLt,v._Lt=S._Lt,v.ELt=S.ELt,v.mLt=S.mLt,g.gLt=S.gLt,g.vLt=S.vLt,v.yLt=S.yLt,v.TLt||(v.TLt=S.TLt),w.ILt||(w.ILt=S.ILt),w.DLt=S.DLt,w.xLt=S.xLt,w.rkt=S.jZ,w.skt=S.GZ,w.OLt=S.OLt,w.lLt=S.lLt,w.fLt=S.fLt,w.pLt=S.pLt,g.NPt=S.NPt,v.XZ=S.XZ,v.CLt=S.CLt),y&&(w.LLt=S.LLt)}}{const mT=self.Ee;mT.mPt=class extends mT.Vs{constructor(t){super(),this.A_t=t,this.Yl="",this.iH=-1,this.nkt="",this.okt=!1,this.akt=null,this.k_t=0,this.oMt=[],this.z_t=null,this.hkt=new Map,this.ukt=null,this.ckt=null,this.lkt=-1,this.uOt=null,this.fkt=null,this.pkt=!1}Ys(){this.Yl="",this.iH=-1,this.nkt="",this.akt=null,this.ckt=null,this.uOt=null,this.fkt=null,this.lkt=-1,mT.So(this.oMt),this.z_t&&(this.z_t.clear(),this.z_t=null);for(const t of this.hkt.values())t.Ys();this.hkt.clear(),this.ukt=null}iE(){const t=this.A_t,e=t.gY().J7(),i=t.dTt();this.akt=i.fW(),this.k_t=i.Y_t()+1;const r=t.nAt(this.akt);r&&(this.ckt=r,this.uOt=r.POt(),this.fkt=r.TOt().map(t=>t.$lt()),r.xIt()&&(this.lkt=r.IOt()));for(const t of e){const e=t.lq();e.a_t()&&!this.akt.eIt(t)||(this.oMt.push(t),this.hkt.set(t,mT.$s(mT.dkt,e)))}const s=t.pW();this.z_t=s.size>0?s:null}mkt(t){this.Yl="timer",this.iE(),this.iH=this.A_t.gY().LW()+t}ykt(t){this.Yl="walltimer",this.iE(),this.iH=this.A_t.gY().jW()+t}gkt(t){this.Yl="signal",this.iE(),this.nkt=t.toLowerCase()}RLt(t,e){this.Yl="instance-signals",this.iE(),this.nkt=e.toLowerCase(),this.ukt=new Set(t)}vkt(t){this.Yl="promise",this.iE(),t.then(()=>this.RPt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.RPt()})}wkt(){return"timer"===this.Yl}Skt(){return"walltimer"===this.Yl}xPt(){return"signal"===this.Yl}FPt(){return"instance-signals"===this.Yl}eAt(){return"promise"===this.Yl}CPt(){return this.nkt}bkt(){return this.okt}RPt(){this.okt=!0}BPt(t){this.ukt.delete(t),0===this.ukt.size&&this.RPt()}vPt(){return this.wkt()?this.iH<=this.A_t.gY().LW():this.Skt()?this.iH<=this.A_t.gY().jW():this.bkt()}_kt(t){t.U_t(this.akt,this.k_t);for(const[t,e]of this.hkt.entries()){const i=t.lq();e.U_t(i)}this.z_t&&t.oEt([...this.z_t]);const e=this.ckt;e&&(e.UIt(this.uOt),e.TOt().map((t,e)=>t.Oft(this.fkt[e])),e.xIt()&&e.OOt(this.lkt))}wPt(t){this._kt(t),this.akt.CIt(t),this.ckt&&this.ckt.xIt()&&this.ckt.QIt(this.lkt),this.A_t.cPt(this.oMt),this.pkt=!0}async EPt(t){this._kt(t);for(const e of this.akt.RIt(t))await this.A_t.gY().YTt(e);this.ckt&&this.ckt.xIt()&&this.ckt.QIt(this.lkt),this.A_t.cPt(this.oMt),this.pkt=!0}SPt(){return this.pkt}i_t(t){for(const e of this.hkt.values())e.i_t(t);if("instance-signals"===this.Yl){for(const e of t)this.ukt.delete(e);0===this.ukt.size&&this.RPt()}}_et(){const t={},e={wt:this.Yl,t:this.iH,st:this.nkt,s:this.okt,ev:this.akt.e9(),sm:this.oMt.map(t=>t.e9()),dsm:this.z_t?[...this.z_t].map(t=>t.e9()):null,sols:t};this.akt.wIt(this.k_t)&&(e.act=this.akt.vTt(this.k_t).e9());for(const[e,i]of this.hkt)t[e.e9().toString()]=i._et();return"instance-signals"===this.Yl&&(e.pi=[...this.ukt].map(t=>t.GZ())),e}static iAt(t,e){const i=t.gY(),r=t.MTt(e.ev);if(!r)return null;let s=0;if(e.hasOwnProperty("act")){const i=t.OTt(e.act);if(!i)return null;s=i.PV()}const n=mT.$s(mT.mPt,t);n.iH=e.t,e.hasOwnProperty("wt")?n.Yl=e.wt:n.Yl=-1===n.iH?"signal":"timer",n.nkt=e.st,n.okt=e.s,n.akt=r,n.k_t=s;for(const t of e.sm){const e=i.D3(t);e&&n.oMt.push(e)}if(Array.isArray(e.dsm))for(const t of e.dsm){const e=i.D3(t);e&&(n.z_t||(n.z_t=new Set),n.z_t.add(e))}for(const[r,s]of Object.entries(e.sols)){const e=parseInt(r,10),o=i.D3(e);if(!o)continue;const a=mT.$s(mT.dkt,null);a.Eet(t,s),n.hkt.set(o,a)}if("instance-signals"===n.Yl){n.ukt=new Set;for(const t of e.pi){const e=i.C$(t);e&&n.ukt.add(e)}}return n}}}{const yT=self.Ee;yT.dkt=class extends yT.Vs{constructor(t){super(),this.qbt=null,this.Ekt=!0,this.U8=[],t&&(this.qbt=t.gq(),this.Ekt=t.a_t(),yT.To(this.U8,t.m_t()))}Ys(){this.qbt=null,yT.So(this.U8)}U_t(t){t.d_t(this.Ekt),yT.To(t.m_t(),this.U8)}i_t(t){yT.Oo(this.U8,t)}_et(){return{sa:this.Ekt,insts:this.U8.map(t=>t.GZ())}}Eet(t,e){const i=t.gY();this.Ekt=!!e.sa,yT.So(this.U8);for(const t of e.insts){const e=i.C$(t);e&&this.U8.push(e)}}}}{let gT=function(t,e){let i=t.get(e);return i||(i=new Map,t.set(e,i)),i};GetNextParamMap=gT;const vT=self.Ee;vT.Tkt=class extends vT.Vs{constructor(t){super(),this.Fl=t.runtime,this.zl=t.id,this.Qs=t.name??"",this.Pkt=!!t.AJ,this.Akt=!!t.Mkt,this.Ikt=!!t.CJ,this.Okt=!!t.Dkt,this.xkt=!!t.LJ,this.Ckt=!!t.Rkt,this.Lkt=!!t.BJ,this.kkt=!!t.DJ,this.Gkt=!!t.GJ,this.Nkt=t.jkt,this.Fkt=t.Bkt,this.zkt=null,this.Ukt=new Map,this.Hkt=new Map,this.Vkt=new Map,this.Wkt=new Map,this.$kt=t.Ykt,this.Jkt=null}Ys(){this.Fl=null}gY(){return this.Fl}PJ(){return this.zl}Dl(){return this.Qs}qkt(){}jPt(){return this.xxt()>=2?this.Jkt.constructor:this.constructor}xxt(){return this.Nkt}Qkt(t=!1){let e=this.$kt;return t&&"function"!=typeof e&&this.xxt()>=2&&(e=globalThis.s2),e}Zkt(){return this.Fkt}MJ(){return this.Pkt}OJ(){return this.Akt}xJ(){return this.kkt}NJ(){return this.Gkt}RJ(){return this.Ikt}I_(){return this.Okt}kJ(){return this.xkt}FJ(){return this.Ckt}zJ(){return this.Lkt}KOt(t,e){if(!e)throw new Error("missing 'this' binding");let i=this.Ukt.get(t);return i||(i=t.bind(e),this.Ukt.set(t,i),i)}Mxt(t,e,i){if(!e)throw new Error("missing 'this' binding");const r=gT(this.Hkt,t);let s=r.get(i);return s||(s=t.bind(e,i),r.set(i,s),s)}Ixt(t,e,i,r){if(!e)throw new Error("missing 'this' binding");const s=gT(this.Vkt,t),n=gT(s,i);let o=n.get(r);return o||(o=t.bind(e,i,r),n.set(r,o),o)}Oxt(t,e,i,r,s){if(!e)throw new Error("missing 'this' binding");const n=gT(this.Wkt,t),o=gT(n,i),a=gT(o,r);let h=a.get(s);return h||(h=t.bind(e,i,r,s),a.set(s,h),h)}Xkt(t){if(!this.MJ())throw new Error("must be single-global plugin");this.zkt=t}JJ(){if(!this.MJ())throw new Error("must be single-global plugin");return this.zkt}QJ(){if(!this.MJ())throw new Error("must be single-global plugin");return this.zkt.QJ()}Kkt(){const t=this.xxt();vT.EJ.tGt(this,t);const e=this.Qkt(!0);if(e){if(this.Jkt=new e,!(this.Jkt instanceof self.bJ))throw new TypeError("plugin class must derive from IPlugin")}else this.Jkt=new self.bJ;vT.EJ.eGt(t)}WJ(){return this.Jkt}}}{const wT=self.Ee;wT.iGt=class extends wT.Tkt{constructor(t,e){super(t),this.rGt=e,this.sGt=0,this.nGt=new Map,this.oGt("elem-focused",t=>t.aGt()),this.oGt("elem-blurred",t=>{t&&t.hGt()})}Ys(){super.Ys()}uGt(t){const e=this.sGt++;return this.nGt.set(e,t),e}cGt(t){this.nGt.delete(t)}oGt(t,e){this.Fl.lX(this.rGt,t,t=>{const i=this.nGt.get(t.elementId);e(i,t)})}}}{const ST=self.Ee;ST.lGt=class extends ST.Vs{constructor(t){super(),this.qbt=t,this.Fl=t.gY(),this.fGt=t.KJ()}Ys(){this.qbt=null,this.Fl=null,this.fGt=null}gq(){return this.qbt}gY(){return this.Fl}KJ(){return this.fGt}e1(){return this.qbt.e1()}qkt(){}Hxt(t){}MCt(t){}ICt(t){}Cit(t){}jit(){}kit(){}nrt(t){}pGt(){}Qkt(){return null}dGt(t,e,i){const r=ST.$s(ST.Event,t,e);r.mGt=this,i&&Object.assign(r,i),this.gq().i8(r)}}}{const bT=self.Ee;bT.yGt=class extends bT.Vs{constructor(t,e){super(),this.hi=t,this.rGt=e,this.gGt=null,this.Fl=t.gY(),this.qbt=this.hi.gq(),this.vGt=this.qbt.ACt(),this.dst=null,this.yst=null,this.SX=!1,this._X=!1,this.Zf=null,this.yD=!1}Ys(){this.yD=!0,this.wGt(),this.SGt(),this.dst=null,this.yst=null,this.Zf&&(this.Zf.Ys(),this.Zf=null),this.hi=null,this.Fl=null,this.qbt=null,this.vGt=null}Js(){return this.yD}J1(){return this.hi}gY(){return this.Fl}gq(){return this.qbt}KJ(){return this.vGt.KJ()}ACt(){return this.vGt}bGt(){return this.hi.R$()}hX(t){return this.Fl.hX(t,this.hi,null)}_Gt(t){return this.Fl._Gt(t,this.hi,null)}oY(t){return this.Fl.oY(t,this.hi,null)}EGt(t,e){return this.Fl.EGt(t,this.hi,e)}TGt(t,e){return this.Fl.TGt(t,this.hi,e)}PGt(t){return this.Fl.PGt(t)}AGt(t,e){this.Fl.lX(this.rGt,t,e)}MGt(t){for(const[e,i]of t)this.AGt(e,i)}IGt(t,e){this.Fl.Ul(this.rGt,t,e)}OGt(t,e){return this.Fl.K$(this.rGt,t,e)}DGt(t,e){if(!this.Fl.YV())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.rGt,handler:t,data:e,responseId:null});this.IGt(t,e)}xGt(t){if(!t)throw new Error("cannot set empty component id");this.gGt=t}CGt(){if(!this.gGt)throw new Error("wrapper extension component id not set");return this.Fl.MX(this.gGt)}OX(t,e){if(!this.gGt)throw new Error("wrapper extension component id not set");this.Fl.OX(this.gGt,t,e)}RGt(t){for(const[e,i]of t)this.OX(e,i)}S3(t,e){if(!this.gGt)throw new Error("wrapper extension component id not set");this.Fl.S3(this.gGt,t,e)}b3(t,e){if(!this.gGt)throw new Error("wrapper extension component id not set");return this.Fl.b3(this.gGt,t,e)}Ant(){}LGt(){}kGt(){if(!this.SX){if(!this.dst)if(this.Fl.yX()){const t=globalThis.gX,e=this.KJ();this.dst=()=>{const i=performance.now();this.Ant(),t.wX(e,performance.now()-i)}}else this.dst=()=>this.Ant();this.Fl.wf().addEventListener("tick",this.dst),this.SX=!0}}wGt(){this.SX&&(this.Fl.wf().removeEventListener("tick",this.dst),this.SX=!1)}GGt(){return this.SX}NGt(){if(!this._X){if(!this.yst)if(this.Fl.yX()){const t=globalThis.gX,e=this.KJ();this.yst=()=>{const i=performance.now();this.LGt(),t.wX(e,performance.now()-i)}}else this.yst=()=>this.LGt();this.Fl.wf().addEventListener("tick2",this.yst),this._X=!0}}SGt(){this._X&&(this.Fl.wf().removeEventListener("tick2",this.yst),this._X=!1)}jGt(){return this._X}FGt(){return[]}yE(){return null}gE(t){}Ddt(t){}Gdt(t,e){}Dmt(t,e,i){if(0===e)return;const r=this.Ddt(t);if("number"!=typeof r)throw new Error("expected number");this.Gdt(t,r+e,i)}BGt(t,e,i,r){}zGt(t,...e){t.call(this,...e)}UGt(t,...e){return t.call(this,...e)}Qkt(){return null}dGt(t,e,i){if(!this.hi.HGt())return;const r=this.bGt(),s=bT.$s(bT.Event,t,e);s.M0=r,i&&Object.assign(s,i),r.dispatchEvent(s)}I_(){return!1}}}{const _T=self.Ee;_T.VGt=class extends _T.yGt{constructor(t,e){super(t,e),this.zut=t.N$(),this.WGt=null,this.$Gt=null}Ys(){if(this.WGt){const t=this.Fl.wf();t.removeEventListener("renderercontextlost",this.WGt),t.removeEventListener("renderercontextrestored",this.$Gt),this.WGt=null,this.$Gt=null}this.zut=null,super.Ys()}YGt(){this.JGt()}qGt(){}QGt(){}JGt(){if(this.WGt)return;this.WGt=()=>this.x8(),this.$Gt=()=>this.ZGt();const t=this.Fl.wf();t.addEventListener("renderercontextlost",this.WGt),t.addEventListener("renderercontextrestored",this.$Gt)}x8(){this.qGt()}ZGt(){this.QGt()}N$(){return this.zut}xct(){return!1}Dct(){if(!this.xct())throw new Error("original size not known");const t=this.XGt();if(t)return t.Eg()}Rct(){if(!this.xct())throw new Error("original size not known");const t=this.XGt();if(t)return t.Pg()}XGt(){return null}KGt(){const t=this.XGt();if(t){const e=t.PP();if(e)return[e.Eg(),e.Pg()]}return[100,100]}tNt(){const t=this.XGt();return t?t.xx():null}eNt(){const t=this.XGt();return t?t.iNt():null}rNt(){const t=this.XGt();return!!t&&t.sNt()}UCt(t){const e=this.hi.N$();return[e.rE(),e.oE(),e.QX()]}pGt(t,e,i){}nNt(t,e){}Qtt(){return!0}}}{const ET=self.Ee,TT=ET.$s(ET.Rect);ET.oNt=class extends ET.VGt{constructor(t,e){super(t,e),this.aNt=this.KJ().uGt(this),this.hNt=!0,this.uNt=!1,this.cNt=!1,this.lNt=-.2,this.fNt=ET.$s(ET.Rect,0,0,-1,-1);const i=this.Fl.I$();this.pNt=i.O2(),this.dNt=i.D2(),this.mNt=-1,this.yNt=-1,this.gNt=!1,this.kGt()}Ys(){this.KJ().cGt(this.aNt),this.vNt("destroy"),this.aNt=-1,super.Ys()}m0(){if(this.Fl.YV())throw new Error("not valid in worker mode");return this.wNt("get-element")}vNt(t,e){e||(e={}),e.elementId=this.aNt,this.IGt(t,e)}wNt(t,e){return e||(e={}),e.elementId=this.aNt,this.DGt(t,e)}SNt(t,e){return e||(e={}),e.elementId=this.aNt,this.OGt(t,e)}bNt(t){t||(t={});const e=this.N$();t.elementId=this.aNt,t.isVisible=e.kQ(),t.htmlIndex=e.F$().j2(),t.htmlZIndex=e.F2(),Object.assign(t,this._Nt()),this.hNt=!!t.isVisible,this.DGt("create",t),this.ENt(!0)}QRt(t){t=!!t,this.hNt!==t&&(this.hNt=t,this.vNt("set-visible",{isVisible:t}))}Ant(){this.ENt(!1)}TNt(){const t=this.Fl.I$().V2();return"Android"===ET.Je.qe&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}ENt(t){if(this.J1().j$())return;const e=this.N$(),i=e.F$(),r=e.KX();let[s,n]=i.vZ(r.Kh(),r.tu()),[o,a]=i.vZ(r.eu(),r.iu());const h=this.Fl.I$(),u=h.lJ(),c=h.pJ();if(!e.kQ()||!i.kQ())return void this.QRt(!1);if(!this.TNt()&&(o<=0||a<=0||s>=u||n>=c))return void this.QRt(!1);TT.set(s,n,o,a);const l=h.O2(),f=h.D2(),p=i.j2(),d=e.F2();if(!t&&TT.equals(this.fNt)&&this.pNt===l&&this.dNt===f&&this.mNt===p&&this.yNt===d)return void this.QRt(!0);this.fNt.v(TT),this.pNt=l,this.dNt=f,this.mNt=p,this.yNt=d,this.QRt(!0);let m=null;this.cNt&&(m=i.W2()+this.lNt),this.wNt("update-position",{left:Math.round(this.fNt.Kh()),top:Math.round(this.fNt.tu()),width:Math.round(this.fNt.width()),height:Math.round(this.fNt.height()),htmlIndex:p,htmlZIndex:d,fontSize:m})}g0(){this.wNt("focus",{focus:!0})}v0(){this.wNt("focus",{focus:!1})}aGt(){this.uNt=!0}hGt(){this.uNt=!1}eLt(){return this.uNt}S0(t,e){this.vNt("set-css-style",{prop:ET.va(t),val:e})}ZRt(t,e){this.vNt("set-attribute",{name:t,val:e})}XRt(t){this.vNt("remove-attribute",{name:t})}PNt(){this.gNt||(this.gNt=!0,Promise.resolve().then(()=>{this.gNt=!1,this.vNt("update-state",this._Nt())}))}_Nt(){}ANt(){return this.aNt}}}{const PT=self.Ee,AT=self.D0;PT.MNt=class extends PT.Vs{constructor(t){super(),this.Fl=t.runtime,this.zl=t.id,this.Qs=t.name??"",this.INt=PT.$s(PT.Fc),this.ONt=PT.$s(PT.Fc),this.Nkt=t.jkt,this.$kt=t.Ykt,this.DNt=null}Ys(){this.ONt.Ys(),this.INt.Ys(),this.Fl=null}gY(){return this.Fl}PJ(){return this.zl}Dl(){return this.Qs}qkt(){}xxt(){return this.Nkt}Qkt(t=!1){let e=this.$kt;return t&&"function"!=typeof e&&this.xxt()>=2&&(e=globalThis.i3),e}xNt(t){this.INt.Hc(t)}Kst(){return this.INt.Vc()}k7(t){this.ONt.Hc(t)}j7(t){this.ONt.kc(t)}cq(){return this.ONt.Vc()}Kkt(){const t=this.xxt();PT.EJ.tGt(this,t);const e=this.Qkt(!0);if(e){if(this.DNt=new e,!(this.DNt instanceof AT))throw new TypeError("behavior class must derive from IBehavior")}else this.DNt=new AT;PT.EJ.eGt(t)}_0(){return this.DNt}}}{const MT=self.Ee;MT.CNt=class extends MT.Vs{constructor(t){super(),this.Fl=t.gY(),this.dDt=t,this.qbt=t.gq(),this.RNt=t.E0(),this.RNt.xNt(this.qbt)}Ys(){this.Fl=null,this.dDt=null,this.qbt=null,this.RNt=null}qkt(){}A0(){return this.dDt}gq(){return this.qbt}gY(){return this.Fl}E0(){return this.RNt}}}{const IT=self.Ee;IT.LNt=class extends IT.Vs{constructor(t,e){super(),this.Agt=t,this.rGt=e,this.hi=t.I0(),this.Fl=t.gY(),this.dDt=t.A0(),this.vGt=this.dDt.ACt(),this.SX=!1,this._X=!1,this.d3=!1,this.Zf=null}Ys(){this.wGt(),this.SGt(),this.kNt(),this.Zf&&(this.Zf.Ys(),this.Zf=null),this.Agt=null,this.hi=null,this.Fl=null,this.dDt=null,this.vGt=null}E0(){return this.dDt.E0()}GNt(){return this.Agt}I0(){return this.hi}gq(){return this.hi.gq()}N$(){return this.hi.N$()}gY(){return this.Fl}A0(){return this.dDt}ACt(){return this.vGt}bGt(){return this.Agt.bGt()}hX(t){return this.Fl.hX(t,this.hi,this.dDt)}_Gt(t){return this.Fl._Gt(t,this.hi,this.dDt)}oY(t){return this.Fl.oY(t,this.hi,this.dDt)}NNt(){}Ant(){}LGt(){}jNt(){}kGt(){this.SX||(this.Fl.a3(this),this.SX=!0)}wGt(){this.SX&&(this.Fl.h3(this),this.SX=!1)}GGt(){return this.SX}NGt(){this._X||(this.Fl.u3(this),this._X=!0)}SGt(){this._X&&(this.Fl.c3(this),this._X=!1)}jGt(){return this._X}FNt(){this.d3||(this.Fl.l3(this),this.d3=!0)}kNt(){this.d3&&(this.Fl.f3(this),this.d3=!1)}BNt(){return this.d3}FGt(){return[]}AGt(t,e){this.Fl.lX(this.rGt,t,e)}zNt(t,e){}yE(){return null}gE(t){}Ddt(t){}Gdt(t,e){}Dmt(t,e){if(0===e)return;const i=this.Ddt(t);if("number"!=typeof i)throw new Error("expected number");this.Gdt(t,i+e)}BGt(t,e,i,r){}zGt(t,...e){t.call(this,...e)}UGt(t,...e){return t.call(this,...e)}Qkt(){return null}dGt(t,e,i){if(!this.Agt.HGt())return;const r=this.bGt(),s=IT.$s(IT.Event,t,e);s.UNt=r,s.M0=r.M0,i&&Object.assign(s,i),r.dispatchEvent(s)}}}{let OT=function(t){if(t!==xT)throw new Error("invalid internal API token")};ValidateInternalAPIToken=OT;const DT=self.Ee;DT.cY={},DT.xgt={};const xT=DT.Te();let CT=[],RT=[],LT=[],kT=null,GT=null,NT=null,jT=null;const FT=new Map,BT=new Map;DT.EJ=class extends DT.Vs{#e=null;#t=[];#r=null;#i=[];#s=new Map;#o=null;#h=null;#n;constructor(t,e){super(),this.#e=t,this.#n=new Set(e)}HNt(t){const e=t[19],i=this.#e.tOt(t[0]);if(!i)throw new Error("missing plugin");DT.kLt(t,i,e);const r=e>=2?DT.Tkt:i,s=DT.$s(r,{runtime:this.#e,AJ:t[1],Mkt:t[2],CJ:t[5],LJ:t[8],Dkt:t[9],Rkt:t[13],BJ:t[14],DJ:t[17],GJ:t[18],jkt:e,id:t[20],name:t[21],Ykt:e>=2?i:null,Bkt:t[22]});s.qkt(),this.#t.push(s),FT.set(i,s)}VNt(){this.#r=DT.$s(DT.cY.uY,{runtime:this.#e,AJ:!0}),this.#r.qkt()}WNt(t){const e=t[1],i=t[2],r=t[3],s=this.#e.tOt(t[0]);if(!s)throw new Error("missing behavior");this.#s.set(s,()=>{const t=e>=2?DT.MNt:s,n=DT.$s(t,{runtime:this.#e,id:i,name:r,jkt:e,Ykt:e>=2?s:null});n.qkt(),this.#i.push(n),BT.set(s,n),!this.#o&&DT.xgt.$Nt&&n instanceof DT.xgt.$Nt?this.#o=n:!this.#h&&DT.xgt.YNt&&n instanceof DT.xgt.YNt&&(this.#h=n),n.Kkt()})}JNt(t){const e=this.#s.get(t);e&&(e(),this.#s.delete(t))}static tGt(t,e=1){if(DT.EJ.tGt!==kT)throw new Error("invalid method");1===e&&CT.push(t),RT.push(t)}static eGt(t=1){if(DT.EJ.eGt!==GT)throw new Error("invalid method");1===t&&CT.pop(),RT.pop()}static OZ(){if(DT.EJ.OZ!==NT)throw new Error("invalid method");if(0===CT.length)throw new Error("no init object set");return CT.at(-1)}static _J(t){if(DT.EJ._J!==jT)throw new Error("invalid method");if(OT(t),0===RT.length)throw new Error("no init object set");return RT.at(-1)}static qNt(t){LT.push(t)}static QNt(){LT.pop()}static oX(){if(0===LT.length)throw new Error("no init properties set");return LT.at(-1)}ZNt(){for(const t of this.#t)t.Kkt()}static VJ(t){return FT.get(t)||null}static x0(t){return BT.get(t)||null}s8(){return this.#r}XNt(){return this.#o}KNt(){return this.#h}MX(t){return this.#n.has(t)}},kT=DT.EJ.tGt,GT=DT.EJ.eGt,NT=DT.EJ.OZ,jT=DT.EJ._J}{const zT=self.Ee,UT=new Set;zT.tjt=class extends zT.Vs{constructor(){super(),this.ejt=0,this.S8="",this.lB=0,this.ijt=0,this.rjt=0,this.Ug=0,this.Hg=0,this.sjt=!1,this.njt=!1,this.ojt=null,this.ajt="",this.uD=zT.$s(zT.Rect),this.hjt=zT.$s(zT.Ou),this.ujt="",this.cjt=new self.mY(this),UT.add(this)}Ys(){this.fD(),this.ojt&&0===this.ojt.G8()&&this.ojt.Ys(),this.ojt=null,UT.delete(this),this.ljt()}static x8(){for(const t of UT)t.ajt="",t.uD.set(0,0,0,0),t.hjt.Qu(t.uD)}fjt(t){this.S8=t[0],this.lB=t[1],this.ijt=t[2],this.rjt=t[3],this.Ug=t[4],this.Hg=t[5],this.sjt=t[6],this.njt=!0}pjt(t,e,i){if(i=!!i,this.ojt)throw new Error("already loaded asset");this.S8=e;const r={V5:i};return zT.Qo(e)&&(r.W5="remote"),this.yY(t,r),this.ojt.J5()}djt(t,e){if(this.ojt)throw new Error("already loaded asset");this.S8="",this.lB=e.size,this.ojt=zT.$s(zT.Y5,t.OV(),{blob:e,size:this.lB,W5:"local"})}mjt(t){if(t===this)throw new Error("cannot replace with self");this.ejt++,this.fD(),this.S8=t.S8,this.lB=t.lB,this.ijt=t.ijt,this.rjt=t.rjt,this.Ug=t.Ug,this.Hg=t.Hg,this.sjt=t.sjt,this.njt=t.njt,this.ojt=t.ojt,this.ajt=t.ajt,this.uD=t.uD,this.hjt=t.hjt,this.ljt()}Z5(){return this.S8}Nc(){return this.lB}yjt(){return this.ijt}gjt(){return this.rjt}sNt(){return this.sjt}Eg(){return this.Ug}Pg(){return this.Hg}vjt(){return this.ojt.Eg()}wjt(){return this.ojt.Pg()}yY(t,e){if(this.ojt)throw new Error("already got asset");e=Object.assign({},e,{url:this.Z5(),size:this.Nc()}),this.ojt=t.H5(e)}T8(){return this.ojt&&this.ojt.T8()}async D4(t,e){if(!this.ojt)throw new Error("no asset");if(this.ajt)throw new Error("already loaded texture");const i=this.ejt;this.ajt="loading";const r=await this.ojt.D4(t,e);if(this.ejt!==i)return null;if(!r)return this.ajt="",null;this.ajt="loaded",this.njt||(this.Ug=r.Eg(),this.Hg=r.Pg(),this.njt=!0);const s=this.sjt?this.Hg:this.Ug,n=this.sjt?this.Ug:this.Hg;return this.uD.set(this.ijt,this.rjt,this.ijt+s,this.rjt+n),this.uD.wt(r.Eg(),r.Pg()),this.hjt.Qu(this.uD),this.sjt&&this.hjt.rc(),r}fD(){this.ajt&&(this.ojt&&this.ojt.fD(),this.ajt="",this.uD.set(0,0,0,0),this.hjt.Qu(this.uD))}PP(){return this.ojt&&"loaded"===this.ajt?this.ojt.PP():null}xx(){return this.uD}iNt(){return this.hjt}g2(){return this.cjt}Sjt(){return this.ojt}async bjt(t){t||(t=await this.ojt.j8()),this.njt||(this.Ug=t.width,this.Hg=t.height,this.njt=!0);const e=zT.ua(this.Ug,this.Hg),i=e.getContext("2d");return this.sjt?(i.rotate(Math.PI/-2),i.translate(-this.Hg,0),i.drawImage(t,this.ijt,this.rjt,this.Hg,this.Ug,0,0,this.Hg,this.Ug)):i.drawImage(t,this.ijt,this.rjt,this.Ug,this.Hg,0,0,this.Ug,this.Hg),e}async _jt(t){if(this.ujt)return this.ujt;const e=await this.bjt(t),i=await zT.ca(e);return this.ujt=URL.createObjectURL(i),this.ujt}ljt(){this.ujt&&(URL.revokeObjectURL(this.ujt),this.ujt="")}}}{const HT=self.Ee;HT.Ejt=class extends HT.Vs{constructor(t){super(),this.Qs=t[0],this.Tjt=t[1],this.oxt=!!t[2],this.ayt=t[3],this.Pjt=t[4],this.Ajt=!!t[5],this.E6=t[6],this.Mjt=t[7].map(t=>HT.$s(HT.Ijt,t)),this.Ojt=new self.N0(this)}static Djt(t,e){const i=HT.$s(HT.Ejt,[e,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.Mjt.push(HT.Ijt.Djt(t)),i}Ys(){for(const t of this.Mjt)t.Ys();HT.So(this.Mjt)}xjt(t){for(const e of this.Mjt)e.e1().yY(t)}Cjt(t,e){return Promise.all(this.Mjt.map(i=>i.e1().D4(t,e)))}Rjt(){for(const t of this.Mjt)t.e1().fD()}Dl(){return this.Qs}e9(){return this.E6}Y0(){return this.Mjt.length}q0(){return this.Mjt}Ljt(t){if((t=Math.floor(t))<0||t>=this.Mjt.length)throw new RangeError("invalid frame");return this.Mjt[t]}kjt(t,e){(e=Math.floor(e))<0?this.Mjt.unshift(t):e>=this.Mjt.length?this.Mjt.push(t):this.Mjt.splice(e,0,t)}Gjt(t){if((t=Math.floor(t))<0||t>=this.Mjt.length)throw new RangeError("invalid frame");this.Mjt[t].Ys(),this.Mjt.splice(t,1)}Njt(t){for(let e=0,i=this.Mjt.length;e<i;++e)if(HT.Zr(this.Mjt[e].v1(),t))return e;return-1}jjt(t){if("string"==typeof t){const e=this.Njt(t);if(-1===e)throw new Error(`cannot find animation frame with tag ${t}`);return e}return t}j0(){return this.Tjt}B0(){return this.oxt}U0(){return this.ayt}V0(){return this.Pjt}$0(){return this.Ajt}Fjt(){return this.Ojt}}}{const VT=self.Ee,WT=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(t.length);for(let i=0,r=t.length;i<r;++i)e[i]=t.charCodeAt(i);return new Blob([e],{type:"image/png"})})();VT.Ijt=class extends VT.Vs{constructor(t){super(),this.Bjt=VT.$s(VT.tjt),this.Bjt.fjt(t),this.zjt=t[7],this.Ujt=VT.$s(VT.Oh,t[8],t[9]),this.Hjt=t[10].map(t=>VT.$s(VT.Vjt,this,t)),this.Wjt=new Map;for(const t of this.Hjt)this.Wjt.set(t.Dl().toLowerCase(),t);this.$jt=null;const e=t[11];e.length>=6&&(this.$jt=VT.$s(VT.cc,e)),this.Hv=t[12]?t[12]:"",this.Yjt=new self.t1(this)}static Djt(t){const e=VT.$s(VT.Ijt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return e.Bjt.djt(t,WT),e}Ys(){this.$jt&&(this.$jt.Ys(),this.$jt=null),this.Bjt.Ys(),this.Bjt=null}e1(){return this.Bjt}i1(){return this.zjt}UX(){return this.Ujt.Lh()}WX(){return this.Ujt.Gh()}f1(){return this.$jt}c1(t){return this.Wjt.get(t.toLowerCase())||null}u1(t){return(t=Math.floor(t))<0||t>=this.Hjt.length?null:this.Hjt[t]}n1(){return this.Hjt.length}v1(){return this.Hv}Q0(){return this.Yjt}}}{const $T=self.Ee;$T.Vjt=class extends $T.Vs{constructor(t,e){super(),this.Jjt=t,this.Qs=e[0],this.qjt=$T.$s($T.Oh,e[1],e[2])}Ys(){}Dl(){return this.Qs}rE(){return this.qjt.Lh()}oE(){return this.qjt.Gh()}Qjt(){return this.qjt}}}{const YT=globalThis.Ee,JT=globalThis.gX,qT=globalThis.ZJ,QT=globalThis.Eq,ZT=globalThis.kq,XT=globalThis.assert;YT.Kvt=class extends YT.Vs{constructor(t,e,i){super();const r=t.tOt(i[1]);this.Fl=t,this.fGt=YT.EJ.VJ(r),this.vGt=null,this.Zjt=r.Instance,this.Uv=e,this.E6=i[11],this.Qs=i[0],this.kOt=this.Fl.TTt(i[14]),this.Xjt=!!i[9],this.Kjt=!!i[2],this.tFt=!!i[10],this.eFt=i[3].map(e=>({h6:e[0],type:e[1],name:e[2],iFt:t.TTt(e[3])})),this.rFt=i[4],this.sFt=i[5],this.Akt=this.fGt.OJ(),this.nFt=YT.$s(YT.Event.wf),this.n7=null;const[s,n]=t.CV().$Y();if(this.oFt=YT.$s(YT.aFt,s,n),this.hFt=!0,this.uFt=null,this.cFt=null,this.lFt=-1,this.fFt=null,this.pFt=null,this.dFt=null,this.mFt=null,this.yFt=null,this.gFt=!1,this.vFt=null,this.wFt=i[8].map(t=>YT.SFt.WP(this,t)),this.bFt=[],this._Ft=new Map,this.EFt=new Map,this.TFt=new Set,this.PFt=new Map,this.AFt=YT.$s(YT.Jbt,this),this.MFt=null,this.IFt=0,this.OFt=!1,this.vFt=null,this.Bjt=null,this.DFt=null,this.xFt=null,this.CFt=null,this.RFt=0,this.lxt=new Map,this.U8=[],this.LFt=new Map,this.kFt=!0,this.fGt.kJ()&&(this.n7=YT.$s(YT.o7,this,i[12])),i[6]&&(this.Bjt=YT.$s(YT.tjt),this.Bjt.fjt(i[6])),i[7]){this.DFt=i[7].map(t=>YT.$s(YT.Ejt,t)),this.xFt=new Map,this.CFt=new Map;for(const t of this.DFt)this.xFt.set(t.Dl().toLowerCase(),t),this.CFt.set(t.e9(),t)}this.Kjt?(this.uFt=[],this.cFt=new Set,this.lFt=this.Fl.GFt()):(this.fFt=[],this.pFt=new Set,this.dFt=[],this.mFt=[],this.yFt=[]);const o=this.fGt.xxt();if(o<2&&(this.vGt=YT.$s(r.NFt,this,i[15]),!(this.vGt instanceof YT.lGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let a;if(this.jFt=null,this.FFt=null,this.w7=YT.$s(YT.Event.wf),YT.EJ.tGt(this,o),o>=2?(a=r.NFt,a||(a=globalThis.f2)):a=this.vGt.Qkt(),a&&!this.Kjt){if(this.jFt=new a(o<2?this:null),o<2&&!(this.jFt instanceof QT))throw new TypeError("script interface class must derive from IObjectType");if(o>=2&&!(this.jFt instanceof globalThis.f2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.Kjt?ZT:QT;this.jFt=new t}if(YT.EJ.eGt(o),i[13]){const t=i[13];if(t){const e=t[0],i=t[1],r=t[2];this.vGt.pGt(e,i,r)}}this.Fl.BFt()&&!this.Kjt&&!this.tFt&&this.Akt||this.qkt(),this.fGt.MJ()&&(this.fGt.Xkt(this),this.zFt(i)),this.UFt=null}static WP(t,e,i){return YT.$s(YT.Kvt,t,e,i)}Ys(){if(this.nFt.Ys(),this.nFt=null,this.Bjt&&(this.Bjt.Ys(),this.Bjt=null),this.DFt){for(const t of this.DFt)t.Ys();YT.So(this.DFt),this.xFt.clear(),this.CFt.clear()}this.UFt=null,this.AFt.Ys(),this.AFt=null,this.lxt.clear(),this.vFt=null,this.Fl=null}HFt(t){for(let e=1,i=t.length;e<i;++e){const i=this.Fl.P7(t[e]);this.uFt.push(i),this.cFt.add(i),i.fFt.push(this),i.pFt.add(this)}}VFt(t){this.gFt=!0,this.vFt=t}LZ(){return this.gFt}Oit(){return this.vFt}WFt(){let t=0;if(!this.Kjt)for(const e of this.fFt)for(const i of e.$Ft()){const e=i.Dl().toLowerCase();this._Ft.set(e,i),this.EFt.set(e,t),this.bFt.push(i),++t}for(const e of this.$Ft()){const i=e.Dl().toLowerCase();this._Ft.set(i,e),this.EFt.set(i,t),this.bFt.push(e),++t}for(const t of this.bFt)this.TFt.add(t.E0().constructor);if(!this.Kjt&&this.fFt.length){const t=this.Fl.YFt();YT._o(this.dFt,t,0),YT._o(this.mFt,t,0),YT._o(this.yFt,t,0);const e=[];let i=0,r=0,s=0;for(const t of this.fFt){const n=t.fDt();this.dFt[n]=i,i+=t.JFt(),this.mFt[n]=r,r+=t.qFt(),this.yFt[n]=s,s+=t.QFt();const o=t.Uq();if(o&&this.n7)for(const t of o.Hq())e.push(t.ZFt(this.n7))}this.n7&&this.n7.XFt(e)}}zFt(t){const e=YT.Qi(t[17])?t[17]:this.Fl.KFt(),i=YT.$s(YT.Instance,{runtime:this.Fl,objectType:this,uid:e});i.tBt(t[16],[]),this.Fl.eBt(e,i),this.U8.push(i)}ACt(){return this.vGt}iBt(){return this.tFt}wf(){return this.nFt}qkt(){this.Kjt||(this.vGt?this.vGt.qkt():this.jFt.d2())}rBt(){return this.RFt>0}async Cit(t){this.Kjt||(this.RFt++,1===this.RFt&&(this.vGt?await this.vGt.Cit(t):await this.jFt.v2(this.Fl.I$().M$())))}jit(){if(!this.Kjt){if(this.RFt--,this.RFt<0)throw new Error("released textures too many times");0===this.RFt&&(this.vGt?this.vGt.jit():this.jFt.w2(this.Fl.I$().M$()))}}kit(){if(this.Kjt)throw new Error("not applicable to family");this.vGt?this.vGt.kit():this.jFt.S2()}async nrt(t){this.Kjt||(this.vGt?await this.vGt.nrt(t):await this.jFt.b2(this.Fl.I$().M$()))}gY(){return this.Fl}KJ(){return this.fGt}sBt(){return this.Zjt}Dl(){return this.Qs}TTt(){return this.kOt}PV(){return this.Uv}e9(){return this.E6}mq(){return this.Kjt}g6(){return this.Xjt}OJ(){return this.Akt}fDt(){return this.lFt}$Ft(){return this.wFt}qFt(){return this.rFt}nBt(t){return t&&this.TFt.has(t)}JFt(){return this.eFt.length}oBt(){return this.eFt.map(t=>t.h6)}aBt(t){return this.eFt.findIndex(e=>e.h6===t)}dct(t){return this.eFt.findIndex(e=>e.name===t)}hBt(){return this.eFt.map(t=>t.name)}uBt(){return this.eFt.map(t=>t.iFt)}yct(t){if((t=Math.floor(t))<0||t>=this.eFt.length)throw new RangeError("invalid instance variable index");return this.eFt[t].type}mct(t){if((t=Math.floor(t))<0||t>=this.eFt.length)throw new RangeError("invalid instance variable index");return this.eFt[t].name}QFt(){return this.sFt}cBt(){return this.bFt}Kft(t){return this._Ft.get(t.toLowerCase())||null}vct(t){const e=this.EFt.get(t.toLowerCase());return void 0===e?-1:e}Uq(){return this.n7}kJ(){return this.fGt.kJ()}lBt(){return this.n7&&this.n7.fBt()}lPt(){return this.AFt}lq(){return this.AFt.lq()}e1(){return this.Bjt}I7(t){this.MFt=t}M7(){return this.MFt}O7(t){this.IFt=t}pBt(){return this.IFt}dBt(){return this.DFt}mBt(){return this.DFt.length}Cq(){return this.fFt}CCt(t){return this.pFt.has(t)}jq(){return this.uFt}Bq(t){return this.cFt.has(t)}gDt(t){return this.mFt[t]}lDt(t){return this.dFt[t]}_Ot(t){this.PFt.set(t.AOt().toLowerCase(),t)}vq(t){return!!this.bq(t)}bq(t){const e=this.PFt.get(t.toLowerCase());return e&&e.Dc()?e:null}yBt(){return this.DFt}gBt(t){if(!this.DFt)throw new Error("no animations");return this.xFt.get(t.toLowerCase())||null}vBt(t){if(!this.DFt)throw new Error("no animations");return this.CFt.get(t)||null}wBt(t){if(this.gBt(t))throw new Error(`animation name '${t}' already exists`);const e=YT.Ejt.Djt(this.gY(),t);return this.DFt.push(e),this.xFt.set(e.Dl().toLowerCase(),e),this.CFt.set(e.e9(),e),e}SBt(t){const e=this.gBt(t);if(!e)throw new Error(`animation name '${t}' does not exist`);if(1===this.DFt.length)throw new Error("cannot remove last animation");const i=this.DFt.indexOf(e);this.DFt.splice(i,1),this.xFt.delete(e.Dl().toLowerCase()),this.CFt.delete(e.e9()),e.Ys()}bBt(){if(!this.DFt)throw new Error("no animations");return this.DFt[0]}_Bt(){return this.bBt().Ljt(0)}EBt(){if(this.DFt){const t=this._Bt().e1();return[t.Eg(),t.Pg()]}return this.Bjt?[this.Bjt.Eg(),this.Bjt.Pg()]:[100,100]}QJ(){if(!this.fGt.MJ())throw new Error("not a single-global plugin");return this.U8[0]}cq(){return this.U8}*eq(){yield*this.U8}*uq(){yield*this.U8,yield*this.Fl.GRt(this)}Pq(){return this.U8.length}k7(t){this.U8.push(t)}TBt(){this.kFt=!0}frt(){if(!this.kFt||this.Kjt)return;const t=this.U8;let e=0;for(let i=t.length;e<i;++e)t[e].PBt(e);const i=this.Fl.ABt();for(const t of i)t.gq()===this&&t.PBt(e++);this.kFt=!1}MBt(t){const e=this.U8;if(t<e.length)return e[t];t-=e.length;const i=this.Fl.ABt();for(const e of i)if(e.gq()===this){if(0===t)return e;--t}return null}wRt(t){if(t&&t.LZ()&&t.gq()!==this)for(const e of t.kZ())if(e.gq()===this)return e;const e=this.lq().cq();return e.length?e[0]:null}hq(t){const e=this.lq().cq();return e.length>0?e[t.jZ()%e.length]:null}*URt(t,e){const i=this.lq().cq(),r=i.length,s=e.lq(),n=e.lq().cq(),o=n.length;let a=t.jZ();!e.mq()&&s.a_t()||(a=n.indexOf(t));const h=Math.ceil(r/o),u=r%o;let c=0,l=0;0===u||a<u?(c=a*h,l=h):(c=u*h+(a-u)*(h-1),l=h-1);for(let t=c,e=c+l;t<e;++t)yield i[t]}Hxt(t){this.vGt?.Hxt(t)}$It(){if(!this.gFt||this.Kjt)return;this.frt();const t=this.lq(),e=t.m_t(),i=t.a_t(),r=this.Fl.dTt(),s=r&&r.fW()&&r.fW().T_t();for(const r of this.vFt.Fq()){if(r===this)continue;r.frt();const n=r.lq();if(n.d_t(i),!i){const i=n.m_t();YT.So(i);for(const t of e)i.push(r.MBt(t.jZ()));if(s){const e=t.y_t(),i=n.y_t();YT.So(i);for(const t of e)i.push(r.MBt(t.jZ()))}}}}Jxt(t,e){for(const i of this.Oit().Fq()){const r=i.lq();t?YT.wo(r.y_t(),e):YT.wo(r.m_t(),e)}}IBt(){return this.oFt}OBt(t){this.hFt=!!t}DBt(){if(this.hFt&&this.Akt){for(const t of this.U8)t.N$().xBt();for(const t of this.Fl.ABt())t.gq()===this&&t.N$().xBt();this.hFt=!1}}CBt(t,e,i){if(e){const i=this.LFt.get(e);i&&(i.delete(t),0===i.size&&this.LFt.delete(e))}if(i){let e=this.LFt.get(i);e||(e=new Set,this.LFt.set(i,e)),e.add(t)}}*RBt(){if(this.mq()){const t=new Set;for(const e of this.uFt)for(const i of e.RBt())t.add(i);yield*t.values()}else for(const t of this.LFt.keys())t.Js()||(yield t)}Nxt(){return this.lxt||(this.lxt=new Map),this.lxt}LBt(){return this.nBt(YT.xgt.$Nt)}kBt(){return this.nBt(YT.xgt.YNt)}GBt(){return this.nBt(YT.xgt.NBt)}R7(){return this.nBt(YT.xgt.jBt)}_et(){const t={instances:this.U8.map(t=>t.yE())};return this.lxt&&this.lxt.size&&(t.ex=YT.ya(this.lxt)),t}Eet(t,e){this.lxt&&(this.lxt.clear(),this.lxt=null);const i=t.ex;i&&(this.lxt=YT.ga(i));const r=this.U8,s=t.instances;for(let t=0,e=Math.min(r.length,s.length);t<e;++t)r[t].gE(s[t]);for(let t=s.length,e=r.length;t<e;++t)this.Fl.Y$(r[t]);for(let t=r.length,i=s.length;t<i;++t){const i=s[t];let r=null;if(this.OJ()&&(r=this.Fl.p$().wit(i.w.l),!r))continue;const n=this.Fl.L7(this.MFt||this,r,!1,0,0,!0);n.gE(i),e&&e.add(n)}this.UFt=s,this.TBt()}FBt(){return this.UFt}BBt(){this.UFt=null}zBt(){for(let t=0,e=this.U8;t<e;++t)this.U8[t].zBt()}YJ(){return this.jFt}iW(){return this.w7}UBt(){return this.FFt}Aq(t){this.FFt=t}i8(t){const e=this.Fl,i=e.yX()&&!e.oW().J$();i&&JT.Nrt(),this.w7.dispatchEvent(t),i&&JT.jrt()}}}{const KT=self.Ee;KT.HBt=class extends KT.Vs{constructor(t,e){super(),this.Fl=t,this.VBt=e;for(const t of this.VBt)t.VFt(this)}Ys(){this.Fl=null}gY(){return this.Fl}Iit(){return this.VBt}Fq(){return this.VBt}drt(){return this.VBt.some(t=>t.OJ())}}}{const tP=self.Ee,eP=self.gX,iP=self.PZ,rP=tP.EJ,sP=[],nP=new Set;let oP=0;const aP=new WeakMap,hP=1,uP=2,cP=4,lP=8,fP=16,pP=32,dP=32,mP=64;tP.Instance=class extends tP.Vs{#e=null;constructor(t){if(tP.EJ!==rP)throw new Error("invalid addon manager");super(),this.Fl=t.runtime,this.WBt=t.objectType,this.zut=null,this.$Bt=null,this.YBt=null,this.JBt=0,this.qBt=t.uid,this.QBt=oP++,this.$k=0;const e=tP.ko(t.tags);e.length>0&&this.qZ(new Set(e)),this.ZBt=sP,this.XBt=sP;const i=this.WBt.cBt();i.length>0&&(this.XBt=i.map((t,e)=>tP.$s(tP.KBt,{runtime:this.Fl,T0:t,M0:this,index:e}))),this.tzt=this.WBt.LZ()?[]:null,this.ezt=-1,this.nFt=null;const r=this.KJ();if(r.I_()&&(this.$k|=4),r.OJ())if(this.zut=tP.$s(tP.izt,this,t.GX),t.rzt)this.zut.szt(t.rzt);else{this.zut.nzt();const[t,e]=this.WBt.EBt();this.zut.$D(t,e),this.gq().lBt()&&this.zut.kX().ozt()}t.azt?this.hzt(t.azt):this.uzt()}Ys(){if(this.YBt&&(this.YBt.DZ(),this.YBt=null),this.XBt.length>0){for(const t of this.XBt)t.Ys();tP.So(this.XBt)}this.$Bt&&(this.$Bt.Ys(),this.$Bt=null);const t=aP.get(this);t&&(t.clear(),aP.delete(this)),this.tzt&&tP.So(this.tzt),this.nFt&&(this.nFt.Ys(),this.nFt=null),this.#e&&(this.#e.czt.clear(),this.#e.lzt.clear()),this.#e=null,this.Fl=null,this.WBt=null,this.ZBt.length>0&&tP.So(this.ZBt),this.zut&&(this.zut.Ys(),this.zut=null)}hzt(t){t.length>0&&(this.ZBt=[],tP.To(this.ZBt,t))}uzt(){const t=this.WBt.JFt();if(0===t)return;this.ZBt=[];const e=[0,0,""];for(let i=0;i<t;++i)this.ZBt.push(e[this.WBt.yct(i)])}tBt(t,e){if(this.$Bt)throw new Error("already got sdk instance");for(let t=0,i=this.XBt.length;t<i;++t)this.XBt[t].tBt(e?e[t]:null);if(this.KJ().xxt()<2){if(this.$Bt=tP.$s(this.WBt.sBt(),this,t),!(this.$Bt instanceof tP.yGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.KJ().OJ()&&this.WBt.UBt()&&this.R$()}else{const e=this.KJ().Qkt();this.fzt(e.Instance,t)}}y0(){return this.$Bt??this.YBt}N$(){return this.zut}gY(){return this.Fl}BW(){return this.ezt}zZ(){const t=this.ezt;return-1===t?this.gY().BW():t}zW(t){((t=+t)<0||!isFinite(t))&&(t=0),this.ezt=t,this.gq().lBt()&&this.Fl.pzt(this,!0)}HZ(){this.ezt=-1,this.gq().lBt()&&this.Fl.pzt(this,!1)}het(){return this.Fl.dzt(this)}wf(){return this.nFt||(this.nFt=tP.$s(tP.Event.wf)),this.nFt}KE(t){this.$Bt?this.$Bt.KE(t):this.YBt.A2(this.Fl.I$().M$())}qkt(t){this.$Bt.qkt(t)}mzt(){this.$k|=2}yzt(){return!!(2&this.$k)}gzt(){this.$k|=1}j$(){return!!(1&this.$k)}I_(){return!!(4&this.$k)||(this.$Bt?this.$Bt.I_():this.YBt.c_())}vzt(){this.$k|=32}Xtt(){return!!(32&this.$k)}wzt(){return!!(8&this.$k)}Szt(t){t?this.$k|=8:this.$k&=-9}bzt(){return!!(16&this.$k)}_zt(t){t?this.$k|=16:this.$k&=-17}Ezt(){return!!(32&this.$k)}Tzt(t){t?this.$k|=32:this.$k&=-33}Pzt(){return!!(64&this.$k)}Azt(t){t?this.$k|=64:this.$k&=-65}Mzt(t,e){t<<=16,e?this.$k|=t:this.$k&=~t}Izt(t){return!!(this.$k&t<<16)}XGt(){return this.$Bt?this.$Bt.XGt():null}KGt(){return this.$Bt?this.$Bt.KGt():null}tNt(){return this.$Bt?this.$Bt.tNt():null}eNt(){return this.$Bt?this.$Bt.eNt():null}rNt(){return!!this.$Bt&&this.$Bt.rNt()}UCt(t){return this.$Bt?this.$Bt.UCt(t):[this.YBt.x,this.YBt.y,this.YBt.qX]}gq(){return this.WBt}Qtt(){return this.$Bt?this.$Bt.Qtt():this.YBt.M2()}NRt(t){return t.mq()?t.Bq(this.gq()):this.gq()===t}Ozt(t,e,i){const r=(e,i)=>{const r=i||e.gq(),s=t.get(r);s?s.add(e):t.set(r,new Set([e]))};if(r(this,e),this.LZ())for(const t of this.kZ())r(t);if(i)for(const t of this.MK())r(t)}Dzt(){if(!this.KJ().FJ())throw new Error("object does not support scene graph")}RK(){return null!==this.wK()}wK(){const t=this.N$();if(!t)return null;const e=t.wK();return e?e.J1():null}bK(){const t=this.N$();if(!t)return null;const e=t.bK();return e?e.J1():null}*_K(){const t=this.N$();if(t)for(const e of t._K())yield e.J1()}xzt(t){if(!t)return!1;for(const e of this.children())if(e===t)return!0;return!1}Aet(){const t=this.N$();return!!t&&t.Aet()}Czt(t){const e=this.N$();if(!e)return[];const i=t.Dl();return e._rt().map(t=>t.J1()).filter(t=>t.gq().Dl()===i)}_rt(){const t=this.N$();return t?t._rt().map(t=>t.J1()):[]}*children(){const t=this.N$();if(t)for(const e of t.children())yield e.J1()}*MK(){const t=this.N$();if(t)for(const e of t.MK())yield e.J1()}TK(){const t=this.N$();return t?t.TK():0}Rzt(){return[...this._K()].length}zRt(){const t=this.N$();return t?t.zRt():0}AK(t){const e=this.N$();if(!e)return null;const i=e.AK(t);return i?i.J1():null}Lzt(){const t=this.N$();if(!t)return NaN;const e=t.wK();return e?e.kzt(t):NaN}Gzt(t){for(const e of this.N$()._rt())if(e.J1().GZ()===t)return!0;return!1}DK(t,e){this.Dzt(),t.Dzt(),this.N$().DK(t.N$(),e||{})}xK(t){const e=this.N$();e&&e.xK(t.N$())}XK(){const t=this.N$();return!!t&&t.XK()}ert(){const t=this.N$();if(!t)return;const e=t.Nzt();if(e)for(const t of e){const e=this.Fl.C$(t[2]);if(e){const i=t[3];this.DK(e,{kK:!!(1&i),NK:!!(i>>1&1),FK:!!(i>>2&1),zK:!!(i>>3&1),HK:!!(i>>4&1),ZK:!!(i>>5&1),WK:!!(i>>6&1),YK:!!(i>>7&1),qK:!!(i>>8&1)})}}}irt(t,e){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=e.get(t.index);if(!i)continue;const r=t.flags;this.DK(i,{kK:!!(1&r),NK:!!(r>>1&1),FK:!!(r>>2&1),zK:!!(r>>3&1),HK:!!(r>>4&1),ZK:!!(r>>5&1),WK:!!(r>>6&1),YK:!!(r>>7&1),qK:!!(r>>8&1)})}}BZ(){const t=this.Fl.jzt();return t?t.ewt(this):""}LZ(){return null!==this.tzt}Fzt(){tP.So(this.tzt)}lrt(t){this.tzt.push(t)}CZ(){return this.tzt}Bzt(t){return!!this.zzt(t)}zzt(t){const e=this.kZ();if(null===e||0===e.length)return!1;for(const i of e)if(i.gq()===t)return i;return null}kZ(){return this.tzt}XAt(){for(const t of this.kZ())t.gq().lq().g_t(t)}Vxt(){for(const t of this.kZ())t.gq().lq().f_t(t)}Wxt(t){for(const e of this.kZ())e.gq().lq().m_t()[t]=e}Yxt(){for(const t of this.kZ())t.gq().lq().p_t(t)}$xt(t){for(const e of this.kZ())e.gq().lq().y_t()[t]=e}KJ(){return this.WBt.KJ()}PBt(t){this.JBt=t}jZ(){return this.WBt.frt(),this.JBt}GZ(){return this.qBt}Uzt(t){this.qBt=t}Hzt(){return this.QBt}qZ(t){if(this.#e&&(this.#e.czt.clear(),this.#e.lzt.clear()),0===t.size)this.#e=null;else{this.#e||(this.#e={czt:new Set,lzt:new Set});for(const e of t){const t=e.toLowerCase();this.#e.lzt.has(t)||(this.#e.czt.add(e),this.#e.lzt.add(t))}}}ZZ(){return this.#e?this.#e.czt:nP}YZ(){return this.#e?this.#e.lzt:nP}Vzt(){return this.#e?this.#e.lzt:null}WZ(t){return!!this.#e&&this.#e.lzt.has(t.toLowerCase())}Hct(){return Array.from(this.ZZ()).join(" ")}dLt(t){t=Math.floor(t);for(const e of this.ZZ()){if(0===t)return e;--t}return""}Xft(){return this.XBt}Wzt(t){if(!t)return null;for(const e of this.XBt)if(e.E0()instanceof t)return e;return null}$zt(t){if(!t)return null;const e=this.Wzt(t);return e?e.y0():null}Zft(t){const e=this.XBt;for(let i=0,r=e.length;i<r;++i)if(e[i].A0().e9()===t)return i;return-1}Yzt(){return this.ZBt}hBt(){return this.WBt.hBt()}Jzt(){return this.ZBt.length}Bdt(t){t|=0;const e=this.ZBt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");return e[t]}uDt(t){return this.ZBt[t]}qzt(t){const e=this.ZBt[t];return 0===this.WBt.yct(t)?!!e:e}zdt(t,e){t|=0;const i=this.ZBt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.WBt.yct(t)){case 0:i[t]=e?1:0;break;case 1:i[t]="number"==typeof e?e:parseFloat(e);break;case 2:i[t]="string"==typeof e?e:e.toString();break;default:throw new Error("unknown instance variable type")}}xmt(t,e){if(0===e)return;t|=0;const i=this.ZBt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const r=i[t];if("number"!=typeof r)throw"boolean"==typeof r?new Error("can not set offset of boolean variable"):"string"==typeof r?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof e?e:parseFloat(e)}Nxt(){let t=aP.get(this);return t||(t=new Map,aP.set(this,t),t)}Qzt(t){const e=this.gq();if(e.iW().Tf(t))return!0;for(const i of e.Cq())if(i.iW().Tf(t))return!0;return!!this.Fl.iW().Tf(t)}Dq(t=void 0){const e=t??new Set;if(e.has(this))return;e.add(this);const i=this.N$();if(i&&i.Aet())for(const t of this.MK())if(e.add(t),t.LZ())for(const i of t.kZ())e.add(i);if(this.LZ())for(const t of this.kZ())t.Dq(e);if(!t){for(const t of e.values())t.rrt();this.srt()}}Zzt(){this.WBt.UBt()&&this.R$();for(const t of this.XBt)t.NNt()}Xzt(){this.Zzt()}rrt(){if(this.Zzt(),this.Qzt("instancecreate")){const t=this.gq(),e=new tP.Event("instancecreate");e.M0=this.R$(),t.i8(e);for(const i of t.Cq())i.i8(e);this.Fl.i8(e)}this.Fl.hX(this.KJ().jPt().hY.gLt,this,null)}srt(){if(this.KJ().FJ()){if(this.i8(new tP.Event("hierarchyready")),this.Qzt("hierarchyready")){const t=this.gq(),e=new tP.Event("hierarchyready");e.M0=this.R$(),t.i8(e);for(const i of t.Cq())i.i8(e);this.Fl.i8(e)}this.Fl.hX(this.KJ().jPt().hY.LRt,this,null)}}Kzt(){this.Fl.hX(this.KJ().jPt().hY.vLt,this,null)}tUt(t){if(this.YBt){const e=new tP.Event("destroy");e.eUt=t,this.i8(e)}if(!this.Qzt("instancedestroy"))return;const e=this.gq(),i=new tP.Event("instancedestroy");i.M0=this.R$(),i.eUt=t,e.i8(i);for(const t of e.Cq())t.i8(i);this.Fl.i8(i)}iUt(){return this.$Bt?this.$Bt.FGt():this.YBt.EX()}yE(t="full",e=null){const i={};"full"===t?i.uid=this.GZ():i.c3=!0;const r=this.ZZ();if(r.size>0&&(i.tags=Array.from(r)),"visual-state"!==t){const e=aP.get(this);if(e&&e.size&&(i.ex=tP.ya(e)),-1!==this.BW()&&(i.mts=this.BW()),this.WBt.JFt()>0){const t={},e=this.WBt.oBt();for(let i=0,r=this.ZBt.length;i<r;++i)t[e[i].toString()]=this.ZBt[i];i.ivs=t}if(this.XBt.length){const e={};for(const i of this.XBt){const r=i.yE(t);r&&(e[i.A0().e9().toString()]=r)}i.behs=e}}this.zut&&(i.w=this.zut._et(t,e));const s=this.$Bt?this.$Bt.yE():this.YBt.TX();return s&&(i.data=s),i}Pst(t="full",e=null){this.zut&&this.zut.Pst(t)}Mst(t,e="full",i=null){this.zut&&this.zut.Mst(t,e,i)}rUt(t,e="full",i=null){this.zut&&this.zut.rUt(t,e,i)}zBt(){this.KJ().OJ()&&this.zut.zBt()}gE(t,e="full",i=null){if("full"===e)this.qBt=t.uid;else if(!t.c3)return;if(this.qZ(new Set(t.tags??[])),"visual-state"!==e){let e=aP.get(this);e&&(e.clear(),aP.delete(this));const i=t.ex;i&&(e=tP.ga(i),aP.set(this,e)),this.ezt=t.hasOwnProperty("mts")?t.mts:-1;const r=t.ivs;if(r)for(const[t,e]of Object.entries(r)){const i=parseInt(t,10),r=this.WBt.aBt(i);if(r<0||r>=this.ZBt.length)continue;let s=e;null===s&&(s=NaN),this.ZBt[r]=s}}if(this.KJ().OJ()){const r=t.w;if(r){const t=r.l;if(this.zut.F$().e9()!==t){const i=this.zut.F$(),r=i.g$().wit(t);r?(this.zut.H$(r),i.j7(this,!0),r.k7(this,!0),r.V$(this),this.zut.NX()):"full"===e&&this.Fl.Y$(this)}this.zut.Eet(r,e,i)}}if("visual-state"!==e){const i=t.behs;if(i)for(const[t,r]of Object.entries(i)){const i=parseInt(t,10),s=this.Zft(i);s<0||s>=this.XBt.length||this.XBt[s].gE(r,e)}}const r=t.data;r&&(this.$Bt?this.$Bt.gE(r,e):this.YBt.PX(r))}sUt(t){if(this.zut.F$().e9()===t)return;const e=this.zut.F$(),i=e.g$().wit(t);i&&(this.zut.H$(i),e.j7(this,!0),i.k7(this,!0),i.V$(this),this.zut.NX())}R$(){return this.YBt||this.fzt()}HGt(){return!!this.YBt}fzt(t,e){const i=this.zut?t?self._2:self.l0:t?self.tX:self.PZ,r=t||this.$Bt.Qkt(),s=this.WBt.UBt(),n=s||r||i,o=this.KJ().xxt();if(tP.EJ.tGt(this,o),tP.EJ.qNt(e),this.YBt=new n,tP.EJ.QNt(),tP.EJ.eGt(o),r&&!(this.YBt instanceof i))throw new TypeError(`script interface class '${r.name}' does not extend the right base class '${i.name}'`);if(s){const t=r||i;if(!(this.YBt instanceof t))throw new TypeError(`setInstanceClass(): class '${s.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.YBt}AZ(t){if(0===this.ZBt.length)return;const e={},i=this.WBt.uBt();for(let t=0,r=i.length;t<r;++t)e[i[t]]={configurable:!1,enumerable:!0,get:tP.Instance.prototype.qzt.bind(this,t),set:tP.Instance.prototype.zdt.bind(this,t)};const r=Object.create(Object.prototype,e);t.nUt={value:r,writable:!1}}MZ(t){const e=this.XBt;if(0===e.length)return;const i={};for(const t of e)i[t.A0().TTt()]={value:t.bGt(),writable:!1};const r=Object.create(Object.prototype,i);t.jAt={value:r,writable:!1}}i8(t){if(!this.HGt())return;const e=this.R$();t.M0=e;const i=this.Fl,r=i.yX()&&!i.oW().J$();r&&eP.Nrt(),e.dispatchEvent(t),r&&eP.jrt()}}}{const yP=self.Ee,gP=new Map;yP.Trt=class extends yP.Vs{constructor(t){super(),this.TE=t,this.sMt=null,this.oUt=[],this.aUt=t.Eg(),this.hUt=t.Pg(),this.uUt=1,this.cUt=1,this.lUt=0,this.fUt=1,this.pUt=t.RR(),this.dUt=null,this.mUt=null,this.yUt=NaN,this.gUt=!1,this.Oet=NaN,this.Det=NaN,this.vUt=e=>{if(e.M0!==this.sMt.J1())return;t.gY().wf().removeEventListener("instancecreate",this.vUt);const i=this.sMt.J1().y0();this.gUt=!!i.xct(),this.Oet=this.gUt?i.Dct():NaN,this.Det=this.gUt?i.Rct():NaN}}Ys(){this.sMt=null,this.dUt=null,this.mUt=null,this.yUt=NaN,this.gUt=!1,this.Oet=NaN,this.Det=NaN,yP.So(this.oUt)}wUt(t){if(this.fUt=this.TE.RR(),this.pUt=this.fUt,this.sMt=t,this.lUt=t?t.qq():0,this.sMt){const t=this.TE.gY();if(this.sMt.J1().KJ().xxt()<2){const e=this.sMt.J1().y0();e?(this.gUt=!!e.xct(),this.Oet=this.gUt?e.Dct():NaN,this.Det=this.gUt?e.Rct():NaN):this.sMt.J1().j$()||t.wf().addEventListener("instancecreate",this.vUt)}else this.gUt=!1,this.Oet=NaN,this.Det=NaN}else this.gUt=!1,this.Oet=NaN,this.Det=NaN}wK(){return this.sMt}Aet(){return this.oUt.length>0}_rt(){return this.oUt}SUt(){this.Aet()&&1!==this.oUt.length&&(this.mUt?this.oUt.sort((t,e)=>{const i=this.mUt.get(t.J1()),r=this.mUt.get(e.J1());return yP.Qi(i)&&yP.Qi(r)?i-r:0}):this.oUt.sort((t,e)=>{const i=t.wpt().bUt(),r=e.wpt().bUt();return yP.Qi(i)&&yP.Qi(r)?i-r:0}))}bUt(){return this.yUt}_Ut(){return this.uUt}EUt(t){this.uUt=t}TUt(){return this.cUt}PUt(t){this.cUt=t}omt(){return this.pUt}cRt(){return this.fUt}AUt(t){this.fUt=t}vpt(){return 0===this.aUt?Number.EPSILON:this.aUt}Ept(){return 0===this.hUt?Number.EPSILON:this.hUt}MUt(){if(this.TE.BK()){const t=this.sMt;let e=t.Eg(),i=t.wpt().vpt();return 0===e&&(e=Number.EPSILON),i===Number.EPSILON&&e===Number.EPSILON?1:i===Number.EPSILON&&e!==Number.EPSILON&&this.gUt?1+e/this.Oet:e/i}return 1}IUt(){if(this.TE.UK()){const t=this.sMt;let e=t.Pg(),i=t.wpt().Ept();return 0===e&&(e=Number.EPSILON),i===Number.EPSILON&&e===Number.EPSILON?1:i===Number.EPSILON&&e!==Number.EPSILON&&this.gUt?1+e/this.Det:e/i}return 1}OUt(){return 0}DUt(){return{sw:this.aUt,sh:this.hUt,sx:this.uUt,sy:this.cUt,psa:this.lUt,oo:this.fUt,so:this.pUt,pi:this.TE.J1().Lzt()}}_et(t,e=null){const i=this.DUt();return e&&e.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.xUt(t),c:this.CUt(t)})}RUt(t){let e="";return t.GK()&&(e+="x"),t.jK()&&(e+="y"),t.BK()&&(e+="w"),t.UK()&&(e+="h"),t.VK()&&(e+="a"),t.$K()&&(e+="z"),t.XK()&&(e+="d"),t.JK()&&(e+="o"),t.QK()&&(e+="v"),e}xUt(t){return this.sMt?!this.sMt.J1()||this.sMt.J1().j$()?null:this.LUt(this.sMt,this.TE,t):null}CUt(t){return this.oUt.map(e=>this.LUt(e,e,t)).filter(t=>t)}LUt(t,e,i){const r=t.J1();if(r&&r.j$())return null;const s={};return s.uid=r.GZ(),s.f=this.RUt(e),s.offsets=e.kUt(),s.data=yP.Trt.GUt(r),s.oci=r.gq().PV(),"state"===i?(s.inst=r.yE("full",{selfOnly:!0}),s.instIndex=NaN):(s.instIndex=r.gq().cq().indexOf(r),s.inst=null),s}Eet(t){this.aUt=t.sw,this.hUt=t.sh,this.uUt=t.sx,this.cUt=t.sy,this.lUt=t.psa,this.fUt=t.oo,this.pUt=t.so,this.yUt=yP.Qi(t.pi)?t.pi:NaN}NUt(t,e,i,r){if(!t&&!e)if(r?.MLt){if(this.dUt)for(const t of this.dUt)t.j$()||t.RK()||t.gY().Y$(t)}else if(this.dUt)for(const t of this.dUt)if(i.c&&i.c.length){if(!i.c.some(e=>e.uid===t.GZ()))continue;t.j$()||t.RK()||t.gY().Y$(t)}this.dUt=t,this.mUt=e}jUt(t){const e=this.TE.gY();return gP.has(t)?gP.get(t):e.C$(t)}Mst(t,e){const i=this.TE,r=i.gY(),s=e?.FUt??new Set;if(t.p&&!this.sMt){const n=t.p.uid,o=this.jUt(n);if(o){const n=o.N$();o.xzt(i.J1())?this.sMt=n:(o.Gzt(i.J1().GZ())?(r.Y$(i.J1()),r.BUt(i.J1().GZ()),gP.delete(i.J1().GZ())):o.DK(i.J1(),this.zUt(t.p.f)),s.has(i)||(i.UUt(t.p.offsets),this.HUt(o,t.p,e),this.VUt(o,o.GZ(),i.gY(),e)),s.add(i),o.N$().wpt().SUt())}else if(yP.Qi(t.p.oci)){const s=r.Mq(r.P7(t.p.oci),i.F$(),0,0,!0);if(s){const n=this.WUt(t.p,r);n&&s.gE(n);const o=s.N$(),a=!!e?.MLt;o.F$().Iq(s,!1,a),s.DK(i.J1(),this.zUt(t.p.f)),gP.set(s.GZ(),s),this.VUt(s,s.GZ(),r,e),s.N$().wpt().SUt()}}}const n=[];for(const e of t.c){const t=e.uid,i=this.jUt(t);i&&n.push(i)}let o=0;for(const a of t.c){const h=a.uid,u=this.jUt(h);if(u){if(this.dUt){if(this.dUt.includes(u)){const r=u;if(r.gq()!==u.gq()){o++;continue}if(r.j$()){o++;continue}const a=t.c[o];if(!e?.MLt&&this.$Ut(r,n,i)){if(i.J1().AK(o)){const n=r.gq().PV(),h=a.oci,u=i.J1().AK(o).gq().PV();if(n!==h||h!==u){this.YUt(t.c,i,s,e);break}this.JUt(o,a,i,s,e)}else this.JUt(o,a,i,s,e);o++;continue}if(r.RK()&&r.wK()!==i.J1()){const t=this.qUt(a,e);this.QUt(t,a,s,e),o++;continue}this.QUt(r.N$(),a,s,e,!0),o++;continue}if(this.dUt[o]){const r=this.dUt[o];if(r.gq()!==u.gq()){o++;continue}if(r.j$()){o++;continue}const a=t.c[o];if(!e?.MLt&&this.$Ut(r,n,i)){if(i.J1().AK(o)){const n=r.gq().PV(),h=a.oci,u=i.J1().AK(o).gq().PV();if(n!==h||h!==u){this.YUt(t.c,i,s,e);break}this.JUt(o,a,i,s,e)}else this.JUt(o,a,i,s,e);o++;continue}if(r.RK()&&r.wK()!==i.J1()){const t=this.qUt(a,e);this.QUt(t,a,s,e),o++;continue}this.QUt(r.N$(),a,s,e,!0),o++;continue}}const r=u.gq();if(this.ZUt(n,r)===i.J1().Czt(r).length){for(const t of i.J1()._rt()){if(t.gq()!==r)continue;const i=t.N$();if(i&&!s.has(i)){s.add(i),i.UUt(a.offsets),this.HUt(t,a,e);break}}o++;continue}if(u.RK()&&u.wK()!==i.J1()){const t=this.qUt(a,e);this.QUt(t,a,s,e),o++;continue}this.QUt(u.N$(),a,s,e)}else if(this.dUt&&this.dUt[o]){const h=this.dUt[o],u=r.P7(this.XUt(a));if(h.gq()!==u){o++;continue}if(h.j$()){o++;continue}const c=t.c[o];if(!e?.MLt&&this.$Ut(h,n,i)){if(i.J1().AK(o)){const r=h.gq().PV(),n=c.oci,a=i.J1().AK(o).gq().PV();if(r!==n||n!==a){this.YUt(t.c,i,s,e);break}this.JUt(o,c,i,s,e)}else this.JUt(o,c,i,s,e);o++;continue}if(h.RK()&&h.wK()!==i.J1()){const t=this.qUt(c,e);this.QUt(t,c,s,e),o++;continue}this.QUt(h.N$(),c,s,e)}else{const t=this.qUt(a,e);this.QUt(t,a,s,e)}o++}}YUt(t,e,i,r){const s=e.gY();for(const t of e.J1().children())t&&!t.j$()&&(s.Y$(t),s.BUt(t.GZ()),gP.delete(t.GZ()));this.dUt&&(this.dUt=[]),this.mUt&&(this.mUt=new WeakMap),Object.assign({},r,{assignZIndex:!1});for(const e of t){const t=this.qUt(e,r);this.QUt(t,e,i,r),this.dUt.push(t.J1()),this.mUt.set(t.J1(),this.dUt.length-1)}e.wpt().SUt()}$Ut(t,e,i){const r=t.gq();return this.ZUt(e,r)===i.J1().Czt(r).length}JUt(t,e,i,r,s){const n=i.J1().AK(t);if(!n)return;const o=n.N$();o&&(r.has(o)||(o.UUt(e.offsets),this.HUt(n,e,s)),r.add(o))}zUt(t){const e={};return e.kK=t.includes("x"),e.NK=t.includes("y"),e.FK=t.includes("w"),e.zK=t.includes("h"),e.HK=t.includes("a"),e.WK=t.includes("z"),e.ZK=t.includes("d"),e.YK=t.includes("o"),e.qK=t.includes("v"),e}XUt(t){return yP.Qi(t.oci)?t.oci:t[1]}qUt(t,e){if(!yP.Qi(t.oci))return;const i=this.TE,r=i.gY();let s;const n=!e.hasOwnProperty("createHierarchy")||e.createHierarchy;if(s=t.data?r.L7(t.data,i.F$(),!1,0,0,!1,n):r.Mq(r.P7(t.oci),i.F$(),0,0,n),!s)return;const o=this.WUt(t,r);o&&s.gE(o);const a=s.N$(),h=!!e?.MLt;return a.F$().Iq(s,!0,h),a}VUt(t,e,i,r){if(this.jUt(e)&&!r?.MLt){const r=this.jUt(e);r!==t&&i.Y$(r)}i.BUt(e),i.eBt(e,t)}QUt(t,e,i,r,s=!0){const n=this.TE,o=n.DK(t,this.zUt(e.f));o&&s?(i.has(t)||(t.UUt(e.offsets),this.HUt(t.J1(),e,r)),i.add(t)):o&&(gP.set(t.J1().GZ(),t.J1()),this.VUt(t.J1(),e.uid,n.gY(),r)),this.SUt()}HUt(t,e,i){let r=this.WUt(e,this.TE.gY());if(!r)return;const s=!i.hasOwnProperty("clearChildren")||i.clearChildren,n=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,o=t.gY();if(gP.set(t.GZ(),t),r=JSON.parse(JSON.stringify(r)),s&&t.GZ()!==r.uid){for(const e of t.children())e&&!e.j$()&&(o.Y$(e),o.BUt(e.GZ()),gP.delete(e.GZ()));if(r.w?.sgi&&r.w.sgi.c?.length)for(const e of r.w.sgi.c){const r=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),s=this.qUt(e,r);gP.set(s.J1().GZ(),s.J1()),t.DK(s.J1(),this.zUt(e.f)),s.UUt(e.offsets),this.HUt(s.J1(),e,r)}}const a=r.w?.zi,h=r.w?.l;r.w=null,t.gE(r),i?.MLt||(yP.Qi(a)&&n&&t.N$().H7(a),yP.Qi(h)&&t.sUt(h)),this.VUt(t,r.uid,o,i)}ZUt(t,e){return t.filter(t=>t.gq().Dl()===e.Dl()).length}WUt(t,e){if(yP.Qi(t.instIndex)){const i=e.P7(t.oci).FBt();return i?i[t.instIndex]:null}return yP.nr(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static GUt(t){let e=t.N$().F$().D7(t.GZ());if(!e)return null;e=JSON.parse(JSON.stringify(e));const i=[];for(const e of[...t._rt()]){const t=e.N$();i.push([t.g$().e9(),t.F$().PV(),e.GZ(),yP.Trt.Ert(t),e.gq().LZ()?1:0,t.B$(),yP.Trt.GUt(e)])}return yP._r(e[0][14])?e[0][14][1]=i:(e[0][14]=[],e[0][14][0]=yP.Trt.KUt(),e[0][14][1]=i,e[0][14][2]=t.N$().B$()),e}static Ert(t){let e=0;return e|=Number(t.QK())<<8,e|=Number(t.JK())<<7,e|=Number(t.$K())<<6,e|=Number(t.XK())<<5,e|=Number(t.VK())<<4,e|=Number(t.UK())<<3,e|=Number(t.BK())<<2,e|=Number(t.jK())<<1,e|=0|Number(t.GK()),e}static KUt(t){let e=0;return e|=256,e|=128,e|=64,e|=32,e|=16,e|=8,e|=4,e|=2,e|=1,511}static tHt(){gP.clear()}}}{const vP=self.Ee,wP=self.oe,SP=wP.de,bP=wP.me,_P=vP.$s(vP.Rect),EP=vP.$s(vP.Ou),TP=vP.$s(vP.Event,"bboxchange",!1),PP=vP.$s(vP.ba,0,0,0,0),AP=vP.$s(vP.cc),MP=vP.$s(vP.ba,1,1,1,1),IP=vP.$s(vP.Rect,0,0,-1,-1),OP=vP.$s(vP.Rect,0,0,-1,-1),DP=new Set(["absolute","relative"]),xP=[];let CP=!0;const RP=1,LP=2,kP=4,GP=8,NP=16,jP=32,FP=64,BP=128,zP=256,UP=512,HP=1024,VP=2048,WP=4096,$P=8192,YP=16384,JP=32768,qP=1<<22,QP=1<<23,ZP=12647936,XP=65536,KP=1<<17,tA=1<<18,eA=1<<19,iA=1<<20,rA=1<<21,sA=1<<24,nA=26,oA=31<<26,aA=new WeakMap,hA=new WeakMap;vP.izt=class extends vP.Vs{constructor(t,e){super(),this.hi=t,this.qbt=t.gq(),this.Fl=t.gY(),this.eHt=e,this.qbt.CBt(this,null,e),this.iHt=-1,this.rHt=-1,this.$k=196635,this.qbt.KJ().RJ()&&(this.$k|=128),this.Dh=NaN,this.xh=NaN,this.z_=NaN,this.sHt=NaN,this.nHt=NaN,this.oP=NaN,this.Pa=NaN,this.oHt=NaN,this.aHt=NaN,this.hHt=NaN,this.uHt=NaN,this.cHt=vP.$s(vP.Rect),this.lHt=vP.$s(vP.Ou),this.fHt=OP,this.pHt=IP,this.dHt=null,this.mHt=null,this.yHt=null,this.B_=MP,this.gHt=MP,this.vHt=null,this.wHt=null,this.hi.gq().lBt()&&(this.wHt=vP.$s(vP.SHt,this.hi,this)),this.bHt=null,this.dUt=null,this.mUt=null,this._Ht=-1,this.EHt=null}gzt(){this.$k|=256}j$(){return!!(256&this.$k)}Ys(){if(this.qbt.CBt(this,this.eHt,null),this.vHt&&(this.Fl.E_().US(this.vHt),this.vHt=null),this.dHt=null,this.mHt&&(this.mHt.THt.Ys(),this.mHt=null),this.yHt&&(this.yHt.clear(),this.yHt=null),this.i0(),this.wHt&&this.wHt.Ys(),this.RK()&&this.wK().xK(this),this.Aet()){const t=[...this._rt()];for(const e of t)this.xK(e)}this.PHt(),this.AHt(),aA.delete(this),hA.delete(this),this.hi=null,this.qbt=null,this.Fl=null,this.eHt=null}szt(t){if(CP=!1,this.jX(t[0],t[1]),this.uE(t[2]),this.$D(t[3],t[4]),this.oP=0,this.RJ()?this.Jq(t[6]):this.Pa=0,PP.wh(t[7]),this.MHt(PP),this.HX(t[8]),this.$X(t[9]),this.W_(t[10]),this.wHt&&this.wHt.IHt(t[12]),t[14]&&aA.set(this,{OHt:t[14][1],DHt:t[14][2]}),t[15]){const e=t[15];this.t0(e[0],e[1]);const i=this.a0(),r=e[2];for(let t=0,e=r.length;t<e;++t){const e=r[t];for(let r=0,s=e.length;r<s;++r){const s=e[r],n=i.$E(r,t);n.sE(s[0]),n.aE(s[1]),n.uE(s[2]),n.lE(s[3]),n.pE(s[4])}}}if(t[16]){const e=t[16][0],i=t[16][1],r=!!i,s=!r,n=this.Fl.jzt();r&&n&&n.twt(this.J1(),i),s&&n&&n.twt(this.J1(),e)}CP=!0,this.xHt()}nzt(){this.Dh=0,this.xh=0,this.z_=0,this.sHt=0,this.nHt=0,this.oP=0,this.Pa=0,this.oHt=0,this.aHt=1,this.hHt=0,this.uHt=0,this.xHt()}gY(){return this.Fl}gq(){return this.qbt}J1(){return this.hi}CHt(){return this.VK()?this.RHt(this.wK().LHt()-this.bHt.OUt()):0}sE(t){if(t=+t,this.GK()){const e=this.bHt,i=t-this.rE(),r=-this.CHt();0===r?this.Dh+=i/e.MUt():(this.Dh+=Math.cos(r)*i/e.MUt(),this.jK()&&(this.xh+=Math.sin(r)*i/e.IUt()))}else this.Dh=t}$dt(t,e=!1){t=+t,e?this.Dh+=t:this.GK()?this.sE(this.rE()+t):this.Dh+=t}rE(){if(this.GK()){let t=this.Dh;const e=this.bHt,i=this.wK(),r=this.CHt();return 0===r?t*=e.MUt():(t=t*e.MUt()*Math.cos(r),this.jK()&&(t-=this.xh*e.IUt()*Math.sin(r))),i.rE()+t}return this.Dh}aE(t){if(t=+t,this.jK()){const e=this.bHt,i=t-this.oE(),r=-this.CHt();0===r?this.xh+=i/e.IUt():(this.GK()&&(this.Dh-=Math.sin(r)*i/e.MUt()),this.xh+=Math.cos(r)*i/e.IUt())}else this.xh=t}Ydt(t,e=!1){t=+t,e?this.xh+=t:this.jK()?this.aE(this.oE()+t):this.xh+=t}oE(){if(this.jK()){let t=this.xh;const e=this.bHt,i=this.wK(),r=this.CHt();return 0===r?t*=e.IUt():(t=t*e.IUt()*Math.cos(r),this.GK()&&(t+=this.Dh*e.MUt()*Math.sin(r))),i.oE()+t}return this.xh}jX(t,e){if(t=+t,e=+e,this.kHt()){const i=this.GK(),r=this.jK(),s=this.bHt,n=t-this.rE(),o=e-this.oE(),a=-this.CHt();if(0===a)i?this.Dh+=n/s.MUt():this.Dh=t,r?this.xh+=o/s.IUt():this.xh=e;else{const h=Math.sin(a),u=Math.cos(a);i?this.Dh+=r?(u*n-h*o)/s.MUt():u*n/s.MUt():this.Dh=t,r?this.xh+=i?(h*n+u*o)/s.IUt():u*o/s.IUt():this.xh=e}}else this.Dh=t,this.xh=e}GHt(){return[this.rE(),this.oE()]}BX(t,e){t=+t,e=+e,this.kHt()?this.jX(this.rE()+t,this.oE()+e):(this.Dh+=t,this.xh+=e)}BCt(t,e){return this.rE()===t&&this.oE()===e}uE(t){if(t=+t,this.$K()&&(t-=this.wK().hE()),this.z_===t)return;this.z_=t,this.NHt();const e=this.F$();0!==this.z_&&e.z7(),e.V$(this)}NHt(){if(this.xHt(),this.Aet()){const t=this._rt();for(let e=0,i=t.length;e<i;e++){const i=t[e];i.$K()&&i.NHt()}}}umt(t){this.uE(this.hE()+t)}hE(){return this.$K()?this.wK().hE()+this.z_:this.z_}QX(){return this.F$().hE()+this.hE()}xct(){return this.J1().KJ().xxt()<2&&this.J1().y0().xct()}cg(t){if(t=+t,this.BK()){const e=this.Eg();0===e?this.sHt=Number.EPSILON:this.sHt*=t/e}else this.sHt=t;this.jHt()}jg(t,e){t=+t,e?this.sHt+=t:this.BK()?this.cg(this.Eg()+t):this.sHt+=t,this.jHt()}Eg(){if(this.BK()){const t=this.wK(),e=t.Eg();return t.wpt().vpt()===Number.EPSILON?(this.wpt().vpt()+e)*this.sHt:e*this.sHt}return this.sHt}lg(t){if(t=+t,this.UK()){const e=this.Pg();0===e?this.nHt=Number.EPSILON:this.nHt*=t/e}else this.nHt=t;this.jHt()}Kdt(t,e){t=+t,e?this.nHt+=t:this.UK()?this.lg(this.Pg()+t):this.nHt+=t,this.jHt()}Pg(){if(this.UK()){const t=this.wK(),e=t.Pg();return t.wpt().Ept()===Number.EPSILON?(this.wpt().Ept()+e)*this.nHt:e*this.nHt}return this.nHt}$D(t,e){if(t=+t,e=+e,this.BK()){const e=this.Eg();0===e?this.sHt=Number.EPSILON:this.sHt*=t/e}else this.sHt=t;if(this.UK()){const t=this.Pg();0===t?this.nHt=Number.EPSILON:this.nHt*=e/t}else this.nHt=e;this.jHt()}Nc(){return[this.Eg(),this.Pg()]}Ztt(){return this.oP}FHt(t){if(t<0)throw new RangeError("invalid depth");this.oP=t}BHt(){if(this.RK()){const t=this.bHt;return Math.min(t.MUt(),t.IUt())}return 1}RJ(){return!!(128&this.$k)}Jq(t){t=+t,this.RJ()&&(this.VK()&&(t-=this.wK().qq()),t=vP.Ks(t),this.Pa!==t&&(this.Pa=t,this.jHt()))}tmt(t){0!==(t=+t)&&this.RJ()&&(this.Pa=vP.Ks(this.Pa+t),this.jHt())}jHt(){if(this.$k|=262144,this.Aet()){const t=this._rt();for(let e=0,i=t.length;e<i;e++)t[e].jHt()}}qq(){return this.VK()&&this.RJ()?this.RHt(vP.Ks(this.wK().LHt()+this.Pa)):this.Pa}LHt(){return this.VK()&&this.RJ()?vP.Ks(this.wK().LHt()+this.Pa):this.Pa}RHt(t){return this.BK()&&this.bK().Eg()<0&&(t=vP.Ks(vP.mn(t,this.bK().qq()+Math.PI))),this.UK()&&this.bK().Pg()<0&&(t=vP.mn(t,this.bK().qq())),t}zHt(){const t=this.wK();return!!(this.BK()&&t.Eg()<0)||!!(this.UK()&&t.Pg()<0)}UHt(){const t=this.wK();return!!(this.BK()&&t.Eg()<0&&this.UK()&&t.Pg()<0)}HHt(){const t=this.$k;if(!(262144&t))return;const e=this.qq();this.oHt=Math.sin(e),this.aHt=Math.cos(e),this.$k=-262145&t}WCt(){return this.HHt(),this.oHt}VCt(){return this.HHt(),this.aHt}HX(t){this.hHt=+t}amt(t){this.hHt+=+t}UX(){return this.hHt}$X(t){this.uHt=+t}hmt(t){this.uHt+=+t}WX(){return this.uHt}MHt(t){this.B_.equals(t)||(this.B_===MP?(this.B_=vP.$s(vP.ba,t),this.gHt=vP.$s(vP.ba,t),this.gHt.qa()):t.Wa(1,1,1,1)?(this.B_=MP,this.gHt=MP):(this.B_.set(t),this.gHt.set(t),this.gHt.qa()),this.xHt())}kR(t){if(t=vP.Xs(+t,0,1),this.JK()){if(this.wpt().cRt()===t)return;this.wpt().AUt(t),t=this.RR()}else if(this.B_.a===t)return;this.VHt(t)}WHt(){if(!this.Aet())return;const t=this._rt();for(let e=0,i=t.length;e<i;e++){const i=t[e];i.VHt(i.RR())}}VHt(t){PP.La(this.B_),PP.a=t,this.MHt(PP),this.WHt()}rmt(t){this.JK()?this.kR(this.wpt().cRt()+t):this.kR(this.RR()+t)}RR(){return this.JK()?this.wK().RR()*this.wpt().cRt():this.B_.a}oK(t){this.B_.Ha(t)||(PP.La(t),PP.a=this.RR(),this.MHt(PP))}Ndt(t,e,i){PP.Ma(t,e,i),this.oK(PP)}$Ht(t,e,i){0===t&&0===e&&0===i||(PP.La(this.B_),PP.r+=t,PP.g+=e,PP.b+=i,this.oK(PP))}nK(){return this.B_}h7(){return this.gHt}XK(){return!!(512&this.$k)}YHt(t){this.qG(512,t)}GK(){return!!(1024&this.$k)}JHt(t){this.qG(1024,t)}jK(){return!!(2048&this.$k)}kHt(){return!!(3072&this.$k)}qHt(t){this.qG(2048,t)}BK(){return!!(4096&this.$k)}QHt(t){this.qG(4096,t)}UK(){return!!(8192&this.$k)}ZHt(t){this.qG(8192,t)}VK(){return!!(16384&this.$k)}XHt(t){this.qG(16384,t)}$K(){return!!(32768&this.$k)}KHt(t){this.qG(32768,t)}JK(){return!!(4194304&this.$k)}tVt(t){this.qG(4194304,t)}QK(){return!!(8388608&this.$k)}eVt(t){this.qG(8388608,t)}iVt(){this.$k&=-12647937}DK(t,e){if(t===this)return!1;if(t.RK())return!1;if(this.rVt(t))return!1;if(this.sVt(t))return!1;const i=t.rE(),r=t.oE(),s=t.Eg(),n=t.Pg(),o=t.qq(),a=t.hE(),h=t.RR();t.nVt(this),t.JHt(e.kK),t.qHt(e.NK),t.QHt(e.FK),t.ZHt(e.zK),t.XHt(e.HK),t.KHt(e.WK),t.tVt(e.YK),t.eVt(e.qK),t.YHt(e.ZK);const u=i-this.rE(),c=r-this.oE(),l=-this.qq(),f=Math.cos(l),p=Math.sin(l);if(e.kK&&(e.HK?t.Dh=u*f-c*p:t.Dh=u,e.FK)){const e=this.Eg()/this.bHt.vpt();0!==e&&(t.Dh/=e)}if(e.NK&&(e.HK?t.xh=u*p+c*f:t.xh=c,e.zK)){const e=this.Pg()/this.bHt.Ept();0!==e&&(t.xh/=e)}if(e.FK){const e=this.Eg();0===e||e===Number.EPSILON?(t.sHt=1,t.bHt.EUt(1)):(t.sHt=s/this.Eg(),t.bHt.EUt(t.sHt))}if(e.zK){const e=this.Pg();0===e||e===Number.EPSILON?(t.nHt=1,t.bHt.PUt(1)):(t.nHt=n/this.Pg(),t.bHt.PUt(t.nHt))}return e.HK&&(t.Pa=o-this.qq()),e.WK&&(t.z_=a-this.hE()),e.YK&&t.bHt.AUt(h),e.qK&&t.RQ(this.kQ()),this.oVt(t),this.NX(),this.WHt(),!0}xK(t){if(t.wK()!==this)return;const e=t.rE(),i=t.oE(),r=t.Eg(),s=t.Pg(),n=t.qq(),o=t.hE(),a=t.RR();t.nVt(null),t.iVt(),t.jX(e,i),t.$D(r,s),t.Jq(n),t.uE(o),t.kR(a),this.aVt(t),this.NX()}hVt(){return this._Ht}uVt(){this.cVt();const t=[...this.children()];for(const e of t)this.xK(e);const e=this.wK();e&&e.xK(this),this.iVt()}cVt(){if(this.lVt(),!this.dUt){const t=[...this.children()];t.length&&(this.dUt=[],this.mUt=new WeakMap);let e=0;for(const i of t){const t=i.J1();this.dUt.push(t),this.mUt.set(t,e),e++}}const t=this.wK();t&&t.cVt()}lVt(){if(-1!==this._Ht)return;const t=[...this._K()];this._Ht=t.length;for(const e of t)e.lVt();const e=[...this.children()];for(const t of e)t.lVt()}AHt(){this.dUt&&(this.dUt.length=0),this.dUt=null,this.mUt=null;const t=this.wK();t&&t.AHt(),this._Ht=-1}RK(){return null!==this.wK()}wK(){const t=this.bHt;return null!==t?t.wK():null}bK(){let t=this;for(;t.RK();)t=t.wK();return t}*_K(){let t=this.wK();for(;t;)yield t,t=t.wK()}xzt(t){return this._rt().includes(t)}Aet(){const t=this.bHt;return null!==t&&t.Aet()}_rt(){const t=this.bHt;return null!==t?t._rt():xP}children(){return this._rt()}*MK(){for(const t of this.children())yield t,yield*t.MK()}TK(){return this._rt().length}zRt(){return[...this.MK()].length}AK(t){const e=this._rt();return(t=Math.floor(+t))<0||t>=e.length?null:e[t]}kzt(t){if(!t)return NaN;const e=this._rt();if(!e)return NaN;for(let i=0;i<e.length;i++)if(t===e[i])return i;return NaN}fVt(t){this.bHt||(this.bHt=vP.$s(vP.Trt,this)),t&&this.bHt.wUt(t)}wpt(){return this.bHt}PHt(){this.bHt&&(this.bHt.Ys(),this.bHt=null)}nVt(t){t?(t.fVt(null),this.fVt(t)):(this.bHt&&this.bHt.wUt(null),this.Aet()||this.PHt())}sVt(t){if(!this.RK())return!1;const e=this.wK();return e===t||e.sVt(t)}rVt(t){if(this.xzt(t))return!0;for(const e of this._rt())if(e.rVt(t))return!0;return!1}oVt(t){this.bHt._rt().push(t)}aVt(t){const e=this.bHt._rt(),i=e.indexOf(t);-1!==i&&e.splice(i,1),0!==e.length||this.RK()||this.PHt(),t.Aet()||t.PHt()}Nzt(){const t=aA.get(this);return t?t.OHt:null}pVt(){const t=aA.get(this);return t?t.DHt:NaN}Pet(){const t=hA.get(this);return vP.Qi(t)?t:NaN}dVt(t){hA.set(this,t)}mVt(){this.qG(524288,!0),this.xHt()}xHt(){if(!CP)return;const t=this.Fl.E_();let e;this.vHt&&t.US(this.vHt),e=524288&this.$k?t.TS()||"<point>":t.bS()||"<default>",this.vHt=t.jS(e,this.cZ(),this.gHt,this.hE(),this.yVt()?1:0,0)}net(){return this.vHt}n9(){return this.B_===MP}W_(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.cZ()!==t&&(this.$k=-2080374785&this.$k|t<<26,this.xHt())}cZ(){return(2080374784&this.$k)>>26}H$(t,e){const i=e&&this.eHt!==t;i&&this.F7(),this.qbt.CBt(this,this.eHt,t),this.eHt=t,i&&this.gVt(),0!==this.hE()&&this.eHt.z7()}F$(){return this.eHt}g$(){return this.F$().g$()}H7(t){this.iHt=0|t}B$(){return this.eHt.Z9(),this.iHt}ett(t){this.rHt=0|t}F2(){return this.eHt.K9(),this.rHt}F8(){return this.iHt}qG(t,e){e?this.$k|=t:this.$k&=~t}kQ(){return!!(1&this.$k)}RQ(t){if(this.qG(1,t),this.Aet())for(const e of this._rt())e.QK()&&e.RQ(t)}yK(){return!!(8&this.$k)}gK(t){t=!!t,this.yK()!==t&&(this.qG(8,t),t?this.NX():this.vVt())}wVt(t,e){this.qG(32,t),this.yHt&&this.yHt.clear();for(const t of e)this.yHt||(this.yHt=new Set),this.yHt.add(t.toLowerCase());this.yHt&&0===this.yHt.size&&(this.yHt=null)}SVt(t){const e=t.bzt()?t.Vzt():t.Nxt().get("solidTags"),i=!!(32&this.$k),r=this.yHt;if(!e||!r)return!i;for(const t of r)if(e.has(t))return i;return!i}NX(){if(this.$k|=65554,this.qbt.OBt(!0),this.Fl.W$(),this.eHt.b7()&&(this.XX(this.cHt,this.lHt,!0),this.$k&=-3,this.gVt()),4&this.$k&&this.hi.wf().dispatchEvent(TP),null!==this.bHt){const t=this.bHt._rt();for(let e=0,i=t.length;e<i;++e)t[e].NX()}}XX(t,e,i){const r=this.rE(),s=this.oE(),n=this.Eg(),o=this.Pg(),a=this.qq();t.Wh(r-this.hHt*n,s-this.uHt*o,n,o),i&&this.o0()&&this.bVt(t),0===a?e.Qu(t):(t.offset(-r,-s),e.Xu(t,this.WCt(),this.VCt()),e.offset(r,s),e.Ku(t)),t.normalize()}_Vt(){const t=this.$k;2&t&&(this.XX(this.cHt,this.lHt,!0),this.$k=-3&t)}KX(){return this._Vt(),this.cHt}eK(){return this._Vt(),this.lHt}EVt(t){const e=this.rE(),i=this.oE(),r=Math.round(e)-e,s=Math.round(i)-i;return 0===r&&0===s?t:(EP.v(t),EP.offset(r,s),EP)}TVt(t){this.cHt.v(t),this.lHt.Qu(this.cHt),this.$k&=-3,this.xBt(),this.gVt()}PVt(t){this.qG(4,t)}AVt(){return!!(4&this.$k)}$tt(t,e,i){return e&&0!==this.Ztt()?this.qtt(this.F$().Jtt()):0===this.hE()||i?t.Eu(this.KX()):this.MVt()}MVt(){const t=this.F$(),e=this.QX();return!(e>=t._9())&&(t.S9(e,_P),_P.Eu(this.KX()))}qtt(t){const e=this.KX(),i=e.Kh(),r=e.eu(),s=e.tu(),n=e.iu(),o=this.QX(),a=o+this.Ztt();return t.hw(i,s,o,r,n,a)}rK(){const t=this.F$();if(t.L9())return this.qtt(t.Jtt());{const e=t.g$();return this.$tt(t.dZ(),e.Wtt(),e.TQ())}}eet(t){this.qG(1048576,t)}tet(t){this.qG(2097152,t)}IVt(){return!!(1048576&this.$k)}OVt(){return!!(2097152&this.$k)}DVt(t){(t=!!t)!==this.yVt()&&(this.qG(16777216,t),this.xHt())}yVt(){return!!(16777216&this.$k)}xVt(t){this.dHt=t,this.CVt(),this.o0()&&(this.EHt.RVt=null)}LVt(){return this.dHt}kVt(){return null!==this.dHt||this.o0()}GVt(){return this.NVt(this.Eg(),this.Pg(),this.qq(),this.WCt(),this.VCt())}jVt(t,e,i){let r=0,s=1;return 0!==i&&(r=Math.sin(i),s=Math.cos(i)),this.NVt(t,e,i,r,s)}NVt(t,e,i,r,s){let n=this.mHt;null===n&&(n={THt:vP.$s(vP.cc),width:NaN,height:NaN,angle:NaN},this.mHt=n);const o=n.THt;if(n.width===t&&n.height===e&&n.angle===i)return o;const a=this.dHt;if(this.o0()){const i=this.UX(),n=this.WX(),h=this.a0();let u=this.EHt.RVt;u||(a?(AP.v(a),AP.offset(i,n)):AP.Sc(),u=h.iT(AP),this.EHt.RVt=u),h.rT(u,o),o.offset(-i,-n),o.Tc(t,e,r,s)}else a?(o.v(a),o.Tc(t,e,r,s)):o.Ec(this.eK(),-this.rE(),-this.oE());return n.width=t,n.height=e,n.angle=i,o}CVt(){this.FVt(!0);const t=this.mHt;null!==t&&(t.width=NaN)}t0(t,e){if(t=Math.floor(t),e=Math.floor(e),!this.J1().KJ().zJ())throw new Error("object does not support mesh");this.i0(),this.EHt={BVt:vP.$s(vP.qv.bE,t,e),zVt:vP.$s(vP.qv.bE,t,e),RVt:null}}o0(){return null!==this.EHt}a0(){if(!this.o0())throw new Error("no mesh");return this.EHt.BVt}UVt(){if(!this.o0())throw new Error("no mesh");return this.EHt.zVt}HVt(t){this.qG(65536,t)}VVt(){return!!(65536&this.$k)}FVt(t){this.qG(131072,t)}WVt(){return!!(131072&this.$k)}bVt(t){const e=this.EHt.BVt,i=Math.min(e.BE(),0),r=Math.min(e.zE(),0),s=Math.max(e.UE(),1),n=Math.max(e.HE(),1),o=t.width(),a=t.height();t.offsetLeft(i*o),t.offsetTop(r*a),t.uu((s-1)*o),t.cu((n-1)*a),this.oP=e.VE()}i0(){this.EHt&&(this.EHt.BVt.Ys(),this.EHt.zVt.Ys(),this.EHt=null,this.CVt())}s0(t,e,i){t=Math.floor(t),e=Math.floor(e);const r=i.mode||"absolute";if(!DP.has(r))throw new Error("invalid mode");const s="relative"===r;let n=i.x,o=i.y;const a=i.Hj;let h="number"==typeof i.h0?i.h0:s?0:-1,u="number"==typeof i.u0?i.u0:s?0:-1;if(!this.o0())return!1;const c=this.a0(),l=c.$E(t,e);if(null===l)return!1;let f=!1;return"number"==typeof a&&l.hE()!==a&&(l.uE(a),f=!0),s&&(n+=t/(c.kE()-1),o+=e/(c.GE()-1)),-1!==h||s?(s&&(h+=t/(c.kE()-1)),h=vP.Xs(h,0,1)):h=l.cE(),-1!==u||s?(s&&(u+=e/(c.GE()-1)),u=vP.Xs(u,0,1)):u=l.fE(),l.rE()===n&&l.oE()===o&&l.cE()===h&&l.fE()===u?f:(l.sE(n),l.aE(o),l.lE(h),l.pE(u),this.CVt(),!0)}yzt(){return this.hi.yzt()}vK(t,e){return!!this.KX().Pu(t,e)&&!!this.eK().Pu(t,e)&&(this.yzt()?this.hi.y0().nNt(t,e):!this.kVt()||this.GVt().Pu(t-this.rE(),e-this.oE()))}$Vt(){return!!(16&this.$k)}xBt(){if(!this.$Vt()||!this.yK()||this.j$())return;const t=this.KX(),e=this.qbt.IBt(),i=this.fHt;if(_P.set(e.r6(t.Kh()),e.s6(t.tu()),e.r6(t.eu()),e.s6(t.iu())),i.equals(_P))return;const r=this.hi;i===OP?(e.n6(r,null,_P),this.fHt=vP.$s(vP.Rect,_P)):(e.n6(r,i,_P),i.v(_P)),this.$k&=-17}YVt(){this.$k|=16}vVt(){const t=this.fHt;t!==OP&&(this.qbt.IBt().n6(this.hi,t,null),this.fHt=OP)}gVt(){const t=this.F$();if(!t.b7()||this.j$())return;const e=t.a9(),i=this.KX(),r=this.pHt;if(_P.set(e.r6(i.Kh()),e.s6(i.tu()),e.r6(i.eu()),e.s6(i.iu())),r.equals(_P))return;const s=this.hi;r===IP?(e.n6(s,null,_P),this.pHt=vP.$s(vP.Rect,_P)):(e.n6(s,r,_P),r.v(_P)),t.h9()}F7(){const t=this.pHt;t!==IP&&(this.F$().a9().n6(this.hi,t,null),this.pHt=IP)}X9(){return this.pHt}hK(){if(this.j$())return;const t=this.hi,e=this.eHt,i=e.U$();i.length&&i.at(-1)===t||(e.j7(t,!1),e.k7(t,!1),this.Fl.W$())}cK(){if(this.j$())return;const t=this.hi,e=this.eHt,i=e.U$();i.length&&i[0]===t||(e.j7(t,!1),e.N7(t,!1),this.Fl.W$())}fK(t){if(this.j$())return;const e=this.hi,i=this.eHt;if(i.g$()!==t.g$())throw new Error("layer from different layout");t!==i&&(i.j7(e,!0),this.H$(t),t.k7(e,!0),this.Fl.W$())}dK(t,e){if(this.j$())return;const i=this.hi;let r=!1;const s=this.eHt;if(t.GZ()===i.GZ())return;const n=t.N$();if(!n)throw new Error("expected world instance");const o=n.F$();s.PV()!==o.PV()&&(s.j7(i,!0),this.H$(o),o.k7(i,!0),r=!0);const a=o.ntt(i,t,!!e);(r||a)&&this.Fl.W$()}kX(){return this.wHt}JVt(t){this.qG(64,t)}ftt(){return!!(64&this.$k)}_et(t,e=null){const i={x:this.rE(),y:this.oE(),w:this.Eg(),h:this.Pg(),l:this.F$().e9(),zi:this.B$()};0!==this.hE()&&(i.ze=this.hE()),0!==this.qq()&&(i.a=this.LHt()),this.n9()||(i.c=this.B_.toJSON()),.5!==this.UX()&&(i.oX=this.UX()),.5!==this.WX()&&(i.oY=this.WX()),0!==this.cZ()&&(i.bm=this.cZ()),this.kQ()||(i.v=this.kQ()),this.yK()||(i.ce=this.yK()),this.AVt()&&(i.be=this.AVt()),this.wHt&&(i.fx=this.wHt._et());const r=!!(32&this.$k);return r&&(i.sfi=r),this.yHt&&(i.sft=[...this.yHt].join(" ")),this.bHt&&"visual-state"!==t&&(i.sgi=this.bHt._et(t,e),aA.has(this)&&(i.sgcd=aA.get(this).OHt,i.sgzid=aA.get(this).DHt)),this.o0()&&(i.mesh=this.a0().yE()),i}kUt(){return{x:this.Dh,y:this.xh,z:this.z_,w:this.sHt,h:this.nHt,a:this.Pa,sgi:this.wpt()?this.wpt().DUt():null}}UUt(t){t&&(this.Dh=t.x,this.xh=t.y,this.z_=t.z,this.sHt=t.w,this.nHt=t.h,this.Pa=t.a,t.sgi&&this.wpt()&&this.wpt().Eet(t.sgi),this.jHt(),this.NX())}zBt(){this.AHt(),this.uVt(),this.fVt(null),this.bHt&&this.bHt.NUt(this.dUt,this.mUt)}Pst(t){"visual-state"!==t&&this.uVt()}Mst(t,e="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==e){if(this.j$())return;this.bHt.Mst(t.sgi,i)}}rUt(t,e="full",i=null){if("visual-state"!==e)if(this.j$())this.AHt();else{if(t.hasOwnProperty("sgi"))this.bHt.NUt(null,null,t.sgi,i);else if(i?.MLt&&this.dUt)for(const t of this.dUt)t.j$()||this.Fl.Y$(t);this.AHt(),this.NX()}}Eet(t,e,i=null){if(CP=!1,this.sE(t.x),this.aE(t.y),this.cg(t.w),this.lg(t.h),this.H7(t.zi),this.uE(t.hasOwnProperty("ze")?t.ze:0),this.Jq(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?PP.wh(t.c):t.hasOwnProperty("o")?(PP.La(this.B_),PP.a=t.o):PP.Aa(1,1,1,1),this.MHt(PP),this.HX(t.hasOwnProperty("oX")?t.oX:.5),this.$X(t.hasOwnProperty("oY")?t.oY:.5),this.W_(t.hasOwnProperty("bm")?t.bm:0),this.RQ(!t.hasOwnProperty("v")||t.v),this.gK(!t.hasOwnProperty("ce")||t.ce),this.PVt(!!t.hasOwnProperty("be")&&t.be),this.wVt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.wHt&&t.hasOwnProperty("fx")&&this.wHt.Eet(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==e){this.fVt(null);const e=this.bHt,i=t.sgi;e.Eet(i),e.NUt(this.dUt,this.mUt),this.qVt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const e=t.mesh;this.t0(e.cols,e.rows),this.a0().gE(e)}else this.i0();this.NX(),CP=!0,this.xHt(),"visual-state"!==e&&this.Fl.QVt(this.J1(),t)}qVt(t,e){t&&vP.Qi(e)&&aA.set(this,{OHt:t,DHt:e})}}}{const uA=self.Ee;uA.SFt=class extends uA.Vs{constructor(t,e){super();const i=t.gY(),r=i.tOt(e[1]);i.ZVt().JNt(r),this.Fl=i,this.qbt=t,this.RNt=uA.EJ.x0(r),this.vGt=null,this.XVt=null,this.Zjt=r.Instance,this.E6=e[2],this.Qs=e[0],this.kOt=this.Fl.TTt(e[3]);const s=this.RNt.xxt();if(s<2&&(this.vGt=uA.$s(r.NFt,this),!(this.vGt instanceof uA.CNt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(uA.EJ.tGt(this,s),s>=2){const t=r.NFt??globalThis.r3;if(this.XVt=new t,!(this.XVt instanceof globalThis.r3))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.XVt=new globalThis.O0;uA.EJ.eGt(s),this.qkt()}static WP(t,e){return uA.$s(uA.SFt,t,e)}Ys(){this.Fl=null,this.RNt=null,this.vGt&&(this.vGt.Ys(),this.vGt=null),this.Zjt=null}ACt(){return this.vGt}qkt(){this.vGt?this.vGt.qkt():this.XVt&&this.XVt.d2()}gY(){return this.Fl}gq(){return this.qbt}E0(){return this.RNt}sBt(){return this.Zjt}Dl(){return this.Qs}e9(){return this.E6}P0(){return this.XVt}TTt(){return this.kOt}}}{const cA=self.Ee,lA=self.b0;cA.KBt=class extends cA.Vs{constructor(t){super(),this.Fl=t.runtime,this.dDt=t.T0,this.RNt=this.dDt.E0(),this.hi=t.M0,this.Uv=t.index,this.$Bt=null,this.YBt=null,this.RNt.k7(this.hi)}Ys(){this.YBt&&(this.YBt.DZ(),this.YBt=null),this.RNt.j7(this.hi),this.$Bt&&(this.$Bt.Ys(),this.$Bt=null),this.Fl=null,this.dDt=null,this.RNt=null,this.hi=null}tBt(t){if(this.$Bt)throw new Error("already got sdk instance");if(this.E0().xxt()<2){if(this.$Bt=cA.$s(this.dDt.sBt(),this,t),!(this.$Bt instanceof cA.LNt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const e=this.E0().Qkt();this.Kkt(e.Instance,t)}}y0(){return this.$Bt??this.YBt}I0(){return this.hi}gY(){return this.Fl}A0(){return this.dDt}E0(){return this.RNt}Edt(){return this.Uv}NNt(){this.$Bt?this.$Bt.NNt():this.YBt.o3()}zNt(t,e){this.$Bt&&this.$Bt.zNt(t,e)}iUt(){return this.$Bt?this.$Bt.FGt():this.YBt.EX()}yE(t="full"){return this.$Bt?this.$Bt.yE(t):this.YBt.TX(t)}gE(t,e="full"){if(this.$Bt)return this.$Bt.gE(t,e);this.YBt.PX(t,e)}static KVt(t,e,i){const r=globalThis.s3;let s,n;s=e instanceof r?t.cQ(e):e.GNt(),n=i instanceof r?t.cQ(i):i.GNt();const o=s.I0(),a=n.I0(),h=o.gq().PV(),u=a.gq().PV();if(h!==u)return h-u;const c=o.Hzt(),l=a.Hzt();return c!==l?c-l:s.Edt()-n.Edt()}Kkt(t,e){const i=lA,r=t??this.$Bt.Qkt(),s=r||i,n=this.E0().xxt();if(cA.EJ.tGt(this,n),cA.EJ.qNt(e),this.YBt=new s,cA.EJ.QNt(),cA.EJ.eGt(n),r&&!(this.YBt instanceof i))throw new TypeError(`script interface class '${r.name}' does not extend the right base class '${i.name}'`);return this.YBt}bGt(){return this.YBt||this.Kkt()}HGt(){return!!this.YBt}}}{const fA=self.Ee;fA.o7=class extends fA.Vs{constructor(t,e){super(),this.TE=t,this.tWt=[],this.eWt=[],this.iWt=new Map,this.rWt=[],this.sWt=[],this.nWt=new Set,this.f_=!0;for(const t of e){const e=fA.$s(fA.oWt,this,t,this.tWt.length);this.tWt.push(e),this.iWt.set(e.Dl().toLowerCase(),e),t.length>=3&&this.rWt.push(this.aWt(e,t[2]))}this.gY().hWt(this)}Ys(){this.gY().uWt(this);for(const t of this.sWt)t.Ys();fA.So(this.sWt),fA.So(this.tWt),fA.So(this.eWt),this.iWt.clear(),fA.So(this.rWt),this.TE=null}cWt(t){this.nWt.add(t)}lWt(t){this.nWt.delete(t)}fWt(t){t.dS()&&(this.sWt=this.tWt.map(t=>{const e=t.$A();return e.gB()>0?fA.$s(fA.qv.mB,e):null}),this.pWt());for(const e of this.nWt)e.fWt(t)}XFt(t){if(t.length){this.tWt=t.concat(this.tWt);for(const e of t)this.iWt.set(e.Dl().toLowerCase(),e);for(let t=0,e=this.tWt.length;t<e;++t)this.tWt[t].Q7(t)}}aWt(t,e){t.dWt(e[0]);const i=e.slice(1);for(let t=0,e=i.length;t<e;++t){const e=i[t];if(Array.isArray(e)){const r=fA.$s(fA.ba);r.wh(e),i[t]=r}}return i}NE(){return this.TE}gY(){return this.TE.gY()}L0(){fA.So(this.eWt);let t=!0;for(const e of this.tWt)e.HAt()&&(this.eWt.push(e),e.$A().O_()||(t=!1));this.f_=t}Hq(){return this.tWt}fBt(){return this.tWt.length>0}ept(t){return this.iWt.get(t.toLowerCase())||null}mWt(t){if((t=Math.floor(+t))<0||t>=this.tWt.length)throw new RangeError("invalid effect type index");return this.tWt[t]}C0(t){return this.mWt(t).HAt()}R0(t,e){this.mWt(t).dWt(e)}o9(){return this.eWt}ftt(){return this.eWt.length>0}O_(){return this.f_}tpt(t){return this.rWt[t]}c7(t){return t<this.sWt.length?this.sWt[t]:this.rWt[t]}k0(t,e){if(t<0||t>=this.rWt.length)return null;const i=this.rWt[t];return e<0||e>=i.length?null:i[e]}G0(t,e,i){if(t<0||t>=this.rWt.length)return!1;const r=this.rWt[t];if(e<0||e>=r.length)return!1;const s=r[e];if(s instanceof fA.ba){if(s.Ha(i))return!1;s.La(i)}else{if(s===i)return!1;r[e]=i}return t<this.sWt.length&&this.sWt[t]._B(e,i),!0}pWt(){const t=this.rWt,e=this.sWt;for(let i=0,r=Math.min(t.length,e.length);i<r;++i){const r=e[i],s=t[i];for(let t=0,e=s.length;t<e;++t)r._B(t,s[t])}}static yWt(t){return t&&t instanceof fA.ba?{t:"color",v:t.toJSON()}:t}static gWt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const e=fA.$s(fA.ba);return e.wh(t.v),e}throw new Error("invalid effect parameter type")}return t}static vWt(t){return t.map(fA.o7.yWt)}static wWt(t){return t.map(fA.o7.gWt)}yE(){return this.tWt.map(t=>({name:t.Dl(),active:t.HAt(),params:fA.o7.vWt(this.rWt[t.PV()])}))}gE(t){for(const e of t){const t=this.ept(e.name);t&&(t.dWt(e.active),this.rWt[t.PV()]=fA.o7.wWt(e.params))}this.L0(),this.pWt()}}}{const pA=self.Ee;pA.oWt=class extends pA.Vs{constructor(t,e,i){super(),this.n7=t,this.zl=e[0],this.Qs=e[1],this.Uv=i,this.N_=null,this.Ff=!0}Ys(){this.n7=null,this.N_=null}ZFt(t){const e=pA.$s(pA.oWt,t,[this.zl,this.Qs],-1);return e.N_=this.N_,e.Ff=this.Ff,e}fWt(t){const e=t.SS(this.zl);if(!e)throw new Error("failed to find shader program '"+this.zl+"'");this.N_=e}Uq(){return this.n7}Dl(){return this.Qs}Q7(t){this.Uv=t}PV(){return this.Uv}NE(){return this.n7.NE()}gY(){return this.n7.gY()}dWt(t){this.Ff=!!t}HAt(){return this.Ff}$A(){return this.N_}SWt(){const t=[];for(let e=0,i=this.N_.YA();e<i;++e){const i=this.N_.JA(e);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(pA.$s(pA.ba,1,1,1,1))}}return t}}}{const dA=self.Ee;dA.SHt=class extends dA.Vs{constructor(t,e){super(),this.hi=t,this.bWt=e,this.n7=t.gq().Uq(),this._Wt=!0,this.f7=!0,this.EWt=!1,this.TWt=!1,this.PWt=!1,this.AWt=!1,this.bV=dA.$s(dA.qv.wU,t.gY().I$().a7(),{hU:(t,e)=>{const i=e.pV(),r=i.N$();t.Y_(r.h7()),t.ZS(r.QX()),i.KE(t),t.ZS(0)},uU:t=>{const e=t.tNt(),[i,r]=t.KGt();return{oV:e,aV:i,hV:r}},cU:t=>this.c7(t)}),this.MWt=[],this.eWt=[],this.f_=!0,this.rWt=[],this.sWt=[],this.fWt(t.gY().E_());for(let t=0,e=this.n7.Hq().length;t<e;++t)this.MWt.push(!0);this.L0(),this.n7.cWt(this)}Ys(){this.n7.lWt(this);for(const t of this.sWt)t&&t.Ys();dA.So(this.sWt),this.bV.Ys(),this.bV=null,dA.So(this.MWt),dA.So(this.eWt),dA.So(this.rWt),this.hi=null,this.n7=null}fWt(t){t.dS()&&(this.sWt=this.n7.Hq().map(t=>{const e=t.$A();return e.gB()>0?dA.$s(dA.qv.mB,e):null}))}IHt(t){let e=0;for(const i of t)this.rWt.push(this.aWt(e,i)),++e;this.pWt(),this.L0()}aWt(t,e){this.MWt[t]=e[0];const i=e.slice(1);for(let t=0,e=i.length;t<e;++t){const e=i[t];if(Array.isArray(e)){const r=dA.$s(dA.ba);r.wh(e),i[t]=r}}return i}ozt(){for(const t of this.n7.Hq())this.rWt.push(t.SWt());this.pWt()}NE(){return this.TE}Uq(){return this.n7}TV(){return this.s9(),this.bV}gY(){return this.hi.gY()}L0(){dA.So(this.eWt);const t=this.bWt,e=this.n7.Hq(),i=this.eWt,r=this.MWt;let s=!0;for(let t=0,n=e.length;t<n;++t)if(r[t]){const r=e[t];i.push(r),r.$A().O_()||(s=!1)}this.f_=s,t.JVt(!!i.length),this._Wt=!0}s9(){const t=this.hi,e=this.bWt,i=e.n9(),r=t.KJ().NJ(),s=0!==e.qq()||0!==e.F$().qq()||e.Eg()<0||e.Pg()<0,n=t.rNt(),o=t.I_();(this._Wt||i!==this.f7||r!==this.EWt||s!==this.TWt||n!==this.PWt||o!==this.AWt||this.bV.lH())&&(this.bV.fH(this.eWt.map(t=>t.$A()),{fU:this.eWt.map(t=>t.PV()),pU:!i||o,mU:r,yU:n,gU:s}),this._Wt=!1,this.f7=i,this.EWt=r,this.TWt=s,this.PWt=n,this.AWt=o)}o9(){return this.eWt}tpt(t){return this.rWt[t]}c7(t){return t<this.sWt.length?this.sWt[t]:this.rWt[t]}k0(t,e){if(t<0||t>=this.rWt.length)return null;const i=this.rWt[t];return e<0||e>=i.length?null:i[e]}G0(t,e,i){if(t<0||t>=this.rWt.length)return!1;const r=this.rWt[t];if(e<0||e>=r.length)return!1;const s=r[e];if(s instanceof dA.ba){if(s.Ha(i))return!1;s.La(i)}else{if(s===i)return!1;r[e]=i}return t<this.sWt.length&&this.sWt[t]._B(e,i),!0}pWt(){const t=this.rWt,e=this.sWt;for(let i=0,r=e.length;i<r;++i){const r=e[i],s=t[i];for(let t=0,e=s.length;t<e;++t)r._B(t,s[t])}}O_(){return this.f_}IWt(){return this.eWt.some(t=>t.$A().C_())}C0(t){return this.MWt[t]}R0(t,e){this.MWt[t]=!!e}Hq(){return this.n7.Hq()}_et(){return this.n7.Hq().map(t=>({name:t.Dl(),active:this.MWt[t.PV()],params:dA.o7.vWt(this.rWt[t.PV()])}))}Eet(t){for(const e of t){const t=this.n7.ept(e.name);t&&(this.MWt[t.PV()]=e.active,this.rWt[t.PV()]=dA.o7.wWt(e.params))}this.L0(),this.pWt()}}}{const mA=self.Ee,yA=[],gA=[],vA=[],wA=mA.$s(mA.cc),SA=mA.$s(mA.cc),bA=mA.$s(mA.Ou),_A=mA.$s(mA.Rect),EA=mA.$s(mA.Rect);let TA=null,PA=null,AA=null;mA.OWt=class extends mA.Vs{constructor(t){super(),this.Fl=t,this.DWt=0,this.xWt=0,this.CWt=[],this.RWt=0,this.LWt=0,this.kWt=0,this.GWt=0,this.NWt=new self.NY(this)}Ys(){this.Fl=null}gY(){return this.Fl}xV(){return this.NWt}jWt(){this.LWt=this.RWt,this.RWt=0,this.GWt=this.kWt,this.kWt=0}FWt(){return this.LWt}BWt(){return this.GWt}zWt(t,e){const i=t.N$(),r=e.N$();i&&r&&i.yK()&&r.yK()&&this.CWt.push([t,e])}IRt(t,e,i){for(const[r,s]of this.CWt){let n=null;if(t===r)n=s;else{if(t!==s)continue;n=r}n.NRt(e)&&(i.includes(n)||i.push(n))}}ORt(t,e){if(!this.CWt.length)return!1;for(const[i,r]of this.CWt)if(t===i&&e===r||t===r&&e===i)return!0;return!1}UWt(){mA.So(this.CWt)}FY(t,e){if(!t||!e||t===e)return!1;const i=t.N$(),r=e.N$();if(!i.yK()||!r.yK())return!1;this.RWt++;const s=i.F$(),n=r.F$();return s.Y9(n)?this.HWt(i,r):this.VWt(i,r)}HWt(t,e){if(!t.KX().Eu(e.KX()))return!1;if(this.kWt++,!t.eK().ec(e.eK()))return!1;if(t.yzt()&&e.yzt())return!1;if(t.yzt())return this.WWt(t,e);if(e.yzt())return this.WWt(e,t);if(!t.kVt()&&!e.kVt())return!0;const i=t.GVt(),r=e.GVt();return i.Pc(r,e.rE()-t.rE(),e.oE()-t.oE())}VWt(t,e){const i=t.yzt(),r=e.yzt();if(i&&!r)return this.$Wt(t,e);if(r&&!i)return this.$Wt(e,t);if(r||i)return!1;{const i=t.F$(),r=e.F$();wA.v(t.GVt()),SA.v(e.GVt());const s=wA.yc();for(let e=0,r=s.length;e<r;e+=2){const r=e+1,n=s[e],o=s[r],[a,h]=i.vZ(n+t.rE(),o+t.oE());s[e]=a,s[r]=h}const n=SA.yc();for(let t=0,i=n.length;t<i;t+=2){const i=t+1,s=n[t],o=n[i],[a,h]=r.vZ(s+e.rE(),o+e.oE());n[t]=a,n[i]=h}return wA.bc(),SA.bc(),this.kWt++,wA.Pc(SA,0,0)}}$Wt(t,e){const i=t.F$(),r=e.F$();TA||(TA=mA.$s(mA.cc)),PA||(PA=mA.$s(mA.Rect)),AA||(AA=mA.$s(mA.Ou));const s=e.rE(),n=e.oE(),[o,a]=r.vZ(s,n),[h,u]=i.yZ(o,a),c=h-s,l=u-n;if(PA.v(e.KX()),PA.offset(c,l),!t.KX().Eu(PA))return!1;if(AA.v(e.eK()),AA.offset(c,l),this.kWt++,!t.eK().ec(AA))return!1;TA.v(e.GVt());const f=TA.yc();for(let t=0,e=f.length;t<e;t+=2){const e=t+1;f[t]+=c,f[e]+=l}return TA.bc(),this.WWt(t,e,h,u,TA,PA,AA)}WWt(t,e,i,r,s,n,o){const a=void 0!==n?n:e.KX(),h=t.rE(),u=t.oE(),c=t.J1().y0(),l=void 0!==i?i:e.rE(),f=void 0!==r?r:e.oE(),p=e.kVt(),d=void 0!==o?o:e.eK(),m=gA;c.YWt(a,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],r=i.JWt();if(this.RWt++,a.Tu(r,h,u)&&(bA.Qu(r),bA.offset(h,u),bA.ec(d)))if(p){const t=void 0!==s?s:e.GVt();let n=l,o=f;void 0!==s&&(n=e.rE(),o=e.oE());const a=i.qWt();if(a){if(this.kWt++,a.Pc(t,n-(h+r.Kh()),o-(u+r.tu())))return mA.So(m),!0}else if(wA.Ec(bA,0,0),wA.Pc(t,n,o))return mA.So(m),!0}else{const t=i.qWt();if(!t)return mA.So(m),!0;if(wA.Ec(d,0,0),t.Pc(wA,-(h+r.Kh()),-(u+r.tu())))return mA.So(m),!0}}return mA.So(m),!1}QWt(t,e,i){const r=t.lq(),s=this.Fl.fW();if(!s)throw new Error("cannot call outside event");const n=s.T_t(),o=new mA.ZWt;if(r.a_t()){i||(r.d_t(!1),mA.So(r.m_t())),n&&mA.So(r.y_t());for(const s of t.cq()){const t=s.N$(),a=t.F$();let h=!1;if(o.NQ(a)&&t.rK()&&(h=e.some(([e,i])=>{const[r,s]=o.yZ(a,e,i,t.QX());return t.vK(r,s)})),h){if(i)return!1;r.f_t(s)}else n&&r.p_t(s)}}else{let t,a=!1;n&&!s.fIt(this.Fl.mTt())?this.Fl.xCt()&&!r.y_t().length&&r.m_t().length?t=r.m_t():(t=r.y_t(),a=!0):t=r.m_t();let h=0;for(let s=0,u=t.length;s<u;++s){const u=t[s],c=u.N$(),l=c.F$();let f=!1;if(o.NQ(l)&&c.rK()&&(f=e.some(([t,e])=>{const[i,r]=o.yZ(l,t,e,c.QX());return c.vK(i,r)})),f){if(i)return!1;a?r.f_t(u):t[h++]=u}else a?t[h++]=u:n&&r.p_t(u)}i||(t.length=h)}return t.$It(),o.Ys(),!!i||r.h_t()}XWt(t,e){if(!t)return!0;for(const i of e.RBt())if(!t.Y9(i))return!1;return!0}DCt(t,e,i,r){if(e.mq())for(const s of e.jq())this.XWt(t,s)?(s.DBt(),s.IBt().o6(i,r)):mA.Ls(r,s.cq());else this.XWt(t,e)?(e.DBt(),e.IBt().o6(i,r)):mA.Ls(r,e.cq())}qY(t,e,i,r){for(const s of e)this.DCt(t,s,i,r)}KWt(t,e,i){const r=this.Fl.XNt();r&&this.qY(t,r.Kst(),e,i)}t$t(t,e,i){const r=this.Fl.KNt();r&&this.qY(t,r.Kst(),e,i)}SVt(t,e){return t.wzt()&&(!e||e.N$().SVt(t))}UY(t){const e=t.N$();this.KWt(e.F$(),e.KX(),yA);for(const e of yA)if(this.SVt(e,t)&&this.FY(t,e))return mA.So(yA),e;return mA.So(yA),null}e$t(t,e){this.KWt(null,t,yA);for(const i of yA)if(this.SVt(i,e)&&this.i$t(t,i))return mA.So(yA),i;return mA.So(yA),null}r$t(t,e){let i=null;e&&(i=vA,mA.So(i));const r=t.N$();this.t$t(r.F$(),r.KX(),yA);for(const r of yA)if(r.Ezt()&&this.FY(t,r)){if(!e)return mA.So(yA),r;i.push(r)}return mA.So(yA),i}s$t(t,e,i,r,s){r=r||50;const n=t.N$(),o=n.rE(),a=n.oE();for(let h=0;h<r;++h)if(n.jX(o+e*h,a+i*h),n.NX(),!this.FY(t,s))return!0;return n.jX(o,a),n.NX(),!1}n$t(t,e,i,r,s,n){r=r||50;const o=t.N$(),a=o.rE(),h=o.oE();let u=null,c=null;for(let l=0;l<r;++l)if(o.jX(a+e*l,h+i*l),o.NX(),!this.FY(t,u))if(u=this.UY(t),u)c=u;else if(s&&(u=n?this.FY(t,n)?n:null:this.r$t(t),u&&(c=u)),!u)return c&&this.o$t(t,e,i,c,16,!0),!0;return o.jX(a,h),o.NX(),!1}a$t(t,e,i,r){r=r||50;const s=t.N$(),n=s.rE(),o=s.oE();let a=null,h=null;for(let u=0;u<r;++u)for(let r=0;r<2;++r){const c=2*r-1;if(s.jX(n+e*u*c,o+i*u*c),s.NX(),!this.FY(t,a)){if(a=this.UY(t),!a)return h&&this.o$t(t,e*c,i*c,h,16,!0),!0;h=a}}return s.jX(n,o),s.NX(),!1}o$t(t,e,i,r,s,n){let o=2,a=!1,h=!1;const u=t.N$();let c=u.rE(),l=u.oE();for(;o<=s;){const s=1/o;o*=2,u.BX(e*s*(a?1:-1),i*s*(a?1:-1)),u.NX(),this.FY(t,r)||n&&this.UY(t)?(a=!0,h=!0):(a=!1,h=!1,c=u.rE(),l=u.oE())}h&&(u.jX(c,l),u.NX())}h$t(t,e=100){let i=0;const r=t.N$(),s=r.rE(),n=r.oE();let o=0,a=this.UY(t);if(!a)return!0;for(;i<=e;){let e=0,h=0;switch(o){case 0:e=0,h=-1,i++;break;case 1:e=1,h=-1;break;case 2:e=1,h=0;break;case 3:e=1,h=1;break;case 4:e=0,h=1;break;case 5:e=-1,h=1;break;case 6:e=-1,h=0;break;case 7:e=-1,h=-1}if(o=(o+1)%8,r.jX(Math.floor(s+e*i),Math.floor(n+h*i)),r.NX(),!this.FY(t,a)&&(a=this.UY(t),!a))return!0}return r.jX(s,n),r.NX(),!1}u$t(t,e,i,r){const s=t.N$(),n=s.rE(),o=s.oE(),a=Math.max(10,mA.nn(e,i,n,o)),h=mA.hn(e,i,n,o),u=r||this.UY(t);if(!u)return mA.Ks(h+Math.PI);let c=u,l=0,f=0;const p=mA.tn(5);let d;for(d=1;d<36;++d){const n=h-d*p;if(s.jX(e+Math.cos(n)*a,i+Math.sin(n)*a),s.NX(),!this.FY(t,c)&&(c=r?null:this.UY(t),!c)){l=n;break}}for(36===d&&(l=mA.Ks(h+Math.PI)),c=u,d=1;d<36;++d){const n=h+d*p;if(s.jX(e+Math.cos(n)*a,i+Math.sin(n)*a),s.NX(),!this.FY(t,c)&&(c=r?null:this.UY(t),!c)){f=n;break}}if(36===d&&(f=mA.Ks(h+Math.PI)),s.jX(n,o),s.NX(),f===l)return f;const m=mA.un(f,l)/2;let y;y=mA.ln(f,l)?mA.Ks(l+m+Math.PI):mA.Ks(f+m);const g=Math.cos(h),v=Math.sin(h),w=Math.cos(y),S=Math.sin(y),b=g*w+v*S,_=g-2*b*w,E=v-2*b*S;return mA.hn(0,0,_,E)}c$t(t,e,i,r,s){if(!s)return!1;const n=s.N$();return!!n.yK()&&(this.RWt++,_A.set(Math.min(t,i),Math.min(e,r),Math.max(t,i),Math.max(e,r)),!!n.KX().Eu(_A)&&(s.yzt()?this.l$t(t,e,i,r,s,n):(this.kWt++,!!n.eK().tc(t,e,i,r)&&(!n.kVt()||n.GVt().tc(n.rE(),n.oE(),t,e,i,r)))))}l$t(t,e,i,r,s,n){const o=n.rE(),a=n.oE(),h=s.y0(),u=gA;EA.set(t,e,i,r),EA.normalize(),h.YWt(EA,u);for(let s=0,n=u.length;s<n;++s){const n=u[s],h=n.JWt();if(this.RWt++,_A.Tu(h,o,a)&&(bA.Qu(h),bA.offset(o,a),bA.tc(t,e,i,r))){const s=n.qWt();if(!s)return mA.So(u),!0;if(this.kWt++,s.tc(o+h.Kh(),a+h.tu(),t,e,i,r))return mA.So(u),!0}}return mA.So(u),!1}i$t(t,e){if(!e)return!1;const i=e.N$();if(!i.yK())return!1;if(this.RWt++,!i.KX().Eu(t))return!1;if(e.yzt())return this.f$t(t,e,i);if(this.kWt++,bA.Qu(t),!i.eK().ec(bA))return!1;if(!i.kVt())return!0;const r=wA;r.Qu(t,i.rE(),i.oE());const s=i.GVt();return r.Pc(s,0,0)}f$t(t,e,i){const r=i.rE(),s=i.oE(),n=e.y0(),o=gA;n.YWt(t,o);for(let e=0,i=o.length;e<i;++e){const i=o[e],n=i.JWt();if(this.RWt++,t.Tu(n,r,s)){const e=i.qWt();if(!e)return mA.So(o),!0;if(this.kWt++,wA.Qu(t,0,0),e.Pc(wA,-(r+n.Kh()),-(s+n.tu())))return mA.So(o),!0}}return mA.So(o),!1}p$t(t,e){if(!t)return;const i=t.N$();i.yK()&&(this.RWt++,i.KX().Eu(e.rect)&&(t.yzt()?this.d$t(t,i,e):(this.kWt++,i.kVt()?e.m$t(t,i.rE(),i.oE(),i.GVt()):e.y$t(t,i.eK()))))}d$t(t,e,i){const r=e.rE(),s=e.oE(),n=gA;t.y0().YWt(i.rect,n);for(let o=0,a=n.length;o<a;o++){const a=n[o],h=a.JWt();if(this.RWt++,i.rect.Tu(h,r,s)){const n=a.qWt();this.kWt++,n?i.m$t(t,r+h.Kh(),s+h.tu(),n):i.g$t(t,e.rE(),e.oE(),h)}}mA.So(n)}VY(t,e){if(t===this.DWt&&e===this.xWt)return;this.DWt=t,this.xWt=e;const i=this.Fl.J7();for(const r of i)if(r.OJ()){for(const t of r.uq())t.N$().vVt();r.IBt().v$t(t,e),r.OBt();for(const t of r.uq()){const e=t.N$();e.YVt(),e.xBt()}}}$Y(){return[this.DWt,this.xWt]}w$t(t,e){this.DWt=t,this.xWt=e}}}{const MA=self.Ee;MA.aFt=class extends MA.Vs{constructor(t,e){super(),this.K8=t,this.t6=e,this.e6=MA.$s(MA.xc)}Ys(){this.e6.Ys(),this.e6=null}v$t(t,e){if(!this.e6.Lc())throw new Error("grid not empty");this.K8=t,this.t6=e}i6(t,e,i){let r=this.e6.Ue(t,e);return r||(i?(r=MA.$s(MA.S$t,this,t,e),this.e6.Set(t,e,r),r):null)}r6(t){const e=Math.floor(t/this.K8);return isFinite(e)?e:0}s6(t){const e=Math.floor(t/this.t6);return isFinite(e)?e:0}n6(t,e,i){if(e)for(let r=e.Kh(),s=e.eu();r<=s;++r)for(let s=e.tu(),n=e.iu();s<=n;++s){if(i&&i.Pu(r,s))continue;const e=this.i6(r,s,!1);e&&(e.Xf(t),e.Lc()&&this.e6.kc(r,s))}if(i)for(let r=i.Kh(),s=i.eu();r<=s;++r)for(let s=i.tu(),n=i.iu();s<=n;++s)e&&e.Pu(r,s)||this.i6(r,s,!0).q8(t)}o6(t,e){let i=this.r6(t.Kh());const r=this.s6(t.tu()),s=this.r6(t.eu()),n=this.s6(t.iu());if(isFinite(s)&&isFinite(n))for(;i<=s;++i)for(let t=r;t<=n;++t){const r=this.i6(i,t,!1);r&&r.Z8(e)}}}}{const IA=self.Ee;IA.S$t=class extends IA.Vs{constructor(t,e,i){super(),this.z8=t,this.Dh=e,this.xh=i,this.U8=IA.$s(IA.Fc)}Ys(){this.U8.Ys(),this.U8=null,this.z8=null}Lc(){return this.U8.Lc()}q8(t){this.U8.Hc(t)}Xf(t){this.U8.kc(t)}Z8(t){IA.Ls(t,this.U8.Vc())}}}{const OA=self.Ee,DA=1e-6,xA=2;OA.b$t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new OA.Rect,this._$t=2,this.E$t=null,this.T$t=0,this.P$t=0,this.A$t=0,this.M$t=0,this.I$t=0,this.bt=0,this.O$t=1,this.D$t=0,this.x$t=1,this.C$t=0}R$t(){return this._$t<1.000001}Bf(){this._$t=2}Set(t,e,i,r){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.dx=i-t,this.dy=r-e,this.rect.set(t,e,i,r),this.rect.normalize(),this._$t=2,this.E$t=null,this.T$t=0,this.P$t=0,this.A$t=0,this.M$t=0,this.I$t=0,this.bt=0,this.O$t=1,this.D$t=0,this.x$t=1,this.C$t=0,this}L$t(){if(!1===this.R$t())return;const t=this.dx*this._$t,e=this.dy*this._$t,i=OA.rn(t,e),r=t/i,s=e/i;this.bt=i-DA,this.M$t=this.x1+r*this.bt,this.I$t=this.y1+s*this.bt,this.T$t=Math.atan2(this.A$t,this.P$t)+Math.PI/2,this.O$t=Math.cos(this.T$t),this.D$t=Math.sin(this.T$t);const n=r*this.O$t+s*this.D$t;if(this.x$t=r-2*this.O$t*n,this.C$t=s-2*this.D$t*n,n>0){const t=Math.PI;this.T$t=OA.Ks(this.T$t+t),this.O$t=-this.O$t,this.D$t=-this.D$t}}k$t(t,e,i,r,s){const n=OA.Jn(this.x1,this.y1,this.x2,this.y2,e,i,r,s);n>=0&&n<this._$t&&(this._$t=n,this.E$t=t.GZ(),this.P$t=e-r,this.A$t=i-s)}g$t(t,e,i,r){const s=e+r.Kh(),n=e+r.eu(),o=i+r.tu(),a=i+r.iu();this.k$t(t,s,o,n,o),this.k$t(t,n,o,n,a),this.k$t(t,n,a,s,a),this.k$t(t,s,a,s,o)}y$t(t,e){const i=e.Fn(),r=e.Bn(),s=e.zn(),n=e.Un(),o=e.Hn(),a=e.Vn(),h=e.Wn(),u=e.$n();this.k$t(t,i,r,s,n),this.k$t(t,s,n,o,a),this.k$t(t,o,a,h,u),this.k$t(t,h,u,i,r)}m$t(t,e,i,r){const s=r.yc();for(let r=0,n=s.length;r<n;r+=2){const o=(r+2)%n,a=s[r]+e,h=s[r+1]+i,u=s[o]+e,c=s[o+1]+i;this.k$t(t,a,h,u,c)}}}}{const CA=self.Ee;CA.ZWt=class{constructor(){this.G$t=new Map}Ys(){for(const t of this.G$t.values())t.N$t.Rc();this.G$t.clear()}j$t(t){let e=this.G$t.get(t);return void 0===e&&(e={GQ:null,N$t:new CA.xc},this.G$t.set(t,e)),e}NQ(t){const e=this.j$t(t);return null===e.GQ&&(e.GQ=t.HQ()),e.GQ}yZ(t,e,i,r){if(0!==r)return t.yZ(e,i,r);const s=this.j$t(t);let n=s.N$t.Ue(e,i);return void 0===n&&(n=t.yZ(e,i,r),s.N$t.Set(e,i,n)),n}}}{const RA=self.Ee,LA=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),kA=new Set(["high","low"]),GA=self.oe,NA=GA.ce,jA=GA.de,FA=NA.create(),BA=300,zA=200,UA=120,HA=8,VA=RA.$s(RA.Ou),WA=RA.$s(RA.Rect),$A=3e3,YA=200,JA=300;RA.F$t=class extends RA.Vs{constructor(t){super(),this.Fl=t,this.B$t=[],this.z$t=!1,this.U$t=null,this.H$t=null,this.V$t=null,this.W$t="high-performance",this.$$t=!1,this.Y$t="auto",this.J$t=0,this.q$t=0,this.Q$t="",this.Z$t=0,this.X$t=0,this.K$t=0,this.tYt=0,this.eYt=0,this.iYt=0,this.gw="normalized",this.rYt=0,this.sYt=1,this.nYt=1e4,this.Jw=!0,this.oYt=0,this.VU=0,this.WU=0,this.aYt="letterbox-scale",this.hYt="letterbox-scale",this.uYt=0,this.cYt=0,this.lYt=NA.create(),this.fYt="high",this.pYt=this.fYt,this.dYt=!1,this.mYt=[],this.yYt=new Set,this.gYt=self.C3_Shaders,this.vYt=RA.$s(RA.qv.Jz,{Vz:()=>[this.Itt(),this.Ott()],Wz:()=>this.wYt(),$z:t=>this.SYt(t),getTime:()=>this.gY().LW(),Yz:()=>this.gY().W$()}),this.bYt=0,this._Yt=0,this.EYt=NaN,this.TYt=null,this.PYt=new Map,this.AYt=NaN,this.MYt=new Map,this.IYt="",this.OYt=1,this.DYt=RA.$s(RA.Rect),this.xYt="",this.CYt=null,this.RYt=null,this.LYt=0,this.kYt=0,this.GYt=-1,this.NYt=0,this.jYt=t=>this.NYt=t.progress,this.FYt=null,this.BYt={zYt:null,UYt:null,HYt:null},this.VYt=0,this.WYt=0,this.$Yt=0,this.YYt="fade-in",this.JYt=null,this.qYt=new Promise(t=>this.JYt=t)}QYt(t){this.W$t=t}ZYt(t){this.z$t=!!t}XYt(t){this.gw=t}KYt(){return this.gw}tJt(t){this.rYt=t}eJt(t,e){this.sYt=t,this.nYt=e}iJt(t){this.$$t=!!t}rJt(t){this.Y$t=t}async ua(t){let e=t.canvas;this.B$t.push({canvas:e,sJt:null}),this.Fl.lX("runtime","window-resize",t=>this.nJt(t)),this.Fl.lX("runtime","fullscreenchange",t=>this.oJt(t)),this.Fl.lX("runtime","fullscreenerror",t=>this.aJt(t)),e.addEventListener("webglcontextlost",t=>this.hJt(t)),e.addEventListener("webglcontextrestored",t=>this.uJt(t)),this.dYt=!!t.isFullscreen,this.Q$t=t.cssDisplayMode;const i=navigator.gpu&&this.z$t;let r=!1;if(i)try{await this.cJt(!0)}catch(t){this.lJt("WebGPU",t),this.H$t=null}if(!this.E_())try{await this.fJt(!0)}catch(t){this.lJt("WebGL",t),this.U$t=null}if(this.E_()||(r=!0),!this.E_()&&i)try{await this.cJt(!1)}catch(t){this.lJt("WebGPU",t),this.H$t=null}if(!this.E_())try{await this.fJt(!1)}catch(t){this.lJt("WebGL",t),this.U$t=null}const s=this.E_();if(!s)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");s.Yb(r),this.H$t&&(this.H$t.YG=()=>this.pJt(),this.H$t.JG=()=>this.dJt()),"normalized"===this.gw?s.cS():(s.lS(),s.hS(this.rYt)),this.$D(t.windowInnerWidth,t.windowInnerHeight,!0),await this.fWt()}lJt(t,e){e&&"string"==typeof e.message&&e.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,e)}async cJt(t){const e={cw:this.sYt,lw:this.nYt};let i=!0;"no"===this.Y$t?i=!1:"auto"===this.Y$t&&(i=RA.Je.ii);let r="nearest";this.Fl.mJt()&&"nearest"!==this.Fl.Oz()&&(r="bilinear");const s={powerPreference:this.W$t,depth:this.Fl.R9(),failIfMajorPerformanceCaveat:t,JL:this.Fl.Ntt(),$L:this.Fl.mJt(),YL:r,uC:this.Fl.yJt(),qL:i};this.H$t=RA.$s(RA.qv.QL,e),await this.H$t.WP(this.B$t[0].canvas,s)}async fJt(t){const e={alpha:!0,powerPreference:this.W$t,hC:"xbox-uwp-webview2"!==this.Fl.eJ(),depth:this.Fl.R9(),uC:this.Fl.yJt(),failIfMajorPerformanceCaveat:t,cw:this.sYt,lw:this.nYt};this.$$t&&(e.cC=1),this.U$t=RA.$s(RA.qv.pC,this.B$t[0].canvas,e),await this.U$t.Xw()}async gJt(){if(this.gYt){const t=[];for(const[e,i]of Object.entries(this.gYt)){i.src=i.vJt;const r=RA.qv.Ek.pM(this.H$t.XP());t.push(this.H$t.wR(Object.assign({UP:r,name:e},i)))}await Promise.all(t)}}async wJt(){if(this.gYt){const t=[];for(const[e,i]of Object.entries(this.gYt)){let r;if(i.SJt&&this.U$t.xT()>=2)i.src=i.SJt,r=RA.qv.BP.dM();else{if(!i.bJt)throw new Error(`shader '${e}' does not support WebGL 1`);i.src=i.bJt,r=RA.qv.BP.pM()}t.push(this.U$t.wR(Object.assign({UP:r,name:e},i)))}await Promise.all(t),this.U$t.SR(),this.U$t._S()}this.U$t.kL()&&(this.TYt=RA.$s(RA.qv.Xx,this.U$t))}async fWt(){this.H$t?await this.gJt():this.U$t&&await this.wJt();const t=this.E_();t.Wb(this.Jw),t.kL()&&(this.EYt=0);for(const e of this.Fl._Jt()){for(const i of e.Hq())i.fWt(t);e.fWt(t),e.L0()}this.V$t=new self.W3(this.Fl,t)}Ys(){this.Fl=null,this.U$t=null,this.B$t.length=0}YV(){return this.Fl.YV()}nJt(t){const e=this.Fl;if(e.EJt())return;const i=t.devicePixelRatio;this.YV()&&(self.devicePixelRatio=i),e.TJt(i),this.dYt=!!t.isFullscreen,this.Q$t=t.cssDisplayMode,this.$D(t.innerWidth,t.innerHeight),e.W$();const r=new RA.Event("window-resize");r.data=t,e.wf().Of(r);const s=new RA.Event("resize");s.PJt=this.lJ(),s.AJt=this.pJ(),s.MJt=this.mJ(),s.IJt=this.gJ(),e.i8(s),this.Fl.k$()?.let(),e.yX()&&(e.ePt()||self.gX.OJt())&&e._H()}oJt(t){this.dYt=!!t.isFullscreen,this.$D(t.innerWidth,t.innerHeight,!0),this.Fl.W$()}aJt(t){this.dYt=!!t.isFullscreen,this.$D(t.innerWidth,t.innerHeight,!0),this.Fl.W$()}$D(t,e,i=!1){if(t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid size");if(this.J$t===t&&this.q$t===e&&!i)return;this.J$t=t,this.q$t=e;const r=this.DJt();"letterbox-scale"===r?this.xJt(t,e):"letterbox-integer-scale"===r?this.CJt(t,e):"off"===r?this.RJt(t,e):this.LJt(t,e),this.kJt(r);for(const{canvas:t}of this.B$t)t.width=this.K$t,t.height=this.tYt;this.Fl.Ul("canvas","update-size",{marginLeft:this.eYt,marginTop:this.iYt,styleWidth:this.Z$t,styleHeight:this.X$t,displayScale:this.W2()});const s=this.E_();s.$D(this.K$t,this.tYt,!0);for(const t of this.mYt)s.OL(t);RA.So(this.mYt),this.GJt();const n=this.Fl.y$();n.Xrt(),n.Krt()}GJt(){this.E_().pS(this.lYt,this.Itt()/this.Ott())}Dtt(){return this.lYt}xJt(t,e){const i=this.Fl.vJ(),r=this.Fl.qV(),s=this.Fl.ZV(),n=r/s;if(t/e>n){const i=e*n;this.Z$t=Math.round(i),this.X$t=e,this.eYt=Math.floor((t-this.Z$t)/2),this.iYt=0}else{const i=t/n;this.Z$t=t,this.X$t=Math.round(i),this.eYt=0,this.iYt=Math.floor((e-this.X$t)/2)}this.K$t=Math.round(this.Z$t*i),this.tYt=Math.round(this.X$t*i),this.Fl.NJt(r,s)}CJt(t,e){const i=this.Fl.vJ();1!==i&&(t+=1,e+=1);const r=this.Fl.qV(),s=this.Fl.ZV(),n=r/s;let o;o=t/e>n?e*n*i/r:t/n*i/s,o>1?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.K$t=Math.round(r*o),this.tYt=Math.round(s*o),this.Z$t=this.K$t/i,this.X$t=this.tYt/i,this.eYt=Math.max(Math.floor((t-this.Z$t)/2),0),this.iYt=Math.max(Math.floor((e-this.X$t)/2),0),this.Fl.NJt(r,s)}LJt(t,e){const i=this.Fl.vJ();this.Z$t=t,this.X$t=e,this.K$t=Math.round(this.Z$t*i),this.tYt=Math.round(this.X$t*i),this.eYt=0,this.iYt=0;const r=this.W2();this.Fl.NJt(this.Z$t/r,this.X$t/r)}RJt(t,e){const i=this.Fl.vJ();this.Z$t=this.Fl.E9(),this.X$t=this.Fl.T9(),this.K$t=Math.round(this.Z$t*i),this.tYt=Math.round(this.X$t*i),this.jJt()?(this.eYt=Math.floor((t-this.Z$t)/2),this.iYt=Math.floor((e-this.X$t)/2)):(this.eYt=0,this.iYt=0),this.Fl.NJt(this.Fl.E9(),this.Fl.T9())}kJt(t){if("high"===this.fYt)this.VU=this.K$t,this.WU=this.tYt,this.pYt="high";else{let e,i;if("off"===this.DJt()?(e=this.Fl.E9(),i=this.Fl.T9()):(e=this.Fl.qV(),i=this.Fl.ZV()),this.K$t<e||this.tYt<i)this.VU=this.K$t,this.WU=this.tYt,this.pYt="high";else if(this.VU=e,this.WU=i,this.pYt="low","scale-inner"===t){const t=e/i,r=this.J$t/this.q$t;r<t?this.VU=this.WU*r:r>t&&(this.WU=this.VU/r)}else if("scale-outer"===t){const t=e/i,r=this.J$t/this.q$t;r>t?this.VU=this.WU*r:r<t&&(this.WU=this.VU/r)}}}gY(){return this.Fl}FJt(){return this.B$t[0].canvas}a7(){return this.vYt}jJt(){return this.dYt}BJt(){return this.Q$t}zJt(t){if(!LA.has(t))throw new Error("invalid fullscreen mode");this.aYt=t;const e=this.Fl.y$();e.Xrt(),e.Krt()}V2(){return this.aYt}UJt(t){if(!LA.has(t))throw new Error("invalid fullscreen mode");this.hYt=t;const e=this.Fl.y$();e.Xrt(),e.Krt()}HJt(){return this.hYt}DJt(){return this.jJt()?this.HJt():this.V2()}VJt(t){if(!kA.has(t))throw new Error("invalid fullscreen scaling quality");this.fYt=t,this.Fl.y$().Xrt()}WJt(){return this.fYt}jtt(){return this.pYt}static $Jt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}O2(){return this.J$t}D2(){return this.q$t}Itt(){return this.VU}Ott(){return this.WU}Wb(t){this.Jw=!!t}YJt(){return this.Jw}JJt(t){this.oYt=t}C8(){return this.oYt}qJt(){return this.E_().Ox()}hJt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.mYt=[],this.yYt.clear(),this.vYt.J_(),this.U$t.J_(),this.Fl.Bit()}pJt(){console.log("[Construct] WebGPU device lost"),this.mYt=[],this.yYt.clear(),this.vYt.J_(),this.Fl.Bit()}async uJt(t){await this.U$t.q_(),await this.fWt(),await this.Fl.QJt(),console.log("[Construct] WebGL context restored")}async dJt(){await this.fWt(),await this.Fl.QJt(),console.log("[Construct] WebGPU device restored")}ZJt(){return this.U$t}XJt(){return this.H$t}E_(){return this.H$t||this.U$t}M$(){return this.V$t}rJ(){let t="";return t=this.Fl.XJt()?"webgpu":"webgl"+this.Fl.ZJt().xT(),this.Fl.E_().Jb()&&(t+="-software"),t}nJ(){return this.Fl.XJt()?this.Fl.XJt().UF():this.Fl.ZJt().UL()}TZ(){return"low"===this.pYt?1/this.Fl.vJ():this.W2()}W2(){const t=this.DJt();if("off"===t||"crop"===t)return 1;const e=this.Fl.qV(),i=this.Fl.ZV(),r=e/i,s=this.K$t/this.tYt;return"scale-inner"!==t&&s>r||"scale-inner"===t&&s<r?this.X$t/i:this.Z$t/e}uet(){return"low"===this.jtt()?1:this.W2()}aet(){return"low"===this.jtt()?1:this.Fl.vJ()}KJt(t,e){this.uYt=t,this.cYt=e}B4(t,e,i,r=!0){e=e||this.VU,i=i||this.WU;const s=e/2+this.uYt,n=i/2+this.cYt;if(r){let r=this.Dtt();e===this.VU&&i===this.WU||(t.pS(FA,e/i),r=FA),t._R(r)}const o=t.gS(s,n,t.tS(i),s,n,0,i);t.IR(o)}tqt(t,e=!0){const i=this.lJ(),r=this.pJ(),s=i/2,n=r/2;e&&t._R(this.Dtt());const o=t.gS(s,n,t.tS(r),s,n,0,r);t.IR(o)}mJ(){return this.K$t}gJ(){return this.tYt}lJ(){return this.Z$t}pJ(){return this.X$t}aJ(){return this.eYt}uJ(){return this.iYt}Eit(){return this.B$t.length}eqt(){return"undefined"!=typeof OffscreenCanvas&&this.FJt()instanceof OffscreenCanvas&&("Chromium"!==RA.Je.ti||RA.Je.Ke>=124)}async Wit(t,e=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.B$t.length===t)return;const i={count:t,layersDomState:this.Fl.y$().p$().t9().filter(t=>t.BQ()).map(t=>t.stt()),immediate:e,marginLeft:this.eYt,marginTop:this.iYt,styleWidth:this.Z$t,styleHeight:this.X$t};let r;if(r=this.YV()?await this.Fl.K$("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.B$t.length)this.B$t.length=t;else for(const t of r.addedCanvases){t.width=this.K$t,t.height=this.tYt;const e=this.eqt()?"bitmaprenderer":"2d",i=t.getContext(e);if(!i)throw new Error(`failed to acquire '${e}' canvas context`);this.B$t.push({canvas:t,sJt:i})}this.Fl.W$()}Rrt(t){if(t>=this.B$t.length)return;const e=this.FJt(),i=this.B$t[t].sJt;this.eqt()?i.transferFromImageBitmap(e.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(e,0,0))}Ftt(t){t.depth=this.Fl.R9();const e=this.mYt,i=e.findIndex(e=>e.LP(t));let r;return-1!==i?(r=e[i],e.splice(i,1)):r=this.E_().TL(t),this.yYt.add(r),r}u7(t){if(!this.yYt.has(t))throw new Error("render target not in use");this.yYt.delete(t),this.mYt.push(t)}wYt(){const t={lT:this.Fl.Oz()};return"low"===this.jtt()&&(t.width=this.Itt(),t.height=this.Ott()),this.Ftt(t)}SYt(t){this.u7(t)}*iqt(){for(const t of this.Fl.y$().qrt())for(const e of t.oQ()){const t=this.PYt.get(e);t&&(yield t)}}Ltt(t){if(!this.E_().kL())return null;let e=this.PYt.get(t);return e||(e={GX:t,name:t.Dl(),rqt:RA.$s(RA.qv.Xx,this.U$t),sqt:0,nqt:0,oqt:0},this.PYt.set(t,e)),e.rqt}aqt(){const t=this.E_();if(t.kL()&&0===this._Yt){this._Yt=t.Hb(),this.AYt=NaN;for(const t of this.iqt())t.sqt=NaN}}hqt(){this.U$t&&this.U$t.kL()&&this.uqt(),this.H$t&&this.H$t.kL()&&this.cqt()}uqt(){if(isNaN(this.AYt)&&(this.AYt=this.TYt.nC(this.bYt,this._Yt),!isNaN(this.AYt))){if(this.Fl.yX())for(const t of this.iqt())if(t.sqt=t.rqt.nC(this.bYt,this._Yt),isNaN(t.sqt))return;if(this.TYt.oC(this._Yt),this.EYt=Math.min(this.AYt,1),this.Fl.yX()){const t=new Map;for(const e of this.iqt())e.rqt.oC(this._Yt),e.nqt=Math.min(e.sqt,1),t.set(e.GX,e.nqt);for(const e of this.iqt()){const i=e.GX,r=(t.get(i)||0)-i.OQ().reduce((e,i)=>e+(t.get(i)||0),0);e.oqt=RA.Xs(r,0,1)}const e=this.Fl.p$(),i=this.EYt-e.t9().reduce((e,i)=>e+(t.get(i)||0),0);self.gX.lqt(RA.Xs(i,0,1),this.EYt,[...this.iqt()])}this.bYt=this._Yt,this._Yt=0}}fqt(){return this.TYt}cqt(){if(0===this._Yt)return;for(let t=this.bYt;t<this._Yt;++t){const e=this.MYt.get(t);if(e&&!e.zx())return}const t=this.Fl.p$(),e=RA.Sa(t.git()+1,0);let i=0;for(let t=this.bYt;t<this._Yt;++t){const r=this.MYt.get(t);if(!r)continue;const s=r.Ux();let n=BigInt(0),o=BigInt(0);const a=BigInt(0);for(let t=0,i=Math.min(e.length,s.length/2);t<i;++t){const i=s[2*t],r=s[2*t+1];i!==a&&(n===a||i<n)&&(n=i),r>o&&(o=r);const h=Number(r-i)/1e9;e[t]+=h}i+=Number(o-n)/1e9}if(this.EYt=RA.Xs(i,0,1),this.Fl.yX()){const i=t.oQ(),r=new Map;for(let t=0,s=Math.min(i.length,e.length-1);t<s;++t){const s=e[t+1];r.set(i[t],s)}const s=[],n=new Map;for(const[t,e]of r){const i=[...t.xQ()].reduce((t,e)=>t+(r.get(e)||0),0);n.set(t,i),s.push({name:t.Dl(),oqt:RA.Xs(e,0,1),nqt:RA.Xs(i,0,1)})}const o=this.EYt-t.t9().reduce((t,e)=>t+(n.get(e)||0),0);self.gX.lqt(RA.Xs(o,0,1),this.EYt,s)}for(let t=this.bYt;t<this._Yt;++t)this.MYt.delete(t);this.bYt=this._Yt,this._Yt=0}pqt(t){this.MYt.set(this.H$t.Hb(),t)}qW(){return this.EYt}nY(t,e,i,r,s,n){return this.IYt=t,this.OYt=e,this.DYt.Wh(i,r,s,n),this.CYt||(this.CYt=new Promise(t=>{this.RYt=t})),this.CYt}dqt(){if(!this.IYt)return;let t=this.FJt();const e=this.DYt,i=RA.Xs(Math.floor(e.Kh()),0,t.width),r=RA.Xs(Math.floor(e.tu()),0,t.height);let s=e.width();s=0===s?t.width-i:RA.Xs(Math.floor(s),0,t.width-i);let n=e.height();if(n=0===n?t.height-r:RA.Xs(Math.floor(n),0,t.height-r),(0!==i||0!==r||s!==t.width||n!==t.height)&&s>0&&n>0){const e=RA.ua(s,n);e.getContext("2d").drawImage(t,i,r,s,n,0,0,s,n),t=e}RA.ca(t,this.IYt,this.OYt).then(t=>{this.xYt&&URL.revokeObjectURL(this.xYt),this.xYt=URL.createObjectURL(t),this.CYt=null,this.RYt(t)}),this.IYt="",this.OYt=1}mqt(){return this.xYt}yqt(t){t?this.LYt++:this.LYt--}gqt(){return this.LYt>0}vqt(t){const e=this.E_();if(2===t)this.FYt=RA.$s(RA.qv.e_,this.E_()),this.FYt.SD("Arial"),this.FYt.bD(16),this.FYt.kD("center"),this.FYt.ND("center"),this.FYt.$D(300,200);else if(0===t){const t=this.Fl.wqt();t&&t.D4(e).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.Sqt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.YYt?e.wP(t):this.BYt.zYt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bqt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.YYt?e.wP(t):this.BYt.UYt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bqt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.YYt?e.wP(t):this.BYt.HYt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async Sqt(t){t=new URL(t,this.Fl._qt()).toString();const e=await RA.ia(t),i=await this.Fl.Eqt(e,2048,2048);return await this.E_().EL(i,{mT:"high"})}async bqt(t){t=new URL(t,this.Fl._qt()).toString();const e=await RA.ia(t);return await this.E_().EL(e,{mT:"high"})}Tqt(){this.Fl.Ul("runtime","hide-cordova-splash")}Pqt(){this.kYt=Date.now(),this.Fl.wf().addEventListener("loadingprogress",this.jYt),this.GYt=requestAnimationFrame(()=>this.Aqt()),3!==this.Fl.Mqt()&&this.Tqt()}async Iqt(){const t=this.E_();this.NYt=1;const e=this.Fl.Mqt();4===e&&await this.qYt,this.JYt=null,this.qYt=null,-1!==this.GYt&&(cancelAnimationFrame(this.GYt),this.GYt=-1),this.Fl.wf().removeEventListener("loadingprogress",this.jYt),this.jYt=null,this.FYt&&(this.FYt.Ys(),this.FYt=null),this.Fl.Oqt(),t.pL(),this.BYt.zYt&&(t.wP(this.BYt.zYt),this.BYt.zYt=null),this.BYt.UYt&&(t.wP(this.BYt.UYt),this.BYt.UYt=null),this.BYt.HYt&&(t.wP(this.BYt.HYt),this.BYt.HYt=null),t.fL(0,0,0,0),t.zb(),this.YYt="done",this.bYt=t.Hb(),3===e&&this.Tqt()}Aqt(){if(-1===this.GYt)return;const t=this.E_();t.pL(),this.GYt=-1;const e=this.Fl.OV().e8(),i=this.Fl.Mqt();if(3!==i&&(this.tqt(t),t.fL(0,0,0,0),t.GR(),t._S(),t.jR(null)),0===i)this.Dqt(e);else if(1===i)this.xqt(e,120,0);else if(2===i)this.Cqt(e);else if(3===i)RA.mo();else{if(4!==i)throw new Error("invalid loader style");this.Rqt(e)}t.zb(),this.GYt=requestAnimationFrame(()=>this.Aqt())}Cqt(t){t?this.FYt.LD(1,0,0):this.FYt.LD(.6,.6,.6),this.FYt.Hl(Math.round(100*this.NYt)+"%");const e=this.Z$t/2,i=this.X$t/2;VA.ju(e-150,i-100,e+150,i+100);const r=this.E_();r.jR(this.FYt.PP()),r.hb(VA,this.FYt.xx())}xqt(t,e,i){const r=this.E_();r.IS(),t?r.LR(1,0,0,1):r.LR(.118,.565,1,1);const s=this.Z$t/2,n=this.X$t/2,o=e/2;WA.Wh(s-o,n-4+i,Math.floor(e*this.NYt),8),r.Rect(WA),WA.Wh(s-o,n-4+i,e,8),WA.offset(-.5,-.5),WA.fu(.5,.5),r.LR(0,0,0,1),r.pb(WA),WA.fu(1,1),r.LR(1,1,1,1),r.pb(WA)}Dqt(t){const e=this.E_(),i=this.Fl.wqt();if(!i)return void this.xqt(t,120,0);const r=i.PP();if(!r)return void this.xqt(t,120,0);const s=r.Eg(),n=r.Pg(),o=this.Z$t/2,a=this.X$t/2,h=s/2,u=n/2;VA.ju(o-h,a-u,o+h,a+u),e.jR(r),e.Ou(VA),this.xqt(t,s,u+16)}Rqt(t){const e=this.E_(),i=this.BYt.zYt,r=this.BYt.UYt,s=this.BYt.HYt,n=Date.now();0===this.VYt&&(this.kYt=n);const o=this.Fl.Lqt()||this.Fl.kqt()&&!this.Fl.Gqt(),a=o?0:200,h=o?0:3e3;let u=1;"fade-in"===this.YYt?u=Math.min((n-this.kYt)/300,1):"fade-out"===this.YYt&&(u=Math.max(1-(n-this.$Yt)/300,0)),e.IS(),e.LR(.231*u,.251*u,.271*u,u),WA.set(0,0,this.Z$t,this.X$t),e.Rect(WA);const c=Math.ceil(this.Z$t),l=Math.ceil(this.X$t);let f,p;this.X$t>256?(e.LR(.302*u,.334*u,.365*u,u),f=c,p=Math.max(.005*l,2),WA.Wh(0,.8*l-p/2,f,p),e.Rect(WA),t?e.LR(u,0,0,u):e.LR(.161*u,.953*u,.816*u,u),f=c*this.NYt,WA.Wh(.5*c-f/2,.8*l-p/2,f,p),e.Rect(WA),e.LR(u,u,u,u),e._S(),r&&(f=1.5*RA.Xs(.22*l,105,.6*c),p=f/8,WA.Wh(.5*c-f/2,.2*l-p/2,f,p),e.jR(r),e.Rect(WA)),i&&(f=Math.min(.395*l,.95*c),p=f,WA.Wh(.5*c-f/2,.485*l-p/2,f,p),e.jR(i),e.Rect(WA)),s&&(f=1.5*RA.Xs(.22*l,105,.6*c),p=f/8,WA.Wh(.5*c-f/2,.868*l-p/2,f,p),e.jR(s),e.Rect(WA))):(e.LR(.302*u,.334*u,.365*u,u),f=c,p=Math.max(.005*l,2),WA.Wh(0,.85*l-p/2,f,p),e.Rect(WA),t?e.LR(u,0,0,u):e.LR(.161*u,.953*u,.816*u,u),f=c*this.NYt,WA.Wh(.5*c-f/2,.85*l-p/2,f,p),e.Rect(WA),e.LR(u,u,u,u),e._S(),i&&(f=.55*l,p=f,WA.Wh(.5*c-f/2,.45*l-p/2,f,p),e.jR(i),e.Rect(WA))),this.VYt++,"fade-in"===this.YYt&&n-this.kYt>=300&&this.VYt>=2&&(this.YYt="wait",this.WYt=n),"wait"===this.YYt&&n-this.WYt>=h&&this.NYt>=1&&(this.YYt="fade-out",this.$Yt=n),("fade-out"===this.YYt&&n-this.$Yt>=300+a||o&&this.NYt>=1&&n-this.kYt<500)&&this.JYt()}}}{const qA=self.Ee,QA=self.gX,ZA=self.assert,XA=self.s3,KA={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let tM=!0;qA.Nqt=class extends qA.Vs{constructor(t){t=Object.assign({},KA,t),super(),this.jqt=t.messagePort,this.Fqt=t.runtimeBaseUrl,this.Bqt=t.previewUrl,this.zqt=!!t.headless,this.Uqt=!!t.hasDom,this.Hqt=!!t.isInWorker,tM=t.ife,this.Vqt=!!t.useAudio,this.Wqt=t.exportType,this.a5=!!t.isiOSCordova,this.$qt=!!t.isiOSWebView,this.Yqt=!!t.isWindowsWebView2,this.Jqt=!!t.isAnyWebView2Wrapper,this.qqt=!!t.isFBInstantAvailable,this.Qqt=!("preview"!==this.Wqt||!t.isDebug),this.Zqt=this.Qqt,this.Xqt=this.Qqt,this.Kqt=0,this.tQt=[],this.eQt=[],this.iQt=!1,this.rQt="",this.sQt="",this.nQt="",this.oQt="",this.aQt=0,this.hQt=0,this.uQt=0,this.KU=self.devicePixelRatio,this.cQt=0,this.lQt=0,this.ak=0,this.hk=0,this.fQt=0,this.pQt=!1,this.xv=!0,this.dQt=!1,this.mQt=!1,this.yQt=!1,this.gQt=null,this.w8=qA.$s(qA.s5,this,t),this.Iet=qA.$s(qA.zrt,this),this.A_t=qA.$s(qA.EEt,this),this.vQt=qA.$s(qA.EJ,this,t.wrapperComponentIds),this.wQt=qA.$s(qA.OWt,this),this.dat=qA.$s(qA.tst,this),this.SQt=qA.$s(qA.$vt,this),this.bQt=qA.$s(qA.Jvt,this),this.hwt=qA.$s(qA.iwt,this),this.Av=qA.$s(qA.dv,{gv:t=>this._Qt(t),wv:t=>this.EQt(t)}),this.TQt=new Map,this.PQt=[],this.AQt=new Map,this.MQt=new Map,this.IQt=0,this.OQt=[],this.DQt=new Set,this.xQt=[],this.CQt=[],this.RQt=new Map,this.LQt=!1,this.kQt=!1,this.GQt=0,this.NQt=0,this.jQt=new Map,this.FQt=new Set,this.BQt=new Set,this.zQt=[],this.UQt=[],this.HQt=null,this.VQt=!1,this.WQt="vsync",this.ET="trilinear",this.$Qt=!1,this.YQt=!0,this.JQt=!1,this.qQt=!1,this.QQt=null,this.ZQt={XQt:t=>{this.GYt=-1,this.KQt=-1,this.Ant(t)},tZt:t=>{this.KQt=-1,this.Ant(t,!1,"skip-render")},eZt:()=>{this.GYt=-1,this._H()}},this.GYt=-1,this.KQt=-1,this.iZt=0,this.rZt=0,this.sZt=!1,this.nZt=!1,this.oZt=!1,this.aZt=!0,this.hZt=!0,this.uZt=!1,this.cZt=0,this.lZt=new qA.Vp(1),this.fZt=()=>Math.random(),this.pZt=0,this.dZt=0,this.mZt=0,this.yZt=0,this.gZt=0,this.ezt=1,this.vZt=1/30,this.wZt=0,this.SZt=qA.$s(qA.tp),this.bZt=qA.$s(qA.tp),this._Zt=qA.$s(qA.tp),this.EZt=new Map,this.TZt=-1,this.PZt=0,this.AZt=0,this.MZt=-1,this.IZt=0,this.OZt=0,this.DZt=0,this.xZt=!1,this.CZt="",this.RZt=!1,this.LZt="",this.PX=null,this.kZt="",this.GZt=null,this.NZt=null,this.nFt=qA.$s(qA.Event.wf),this.jZt=new Map,this.FZt=new Map,this.BZt=0,this.zZt=!1,this.UZt=!1,this.HZt=!1,this.VZt=[],this.WZt={pretick:qA.$s(qA.Event,"pretick",!1),tick:qA.$s(qA.Event,"tick",!1),tick2:qA.$s(qA.Event,"tick2",!1),instancecreate:qA.$s(qA.Event,"instancecreate",!1),instancedestroy:qA.$s(qA.Event,"instancedestroy",!1),beforelayoutchange:qA.$s(qA.Event,"beforelayoutchange",!1),layoutchange:qA.$s(qA.Event,"layoutchange",!1),beforerender:qA.$s(qA.Event,"beforerender",!1),afterrender:qA.$s(qA.Event,"afterrender",!1)},this.WZt.instancecreate.M0=null,this.WZt.instancedestroy.M0=null,this.w7=qA.$s(qA.Event.wf),this.$Zt=null;const e=(t,e)=>qA.KBt.KVt(this,t,e);this.YZt=qA.$s(qA.up,e),this.JZt=qA.$s(qA.up,e),this.qZt=qA.$s(qA.up,e),this.QZt=qA.$s(qA.ZZt,this,t.jobScheduler),t.canvas&&(this.HQt=qA.$s(qA.F$t,this)),this.jqt.onmessage=t=>this._OnMessageFromDOM(t.data),this.lX("runtime","visibilitychange",t=>this.XZt(t)),this.lX("runtime","wrapper-extension-message",t=>this.KZt(t)),this.lX("runtime","get-remote-preview-status-info",()=>this.tXt()),this.lX("runtime","js-invoke-function",t=>this.ZEt(t)),this.lX("runtime","go-to-last-error-script",self.goToLastErrorScript),this.lX("runtime","offline-audio-render-completed",t=>this.eXt(t)),this.nFt.addEventListener("window-blur",t=>this.iXt(t)),this.nFt.addEventListener("window-focus",()=>this.rXt()),this.dat.Rst(),this.bQt.Rst(),this.sXt=null,this.nXt=0,this.oXt=new WeakMap,this.aXt={keyboard:null,T$:null,P$:null,A$:null},this.hXt=new WeakMap,this.uXt=[]}static WP(t){return qA.$s(qA.Nqt,t)}Ys(){qA.So(this.PQt),this.AQt.clear(),this.MQt.clear(),this.Iet.Ys(),this.Iet=null,this.A_t.Ys(),this.A_t=null,this.vQt.Ys(),this.vQt=null,this.w8.Ys(),this.w8=null,this.wQt.Ys(),this.wQt=null,this.dat.Ys(),this.dat=null,this.SQt.Ys(),this.SQt=null,this.bQt.Ys(),this.bQt=null,this.hwt.Ys(),this.hwt=null,this.Av.Ys(),this.Av=null,this.HQt&&(this.HQt.Ys(),this.HQt=null),this.nFt.Ys(),this.nFt=null,this.cXt=null}_OnMessageFromDOM(t){const e=t.type;if("event"===e)this.lXt(t);else{if("result"!==e)throw new Error(`unknown message '${e}'`);this.fXt(t)}}lXt(t){if(!this.HZt)return void this.VZt.push(t);const e=t.component,i=t.handler,r=t.data,s=t.dispatchOpts,n=!(!s||!s.dispatchRuntimeEvent),o=!(!s||!s.dispatchUserScriptEvent),a=t.responseId;if("runtime"===e){if(n){const t=new qA.Event(i);t.data=r,this.nFt.Of(t)}if(o){const t=new qA.Event(i,!0);if(r)for(const[e,i]of Object.entries(r))t[e]=i;this.i8(t)}}const h=this.jZt.get(e);if(!h)return void(n||o||console.warn(`[Runtime] No DOM event handlers for component '${e}'`));const u=h.get(i);if(!u)return void(n||o||console.warn(`[Runtime] No DOM handler '${i}' for component '${e}'`));let c=null;try{c=u(r)}catch(t){return console.error(`Exception in '${e}' handler '${i}':`,t),void(null!==a&&this.pXt(a,!1,""+t))}null!==a&&(c&&c.then?c.then(t=>this.pXt(a,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${i}':`,t),this.pXt(a,!1,""+t)}):this.pXt(a,!0,c))}pXt(t,e,i){this.jqt.postMessage({type:"result",responseId:t,isOk:e,result:i})}fXt(t){const e=t.responseId,i=t.isOk,r=t.result,s=this.FZt.get(e);i?s.resolve(r):s.reject(r),this.FZt.delete(e)}lX(t,e,i){let r=this.jZt.get(t);if(r||(r=new Map,this.jZt.set(t,r)),r.has(e))throw new Error(`[Runtime] Component '${t}' already has handler '${e}'`);r.set(e,i)}Ul(t,e,i,r){this.jqt.postMessage({type:"event",component:t,handler:e,data:i,responseId:null},r)}K$(t,e,i,r){const s=this.BZt++,n=new Promise((t,e)=>{this.FZt.set(s,{resolve:t,reject:e})});return this.jqt.postMessage({type:"event",component:t,handler:e,data:i,responseId:s},r),n}S3(t,e,i,r=-1){this.Ul("runtime","send-wrapper-extension-message",{componentId:t,messageId:e,params:i,asyncId:r})}dXt(t){this.Ul("runtime","send-raw-wrapper-extension-message",t)}b3(t,e,i){const r=this.BZt++,s=new Promise((t,e)=>{this.FZt.set(r,{resolve:t,reject:e})});return this.S3(t,e,i,r),s}KZt(t){if(-1!==t.asyncId){const e=t.asyncId;this.FZt.get(e).resolve(t.params),this.FZt.delete(e)}else this.lXt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}OX(t,e,i){this.lX("wrapper-extension:"+t,e,i)}MX(t){return this.vQt.MX(t)}mXt(t){if(!this.yX())throw new Error("not in debug mode");this.Ul("runtime","post-to-debugger",t)}async szt(t){qA.RCt(this),this.yX()?await QA.szt(this):self.gX&&self.gX.yXt(this);const e=await this.w8.ea("data.json");if(await this.gXt(e),await this.vXt(t),this.Lqt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.ZJt()){const t=this.ZJt();console.info(`[C3 runtime] Hosted in ${this.YV()?"worker":"DOM"}, rendering with WebGL ${t.xT()} [${t.UL()}]`)}else this.XJt()&&console.info(`[C3 runtime] Hosted in ${this.YV()?"worker":"DOM"}, rendering with WebGPU [${this.XJt().UF()}]`);this.E_().Jb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.HZt=!0;for(const t of this.VZt)this.lXt(t);qA.So(this.VZt),this.HQt&&this.HQt.Pqt();for(const e of t.runOnStartupFunctions)this.tQt.push(this.wXt(e));if(await Promise.all([this.w8.K5(!1),...this.tQt]),qA.So(this.tQt),!this.w8.e8())return this.HQt&&await this.HQt.Iqt(),await this.nFt.Mf(new qA.Event("beforeruntimestart")),await this.pL(),this.jqt.postMessage({type:"runtime-ready"}),this;this.HQt&&this.HQt.Tqt()}async wXt(t){try{await t(this.sXt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async gXt(t){const e=t.project;this.rQt=e[0],this.sQt=e[16],this.nQt=e[31],this.oQt=e[38],this.aQt=e[36];const i=e[39]||"loading-logo.png";this.$Qt=!!e[9],this.hQt=this.ak=e[10],this.uQt=this.hk=e[11],this.wQt.w$t(this.hQt,this.uQt),this.cQt=this.hQt/2,this.lQt=this.uQt/2,this.WQt=e[37],this.VQt=!!e[40],this.ET=e[14],this.dQt=e[15],this.mQt=e[42],this.yQt=e[17],this.pQt=!!e[18],this.fQt=e[19],this.NQt=e[21],this.JQt=e[22],this.nXt=e[51];const r=this.w8;r.u8(e[7],e[25]),r.L5(e[8]),r.k5(e[32]),r.N5(e[28]),r.n8(e[29]),r.F5(e[45]),0===this.fQt&&i&&(this.gQt=r.H5({url:i})),this.HQt&&(this.HQt.zJt(qA.F$t.$Jt(e[12])),this.HQt.VJt(e[23]?"high":"low"),this.HQt.Wb(0!==e[24]),this.HQt.QYt(e[34]),this.HQt.JJt(e[41]),this.HQt.ZYt(e[13]),this.HQt.XYt(e[30]),this.HQt.eJt(e[46],e[47]),this.HQt.tJt(e[26]),this.HQt.iJt(e[48]),this.HQt.rJt(e[50]));const s=e[43];s&&await this.SXt(s),this.bXt(),this.vQt.VNt(),this.zQt=self._Xt();const n=e[2];for(const t of n[1])this.vQt.WNt(t);for(const t of n[0])this.vQt.HNt(t);this.zQt=self._Xt(),this.EXt(),this.vQt.ZNt();for(const t of e[3]){const e=qA.Kvt.WP(this,this.PQt.length,t);this.PQt.push(e),this.AQt.set(e.Dl().toLowerCase(),e),this.MQt.set(e.e9(),e)}for(const t of e[4])this.PQt[t[0]].HFt(t);for(const t of e[27]){const e=t.map(t=>this.PQt[t]);this.OQt.push(qA.$s(qA.HBt,this,e))}this.TXt();for(const t of this.PQt)t.WFt();for(const t of e[5])this.Iet.WP(t);const o=e[1];if(o){const t=this.Iet.Vrt(o);t&&this.Iet.Urt(t)}for(const t of e[35])this.SQt.WP(t);for(const t of e[33])this.dat.WP(t);for(const t of e[44])this.bQt.WP(t);this.bQt.Zvt()||(this.bQt.Ys(),this.bQt=null);for(const t of e[49])this.hwt.WP(t);this.hwt.owt()||(this.hwt.Ys(),this.hwt=null);for(const t of e[6])this.A_t.WP(t);this.A_t.tTt(),this.PXt(),qA.So(this.zQt),this.Z$();let a="any";const h=e[20];1===h?a="portrait":2===h&&(a="landscape"),this.Ul("runtime","set-target-orientation",{targetOrientation:a})}async SXt(t){const e=t.format;"image-sequence"===e?this.QQt=new self.AXt(this,t):"image-sequence-gif"===e?this.QQt=new self.MXt(this,t):"webm"===e?this.QQt=new self.IXt(this,t):"mp4"===e&&(this.QQt=new self.OXt(this,t)),this.WQt="unlimited-frame",this.HQt.zJt("off"),this.KU=1,self.devicePixelRatio=1,await this.K$("runtime","set-exporting-to-video",{message:this.QQt.DXt(0),duration:this.QQt.i1()})}Mqt(){return this.fQt}EJt(){return null!==this.QQt}xXt(){return this.QQt.i1()}CXt(){return this.QQt.RXt()}LXt(){return this.QQt.szt({width:this.HQt.mJ(),height:this.HQt.gJ()})}kXt(){const t=this.iZt/this.CXt();return this.QQt.GXt(this.HQt.FJt(),t)}NXt(){this.QQt&&this.QQt.ilt()}eXt(t){this.QQt.jXt(t)}FXt(){return this.QQt.zb()}kqt(){return this.qqt}Gv(){return this.xv}rY(t){this.tQt.push(t)}Yit(t){this.iQt=!!t}BXt(t){this.iQt&&this.eQt.push(t)}Kit(){return this.eQt}GFt(){return this.IQt++}YFt(){return this.IQt}hWt(t){this.DQt.add(t)}uWt(t){this.DQt.delete(t)}_Jt(){return this.DQt}async vXt(t){this.HQt&&(await this.HQt.ua(t),this.HQt.vqt(this.fQt))}async pL(){this.sZt=!0,this.pZt=Date.now();let t=null;const e=new Promise(e=>t=e);if(this.pQt){for(const t of this.PQt)t.mq()||t.iBt()||!t.OJ()||t.qkt();(async()=>{await this.w8.K5(!0),await e,this.xv=!1,this.zXt()})()}else this.xv=!1;this.w8.t8(),this.yX()&&QA.UXt(tM);for(const t of this.Iet.w$())t.prt();this.EJt()&&await this.LXt();const i=this.Iet.Hrt();await i.xit(null,this.E_()),await i.zit(!0),this.PZt=performance.now(),t(),this.pQt||this.zXt(),(await this.K$("runtime","before-start-ticking")).isSuspended&&!this.EJt()?(this.cZt++,this.uZt=!0):this.Ant()}zXt(){this.hX(qA.cY.uY.hY.HXt,null,null),this.Ul("runtime","register-sw")}tOt(t){t=Math.floor(t);const e=this.zQt;if(t<0||t>=e.length)throw new Error("invalid object reference");return e[t]}EXt(){for(const t of self.VXt){const e=qA.Fo(Object.keys(t));this.UQt.push(e)}}TTt(t){t=Math.floor(t);const e=this.UQt;if(t<0||t>=e.length)throw new Error("invalid prop reference");return e[t]}WXt(){return this.Uqt}$Xt(){return this.zqt}YV(){return this.Hqt}_qt(){return this.Fqt}YXt(){return this.Bqt}oW(){return this.A_t}wW(){return this.A_t.wW()}dTt(){return this.A_t.dTt()}fW(){return this.A_t.fW()}mTt(){return this.A_t.mTt()}xCt(){return 0===this.dTt().W_t()}gTt(){return this.A_t.gTt()}ZVt(){return this.vQt}s8(){return this.vQt.s8()}P7(t){if((t=Math.floor(t))<0||t>=this.PQt.length)throw new RangeError("invalid index");return this.PQt[t]}JXt(t){return this.AQt.get(t.toLowerCase())||null}D3(t){return this.MQt.get(t)||null}$pt(t){const e=qA.EJ.VJ(t);return e?e.JJ():null}J7(){return this.PQt}*qXt(){for(const t of this.PQt)t.mq()||(yield*t.eq())}wf(){return this.nFt}iW(){return this.w7}i8(t){t.runtime=this.TJ();const e=this.yX()&&!this.A_t.J$();e&&QA.Nrt(),this.w7.dispatchEvent(t),e&&QA.jrt()}ort(t){return t.runtime=this.TJ(),this.w7.Mf(t)}qV(){return this.hQt}ZV(){return this.uQt}QXt(t,e){if(this.hQt===t&&this.uQt===e)return;this.hQt=t,this.uQt=e;const i=this.y$();i.Xrt(),i.Krt()}E9(){return this.ak}T9(){return this.hk}NJt(t,e){if(this.ak===t&&this.hk===e)return;this.ak=t,this.hk=e;const i=this.y$();i.Xrt(),i.Krt()}TJt(t){this.EJt()||(this.KU=t)}vJ(){return this.KU}btt(){return this.cQt}_tt(){return this.lQt}I$(){return this.HQt}Itt(){return this.HQt?this.HQt.Itt():this.ak}Ott(){return this.HQt?this.HQt.Ott():this.hk}TZ(){return this.HQt?this.HQt.TZ():1}W2(){return this.HQt?this.HQt.W2():1}uet(){return this.HQt?this.HQt.uet():1}aet(){return this.HQt?this.HQt.aet():1}aJ(){return this.HQt?this.HQt.aJ():0}uJ(){return this.HQt?this.HQt.uJ():0}ZXt(){return this.HQt?this.HQt.lJ():0}XXt(){return this.HQt?this.HQt.pJ():0}V2(){return this.HQt?this.HQt.V2():"off"}Ftt(t){return this.HQt?this.HQt.Ftt(t):null}u7(t){this.HQt&&this.HQt.u7(t)}Ntt(){return this.dQt}mJt(){return this.mQt}yJt(){return this.yQt}qW(){return this.HQt?this.HQt.qW():NaN}MP(){return"nearest"!==this.Oz()}ZW(){return this.WQt}XW(t){this.WQt!==t&&(this.WQt=t,-1===this.GYt&&-1===this.KQt||(this.KXt(),this.tKt()))}Oz(){return this.ET}BFt(){return this.pQt}wqt(){return this.gQt}Oqt(){this.gQt&&(this.gQt.fD(),this.gQt.Ys(),this.gQt=null)}y$(){return this.Iet}p$(){return this.Iet.p$()}tht(){return this.dat}eKt(){return this.SQt}jzt(){return this.bQt}Owt(){return this.hwt}OV(){return this.w8}H5(t){return this.w8.H5(t)}Mq(t,e,i,r,s,n){if(n&&this.bQt){if(t instanceof qA.Kvt&&t.mq()){const o=t.jq(),a=Math.floor(this.f$()*o.length);return this.Mq(o[a],e,i,r,s,n)}const o=this.bQt.Xvt(t,n);if(o){const t=this.L7(o,e,!1,i,r,!1,s,void 0,s);return this.bQt.twt(t,n),t}}return this.L7(t,e,!1,i,r,!1,s,void 0,s)}L7(t,e,i,r,s,n,o,a,h){let u=null,c=null;if(t instanceof qA.Kvt){if(c=t,c.mq()){const t=c.jq();c=t[Math.floor(this.f$()*t.length)]}u=c.M7()}else u=t,c=this.P7(u[1]);const l=c.KJ().OJ();if(this.xv&&l&&!c.iBt())return null;const f=e;let p;l||(e=null),p=i&&!n&&u&&!this.jQt.has(u[2])?u[2]:this.NQt++;const d=u?u[0]:null,m=qA.$s(qA.Instance,{runtime:this,objectType:c,GX:e,rzt:d,azt:u?u[3]:null,uid:p,tags:u?u[6]:null});this.jQt.set(p,m);let y=null;if(l&&(y=m.N$(),void 0!==r&&void 0!==s&&(y.sE(r),y.aE(s)),c.OBt(!0)),e&&(h||e.k7(m,!0),e.g$().Rit(c)),this.GQt++,c.LZ()&&!i&&!n){const t=new Set;for(const e of c.Oit().Fq()){if(e===c)continue;const i=this.iKt(e,y,t);if(i){const t=this.L7(i,f,!1,y?y.rE():r,y?y.oE():s,!0,!1,void 0,h);m.lrt(t)}else{const t=this.L7(e,f,!1,y?y.rE():r,y?y.oE():s,!0,!1,void 0,h);m.lrt(t)}}for(const t of m.kZ()){t.lrt(m);for(const e of m.kZ())t!==e&&t.lrt(e)}}if(l&&!i&&o&&this.rKt(m,d,y,e,r,s,h),c.LZ()&&!i&&!n&&o)for(const t of m.kZ()){const i=t.N$();if(!i)continue;const r=t.KJ(),s=t.gq().M7()[0];r.OJ()?this.rKt(t,s,i,e,i.rE(),i.oE(),h):this.rKt(t,s,i,e,void 0,void 0,h)}if(!n&&o){void 0===r&&(r=d[0]),void 0===s&&(s=d[1]);const t=y.bK(),e=r-y.rE()+t.rE(),i=s-y.oE()+t.oE();t.jX(e,i)}c.TBt();const g=u?qA.Co(u[5]):null,v=u?u[4].map(t=>qA.Co(t)):null,w=l&&d&&d[13];if(w&&m.mzt(),m.tBt(g,v),w){const t=d[13];m.y0().pGt(t[2],t[0],t[1])}this.CQt.push(m),this.LQt=!0,this.yX()&&QA.sKt(m);const S=this.WZt.instancecreate;return S.M0=m,this.nFt.dispatchEvent(S),m}WUt(t){const e=t[0],i=t[1],r=t[2],s=t[6];return s||this.Iet.Wrt(e).F$(i).D7(r)}iKt(t,e,i){const r=e?.Nzt()??[];for(const e of r){const r=this.WUt(e),s=!!e[4],n=this.P7(r[1]);if(!i.has(r)&&t===n&&s)return i.add(r),r}}rKt(t,e,i,r,s,n,o){const a=i.pVt(),h=i.Nzt();if(t.N$().dVt(a),!h)return;void 0===s&&(s=e[0]),void 0===n&&(n=e[1]);const u=new Set,c=e[0],l=e[1];for(const e of h){const i=e[0],a=e[1],h=e[2],f=e[3],p=!!e[4],d=e[5],m=e[6];let y;y=m||this.Iet.Wrt(i).F$(a).D7(h);const g=this.P7(y[1]),v=t.Bzt(g),w=u.has(g);if(v&&!w&&p){const e=t.zzt(g);e.N$().szt(y[0]);const i=s+y[0][0]-c,r=n+y[0][1]-l;e.N$().jX(i,r),e.N$().dVt(d),t.DK(e,{kK:!!(1&f),NK:!!(f>>1&1),FK:!!(f>>2&1),zK:!!(f>>3&1),HK:!!(f>>4&1),ZK:!!(f>>5&1),WK:!!(f>>6&1),YK:!!(f>>7&1),qK:!!(f>>8&1)}),u.add(g)}else{const e=s+y[0][0]-c,i=n+y[0][1]-l,a=this.L7(y,r,!1,e,i,!1,!0,t,o);a.N$().dVt(d),t.DK(a,{kK:!!(1&f),NK:!!(f>>1&1),FK:!!(f>>2&1),zK:!!(f>>3&1),HK:!!(f>>4&1),ZK:!!(f>>5&1),WK:!!(f>>6&1),YK:!!(f>>7&1),qK:!!(f>>8&1)})}}}Y$(t){if(this.FQt.has(t))return;const e=t.gq();let i=this.RQt.get(e);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.RQt.set(e,i);if(this.yX()&&QA.nKt(t),t.gzt(),this.LQt=!0,t.LZ())for(const e of t.kZ())this.Y$(e);for(const e of t.children())e.XK()&&this.Y$(e);if(!this.Iet.q$()&&!this.xZt){const e=this.oW();e.Oq(!0),t.Kzt(),e.Oq(!1)}t.tUt(this.Iet.q$())}Z$(){this.LQt&&(this.kQt=!0,this.oKt(),this.aKt(),this.kQt=!1,this.LQt=!1,this.W$())}oKt(){for(const t of this.CQt){const e=t.gq();e.k7(t);for(const i of e.Cq())i.k7(t),i.TBt()}qA.So(this.CQt)}aKt(){this.nFt.ff(!0);for(const[t,e]of this.RQt.entries())this.hKt(t,e),e.clear();this.RQt.clear(),this.nFt.ff(!1)}hKt(t,e){for(const t of e){const e=this.WZt.instancedestroy;e.M0=t,this.nFt.dispatchEvent(e),this.jQt.delete(t.GZ()),this.EZt.delete(t);const i=t.N$();i&&(i.vVt(),i.F7(),i.gzt()),this.FQt.add(t),this.GQt--}qA.Oo(t.cq(),e),t.TBt(),this.BQt.add(t);for(const i of t.Cq())qA.Oo(i.cq(),e),i.TBt(),this.BQt.add(i);if(t.KJ().OJ()){const t=new Set([...e].map(t=>t.N$().F$()));for(const i of t)i.Q9(e)}}ABt(){return this.CQt}*GRt(t){for(const e of this.ABt())t.mq()?e.gq().CCt(t)&&(yield e):e.gq()===t&&(yield e)}KFt(){return this.NQt++}eBt(t,e){this.jQt.set(t,e)}P3(t){t=!!t,this.hZt!==t&&(this.hZt=!!t,this.hZt&&this.uZt&&(this.I3(!1),this.uZt=!1))}A3(){return this.hZt}Bit(){this.nFt.dispatchEvent(qA.$s(qA.Event,"renderercontextlost")),this.I3(!0);for(const t of this.PQt)!t.mq()&&t.rBt()&&t.jit();const t=this.p$();t&&t.Bit(),qA.tjt.x8(),qA.Y5.x8()}async QJt(){await this.p$().xit(null,this.E_()),this.nFt.dispatchEvent(qA.$s(qA.Event,"renderercontextrestored")),this.I3(!1),this.W$()}XZt(t){if(!this.hZt)return;const e=t.hidden;this.I3(e),this.uZt=e,e||this.W$()}iXt(t){this.Lqt()&&this.JQt&&!qA.Je.ri&&(t.data.parentHasFocus||(this.I3(!0),this.qQt=!0))}rXt(){this.qQt&&(this.I3(!1),this.qQt=!1)}tKt(){const t=this.ZQt;"vsync"===this.WQt?-1===this.GYt&&(this.GYt=self.requestAnimationFrame(t.XQt)):"unlimited-tick"===this.WQt?(-1===this.KQt&&(this.KQt=qA.Vo(t.tZt)),-1===this.GYt&&(this.GYt=self.requestAnimationFrame(t.eZt))):-1===this.KQt&&(this.KQt=qA.Vo(t.XQt))}KXt(){-1!==this.GYt&&(self.cancelAnimationFrame(this.GYt),this.GYt=-1),-1!==this.KQt&&(qA.Wo(this.KQt),this.KQt=-1)}MW(){return this.cZt>0}I3(t){if(this.EJt())return;const e=this.MW();this.cZt+=t?1:-1,this.cZt<0&&(this.cZt=0);const i=this.MW();if(!e&&i)console.log("[Construct] Suspending"),this.KXt(),this.nFt.dispatchEvent(qA.$s(qA.Event,"suspend")),this.i8(qA.$s(qA.Event,"suspend")),this.hX(qA.cY.uY.hY.uKt,null,null);else if(e&&!i){console.log("[Construct] Resuming");const t=performance.now();this.dZt=t,this.PZt=t,this.TZt=0,this.AZt=0,this.MZt=0,this.IZt=0,this.DZt=0,this.OZt=0,this.nFt.dispatchEvent(qA.$s(qA.Event,"resume")),this.i8(qA.$s(qA.Event,"resume")),this.hX(qA.cY.uY.hY.cKt,null,null),this.ePt()||this.Ant(t)}}a3(t){this.YZt.Hc(t)}l3(t){this.JZt.Hc(t)}u3(t){this.qZt.Hc(t)}h3(t){this.YZt.Xf(t)}f3(t){this.JZt.Xf(t)}c3(t){this.qZt.Xf(t)}lKt(t,e){const i=e?performance.now():0;let r;return t instanceof XA?(r=t.vX(),e&&QA.fKt(t.behavior,performance.now()-i)):(r=t.Ant(),e&&QA.fKt(t.E0(),performance.now()-i)),r}pKt(){const t=this.yX();this.YZt.Up(!0);for(const e of this.YZt)this.lKt(e,t);this.YZt.Up(!1)}dKt(t,e){const i=e?performance.now():0;let r;return t instanceof XA?(r=t.m3(),e&&QA.fKt(t.behavior,performance.now()-i)):(r=t.jNt(),e&&QA.fKt(t.E0(),performance.now()-i)),r}mKt(){const t=this.yX();this.JZt.Up(!0);for(const e of this.JZt)this.dKt(e,t);this.JZt.Up(!1)}yKt(t,e){const i=e?performance.now():0;let r;return t instanceof XA?(r=t.bX(),e&&QA.fKt(t.behavior,performance.now()-i)):(r=t.LGt(),e&&QA.fKt(t.E0(),performance.now()-i)),r}gKt(){const t=this.yX();this.qZt.Up(!0);for(const e of this.qZt)this.yKt(e,t);this.qZt.Up(!1)}*vKt(){const t=this.yX();this.YZt.Up(!0);for(const e of this.YZt){const i=this.lKt(e,t);qA.wa(i)&&(yield*i)}this.YZt.Up(!1)}*wKt(){const t=this.yX();this.JZt.Up(!0);for(const e of this.JZt){const i=this.dKt(e,t);qA.wa(i)&&(yield*i)}this.JZt.Up(!1)}*SKt(){const t=this.yX();this.qZt.Up(!0);for(const e of this.qZt){const i=this.yKt(e,t);qA.wa(i)&&(yield*i)}this.qZt.Up(!1)}async Ant(t,e,i){this.oZt=!0;const r="background-wake"===i,s="background-wake"!==i&&"skip-render"!==i,n=this.y$(),o=this.I$();if(!this.sZt||this.MW()&&!e&&!r)return;const a=performance.now();this.nZt=!0,this.bKt(t||0),this.MZt++,this._Kt();const h=this.EKt();this.xRt()&&await h;const u=this.nFt.If(this.WZt.pretick);u instanceof Promise&&await u,this.i8(this.$Zt.pretick);const c=this.TKt();this.xRt()&&await c,this.PKt()&&await this.AKt(),n.b$()&&await this.MKt();const l=this.IKt();this.xRt()&&await l;const f=n.p$(),p=f.Tit();let d=!1;if(-1!==p&&(f.Pit(),o.Eit()!==p)){const t=this.I$().Wit(p);this.YV()&&(d=!0,await t)}this.Ul("canvas","update-html-layer-dom-state",{layersDomState:f.t9().filter(t=>t.BQ()).map(t=>t.stt())}),s&&this._H(),d&&this.Ul("canvas","cleanup-html-layers"),this.EJt()&&(await this.kXt(),this.LW()>=this.xXt())?this.FXt():(this.MW()||r||this.tKt(),this.iZt++,this.rZt++,this.nZt=!1,this.OZt+=performance.now()-a)}async EKt(){const t=this.A_t,e=this.yX();this.Z$(),t.Oq(!0),this.HTt(this.p$()),e&&QA.OKt(),this.xRt()?await t._Pt():t.gPt(),e&&QA.DKt(),this.VTt(),t.Oq(!1),this.Z$(),t.Oq(!0)}async TKt(){const t=this.A_t,e=this.yX(),i=this.xRt(),r=this.nFt,s=this.WZt,n=this.$Zt;e&&QA.OKt(),i?await this.xKt(this.vKt()):this.pKt(),i?await this.xKt(this.wKt()):this.mKt(),e&&QA.CKt(),e&&QA.OKt(),i?await this.RKt(s.tick):r.dispatchEvent(s.tick),e&&QA.LKt(),t.Oq(!1),this.i8(n.tick)}async IKt(){const t=this.A_t,e=this.nFt,i=this.WZt,r=this.$Zt,s=this.yX(),n=this.xRt();s&&QA.OKt(),n?await t.WTt(this.Iet):t.UTt(this.Iet),s&&QA.DKt(),this.wQt.UWt(),this._Kt(),this.aZt=!1,t.Oq(!0),s&&QA.OKt(),n?await this.xKt(this.SKt()):this.gKt(),s&&QA.CKt(),s&&QA.OKt(),n?await this.RKt(i.tick2):e.dispatchEvent(i.tick2),s&&QA.LKt(),t.Oq(!1),this.i8(r.tick2),n&&await t.iPt(),this.Z$(),this._Kt()}_Kt(){if(0===this.FQt.size)return;const t=this.nFt;t.ff(!0);for(const t of this.BQt)t.lPt().i_t(this.FQt);this.BQt.clear(),this.A_t.TPt(this.FQt);for(const t of this.FQt)t.Ys();this.FQt.clear(),t.ff(!1)}async MKt(){const t=this.y$();let e=0;for(;t.b$()&&e++<10;)await this.kKt(t.Zrt())}bKt(t){let e=0;this.EJt()?(e=1/this.CXt(),this.mZt=e,this.yZt=e):0!==this.dZt&&(e=Math.max(t-this.dZt,0)/1e3,e>.5&&(e=0),this.mZt=e,this.yZt=qA.Xs(e,this.wZt,this.vZt)),this.dZt=t,this.gZt=this.yZt*this.ezt,this.SZt.Hc(this.gZt),this.bZt.Hc(e*this.ezt),this._Zt.Hc(this.yZt);for(const[t,e]of this.EZt)e.Hc(this.yZt*t.BW());this.HQt&&this.HQt.hqt(),t-this.PZt>=1e3&&(this.PZt+=1e3,t-this.PZt>=1e3&&(this.PZt=t),this.AZt=this.TZt,this.TZt=0,this.IZt=this.MZt,this.MZt=0,this.DZt=Math.min(this.OZt/1e3,1),this.OZt=0,this.HQt&&this.HQt.aqt(),this.wQt.jWt(),this.yX()&&QA.GKt())}pzt(t,e){if(e){if(!this.EZt.has(t)){const e=qA.$s(qA.tp);e.np(this.SZt),this.EZt.set(t,e)}}else this.EZt.delete(t)}dzt(t){const e=this.EZt.get(t);return e?e.Ue():this.LW()}async kKt(t){const e=this.nFt,i=this.y$().p$();await i.mrt(),i.Fit(t,this.E_()),i===t&&this.A_t.vrt(),this.wQt.UWt(),this._Kt(),e.dispatchEvent(this.WZt.beforelayoutchange),qA.df.xf(!0),await t.xit(i,this.E_()),qA.df.xf(!1),await t.zit(!1),e.dispatchEvent(this.WZt.layoutchange),this.W$(),this.aZt=!0,this.Z$(),this.NXt()}W$(){this.YQt=!0}ZJt(){return this.HQt?this.HQt.ZJt():null}XJt(){return this.HQt?this.HQt.XJt():null}E_(){return this.HQt?this.HQt.E_():null}_H(){const t=this.HQt;if(!t||t.qJt())return;const e=this.E_(),i=e.kL(),r=i&&e.qb(),s=i&&e.dS();if(r&&e.bL(),!this.YQt&&!this.EJt())return void e.Vb();const n=this.Iet.p$();this.TZt++,e.pL();const o=this.yX();o&&QA.OKt(),this.YQt=!1;let a=null;r&&(a=t.fqt().rC(),e.LL(a));let h=null;s&&(h=e.Sj(2*(1+n.git())),e._j(0,1)),this.R9()&&"low"===t.jtt()?e.TR(t.Itt(),t.Ott()):e.PR(),this.NKt(this.E_(),n),a&&e.GL(a),s&&(e.Tj(),this.HQt.pqt(h)),e.zb(),o&&(QA.jKt(),QA.FKt()),t&&t.dqt()}Irt(t){return"low"===this.I$().jtt()||t.qb()&&(this.Ntt()||this.R9())}NKt(t,e){t._S(),t.UR(),t.Gb(),t.LR(1,1,1,1),t.PL(null),t.jR(null),t.mL(this.R9()),this.wf().dispatchEvent(this.WZt.beforerender),this.Irt(t)&&e.Art(t);const i=e.Eit();for(let r=1;r<i;++r)e.Crt(t,r),t.dS()&&t.dj();this.Irt(t)||e.Art(t),e.xrt(t),this.wf().dispatchEvent(this.WZt.afterrender)}hX(t,e,i){if(!this.sZt)return!1;const r=!this.nZt&&!this.A_t.oPt();let s=0;r&&(s=performance.now());const n=this.yX();n&&this.G3(!1);const o=this.A_t.qTt(this.Iet,t,e,i);if(r){const t=performance.now()-s;this.OZt+=t,n&&QA.BKt(t)}return n&&this.G3(!0),o}_Gt(t,e,i){if(!this.xRt())return this.hX(t,e,i);if(this.ePt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.nZt&&!this.A_t.oPt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.A_t.XTt(this.Iet,t,e,i)}async oY(t,e,i){if(!this.xRt())return this.hX(t,e,i);if(!this.sZt)return!1;if(this.ePt())return this.A_t.KTt(t,e,i);if(!this.p$())return this.A_t.QTt(t,e,i);const r=performance.now(),s=this.A_t.XTt(this.Iet,t,e,i);let n=s.next();for(;!n.done;)await this.YTt(n.value),n=s.next();return this.MW()||this.A_t.oPt()||(await this.A_t.iPt(),this.oZt&&!this.nZt&&this.tKt()),this.OZt+=performance.now()-r,n.value}EGt(t,e,i){const r=this.yX();r&&this.G3(!1);const s=this.A_t.rPt(this.Iet,t,e,i);return r&&this.G3(!0),s}TGt(t,e,i){return this.A_t.sPt(this.Iet,t,e,i)}PGt(t){return this.lZt.Hc(t)}HTt(t){this.xQt.push(t)}VTt(){if(!this.xQt.length)throw new Error("layout stack empty");this.xQt.pop()}k$(){return this.xQt.length?this.xQt.at(-1):this.p$()}OW(t){return t&&-1!==t.BW()?this.yZt*t.BW():this.gZt}Tnt(){return this.gZt}Pnt(){return this.yZt}xW(){return this.mZt}BW(){return this.ezt}zW(t){(isNaN(t)||t<0)&&(t=0),this.ezt=t}e$(t){this.wZt=Math.max(t,0)}t$(){return this.wZt}s$(t){this.vZt=Math.max(t,0)}r$(){return this.vZt}HW(){return this.AZt}WW(){return this.IZt}YW(){return this.DZt}zKt(){return this.pZt}LW(){return this.SZt.Ue()}UKt(){return this.bZt.Ue()}jW(){return this._Zt.Ue()}GW(){return this.iZt}HKt(){return this.rZt}VKt(){return this.GQt}GV(){return this.rQt}jV(){return this.sQt}UV(){return this.nQt}BV(){return this.oQt}VV(){return this.aQt}C$(t){if(this.xZt)throw new Error("cannot call while loading state - wait until afterload event");return this.jQt.get(t)||null}BUt(t){if(this.xZt)throw new Error("cannot call while loading state - wait until afterload event");this.jQt.delete(t)}crt(){this.jQt.clear();for(const t of this.PQt)if(!t.mq())for(const e of t.cq())this.jQt.set(e.GZ(),e)}Lqt(){return"preview"===this.Wqt}yX(){return this.Qqt}eJ(){return this.Wqt}Gqt(){return"cordova"===this.Wqt}WKt(){return"Android"===qA.Je.qe&&("cordova"===this.Wqt||"playable-ad-single-file"===this.Wqt||"playable-ad-zip"===this.Wqt||"instant-games"===this.Wqt)}$Kt(){return this.a5}YKt(){return this.$qt}iJ(){return this.Yqt}JKt(){return this.Jqt}CV(){return this.wQt}XNt(){return this.vQt.XNt()}KNt(){return this.vQt.KNt()}R9(){return this.VQt}qKt(){return this.E_().rS(this.T9())}tS(t){return this.E_().tS(t||this.T9())}QKt(){return this.aZt}o$(t){t=!!t,this.$Qt!==t&&(this.$Qt=t,this.y$().Krt(),this.W$())}a$(){return this.$Qt}ZKt(t){if(!this.TQt.has(t)){const e=()=>this.XKt(t);this.TQt.set(t,e),t.wf().addEventListener("animationframeimagechange",e)}const e=this.Av.Sv(t);return e.kv()||e.Nv().then(()=>this.W$()),e}XKt(t){this.Av.Tv(t)}_Qt(t){const e=[];for(const i of t.dBt())for(const t of i.q0()){const i=t.e1();e.push({source:t,width:i.Eg(),height:i.Pg(),tag:t.v1()})}return{Rv:e}}async EQt(t){const e=qA.$s(qA.Vp),i=[],r=new Map;for(const s of t.dBt())for(const t of s.q0()){const s=t.e1().Sjt();r.has(s)||(r.set(s,null),i.push(e.Hc(async()=>{const t=await s.j8();r.set(s,t)})))}await Promise.all(i);const s=[];for(const i of t.dBt())for(const t of i.q0())s.push(e.Hc(async()=>{const e=t.e1(),i=r.get(e.Sjt()),s=await e.bjt(i);return{Fv:await createImageBitmap(s)}}));const n=await Promise.all(s);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close();return{Rv:n}}KKt(t){this.CZt=t,this.RZt=!1}t0t(){this.CZt="",this.RZt=!0}e0t(t){this.LZt=t}TLt(t){this.PX=t}i0t(){return this.kZt}PKt(){return!!(this.CZt||this.RZt||this.LZt||null!==this.PX)}async AKt(){if(this.CZt&&(this.Z$(),await this.r0t(this.CZt),this.s0t()),this.LZt&&(await this.n0t(this.LZt),this.s0t(),this.yX()&&QA.o0t()),this.RZt){const t=await this.a0t();this.kZt=t,await this.oY(qA.cY.uY.hY.h0t,null),this.kZt="",this.s0t()}if(null!==this.PX){this.Z$();try{await this.u0t(this.PX),this.kZt=this.PX,await this.oY(qA.cY.uY.hY.c0t,null),this.kZt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.oY(qA.cY.uY.hY.l0t,null)}this.s0t()}}s0t(){this.CZt="",this.RZt=!1,this.LZt="",this.PX=null}SJ(){return this.GZt||(this.GZt=localforage._i({name:"c3-localstorage-"+this.UV(),description:this.GV()})),this.GZt}f0t(){return this.NZt||(this.NZt=localforage._i({name:"c3-savegames-"+this.UV(),description:this.GV()})),this.NZt}async r0t(t){const e=await this.a0t();try{await this.f0t().setItem(t,e),console.log("[Construct] Saved state to storage ("+e.length+" chars)"),this.kZt=e,await this.oY(qA.cY.uY.hY.h0t,null),this.kZt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.oY(qA.cY.uY.hY.p0t,null)}}async n0t(t){try{const e=await this.f0t().getItem(t);if(!e)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+e.length+" chars)"),await this.u0t(e),this.kZt=e,await this.oY(qA.cY.uY.hY.c0t,null),this.kZt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.oY(qA.cY.uY.hY.l0t,null)}}async a0t(){const t={c3save:!0,version:1,rt:{time:this.LW(),timeRaw:this.UKt(),walltime:this.jW(),timescale:this.BW(),tickcount:this.GW(),next_uid:this.NQt,running_layout:this.p$().e9(),start_time_offset:Date.now()-this.pZt},types:{},layouts:{},events:this.A_t._et(),timelines:this.dat._et(),user_script_data:null};for(const e of this.PQt)e.mq()||e.GBt()||(t.types[e.e9().toString()]=e._et());for(const e of this.Iet.w$())t.layouts[e.e9().toString()]=e._et();const e=this.d0t("save");return e.saveData=null,await this.ort(e),t.user_script_data=e.saveData,JSON.stringify(t)}trt(){return this.xZt}async u0t(t){const e=this.y$(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.PLt(),this.nFt.dispatchEvent(qA.$s(qA.Event,"beforeload"));for(const t of this.qXt())t.gq().GBt()||t.Pst();const r=i.rt;this.SZt.Set(r.time),r.hasOwnProperty("timeRaw")&&this.bZt.Set(r.timeRaw),this._Zt.Set(r.walltime),this.ezt=r.timescale,this.iZt=r.tickcount,this.pZt=Date.now()-r.start_time_offset;const s=r.running_layout;this.xZt=!0;let n=!1;if(s!==this.p$().e9()){const t=e.Wrt(s);if(!t)return;await this.kKt(t),n=!0}for(const[t,r]of Object.entries(i.layouts)){const i=parseInt(t,10),s=e.Wrt(i);s&&s.Eet(r)}const o=new Set;for(const[t,e]of Object.entries(i.types)){const i=parseInt(t,10),r=this.D3(i);!r||r.mq()||r.GBt()||r.Eet(e,o)}for(const t of this.Iet.w$())for(const e of t.aQ())e.Tet();if(this.Z$(),this.crt(),this.xZt=!1,n){for(const t of this.qXt())t.ert();for(const[t,e]of Object.entries(i.types)){const i=parseInt(t,10),r=this.D3(i);!r||r.mq()||r.GBt()||r.zBt(e)}}this.NQt=r.next_uid,this.A_t.Eet(i.events);for(const t of this.PQt)if(!t.mq()&&t.LZ())for(const e of t.cq()){const i=e.jZ();e.Fzt();for(const r of t.Oit().Fq()){if(r===t)continue;const s=r.cq();if(i<0||i>=s.length)throw new Error("missing sibling instance");e.lrt(s[i])}}this.dat.Eet(i.timelines),e.Xrt(),e.Krt();for(const t of o)t.Xzt();this.ALt(),this.nFt.dispatchEvent(qA.$s(qA.Event,"afterload")),this.i8(this.d0t("afterload"));for(const[t,e]of Object.entries(i.types)){const e=parseInt(t,10),i=this.D3(e);i&&i.BBt()}const a=this.d0t("load");a.saveData=i.user_script_data,await this.ort(a),this.W$()}m0t(t,e){return e.N$().hVt()-t.N$().hVt()}QVt(t,e){t.N$()&&(this.hXt.has(t)||(this.hXt.set(t,e),this.uXt.push(t)))}PLt(){this.hXt=new WeakMap,qA.So(this.uXt),qA.Trt.tHt()}ALt(t="full",e=null){this.uXt.sort(this.m0t),e||(e={}),e.FUt=new Set;const i=this.uXt.length;for(const i of this.uXt)i.Mst(this.hXt.get(i),t,e);for(const i of this.uXt)i.rUt(this.hXt.get(i),t,e);if(this.PLt(),i){this.Z$(),this.crt();for(const t of this.Iet.w$())for(const e of t.aQ())e.U7(),e.V$()}}async y0t(t){const e=t.map(t=>new URL(t,location.href).toString());this.QZt.g0t(e)}v0t(t,e){this.QZt.w0t(t,e)}S0t(t,e){this.QZt.b0t(t,e)}_0t(t,e,i,r){return this.QZt._0t(t,e,i,null,null,r)}E0t(t,e,i,r){return this.QZt.E0t(t,e,i,r)}T0t(){return this.QZt.P0t()}D$(t,e){this.Ul("runtime","invoke-download",{url:t,filename:e})}async Eqt(t,e,i,r,s,n){if(r=r||e,s=s||i,this.YV())return(await this.K$("runtime","raster-svg-image",{blob:t,imageWidth:e,imageHeight:i,surfaceWidth:r,surfaceHeight:s,imageBitmapOpts:n})).imageBitmap;{const o=await self.C3_RasterSvgImageBlob(t,e,i,r,s);return n?await self.createImageBitmap(o,n):o}}async A0t(t){return this.YV()?await this.K$("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}M0t(){this.zZt||(this.zZt=!0,this.Ul("runtime","enable-device-orientation"))}I0t(){this.UZt||(this.UZt=!0,this.Ul("runtime","enable-device-motion"))}f$(){return this.fZt()}O0t(t){this.fZt=t}tXt(){const t=this.E_();return{fps:this.HW(),tps:this.WW(),cpu:this.YW(),gpu:this.qW(),layout:this.p$()?this.p$().Dl():"",renderer:t.qb()?t.UL():t.UF()}}ePt(){return!!this.yX()&&QA.ePt()}YTt(t){return this.xRt()?QA.YTt(t):Promise.resolve()}MIt(){return!!this.xRt()&&QA.D0t()}x0t(t){this.Zqt=!!t,this.C0t()}R0t(){return this.Zqt}xRt(){return this.Xqt}G3(t){t?this.Kqt--:this.Kqt++,this.C0t()}C0t(){this.Xqt=this.yX()&&this.Zqt&&0===this.Kqt}$At(){return this.yX()&&QA.$At()}Rtt(){return this.yX()&&this.E_().kL()&&QA.Rtt()}async xKt(t){if(t)for(const e of t)await this.YTt(e)}RKt(t){return this.xKt(this.nFt.Df(t))}ZEt(t){return this.A_t.ZEt(t.name,t.params)}eY(t){if(this.YV())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}TJ(){return this.sXt}g3(){return this.nXt}d0t(t){const e=qA.$s(qA.Event,t,!1);return e.runtime=this.sXt,e}bXt(){this.sXt=new self.AV(this),this.$Zt={pretick:this.d0t("pretick"),tick:this.d0t("tick"),tick2:this.d0t("tick2")}}TXt(){const t={};for(const e of this.PQt)t[e.TTt()]={value:e.YJ(),enumerable:!0,writable:!1};this.sXt.rW(t)}PXt(){const t={};for(const e of this.oW().DTt())t[e.TTt()]=e.PTt();this.sXt.sW(t)}E$(){return this.aXt}UJ(t,e){this.oXt.set(t,e)}cQ(t){return this.oXt.get(t)}JY(t){if(!(t instanceof self.ZJ))throw new TypeError("expected IObjectClass");const e=this.cQ(t);if(!(e&&e instanceof qA.Kvt))throw new Error("invalid IObjectClass");return e}aq(t){if(!(t instanceof self.PZ))throw new TypeError("expected IInstance");const e=this.cQ(t);if(!(e&&e instanceof qA.Instance))throw new Error("invalid IInstance");return e}G$(t){if(!(t instanceof self.l0))throw new TypeError("expected IWorldInstance");const e=this.cQ(t);if(!(e&&e instanceof qA.Instance))throw new Error("invalid IInstance");return e}},self.C3_CreateRuntime=qA.Nqt.WP,self.C3_InitRuntime=(t,e)=>t.szt(e)}{const eM=self.Ee;eM.ZZt=class extends eM.Vs{constructor(t,e){super(),this.Fl=t,this.L0t=new Map,this.k0t=0,this.G0t=e.inputPort,e.outputPort.onmessage=t=>this.N0t(t),this.j0t=e.maxNumWorkers,this.F0t=1,this.B0t=!1,this.z0t=!1}P0t(){return this.j0t}g0t(t){this.G0t.postMessage({type:"_import_scripts",scripts:t})}w0t(t,e){this.G0t.postMessage({type:"_send_blob",blob:t,id:e})}b0t(t,e){this.G0t.postMessage({type:"_send_buffer",buffer:t,id:e},[t])}_0t(t,e,i,r,s,n){if(i||(i=[]),"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const o=this.k0t++,a={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:o,params:e,transferables:i},h=new Promise((t,e)=>{this.L0t.set(o,{resolve:t,progress:r,reject:e,U0t:!1,H0t:n})});return s&&s.Qf(()=>this.V0t(o)),this.G0t.postMessage(a,i),this.W0t(),h}E0t(t,e,i,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const s={type:t,isBroadcast:!0,maxWorkerNum:r,jobId:this.k0t++,params:e,transferables:i};this.G0t.postMessage(s,i)}V0t(t){const e=this.L0t.get(t);e&&(e.U0t=!0,e.resolve=null,e.progress=null,e.reject=null,this.G0t.postMessage({type:"_cancel",jobId:t}))}N0t(t){const e=t.data,i=e.type,r=e.jobId;switch(i){case"result":this.$0t(r,e.result);break;case"progress":this.Y0t(r,e.progress);break;case"error":this.J0t(r,e.error);break;case"ready":this.q0t();break;default:throw new Error(`unknown message from worker '${i}'`)}}$0t(t,e){const i=this.L0t.get(t);if(!i)throw new Error("invalid job ID");i.U0t||i.resolve(e),this.L0t.delete(t)}Y0t(t,e){const i=this.L0t.get(t);if(!i)throw new Error("invalid job ID");!i.U0t&&i.progress&&i.progress(e)}J0t(t,e){const i=this.L0t.get(t);if(!i)throw new Error("invalid job ID");i.U0t||i.reject(e),this.L0t.delete(t)}q0t(){this.B0t&&(this.B0t=!1,this.F0t++,this.F0t<this.j0t?this.W0t():this.G0t.postMessage({type:"_no_more_workers"}))}Q0t(){let t=0;const e=[...this.L0t.values()].sort((t,e)=>(t.H0t||1/0)-(e.H0t||1/0));for(const i of e)t<(i.H0t||1/0)&&t++;return t}async W0t(){if(!(this.F0t>=this.j0t||this.B0t||this.z0t||this.Q0t()<=this.F0t))try{this.B0t=!0,(await this.Fl.K$("runtime","create-job-worker")).outputPort.onmessage=t=>this.N0t(t)}catch(t){this.z0t=!0,this.B0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.F0t} so far)`,t)}}}}self.C3_Shaders={};{let iM=function(t,e){const i=t[1],r=e[1];if("number"==typeof i&&"number"==typeof r)return i-r;{const t=""+i,e=""+r;return t<e?-1:t>e?1:0}};ForEachOrdered_SortInstances=iM;const rM=self.Ee;let sM=null,nM="",oM="",aM=[],hM="",uM="",cM="";const lM=rM.$s(rM._Et);rM.cY.uY=class extends rM.Tkt{constructor(t){super(t),this.gEt=this.Fl.oW().R3(),this.r_t=this.Fl.oW().wW(),this.Z0t=0,this.X0t=0,this.K0t=new Map}Ys(){super.Ys()}W$(){this.Fl.W$()}hX(t){this.Fl.hX(t,null,null)}t1t(t,e){return sM&&t===nM&&e===oM||(sM=new RegExp(t,e),nM=t,oM=e),sM.lastIndex=0,sM}e1t(t,e,i){if(t===hM&&e===uM&&i===cM)return aM;const r=this.t1t(e,i);return aM=t.match(r),hM=t,uM=e,cM=i,aM}async i1t(t,e){if(!e.length)return;this.Z0t+=e.length;const i=[];for(const r of e)i.push(t.Rit(r));await rM.zo(i,()=>{this.X0t++}),this.X0t++,this.X0t===this.Z0t&&(this.X0t=0,this.Z0t=0,this.Fl.hX(rM.cY.uY.hY.r1t,null,null))}r8(){return 0===this.Z0t?1:this.X0t/this.Z0t}s1t(t,e){for(const i of e)0===i.Pq()&&t.Nit(i)}n1t(){return lM}o1t(t){const e=this.Fl.oW(),i=e.wW(),r=i.x3(),s=r.fW(),n=s._q(),o=r.rEt(),a=i.C3(s),h=e.R3(),u=h.C3();if(u.SEt(t),o)for(let i=0;i<t&&!u.H3();++i)e.j3(n),u.z3(i),s.F3(r,a),e.B3(n);else for(let e=0;e<t&&!u.H3();++e)u.z3(e),s.F3(r,a);return i.V3(),h.V3(),!1}*a1t(t){const e=this.Fl.oW(),i=e.wW(),r=i.x3(),s=r.fW(),n=s._q(),o=r.rEt(),a=i.C3(s),h=e.R3(),u=h.C3();if(u.SEt(t),o)for(let i=0;i<t&&!u.H3();++i)e.j3(n),u.z3(i),yield*s.jIt(r,a),e.B3(n);else for(let e=0;e<t&&!u.H3();++e)u.z3(e),yield*s.jIt(r,a);return i.V3(),h.V3(),!1}h1t(){const t=this.Fl.oW(),e=t.wW(),i=e.x3(),r=i.fW(),s=r._q(),n=i.rEt(),o=e.C3(r),a=t.R3(),h=a.C3();if(n)for(let e=0;!h.H3();++e)t.j3(s),h.z3(e),r.F3(i,o)||h.b1(),t.B3(s);else for(let t=0;!h.H3();++t)h.z3(t),r.F3(i,o)||h.b1();return e.V3(),a.V3(),!1}*u1t(){const t=this.Fl.oW(),e=t.wW(),i=e.x3(),r=i.fW(),s=r._q(),n=i.rEt(),o=e.C3(r),a=t.R3(),h=a.C3();if(n)for(let e=0;!h.H3();++e)t.j3(s),h.z3(e),(yield*r.jIt(i,o))||h.b1(),t.B3(s);else for(let t=0;!h.H3();++t)h.z3(t),(yield*r.jIt(i,o))||h.b1();return e.V3(),a.V3(),!1}c1t(t,e,i){const r=this.Fl.oW(),s=r.wW(),n=s.x3(),o=n.fW(),a=o._q(),h=n.rEt(),u=s.C3(o),c=r.R3(),l=c.C3();if(l.L3(t),l.SEt(i),i<e)if(h)for(let t=e;t>=i&&!l.H3();--t)r.j3(a),l.z3(t),o.F3(n,u),r.B3(a);else for(let t=e;t>=i&&!l.H3();--t)l.z3(t),o.F3(n,u);else if(h)for(let t=e;t<=i&&!l.H3();++t)r.j3(a),l.z3(t),o.F3(n,u),r.B3(a);else for(let t=e;t<=i&&!l.H3();++t)l.z3(t),o.F3(n,u);return s.V3(),c.V3(),!1}*l1t(t,e,i){const r=this.Fl.oW(),s=r.wW(),n=s.x3(),o=n.fW(),a=o._q(),h=n.rEt(),u=s.C3(o),c=r.R3(),l=c.C3();if(l.L3(t),l.SEt(i),i<e)if(h)for(let t=e;t>=i&&!l.H3();--t)r.j3(a),l.z3(t),yield*o.jIt(n,u),r.B3(a);else for(let t=e;t>=i&&!l.H3();--t)l.z3(t),yield*o.jIt(n,u);else if(h)for(let t=e;t<=i&&!l.H3();++t)r.j3(a),l.z3(t),yield*o.jIt(n,u),r.B3(a);else for(let t=e;t<=i&&!l.H3();++t)l.z3(t),yield*o.jIt(n,u);return s.V3(),c.V3(),!1}f1t(t){const e=t.lq(),i=e.cq();if(0===i.length)return!1;const r=this.Fl.oW(),s=r.wW(),n=s.x3(),o=n.fW(),a=o._q(),h=n.rEt(),u=s.C3(o),c=r.R3(),l=c.C3(),f=t.LZ(),p=lM.C3();if(rM.To(p,i),l.SEt(p.length),h)for(let e=0,i=p.length;e<i&&!l.H3();++e){r.j3(a);const i=p[e];t.lq().g_t(i),f&&i.XAt(),l.z3(e),o.F3(n,u),r.B3(a)}else{e.d_t(!1);const t=e.m_t();rM.So(t),t.push(null);for(let e=0,i=p.length;e<i&&!l.H3();++e){const i=p[e];t[0]=i,f&&i.XAt(),l.z3(e),o.F3(n,u)}}return s.V3(),c.V3(),rM.So(p),lM.V3(),!1}*p1t(t){const e=t.lq(),i=e.cq();if(0===i.length)return!1;const r=this.Fl.oW(),s=r.wW(),n=s.x3(),o=n.fW(),a=o._q(),h=n.rEt(),u=s.C3(o),c=r.R3(),l=c.C3(),f=t.LZ(),p=lM.C3();if(rM.To(p,i),l.SEt(p.length),h)for(let e=0,i=p.length;e<i&&!l.H3();++e){r.j3(a);const i=p[e];t.lq().g_t(i),f&&i.XAt(),l.z3(e),yield*o.jIt(n,u),r.B3(a)}else{e.d_t(!1);const t=e.m_t();rM.So(t),t.push(null);for(let e=0,i=p.length;e<i&&!l.H3();++e){const i=p[e];t[0]=i,f&&i.XAt(),l.z3(e),yield*o.jIt(n,u)}}return s.V3(),c.V3(),rM.So(p),lM.V3(),!1}d1t(t,e){const i=t.lq(),r=i.cq();if(0===r.length)return!1;const s=this.Fl.oW(),n=s.wW(),o=s.mTt(),a=n.x3(),h=a.fW(),u=h._q(),c=a.rEt(),l=n.C3(h),f=s.R3(),p=f.C3(),d=t.LZ(),m=lM.C3();rM.So(m),p.SEt(r.length);for(let t=0,e=r.length;t<e;++t)m.push([r[t],o.Qxt(1,t)]);if(m.sort(iM),1===e&&m.reverse(),c)for(let e=0,i=m.length;e<i&&!p.H3();++e){s.j3(u);const i=m[e][0];t.lq().g_t(i),d&&i.XAt(),p.z3(e),h.F3(a,l),s.B3(u)}else{i.d_t(!1);const t=i.m_t();rM.So(t),t.push(null);for(let e=0,i=m.length;e<i&&!p.H3();++e){const i=m[e][0];t[0]=i,d&&i.XAt(),p.z3(e),h.F3(a,l)}}return n.V3(),f.V3(),rM.So(m),lM.V3(),!1}*m1t(t,e){const i=t.lq(),r=i.cq();if(0===r.length)return!1;const s=this.Fl.oW(),n=s.wW(),o=s.mTt(),a=n.x3(),h=a.fW(),u=h._q(),c=a.rEt(),l=n.C3(h),f=s.R3(),p=f.C3(),d=t.LZ(),m=lM.C3();rM.So(m),p.SEt(r.length);for(let t=0,e=r.length;t<e;++t)m.push([r[t],o.Qxt(1,t)]);if(m.sort(iM),1===e&&m.reverse(),c)for(let e=0,i=m.length;e<i&&!p.H3();++e){s.j3(u);const i=m[e][0];t.lq().g_t(i),d&&i.XAt(),p.z3(e),yield*h.jIt(a,l),s.B3(u)}else{i.d_t(!1);const t=i.m_t();rM.So(t),t.push(null);for(let e=0,i=m.length;e<i&&!p.H3();++e){const i=m[e][0];t[0]=i,d&&i.XAt(),p.z3(e),yield*h.jIt(a,l)}}return n.V3(),f.V3(),rM.So(m),lM.V3(),!1}y1t(t,e){let i=this.K0t.get(t);return i||(e?(i={g1t:null,v1t:new Map},this.K0t.set(t,i),i):null)}w1t(t,e,i,r,s){e.cW().XIt(i,e.mW()),r&&t.B3(s)}*S1t(t,e,i,r,s){yield*e.cW().KIt(i,e.mW()),r&&t.B3(s)}}}{const fM=self.Ee;fM.cY.uY.NFt=class extends fM.Vs{constructor(t){super(),this.qbt=t,this.Fl=t.gY(),this.fGt=t.KJ()}qkt(){}Ys(){this.qbt=null,this.Fl=null,this.fGt=null}}}{const pM=self.Ee;pM.cY.uY.Instance=class extends pM.Vs{constructor(t,e){super(),this.hi=t,this.qbt=this.hi.gq(),this.vGt=this.qbt.ACt(),this.Fl=this.hi.gY()}Ys(){this.hi=null,this.qbt=null,this.vGt=null,this.Fl=null}}}{const dM=self.Ee,mM=[];dM.cY.uY.hY={b1t:()=>!0,hrt:()=>!0,yrt:()=>!0,uKt:()=>!0,cKt:()=>!0,MW(){return this.Fl.MW()},GMt(){const t=this.Fl.dTt();return!t.X_t()&&!t.Q_t()},_1t(){const t=this.Fl.mTt().Nxt();let e=t.get("TriggerOnce_lastTick");void 0===e&&(e=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Fl.GW();return t.set("TriggerOnce_lastTick",i),this.Fl.QKt()||e!==i-1},E1t(t){const e=this.Fl.mTt().Nxt(),i=e.get("Every_lastTime")||0,r=this.Fl.LW();e.has("Every_seconds")||e.set("Every_seconds",t);const s=e.get("Every_seconds");return r>=i+s?(e.set("Every_lastTime",i+s),r>=e.get("Every_lastTime")+.04&&e.set("Every_lastTime",r),e.set("Every_seconds",t),!0):(r<i-.1&&e.set("Every_lastTime",r),!1)},XPt(t){const e=this.Fl.oW().LTt(t);return e&&e.XPt()},Lqt(){return this.Fl.Lqt()},ri:()=>dM.Je.ri,HXt:()=>!0,aY:()=>!0,T1t:()=>!0,h0t:()=>!0,p0t:()=>!0,c0t:()=>!0,l0t:()=>!0,P1t(t){return!!this.Fl.C$(t)},A1t(t){switch(t){case 0:return"browser"===dM.Je.ei;case 1:return"iOS"===dM.Je.qe;case 2:return"Android"===dM.Je.qe;case 8:return"cordova"===dM.Je.ei;case 9:return"scirra-arcade"===this.Fl.eJ();case 13:return"windows-uwp"===this.Fl.eJ();default:return!1}},M1t(t,e,i){return this.t1t(e,i).test(t)},I1t:(t,e,i)=>dM.compare(t,e,i),O1t:(t,e,i)=>t>=e&&t<=i,D1t:(t,e,i)=>dM.compare(t.$lt(),e,i),x1t:t=>!!t.$lt(),C1t(t,e){const i=this.Fl.LW();if(0===t){const t=this.Fl.mTt().Nxt();return!t.get("CompareTime_executed")&&i>=e&&(t.set("CompareTime_executed",!0),!0)}return dM.compare(i,t,e)},R1t:t=>isNaN(t),$Lt:(t,e,i)=>dM.un(dM.tn(t),dM.tn(i))<=dM.tn(e),YLt:(t,e)=>dM.ln(dM.tn(t),dM.tn(e)),rRt(t,e,i){let r=dM.tn(t),s=dM.tn(e),n=dM.tn(i);return dM.ln(n,s)?dM.ln(r,s)&&!dM.ln(r,n):!(!dM.ln(r,s)&&dM.ln(r,n))},L1t:(t,e)=>"number"==typeof t?0===e:1===e,k1t:t=>!!t,DPt(t){return t.toLowerCase()===this.Fl.oW().LPt()},G1t(t,e,i,r){if(!t)return!1;const s=this.n1t(),n=s.C3(),o=t.lq();dM.To(n,o.cq()),o.a_t()&&dM.So(o.y_t());const a=this.Fl.mTt();let h=0;for(let t=0,s=n.length;t<s;++t){const s=n[t];n[h]=s,e=a.Qxt(1,t),r=a.Qxt(3,t),dM.compare(e,i,r)?++h:o.p_t(s)}dM.wo(n,h),o.v_t(n);const u=!!n.length;return dM.So(n),s.V3(),t.$It(),u},N1t(t,e){if(!t)return!1;const i=this.n1t(),r=i.C3(),s=t.lq();dM.To(r,s.cq()),s.a_t()&&dM.So(s.y_t());const n=this.Fl.mTt();let o=0;for(let t=0,e=r.length;t<e;++t){const e=r[t];r[o]=e,n.Qxt(1,t)?++o:s.p_t(e)}dM.wo(r,o),s.v_t(r);const a=!!r.length;return dM.So(r),i.V3(),t.$It(),a},j1t(t,e,i){if(!t)return!1;const r=t.lq(),s=r.cq();if(0===s.length)return!1;const n=this.Fl.mTt();let o=null,a=0;for(let t=0,r=s.length;t<r;++t){const r=s[t];i=n.Qxt(2,t),(null===o||0===e&&i<a||1===e&&i>a)&&(a=i,o=r)}return r.E_t(o),t.$It(),!0},F1t(t,e){if(!t)return!1;const i=t.lq(),r=i.cq();if((e=Math.floor(e))>=r.length)return!1;const s=r[e];return i.E_t(s),t.$It(),!0},B1t(t){if(!t)return!1;const e=t.lq(),i=e.cq(),r=Math.floor(this.Fl.f$()*i.length);if(r>=i.length)return!1;const s=i[r];return e.E_t(s),t.$It(),!0},z1t:t=>!!t&&(!!t.Pq()&&(t.lq().d_t(!0),t.$It(),!0)),U1t(t,e,i){if(!t)return!1;const r=t.lq(),s=r.cq(),n=this.Fl.fW().T_t(),o=this.Fl.mTt().Cxt();r.a_t()?(dM.To(mM,s),r.o_t(),r.d_t(!1)):n?(dM.To(mM,r.y_t()),dM.So(r.y_t())):(dM.To(mM,r.m_t()),dM.So(r.m_t()));for(let t=0,s=mM.length;t<s;++t){const s=mM[t];dM.xor(s.N$().vK(e,i),o)?r.f_t(s):r.p_t(s)}return t.$It(),dM.xor(!!r.m_t().length,o)},H1t(t){if(!t)return!1;const e=t.mq();let i=null;const r=this.Fl.ABt();for(let s=r.length-1;s>=0;--s){const n=r[s];if(e){if(n.gq().CCt(t)){i=n;break}}else if(n.gq()===t){i=n;break}}if(!i){const e=t.cq();e.length&&(i=e.at(-1))}return!!i&&(t.lq().E_t(i),t.$It(),!0)},V1t(t){return this.Fl.xRt()?this.a1t(t):this.o1t(t)},W1t(){return this.Fl.xRt()?this.u1t():this.h1t()},$1t(t,e,i){return this.Fl.xRt()?this.l1t(t,e,i):this.c1t(t,e,i)},Hp(t){return this.Fl.xRt()?this.p1t(t):this.f1t(t)},Y1t(t,e,i){return this.Fl.xRt()?this.m1t(t,i):this.d1t(t,i)},J1t:t=>!!t&&t.kQ(),q1t:t=>!!t&&t.HQ(),Q1t:t=>!!t&&t.BQ(),Z1t:t=>!!t&&!t.Pq(),X1t:(t,e,i)=>!!t&&dM.compare(100*t.RR(),e,i),K1t(t){const e=this.Fl.p$();return!!e&&e.vit(t)},r1t:()=>!0,t2t(){return this.Z0t>0},e2t(t,e){const i=this.Fl.jzt();return!!i&&!!e&&!!i.Xvt(t,e)}}}{let yM=function(t,e){const i=t[0]-e[0];return 0!==i?i:t[1]-e[1]},gM=function(t,e){return t[1]-e[1]};SortZOrderList=yM,SortInstancesByValue=gM;const vM=self.Ee,wM=[],SM=[],bM=vM.$s(vM.Rect),_M=vM.$s(vM.ba),EM=[];vM.cY.uY.Ypt={i2t(t,e){t.Oft(e)},r2t(t,e){t.Ji()&&"number"!=typeof e&&(e=parseFloat(e)),t.Oft(t.$lt()+e)},s2t(t,e){t.Ji()&&t.Oft(t.$lt()-e)},n2t(t,e){t.Oft(!!e)},o2t(t){t.Oft(!t.$lt())},a2t(t){t.Oft(t.pTt())},h2t(t){this.Fl.oW().CTt(t)},u2t(t,e,i,r,s,n){if(!t||!e)return;const o=this.Fl.Mq(t,e,i,r,s,n);if(!o)return;s&&e.Iq(o);const a=this.Fl.oW();a.Oq(!0),o.Dq(),a.Oq(!1);const h=new Map;o.Ozt(h,t,s);for(const[t,e]of h)t.lq().w_t(e)},c2t(t,e,i,r,s,n){if(!t||!e)return;const o=this.Fl.JXt(t);o&&vM.cY.uY.Ypt.u2t.call(this,o,e,i,r,s,n)},Y7(t,e,i,r,s,n,o,a,h,u,c){if(!t)return;const l=this.Fl.k$();let f=l;if(n){const t=this.Fl.y$().Vrt(n);if(!t)return;f=t}let p=null;if(("number"!=typeof o||o>=0)&&(p=f.F$(o),!p))return;let d=null;if(("number"!=typeof a||a>=0)&&(d=l.F$(a),!d))return;bM.set(e,i,r,s);const m=f.Y7(t,bM,p,d,h,u,c);t.lq().v_t(m),t.$It()},l2t(){const t=this.gEt;t.pEt()&&t.lEt().b1()},KPt(t,e){const i=this.Fl.oW().LTt(t);i&&(0===e?i.KPt(!1):1===e?i.KPt(!0):i.KPt(!i.XPt()))},f2t(t){this.Fl.zW(t)},p2t(t,e){if(e<0&&(e=0),!t)return;const i=t.lq().cq();for(const t of i)t.zW(e)},d2t(t){if(!t)return;const e=t.lq().cq();for(const t of e)t.HZ()},po(t,e){if(t<0)return;const i=this.Fl.oW().dPt();return e?i.mkt(t):i.ykt(t),!0},TW(t){return this.Fl.oW().dPt().gkt(t),!0},m2t(){const t=this.Fl.oW();return t.dPt().vkt(t.OPt()),!0},_W(t){this.Fl.oW()._W(t)},async nY(t,e,i,r,s,n){const o=this.Fl.I$();o&&(this.W$(),await o.nY(0===t?"image/png":"image/jpeg",e/100,i,r,s,n),await this.Fl.oY(vM.cY.uY.hY.aY,null))},y2t(t,e){if(t<=0||e<=0)return;this.Fl.NJt(t,e),this.Fl.k$().let();const i=this.Fl.I$();i&&("off"===i.DJt()||this.Fl.QXt(t,e),i.$D(i.O2(),i.D2(),!0),this.Fl.W$())},g2t(t){const e=this.Fl.I$();e&&"off"!==e.DJt()&&(e.VJt(0!==t?"high":"low"),e.$D(e.O2(),e.D2(),!0))},clt(t){this.Fl.KKt(t)},v2t(){this.Fl.t0t()},w2t(t){this.Fl.e0t(t)},S2t(t){this.Fl.TLt(t)},b2t(t){},_2t(){for(const t of this.Fl.y$().w$())t.Prt()},E2t(t){this.Fl.o$(0!==t)},T2t(t,e){this.Fl.s$(1/t),this.Fl.e$(1/e)},P2t(t,e){this.Fl.e$(t),this.Fl.s$(e)},A2t(t){this.Fl.XW(["vsync","unlimited-tick","unlimited-frame"][t])},M2t(t,e){if(!t)return;const i=t.lq().cq(),r=wM,s=SM,n=this.Fl.k$(),o=t.mq(),a=t.fDt();for(let t=0,n=i.length;t<n;++t){const n=i[t],h=n.N$();if(!h||h.j$())continue;let u;u=o?n.Bdt(e+n.gq().lDt(a)):n.Bdt(e),r.push([h.F$().PV(),h.B$()]),s.push([n,u])}if(!r.length)return;r.sort(yM),s.sort(gM);let h=!1;for(let t=0,e=r.length;t<e;++t){const e=s[t][0],i=n.z$(r[t][0]),o=r[t][1],a=i.U$();a[o]!==e&&(a[o]=e,e.N$().H$(i,!0),i.V$(e),h=!0)}h&&this.Fl.W$(),vM.So(wM),vM.So(SM)},VY(t,e){t=Math.floor(t),e=Math.floor(e),t<=0||e<=0||!Number.isFinite(t)||!Number.isFinite(e)||this.Fl.CV().VY(t,e)},I2t(t){if(this.Fl.Gv())return;const e=this.Fl.y$();e.b$()||e._$(t)},O2t(t){if(this.Fl.Gv())return;const e=this.Fl.y$();if(e.b$())return;const i=e.Vrt(t);i&&e._$(i)},D2t(t){if(this.Fl.Gv())return;const e=this.Fl.y$();if(e.b$())return;const i=e.w$(),r=i.indexOf(e.p$());if(t&&0===r)return;if(!t&&r===i.length-1)return;const s=i[r+(t?-1:1)];e._$(s)},x2t(){if(this.Fl.Gv())return;const t=this.Fl.y$();t.b$()||(t._$(t.p$()),this.Fl.oW().jTt())},C2t(t,e){t&&t.RQ(e)},R2t(t,e){t&&t.jQ(e)},L2t(t,e){t&&t.zQ(e)},k2t(t,e){t&&t.kR(e/100)},G2t(t,e){t&&t.VQ(e)},N2t(t,e){t&&t.YQ(e)},j2t(t,e){t&&t.Jq(vM.tn(+e))},F2t(t,e,i){t&&(t.fZ(!0),t.Qq(e),t.Xq(i))},B2t(t){t&&t.fZ(!1)},z2t(t,e,i){t&&t.P9(e/100,i/100)},U2t(t,e){t&&t.uE(+e)},H2t(t,e){t&&t.iZ(1===e)},V2t(t,e){if(!t)return;_M.Za(e),_M.Xs();const i=t.lZ();i.Ha(_M)||(i.La(_M),this.W$())},W2t(t,e){t&&t.nZ(e)},$2t(t,e){t&&t.W_(e)},Y2t(t,e,i){if(!t)return;const r=t.Uq().ept(i);if(!r)return;const s=1===e;r.HAt()!==s&&(r.dWt(s),t.L0(),this.Fl.W$())},J2t(t,e,i,r){if(!t)return;const s=t.Uq(),n=s.ept(e);if(!n)return;i=Math.floor(i);const o=n.$A().JA(i);o&&("color"===o?(_M.Za(r),r=_M):"percent"===o&&(r/=100),s.G0(n.PV(),i,r)&&n.HAt()&&this.Fl.W$())},q2t(t,e){t&&t.hZ(e)},Q2t(t){this.Fl.k$().$q(+t)},Z2t(t){this.Fl.k$().Jq(vM.tn(+t))},X2t(t,e){const i=this.Fl.k$(),r=i.Uq().ept(e);if(!r)return;const s=1===t;r.HAt()!==s&&(r.dWt(s),i.L0(),this.Fl.W$())},K2t(t,e,i){const r=this.Fl.k$().Uq(),s=r.ept(t);if(!s)return;e=Math.floor(e);const n=s.$A().JA(e);n&&("color"===n?(_M.Za(i),i=_M):"percent"===n&&(i/=100),r.G0(s.PV(),e,i)&&s.HAt()&&this.Fl.W$())},t3t(t,e){this.Fl.k$().wQ(t/100,e/100)},e3t(t){const e=this.Fl.k$();0===t?e._Q():e.EQ()},i3t(t){this.Fl.k$().Qq(t)},r3t(t){this.Fl.k$().Xq(t)},s3t(t,e){const i=this.Fl.k$();i.Qq(t),i.Xq(e)},n3t(t){if(!t)return;const e=t.wRt();if(!e)return;const i=e.N$();if(!i)return;const r=this.Fl.k$();r.Qq(i.rE()),r.Xq(i.oE())},lQ(t,e,i){const r=this.Fl.k$();try{r.lQ(t,e,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},pQ(t,e,i){if(!t)return;const r=this.Fl.k$();try{r.pQ(t,e,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},mQ(t){t&&this.Fl.k$().mQ(t)},gQ(){this.Fl.k$().gQ()},async o3t(t){const e=this.Fl.p$();if(!e||!t||this.Fl.Gv())return;const i=t.mq()?t.jq():[t];await this.i1t(e,i)},async a3t(t){await vM.cY.uY.Ypt.o3t.call(this,this.Fl.JXt(t))},h3t(t){const e=this.Fl.p$();if(!e||!t)return;const i=t.mq()?t.jq():[t];this.s1t(e,i)},u3t(t){vM.cY.uY.Ypt.h3t.call(this,this.Fl.JXt(t))},c3t(){const t=this.Fl.p$();if(!t)return;const e=t.Dit();this.s1t(t,e)},async l3t(t){const e=this.Fl.p$();t&&e&&!this.Fl.Gv()&&await this.i1t(e,t.Mit())},async f3t(t){const e=this.Fl.p$(),i=this.Fl.y$().Vrt(t);i&&e&&!this.Fl.Gv()&&await this.i1t(e,i.Mit())},bW(t){const e=this.r_t.vW();if(e)switch(e.SW()){case 1:"number"==typeof t&&e.bW(t);break;case 2:"string"==typeof t&&e.bW(t);break;case 3:e.bW(t)}},p3t(t,e,i){const r=this.y1t(t.toLowerCase(),!0),s=r.v1t,n=e.toLowerCase();s.has(n)&&console.warn(`[Construct] Function map '${t}' string '${e}' already in map; overwriting entry`);const o=vM.Fo(s.values())||r.g1t;o&&0!==o.yW()!=(0!==i.yW())?console.error(`[Construct] Function map '${t}' string '${e}' function return type not compatible with other functions in the map; entry ignored`):s.set(n,i)},d3t(t,e){const i=this.y1t(t.toLowerCase(),!0);i.g1t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const r=vM.Fo(i.v1t.values())||i.g1t;r&&0!==r.yW()!=(0!==e.yW())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.g1t=e},m3t(t,e,i){const r=this.Fl,s=r.xRt()?EM:null;i=Math.floor(i);const n=this.y1t(t.toLowerCase(),!1);if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),s;let o=n.v1t.get(e.toLowerCase());if(!o){if(!n.g1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; call ignored (consider setting a default)`),s;o=n.g1t,i=0}if(!o.Dc())return s;if(0!==o.yW())return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has a return type so cannot be called`),s;const a=r.oW(),h=a.fW(),u=h.lW(),c=u.length>0;c&&(o.mW()?a.j3(u):a.fPt(u));const l=[],f=a.nAt(h);if(f){const t=f.aAt();for(let e=i,r=t.length;e<r;++e)l.push(t[e].$lt())}const p=o.aAt();for(let t=l.length,e=p.length;t<e;++t)l.push(p[t].pTt());return r.xRt()?this.S1t(a,o,l,c,u):this.w1t(a,o,l,c,u)}}}{const TM=self.Ee,PM=TM.$s(TM.ba);TM.cY.uY.Jpt={y3t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},O:t=>t.toString(),Nt:t=>"string"==typeof t?t.length:0,random(t,e){return void 0===e?this.Fl.f$()*t:this.Fl.f$()*(e-t)+t},QOt(...t){return t[Math.floor(this.Fl.f$()*t.length)]},g3t:(t,...e)=>("number"!=typeof t&&(t=0),e[t=TM.Xs(Math.floor(t),0,e.length-1)]),v3t:()=>Math.PI,w3t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),S3t(t,e){e=Math.max(Math.floor(e),0);const i=Math.pow(10,e);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(TM.tn(t)),cos:t=>Math.cos(TM.tn(t)),tan:t=>Math.tan(TM.tn(t)),asin:t=>TM.en(Math.asin(t)),acos:t=>TM.en(Math.acos(t)),atan:t=>TM.en(Math.atan(t)),exp:t=>Math.exp(t),Ht:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let e=t[0];"number"!=typeof e&&(e=0);for(let i=1,r=t.length;i<r;++i){let r=t[i];"number"==typeof r&&e<r&&(e=r)}return e},min(...t){let e=t[0];"number"!=typeof e&&(e=0);for(let i=1,r=t.length;i<r;++i){let r=t[i];"number"==typeof r&&e>r&&(e=r)}return e},Xs:(t,e,i)=>TM.Xs(t,e,i),bt:(t,e,i,r)=>TM.nn(t,e,i,r),angle:(t,e,i,r)=>TM.en(TM.hn(t,e,i,r)),Mt:(t,e,i)=>TM.Mt(t,e,i),yn:(t,e,i)=>TM.yn(t,e,i),vn:(t,e,i,r)=>TM.vn(t,e,i,r),wn:(t,e,i,r,s)=>TM.wn(t,e,i,r,s),Sn:(t,e,i)=>TM.Sn(t,e,i),b3t:(t,e)=>TM.en(TM.un(TM.tn(t),TM.tn(e))),_3t:(t,e,i)=>TM.en(TM.fn(TM.tn(t),TM.tn(e),i)),E3t:(t,e,i)=>TM.en(TM.cn(TM.tn(t),TM.tn(e),TM.tn(i))),T3t:(t,e,i)=>(t|=0)&~(1<<(e|=0))|(i=0!==i?1:0)<<e,P3t:(t,e)=>(t|=0)^1<<e,A3t:(t,e)=>(t|=0)&1<<(e|=0)?1:0,M3t:()=>"\n",I3t:t=>"string"==typeof t?t.toUpperCase():"",O3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,e)=>"string"==typeof t?t.substr(0,e):"",mid:(t,e,i)=>"string"!=typeof t?"":i<0?t.substr(e):t.substr(e,i),right:(t,e)=>"string"==typeof t?t.substr(Math.max(t.length-e,0)):"",trim:t=>"string"==typeof t?t.trim():"",D3t(t,e,i){if("string"!=typeof t||"string"!=typeof i)return"";let r=t.split(i);return(e=Math.floor(e))<0||e>=r.length?"":r[e]},x3t:(t,e)=>"string"==typeof t&&"string"==typeof e&&t.length?t.split(e).length:0,find:(t,e)=>"string"==typeof t&&"string"==typeof e?t.search(new RegExp(TM.$i(e),"i")):-1,C3t:(t,e)=>"string"==typeof t&&"string"==typeof e?t.search(new RegExp(TM.$i(e),"")):-1,replace:(t,e,i)=>"string"==typeof t&&"string"==typeof e&&"string"==typeof i?t.replace(new RegExp(TM.$i(e),"gi"),i):"string"==typeof t?t:"",R3t(t,...e){let i=t;for(let t=0,r=e.length;t<r;++t)i=i.replaceAll(`{${t}}`,e[t].toString());return i},L3t(t,e,i){const r=this.t1t(e,i);return t?t.search(r):-1},k3t(t,e,i,r){const s=this.t1t(e,i);return t?t.replace(s,r):""},G3t(t,e,i){const r=this.e1t(t.toString(),e,i);return r?r.length:0},N3t(t,e,i,r){r=Math.floor(r);const s=this.e1t(t.toString(),e,i);return!s||r<0||r>=s.length?"":s[r]},j3t(t,e){let i=t<0?"-":"";t<0&&(t=-t);const r=e-t.toString().length;return i+="0".repeat(Math.max(r,0)),i+t.toString()},F3t:t=>encodeURIComponent(t),B3t:t=>decodeURIComponent(t),IW(){return this.Fl.Tnt()},z3t(){return this.Fl.Pnt()},U3t(){return this.Fl.BW()},H3t(){return(Date.now()-this.Fl.zKt())/1e3},V3t:()=>Date.now(),time(){return this.Fl.LW()},W3t(){return this.Fl.GW()},$3t(){return this.Fl.VKt()},UW(){return this.Fl.HW()},Y3t(){return this.Fl.YW()},J3t(){return this.Fl.qW()},q3t(){return this.Fl.I$().mJ()},Q3t(){return this.Fl.I$().gJ()},Z3t(){return this.Fl.qV()},X3t(){return this.Fl.ZV()},K3t(){return this.Fl.qV()},t4t(){return this.Fl.ZV()},e4t(){return this.Fl.k$().Zq()},i4t(){return this.Fl.k$().Kq()},r4t(){return this.Fl.k$().Dl()},s4t(){return this.Fl.k$().Yq()},n4t(){return TM.en(this.Fl.k$().qq())},o4t(){return this.Fl.k$().Eg()},a4t(){return this.Fl.k$().Pg()},h4t(){return 100*this.Fl.k$().fit()},u4t(){return 100*this.Fl.k$().pit()},c4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().Kh():0},l4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().tu():0},f4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().eu():0},p4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().iu():0},d4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().width():0},m4t(t){const e=this.Fl.k$().F$(t);return e?e.v9().height():0},y4t(t){const e=this.Fl.k$().F$(t);if(e){const t=e.v9();return(t.Kh()+t.eu())/2}return 0},g4t(t){const e=this.Fl.k$().F$(t);if(e){const t=e.v9();return(t.tu()+t.iu())/2}return 0},v4t(t,e,i){const r=this.Fl.k$().F$(t);return r?r.yZ(e,i)[0]:0},w4t(t,e,i){const r=this.Fl.k$().F$(t);return r?r.yZ(e,i)[1]:0},S4t(t,e,i){const r=this.Fl.k$().F$(t);return r?r.vZ(e,i)[0]:0},b4t(t,e,i){const r=this.Fl.k$().F$(t);return r?r.vZ(e,i)[1]:0},_4t(t,e,i,r){const s=this.Fl.k$(),n=s.F$(t),o=s.F$(e);if(!n||!o||n===o)return i;const[a,h]=n.vZ(i,r);return o.yZ(a,h)[0]},E4t(t,e,i,r){const s=this.Fl.k$(),n=s.F$(t),o=s.F$(e);if(!n||!o||n===o)return r;const[a,h]=n.vZ(i,r);return o.yZ(a,h)[1]},T4t(t){const e=this.Fl.k$().F$(t);return e?e.WQ():0},P4t(t){const e=this.Fl.k$().F$(t);return e?TM.en(e.qQ()):0},A4t(t){const e=this.Fl.k$().F$(t);return e?100*e.RR():0},M4t(t){const e=this.Fl.k$().F$(t);return e?e.JQ():0},I4t(t){const e=this.Fl.k$().F$(t);return e?e.Zq():0},O4t(t){const e=this.Fl.k$().F$(t);return e?e.Kq():0},D4t(t){const e=this.Fl.k$().F$(t);return e?100*e.XQ():0},x4t(t){const e=this.Fl.k$().F$(t);return e?100*e.eZ():0},C4t(t){const e=this.Fl.k$().F$(t);return e?e.hE():0},R4t(t){const e=this.Fl.k$().F$(t);return e?e.PV():-1},L4t(){const t=this.Fl.I$();return t?t.mqt():""},k4t(t){const e=this.gEt;if(!e.pEt())return 0;if(t){const i=e.mEt(t);return i?i.PV():0}return e.lEt().PV()},G4t(){return this.Fl.i0t()},N4t(t,e,...i){const r=this.y1t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let s=r.v1t.get(e.toLowerCase());if(!s){if(!r.g1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; returning 0 (consider setting a default)`),0;s=r.g1t}const n=s.yW(),o=s.hW();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has no return type so cannot be called from an expression; returning 0`),0;if(!s.Dc())return o;const a=this.Fl.oW(),h=a.fW().lW(),u=h.length>0;u&&(s.mW()?a.j3(h):a.fPt(h));const c=s.aAt();for(let t=i.length,e=c.length;t<e;++t)i.push(c[t].pTt());const l=s.cW(),f=l.dW(l.lW(),s.mW(),n,o,null,...i);return u&&a.B3(h),f},j4t(){return this.Fl.OV().u$()},F4t(){return this.r8()},$M(){return this.Fl.XJt()?"webgpu":"webgl"},B4t(){return this.Fl.XJt()?this.Fl.XJt().UF():this.Fl.ZJt().UL()},z4t(){let t=this.Fl.E_().Xb();return Math.round(100*t/1048576)/100},U4t:(t,e,i)=>TM.Mn(t,e,i),H4t:(t,e,i)=>TM.On(t/100,e/100,i/100),V4t:(t,e,i,r)=>TM.In(t/100,e/100,i/100,r/100),W4t:(t,e,i)=>TM.On(t/255,e/255,i/255),$4t:(t,e,i,r)=>TM.In(t/255,e/255,i/255,r/255),Y4t:t=>(PM.Aa(0,0,0,1),PM.eh(t),TM.In(PM.ka(),PM.Ga(),PM.Na(),PM.ja())),J4t:t=>(PM.Za(t),PM.th(1!==PM.ja())),q4t(){return this.Fl.GV()},Q4t(){return this.Fl.jV()},Z4t(){return this.Fl.BV()},X4t(){return this.Fl.UV()},K4t(){return this.Fl.fW().yit().Dl()},t5t(){return this.Fl.fW().rIt()},e5t(){return this.Fl.OV().GY().length},i5t(t){t=Math.floor(t);const e=this.Fl.OV().GY();return t<0||t>=e.length?"":e[t].name}}}{const AM=self.Ee;AM.cY.hpt=class extends AM.Tkt{constructor(t){super(t)}Ys(){super.Ys()}}}{const MM=self.Ee,IM=self.Le,OM=[];MM.cY.hpt.NFt=class extends MM.lGt{constructor(t){super(t),this.DFt=t.dBt()}Ys(){MM.So(this.DFt),super.Ys()}qkt(){for(const t of this.DFt)t.xjt(this.Fl)}Cit(t){const e={lT:this.Fl.Oz()};return Promise.all(this.DFt.map(i=>i.Cjt(t,e)))}jit(){for(const t of this.DFt)t.Rjt()}kit(){this.r5t()}r5t(){for(const t of this.qbt.uq())t.y0().s5t()}Hxt(t){MM.cY.hpt.ikt(this,t)}MCt(t){OM.push({mGt:null,n5t:!1,eq:[]})}o5t(t,e,i){const r=OM.at(-1);r.mGt=t,r.n5t=i,r.eq.push(e)}ICt(t){const e=OM.pop(),i=e.mGt,r=e.n5t;if(!i)return;const s=new Map;for(const t of e.eq)t.Ozt(s,i,r);for(const[t,e]of s)t.lq().w_t(e)}a5t(t){const e=this.gq().wBt(t),i=this.gY();return e.Ljt(0).e1().D4(i.E_(),{lT:i.Oz()}).then(()=>this.r5t()),e}h5t(t){for(const e of this.qbt.uq())e.y0().u5t(t);this.gq().SBt(t)}c5t(t,e){const i=this.qbt.gBt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let r=i.jjt(e);r<0&&(r+=i.Y0()+1);const s=MM.Ijt.Djt(this.gY());i.kjt(s,r);const n=this.gY();s.e1().D4(n.E_(),{lT:n.Oz()}).then(()=>this.r5t());for(const t of this.qbt.uq())t.y0().l5t();return s}f5t(t,e){const i=this.qbt.gBt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Y0())throw new Error(`cannot remove last frame from animation '${t}'`);let r=i.jjt(e);r<0&&(r+=i.Y0()),i.Gjt(r);for(const t of this.qbt.uq())t.y0().l5t()}Qkt(){return self.p5t}};const DM=new WeakMap;self.p5t=class extends self.Eq{constructor(t){super(t),DM.set(this,t.ACt())}d5t(t){IM.ar(t);const e=DM.get(this).gq().gBt(t);return e?e.Fjt():null}m5t(){return DM.get(this).gq().yBt().map(t=>t.Fjt())}y5t(t){return IM.ar(t),DM.get(this).a5t(t).Fjt()}g5t(t){IM.ar(t),DM.get(this).h5t(t)}v5t(t,e){if(IM.ar(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");return DM.get(this).c5t(t,e).Q0()}w5t(t,e){if(IM.ar(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");DM.get(this).f5t(t,e)}}}{const xM=self.Ee,CM=self.Le,RM=0,LM=1,kM=2,GM=3,NM=xM.$s(xM.Rect),jM=xM.$s(xM.Ou),FM=xM.$s(xM.Oh),BM=1,zM=2,UM=4;xM.cY.hpt.Instance=class extends xM.VGt{constructor(t,e){super(t);let i=!0,r="",s=0,n=!0;e&&(i=!!e[RM],r=e[LM],s=e[kM],n=e[GM]),this.S5t=this.qbt.gBt(r)||this.qbt.dBt()[0],this.b5t=xM.Xs(s,0,this.S5t.Y0()-1),this._5t=this.S5t.Ljt(this.b5t);const o=this._5t.e1();this.dG=o.PP(),this.E5t=o.xx(),this.T5t=o.iNt(),this.JGt(),t.Mzt(zM,!0),t.Mzt(BM,this.S5t.j0()>=0),this.P5t=Math.abs(this.S5t.j0()),this.A5t=this.S5t.V0(),this.M5t=xM.$s(xM.tp),this.I5t=0,this.O5t=0,this.D5t="",this.x5t=-1,this.C5t="",this.R5t=0;const a=this.N$();this.L5t=a.eK(),a.RQ(i),a.gK(n),a.HX(this._5t.UX()),a.$X(this._5t.WX()),a.xVt(this._5t.f1()),a.NX(),1===this.qbt.mBt()&&1===this.qbt.dBt()[0].Y0()||0===this.P5t||this.kGt()}Ys(){this.S5t=null,this._5t=null,this.dG=null,this.M5t=null,super.Ys()}XGt(){return this._5t.e1()}xct(){return!0}x8(){this.dG=null}ZGt(){this.s5t()}KE(t){const e=this.dG;if(null===e)return;t.jR(e);const i=this.N$();i.o0()?this.k5t(i,t):this.G5t(i,t)}G5t(t,e){let i=this.L5t;this.Fl.a$()&&(i=t.EVt(i)),e.qR(i,this.T5t)}k5t(t,e){const i=t.UVt();if(t.VVt()){t.XX(NM,jM,!1);let e=jM;this.Fl.a$()&&(e=t.EVt(e)),i.YE(t.a0(),e,this.T5t),t.HVt(!1)}i.KE(e,t.QX())}N5t(){return this.M5t.Ue()}j5t(){return this.hi.Izt(zM)}F5t(t){this.hi.Mzt(zM,t)}B5t(){return this.hi.Izt(BM)}z5t(t){this.hi.Mzt(BM,t)}U5t(){return this.hi.Izt(UM)}H5t(t){this.hi.Mzt(UM,t)}Ant(){this.C5t&&this.V5t(),this.x5t>=0&&this.W5t();const t=this.P5t;if(!this.j5t()||0===t)return void this.wGt();const e=this.Fl.OW(this.hi);this.M5t.Hc(e);const i=this.N5t(),r=this._5t,s=r.i1()/t;if(i<this.I5t+s)return;const n=this.S5t,o=this.A5t,a=n.Y0(),h=n.U0(),u=n.B0(),c=n.$0();this.B5t()?this.b5t++:this.b5t--,this.I5t+=s,this.b5t>=a&&(c?(this.z5t(!1),this.b5t=a-2):u?this.b5t=o:(this.O5t++,this.O5t>=h?this.$5t(!1):this.b5t=o)),this.b5t<0&&(c?(this.b5t=1,this.z5t(!0),u||(this.O5t++,this.O5t>=h&&this.$5t(!0))):u?this.b5t=o:(this.O5t++,this.O5t>=h?this.$5t(!0):this.b5t=o)),this.b5t=xM.Xs(this.b5t,0,a-1);const l=n.Ljt(this.b5t);i>this.I5t+l.i1()/t&&(this.I5t=i),this.Y5t(r,l)}$5t(t){this.b5t=t?0:this.S5t.Y0()-1,this.F5t(!1),this.D5t=this.S5t.Dl(),this.H5t(!0),this.dGt("animationend",!1,{animationName:this.D5t}),this.hX(xM.cY.hpt.hY.J5t),this.hX(xM.cY.hpt.hY.q5t),this.H5t(!1),this.O5t=0}Y5t(t,e,i){if(t===e)return;const r=this.N$(),s=t.e1(),n=e.e1(),o=s.Eg(),a=s.Pg(),h=n.Eg(),u=n.Pg();i&&i.mpt?i.mpt(r,o,a,h,u):(o!==h&&r.cg(r.Eg()*(h/o)),a!==u&&r.lg(r.Pg()*(u/a))),r.HX(e.UX()),r.$X(e.WX()),r.xVt(e.f1()),r.NX(),this._5t=e,this.dG=n.PP(),this.E5t=n.xx(),this.T5t=n.iNt();const c=this.J1().Xft();for(let i=0,r=c.length;i<r;++i)c[i].zNt(t,e);this.dGt("framechange",!1,{animationName:this.S5t.Dl(),Q5t:this.b5t}),this.hX(xM.cY.hpt.hY.Z5t),this.Fl.W$()}X5t(t){this.F5t(!0),this.I5t=this.N5t(),1===t&&0!==this.b5t&&(this.x5t=0,this.U5t()||this.W5t()),this.kGt()}K5t(t,e,i){this.C5t=t,this.R5t=e,this.kGt(),!i&&this.U5t()||this.V5t()}t8t(){return this.S5t}e8t(){return this.C5t?this.C5t:this.S5t.Dl()}u5t(t){xM.Zr(t,this.e8t())&&this.K5t(this.qbt.bBt().Dl(),1,!0)}i8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const e=this.qbt.gBt(this.e8t());if(!e)return;if(-1===(t=e.Njt(t)))return}isFinite(t)&&(this.x5t=t,this.U5t()||this.W5t())}l5t(){if(this.C5t||-1!==this.x5t)return;const t=this._5t,e=this.S5t.Ljt(xM.Xs(this.b5t,0,this.S5t.Y0()-1));t!==e&&this.Y5t(t,e),this.S5t.Y0()>1&&this.P5t>0&&this.kGt()}r8t(){return this.b5t}s8t(){return this._5t.v1()}n8t(t){this.P5t=Math.abs(t),this.z5t(t>=0),this.P5t>0&&this.kGt()}o8t(){return this.B5t()?this.P5t:-this.P5t}a8t(t){"string"==typeof t&&-1===(t=this.S5t.Njt(t))||(t=xM.Xs(Math.floor(t),0,this.S5t.Y0()-1),this.A5t=t)}h8t(){return this.A5t}V5t(t){const e=this._5t,i=this.qbt.gBt(this.C5t);if(this.C5t="",!i)return;if(i===this.S5t&&this.j5t())return;this.S5t=i,this.z5t(i.j0()>=0),this.P5t=Math.abs(i.j0()),this.A5t=i.V0(),this.b5t=xM.Xs(this.b5t,0,this.S5t.Y0()-1),1===this.R5t&&(this.b5t=0),this.F5t(!0),this.I5t=this.N5t();const r=this.S5t.Ljt(this.b5t);this.Y5t(e,r,t)}W5t(t){const e=this._5t,i=this.b5t;if(this.b5t=xM.Xs(Math.floor(this.x5t),0,this.S5t.Y0()-1),this.x5t=-1,!t&&i===this.b5t)return;const r=this.S5t.Ljt(this.b5t);this.Y5t(e,r),this.I5t=this.N5t()}s5t(){const t=this._5t.e1();this.dG=t.PP(),this.E5t=t.xx(),this.T5t=t.iNt(),this.N$().HVt(!0)}PP(){return this.dG}xx(){return this.E5t}iNt(){return this.T5t}n1(){return this._5t.n1()}UCt(t){const e=this._5t,i=this.N$();let r=null;if("string"==typeof t)r=e.c1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");r=e.u1(t-1)}let s=i.QX();if(!r)return[i.rE(),i.oE(),s];if(FM.v(r.Qjt()),i.o0()){const[t,e,r]=i.a0().oT(FM.Lh(),FM.Gh());FM.set(t,e),s+=r}return FM.offset(-e.UX(),-e.WX()),FM.scale(i.Eg(),i.Pg()),FM.rotate(i.qq()),FM.offset(i.rE(),i.oE()),[FM.Lh(),FM.Gh(),s]}u8t(){return this.N$().GVt().vc()}c8t(t){t=Math.floor(t);const e=this.N$(),i=e.GVt(),r=i.vc();if(t===r&&(t=0),t<0||t>=r)return[0,0];const s=i.yc();return[s[2*t+0]+e.rE(),s[2*t+1]+e.oE()]}FGt(){const t=xM.cY.hpt.Ypt,e="plugins.sprite.debugger.animation-properties";return[{title:e+".title",properties:[{name:e+".current-animation",value:this.S5t.Dl(),l8t:e=>this.zGt(t.f8t,e,0)},{name:e+".current-frame",value:this.b5t,l8t:e=>this.zGt(t.p8t,e)},{name:e+".is-playing",value:this.j5t(),l8t:e=>e?this.zGt(t.d8t,0):this.zGt(t.m8t)},{name:e+".speed",value:this.P5t,l8t:e=>this.zGt(t.y8t,e)},{name:e+".repeats",value:this.O5t,l8t:t=>this.O5t=t}]}]}yE(){const t={a:this.S5t.e9()};0!==this.I5t&&(t.fs=this.I5t);const e=this.N5t();0!==e&&(t.at=e),0!==this.b5t&&(t.f=this.b5t),0!==this.P5t&&(t.cas=this.P5t),1!==this.O5t&&(t.ar=this.O5t),0!==this.A5t&&(t.rt=this.A5t),this.j5t()||(t.ap=this.j5t()),this.B5t()||(t.af=this.B5t());const i=this.N$();return i.yK()&&(t.ce=i.yK()),t}gE(t){const e=this.gq().vBt(t.a);e&&(this.S5t=e),this.I5t=t.hasOwnProperty("fs")?t.fs:0,this.M5t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.b5t=xM.Xs(i,0,this.S5t.Y0()-1),this.P5t=t.hasOwnProperty("cas")?t.cas:0,this.O5t=t.hasOwnProperty("ar")?t.ar:1;const r=t.hasOwnProperty("rt")?t.rt:0;this.A5t=xM.Xs(r,0,this.S5t.Y0()-1),this.F5t(!t.hasOwnProperty("ap")||!!t.ap),this.z5t(!t.hasOwnProperty("af")||!!t.af);const s=this.S5t.Ljt(this.b5t);this._5t=s,this.s5t();const n=this.N$();n.HX(s.UX()),n.$X(s.WX()),n.xVt(s.f1()),n.gK(!!t.ce),this.j5t()&&this.kGt()}Ddt(t){const e=this.N$();switch(t){case GM:return e.yK();case kM:return xM.Xs(this.b5t,0,this.S5t.Y0()-1);case LM:return this.S5t.Dl()}}Gdt(t,e,i){const r=this.N$();switch(t){case GM:r.gK(!!e);break;case kM:if(i.dpt){if(!i.ppt)return;{const t=this.S5t.Y0()-1,r=e=xM.Xs(e,0,t),s=this.S5t.Ljt(this.b5t),n=this.S5t.Ljt(r);this.Y5t(s,n,i),this.b5t=xM.Xs(r,0,t)}}else{this.F5t(!1);const t=this.S5t.Y0()-1,r=e=xM.Xs(e,0,t),s=this.S5t.Ljt(this.b5t),n=this.S5t.Ljt(r);this.Y5t(s,n,i),this.b5t=xM.Xs(r,0,t)}break;case LM:this.C5t=e,this.R5t=i?.lpt??0,this.V5t(i),this.S5t.Y0()>1&&this.S5t.j0()>0?this.kGt():this.wGt()}}Qkt(){return self.g8t}};const HM=new WeakMap,VM=new Map([["current-frame",0],["beginning",1]]);self.g8t=class extends self.l0{constructor(){super(),HM.set(this,self.PZ.IZ().y0())}s1(){return HM.get(this).n1()}o1(t){return this.a1(t)[0]}h1(t){return this.a1(t)[1]}v8t(t){return this.a1(t)[2]}a1(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return HM.get(this).UCt(t)}l1(){return HM.get(this).u8t()}d1(t){return CM.ir(t),HM.get(this).c8t(t)[0]}g1(t){return CM.ir(t),HM.get(this).c8t(t)[1]}m1(t){return CM.ir(t),HM.get(this).c8t(t)}w8t(){HM.get(this).F5t(!1)}S8t(t="current-frame"){CM.ar(t);const e=VM.get(t);if(void 0===e)throw new Error("invalid mode");HM.get(this).X5t(e)}b8t(t,e="beginning"){CM.ar(t),CM.ar(e);const i=VM.get(e);if(void 0===i)throw new Error("invalid mode");const r=HM.get(this);if(!r.gq().gBt(t))throw new Error(`animation name "${t}" does not exist`);r.K5t(t,i)}d5t(t){CM.ar(t);const e=HM.get(this).gq().gBt(t);return e?e.Fjt():null}get animation(){return HM.get(this).t8t().Fjt()}get animationName(){return HM.get(this).e8t()}set Q5t(t){CM.ir(t),HM.get(this).i8t(t)}get Q5t(){return HM.get(this).r8t()}set _8t(t){CM.ar(t),HM.get(this).i8t(t)}get _8t(){return HM.get(this).s8t()}set E8t(t){CM.ir(t),HM.get(this).n8t(t)}get E8t(){return HM.get(this).o8t()}set T8t(t){CM.ir(t),HM.get(this).a8t(t)}get T8t(){return HM.get(this).h8t()}get imageWidth(){return HM.get(this).XGt().Eg()}get imageHeight(){return HM.get(this).XGt().Pg()}P8t(){const t=HM.get(this).XGt();return[t.Eg(),t.Pg()]}async A8t(t){CM.jr(t,Blob);const e=HM.get(this),i=e.gY(),r=e.XGt(),s=xM.$s(xM.tjt);if(s.djt(i,t),await s.D4(i.E_(),{lT:i.Oz()}),e.Js())return void s.Ys();r.mjt(s);const n=e.ACt();n.r5t(),n.gq().wf().dispatchEvent(new xM.Event("animationframeimagechange")),i.W$()}M8t(t,e){"string"==typeof e&&(e=xM.ko(e)),HM.get(this).N$().wVt(!!t,e)}}}{const WM=self.Ee;WM.cY.hpt.hY={I8t(t){return WM.Zr(this.e8t(),t)},O8t(t,e){return WM.compare(this.b5t,t,e)},D8t(t,e){if("string"!=typeof e)return!1;const i=this._5t.v1();return WM.compare(i.toLowerCase(),t,e.toLowerCase())},x8t(t,e){return WM.compare(this.o8t(),t,e)},q5t(t){return WM.Zr(this.D5t,t)},J5t:()=>!0,Z5t:()=>!0,C8t(){return this.N$().Eg()<0},R8t(){return this.N$().Pg()<0},L8t:()=>!0,k8t:()=>!0,yK(){return this.N$().yK()}}}{const $M=self.Ee;$M.cY.hpt.Ypt={G8t(t,e,i,r,s){if(!t||!e)return;const[n,o]=this.UCt(i),a=this.Fl.Mq(t,e,n,o,r,s);if(!a)return;if(r&&e.Iq(a),t.KJ().RJ()){const t=a.N$();t.Jq(this.N$().qq()),t.NX()}const h=this.Fl.oW();h.Oq(!0),a.Dq(),h.Oq(!1),t!==this.Fl.gTt().gq()&&this.vGt.o5t(t,a,r)},m8t(){this.F5t(!1)},d8t(t){this.X5t(t)},f8t(t,e){this.K5t(t,e)},p8t(t){this.i8t(t)},y8t(t){this.n8t(t)},N8t(t){this.a8t(t)},j8t(t,e){try{0===t?this.ACt().a5t(e):this.ACt().h5t(e)}catch(e){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,e)}},F8t(t,e,i){try{0===t?this.ACt().c5t(e,i):this.ACt().f5t(e,i)}catch(e){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,e)}},B8t(t){const e=this.N$(),i=e.Eg(),r=Math.abs(i)*(0===t?-1:1);i!==r&&(e.cg(r),e.NX())},z8t(t){const e=this.N$(),i=e.Pg(),r=Math.abs(i)*(0===t?-1:1);i!==r&&(e.lg(r),e.NX())},$q(t){const e=this._5t.e1(),i=this.N$(),r=i.Eg()<0?-1:1,s=i.Pg()<0?-1:1,n=e.Eg()*t*r,o=e.Pg()*t*s;i.Eg()===n&&i.Pg()===o||(i.$D(n,o),i.NX())},async U8t(t,e,i){const r=this._5t.e1(),s=this.N$(),n=this.Fl,o=this.vGt;if(r.Z5()===t)return 0===e&&(s.$D(r.Eg(),r.Pg()),s.NX()),void this.hX($M.cY.hpt.hY.L8t);const a=$M.$s($M.tjt);try{if(await a.pjt(n,t),!a.T8())throw new Error("image failed to load");if(this.Js())return void a.Ys();await a.D4(n.E_(),{lT:n.Oz()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Js()||this.hX($M.cY.hpt.hY.k8t))}this.Js()?a.Ys():(r.mjt(a),o.r5t(),o.gq().wf().dispatchEvent(new $M.Event("animationframeimagechange")),n.W$(),0===e&&(s.$D(r.Eg(),r.Pg()),s.NX()),await this.oY($M.cY.hpt.hY.L8t))},H8t(t){this.N$().gK(t)},wVt(t,e){this.N$().wVt(0===t,$M.ko(e))},V8t(t){this.N$().W_(t),this.Fl.W$()}}}self.Ee.cY.hpt.Jpt={W8t(){return this.r8t()},$8t(){return this.s8t()},Y8t(){return this.S5t.Y0()},J8t(){return this.S5t.Dl()},q8t(){return this.o8t()},Q8t(){return this.S5t.j0()},Z8t(t){return this.UCt(t)[0]},X8t(t){return this.UCt(t)[1]},K8t(t){return this.UCt(t)[2]},t6t(){return this.n1()},e6t(){return this.XGt().Eg()},i6t(){return this.XGt().Pg()},r6t(t){return this.c8t(t)[0]},s6t(t){return this.c8t(t)[1]},n6t(){return this.u8t()}};{const YM=self.Ee;YM.cY.Text=class extends YM.Tkt{constructor(t){super(t)}Ys(){super.Ys()}}}{const JM=self.Ee;JM.cY.Text.NFt=class extends JM.lGt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}Cit(t){}jit(){}}}{const qM=self.Ee,QM=self.Le,ZM=[0,0,0],XM=0,KM=1,tI=2,eI=3,iI=4,rI=5,sI=6,nI=7,oI=8,aI=9,hI=10,uI=11,cI=12,lI=13,fI=15,pI=["left","center","right"],dI=["top","center","bottom"],mI=["ltr","rtl"],yI=["word","cjk","character"],gI=new qM.Rect,vI=new qM.Ou,wI=new qM.ba,SI=qM.$s(qM.Oh),bI=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);qM.cY.Text.Instance=class extends qM.VGt{constructor(t,e){if(super(t),this.Bl="",this.o6t=!0,this.a6t="Arial",this.h6t=12,this.u6t=0,this.PO=!1,this.AO=!1,this.B_=qM.$s(qM.ba),this.CO=0,this.RO=0,this.GO="word",this.NO=0,this.c6t="auto",this.l6t=1,this.f6t=null,this.p6t="",this.d6t=!1,this.m6t=!1,this.y6t=null,this.g6t=-1,this.v6t=-1,this.w6t=0,this.S6t=qM.$s(qM.qv.e_,this.Fl.E_(),{timeout:5}),this.S6t.mD=()=>this.Fl.W$(),this.b6t=()=>this._6t(),this.E6t=!1,this.T6t=()=>this.P6t(),e){this.Bl=e[XM],this.o6t=!!e[KM],this.a6t=e[tI],this.h6t=e[eI],this.u6t=e[iI],this.PO=!!e[rI],this.AO=!!e[sI],this.CO=e[oI],this.RO=e[aI],this.GO=yI[e[hI]],this.NO=e[uI],this.A6t(this.Fl.D3(e[cI]));const t=e[nI];this.B_.Ma(t[0],t[1],t[2]),this.N$().RQ(e[lI]),this.m6t=!!e[fI]}this.M6t(),this.I6t(),this.Fl.wf().addEventListener("beforerender",this.T6t)}Ys(){this.Fl.wf().removeEventListener("beforerender",this.T6t),this.T6t=null,this.A6t(null),this.O6t(),this.y6t&&(this.y6t.Ys(),this.y6t=null),this.S6t.Ys(),this.S6t=null,super.Ys()}M6t(){const t=this.S6t;t.Hl(this.Bl),t.vD(this.o6t),this.S6t.gO()&&this.f6t?this.S6t.ag(this.gY().ZKt(this.f6t)):this.S6t.ag(null),t.wD("nearest"!==this.Fl.Oz()),t.SD(this.a6t),t.TD(this.u6t),t.AD(this.PO),t.ID(this.AO),t.Y_(this.B_),t.kD(pI[this.CO]),t.ND(dI[this.RO]),t.FD(this.GO),t.zD(mI[this.NO])}D6t(){const t=this.N$();this.S6t.Hl(this.Bl),this.S6t.bD(this.h6t),this.S6t.ED(t.BHt());const e=t.F$();let i;"auto"===this.c6t?(i=e.mtt(t.QX()),this.S6t.VD(!1)):"fixed"===this.c6t&&(i=this.l6t,this.S6t.VD(!0)),t.o0()&&i!==this.S6t.YD()&&t.HVt(!0),this.S6t.$D(t.Eg(),t.Pg(),i)}A6t(t){t&&(t.mq()||t.KJ().constructor!==qM.cY.hpt)||t!==this.f6t&&(this.f6t&&this.f6t.wf().removeEventListener("animationframeimagechange",this.b6t),this.f6t=t,this.f6t&&this.f6t.wf().addEventListener("animationframeimagechange",this.b6t),this.M6t(),this.d6t=!1,this.Fl.W$())}_6t(){this.Fl.XKt(this.f6t),this.Fl.W$(),this.E6t=!0}I6t(){if(this.m6t){let t=this.Bl;this.o6t&&(t=qM.ds.zy(t)),this.y6t?this.y6t.Hl(t):this.y6t=qM.$s(qM.jl,this.Fl,t)}else this.y6t&&(this.y6t.Ys(),this.y6t=null)}P6t(){const t=this.N$(),e=t.F$(),i=t.g$();t.kQ()&&t.$tt(e.dZ(),i.Wtt(),i.TQ())&&(this.x6t(),this.S6t.PP())}x6t(){this.D6t(),this.E6t&&(this.E6t=!1,this.S6t.gO()&&this.f6t&&this.S6t.ag(this.gY().ZKt(this.f6t)))}KE(t){const e=this.Fl.I$().gqt();e&&this.x6t();const i=this.S6t.PP();if(!i)return;const r=this.N$(),s=r.F$();if(0!==r.qq()||0!==s.qq()||0!==r.QX()||r.o0()||!s.C9()||e)t.jR(i),r.o0()?this.k5t(r,t):this.G5t(r,t);else{const e=r.eK(),[n,o]=s._Z(e.Fn(),e.Bn()),[a,h]=s._Z(e.Hn(),e.Vn()),u=n-Math.round(n),c=o-Math.round(o);gI.set(n,o,a,h),gI.offset(-u,-c),vI.Qu(gI);const[l,f]=t.tL(t.wL());t.qb()?this.Fl.I$().B4(t,l,f):(t.aF(!0),vI.wt(l,f)),t.jR(i),t.hb(vI,this.S6t.xx()),t.qb()?s.U4(t):t.aF(!1)}}G5t(t,e){let i=t.eK();this.Fl.a$()&&(i=this.C6t(i)),e.hb(i,this.S6t.xx())}k5t(t,e){const i=t.UVt();if(t.VVt()){t.XX(gI,vI,!1);let e=vI;this.Fl.a$()&&(e=this.C6t(e)),i.YE(t.a0(),e,this.S6t.xx()),t.HVt(!1)}i.KE(e,t.QX())}C6t(t){const e=t.Fn()-Math.round(t.Fn()),i=t.Bn()-Math.round(t.Bn());return 0===e&&0===i?t:(vI.v(t),vI.offset(-e,-i),vI)}KGt(){const t=this.S6t.PP();return t?[t.Eg(),t.Pg()]:[100,100]}tNt(){return this.S6t.xx()}rNt(){return!1}yE(){const t={t:this.Bl,c:this.B_.toJSON(),fn:this.a6t,ps:this.h6t};return this.o6t&&(t.bbc=this.o6t),0!==this.CO&&(t.ha=this.CO),0!==this.RO&&(t.va=this.RO),"word"!==this.GO&&(t.wr=this.GO),0!==this.u6t&&(t.lho=this.u6t),this.PO&&(t.b=this.PO),this.AO&&(t.i=this.AO),-1!==this.v6t&&(t.tw={st:this.g6t,en:this.v6t,l:this.w6t}),this.f6t&&(t.ioc=this.f6t.e9()),"fixed"===this.c6t&&(t.fs=this.l6t),t}gE(t){if(this.O6t(),this.Bl=t.t,this.B_.wh(t.c),this.a6t=t.fn,this.h6t=t.ps,this.o6t=!!t.hasOwnProperty("bbc")&&t.bbc,this.CO=t.hasOwnProperty("ha")?t.ha:0,this.RO=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const e=t.wr;this.GO="boolean"==typeof e?e?"word":"character":e}else this.GO="word";if(this.u6t=t.hasOwnProperty("lho")?t.lho:0,this.PO=!!t.hasOwnProperty("b")&&t.b,this.AO=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const e=t.tw;this.g6t=e.st,this.v6t=e.en,this.w6t=e.l}if(t.hasOwnProperty("ioc")){const e=this.gY().D3(t.ioc);e&&this.A6t(e)}else this.A6t(null);t.hasOwnProperty("fs")?(this.c6t="fixed",this.l6t=t.fs):this.c6t="auto",this.M6t(),this.I6t(),this.d6t=!1,-1!==this.v6t&&this.kGt()}Ddt(t){switch(t){case XM:return this.HD();case KM:return this.o6t;case tI:return this.R6t();case eI:return this.L6t();case iI:return this.k6t();case rI:return this.G6t();case sI:return this.N6t();case nI:return ZM[0]=this.B_.ka(),ZM[1]=this.B_.Ga(),ZM[2]=this.B_.Na(),ZM;case oI:return this.j6t();case aI:return this.F6t();case hI:return this.B6t();case fI:return this.z6t()}}Gdt(t,e){switch(t){case XM:this.U6t(e);break;case KM:if(this.o6t===!!e)return;this.o6t=!!e,this.M6t();break;case tI:this.H6t(e);break;case eI:this.V6t(e);break;case iI:this.W6t(e);break;case rI:this.$6t(e);break;case sI:this.Y6t(e);break;case nI:const t=this.B_,i=e;if(t.ka()===i[0]&&t.Ga()===i[1]&&t.Na()===i[2])return;this.B_.Ma(i[0],i[1],i[2]),this.M6t();break;case oI:this.J6t(e);break;case aI:this.q6t(e);break;case hI:this.Q6t(e)}}BGt(t,e,i,r){0===e&&0===i&&0===r||t!==nI||(this.B_.Ia(e,i,r),this.M6t())}U6t(t){this.Bl!==t&&(this.Bl=t,this.I6t(),this.d6t=!1,this.Fl.W$())}HD(){return this.Bl}Z6t(t,e){this.U6t(t),this.D6t(),this.g6t=this.Fl.jW(),this.v6t=this.g6t+e/this.J1().zZ(),this.w6t=this.S6t.ZD(),this.S6t.DD(0),this.kGt()}O6t(){this.g6t=-1,this.v6t=-1,this.w6t=0,this.S6t.DD(-1),this.wGt()}X6t(){-1!==this.v6t&&(this.O6t(),this.hX(qM.cY.Text.hY.K6t),this.Fl.W$())}H6t(t){this.a6t!==t&&(this.a6t=t,this.S6t.SD(t),this.Fl.W$())}R6t(){return this.a6t}$6t(t){t=!!t,this.PO!==t&&(this.PO=t,this.S6t.AD(t),this.Fl.W$())}G6t(){return this.PO}Y6t(t){t=!!t,this.AO!==t&&(this.AO=t,this.S6t.ID(t),this.Fl.W$())}N6t(){return this.AO}V6t(t){this.h6t!==t&&(this.h6t=t,this.Fl.W$())}L6t(){return this.h6t}t7t(t){this.B_.Ha(t)||(this.B_.La(t),this.S6t.Y_(this.B_),this.Fl.W$())}e7t(){return this.B_}W6t(t){this.u6t!==t&&(this.u6t=t,this.M6t(),this.Fl.W$())}k6t(){return this.u6t}J6t(t){this.CO!==t&&(this.CO=t,this.M6t(),this.Fl.W$())}j6t(){return this.CO}q6t(t){this.RO!==t&&(this.RO=t,this.M6t(),this.Fl.W$())}F6t(){return this.RO}i7t(t){this.Q6t(yI[t])}Q6t(t){this.GO!==t&&(this.GO=t,this.M6t(),this.Fl.W$())}B6t(){return this.GO}r7t(t){this.NO!==t&&(this.NO=t,this.M6t(),this.Fl.W$())}s7t(){return this.NO}n7t(t){this.m6t=!!t,this.I6t()}z6t(){return this.m6t}o7t(t){this.c6t!==t&&(this.c6t=t,this.Fl.W$())}a7t(){return this.c6t}h7t(t){this.l6t!==t&&(this.l6t=t,"fixed"===this.c6t&&this.Fl.W$())}u7t(){return this.l6t}c7t(){return this.D6t(),this.S6t.JD()}l7t(){return this.D6t(),this.S6t.QD()}f7t(t,e){this.D6t();const i=this.N$();SI.set(t-i.rE(),e-i.oE()),SI.rotate(-i.qq()),SI.offset(i.Eg()*i.UX(),i.Pg()*i.WX()),SI.wt(i.Eg(),i.Pg()),SI.scale(this.S6t.Eg(),this.S6t.Pg());const r=this.S6t.KD(SI.Lh(),SI.Gh());if(r){const t=r.sv("tag");if(t)return t.ky}return""}p7t(t,e,i){const r=this.f7t(e,i);return r&&qM.Zr(t,r)}d7t(t,e){this.D6t(),e=Math.floor(e);const i=this.S6t.ix(t,e);if(!i)return null;const r=this.N$(),s=this.S6t.RD(),n=i.Xg(),o=i.tv()-(i.Pg()-i.Mg())*s,a=i.Eg()*s/this.S6t.Eg()*r.Eg(),h=i.Pg()*s/this.S6t.Pg()*r.Pg();return SI.set(n,o),SI.wt(this.S6t.Eg(),this.S6t.Pg()),SI.scale(r.Eg(),r.Pg()),SI.offset(-r.Eg()*r.UX(),-r.Pg()*r.WX()),SI.rotate(r.qq()),SI.offset(r.rE(),r.oE()),{x:SI.Lh(),y:SI.Gh(),width:a,height:h}}m7t(t){return this.D6t(),this.S6t.sx(t)}y7t(t){let e=bI.get(t);return null===e?"":(e||(e="span"),`</${e||"span"}>`)}g7t(t,e){let i=bI.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${e}">`;case"font":return`<${i} style="font-family: '${e}'">`;case"opacity":return`<${i} style="opacity: ${e}%">`;case"size":return`<${i} style="font-size: ${e}pt">`;case"background":return`<${i} style="background-color: ${e}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${e}">`;case"tag":return`<${i} data-tag="${e}">`;default:return`<${i}>`}}async v7t(){if(this.d6t)return this.p6t;const t=new qM.ds(this.Bl,{Sy:!0}).Ry(),e=new Map;let i='<span class="c3-text"';const r=[];r.push(`font-family: '${this.R6t()}';`),this.G6t()&&r.push("font-weight: bold;"),this.N6t()&&r.push("font-style: italic;"),"character"===this.B6t()&&r.push("word-break: break-all;"),i+=` style="${r.join(" ")}">`;const s=this.f6t?this.gY().ZKt(this.f6t):null;if(this.f6t){const i=qM.$s(qM.Vp),r=[],n=new Map;for(const e of t)if(e.Sg()){const t=e.cv(s);if(t){const e=t.Wv().e1().Sjt();if(n.has(e))continue;n.set(e,null),r.push(i.Hc(async()=>{const t=await e.j8();n.set(e,t)}))}}await Promise.all(r);const o=[];for(const r of t)if(r.Sg()){const t=r.cv(s);if(t){const r=t.Wv(),s=r.e1().Sjt();o.push(i.Hc(async()=>{const i=await r.e1()._jt(n.get(s));e.set(t,i)}))}}await Promise.all(o);for(const t of n.values())t instanceof ImageBitmap&&t.close&&t.close()}const n=new Map;for(const r of t){const t=r.ov();let o=[...n.keys()];o.reverse();for(const e of o)t.has(e)&&t.get(e)===n.get(e)||(n.delete(e),i+=this.y7t(e));for(const[e,r]of t)n.has(e)||(n.set(e,r),i+=this.g7t(e,r));if(r.qy()&&(i+=qM.Dm(qM.Im(r.Xy().join("")),"\n","<br>")),r.Sg()&&s){const n=r.cv(s);if(n){const s=e.get(n);if(s){const e=[];let o="0.2em";const a=t.get("iconoffsety");if(a){let t=a.trim();o=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}e.push(`top: ${o}`),"nearest"===this.Fl.Oz()&&e.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${r.uv()}" width="${n.Eg()}" height="${n.Pg()}" style="${e.join(";")}" src="${s}">`}}}}const o=[...n.keys()];o.reverse();for(const t of o)i+=this.y7t(t);return i+="</span>",this.p6t=i,this.d6t=!0,this.p6t}Ant(){const t=this.Fl.jW();if(t>=this.v6t)this.O6t(),this.hX(qM.cY.Text.hY.K6t),this.Fl.W$();else{let e=qM.gn(this.g6t,this.v6t,t,0,this.w6t);e=Math.floor(e),e!==this.S6t.xD()&&(this.S6t.DD(e),this.Fl.W$())}}FGt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.HD(),l8t:t=>this.U6t(t)},{name:t+".properties.font.name",value:this.R6t(),l8t:t=>this.H6t(t)},{name:t+".properties.size.name",value:this.L6t(),l8t:t=>this.V6t(t)},{name:t+".properties.line-height.name",value:this.k6t(),l8t:t=>this.W6t(t)},{name:t+".properties.bold.name",value:this.G6t(),l8t:t=>this.$6t(t)},{name:t+".properties.italic.name",value:this.N6t(),l8t:t=>this.Y6t(t)},{name:t+".debugger.text-width",value:this.c7t()},{name:t+".debugger.text-height",value:this.l7t()}]}]}Qkt(){return self.w7t}};const _I=new WeakMap,EI=new Map([["left",0],["center",1],["right",2]]),TI=new Map([["top",0],["center",1],["bottom",2]]),PI=["ltr","rtl"];self.w7t=class extends self.l0{constructor(){super(),_I.set(this,self.PZ.IZ().y0())}get text(){return _I.get(this).HD()}set text(t){QM.ar(t);const e=_I.get(this);e.O6t(),e.U6t(t)}S7t(t,e){QM.ar(t),QM.ir(e);const i=_I.get(this);i.O6t(),i.Z6t(t,e)}b7t(){_I.get(this).X6t()}set V4(t){QM.ar(t),_I.get(this).H6t(t)}get V4(){return _I.get(this).R6t()}set Y4(t){_I.get(this).$6t(t)}get Y4(){return _I.get(this).G6t()}set J4(t){_I.get(this).Y6t(t)}get J4(){return _I.get(this).N6t()}set W4(t){QM.ir(t),_I.get(this).V6t(t)}get W4(){return _I.get(this).L6t()}set _7t(t){if(QM.Er(t),t.length<3)throw new Error("expected 3 elements");wI.Ma(t[0],t[1],t[2]),_I.get(this).t7t(wI)}get _7t(){const t=_I.get(this).e7t();return[t.ka(),t.Ga(),t.Na()]}set lineHeight(t){QM.ir(t),_I.get(this).W6t(t)}get lineHeight(){return _I.get(this).k6t()}set Z4(t){QM.ar(t);const e=EI.get(t);if(void 0===e)throw new Error("invalid mode");_I.get(this).J6t(e)}get Z4(){return pI[_I.get(this).j6t()]}set verticalAlign(t){QM.ar(t);const e=TI.get(t);if(void 0===e)throw new Error("invalid mode");_I.get(this).q6t(e)}get verticalAlign(){return dI[_I.get(this).F6t()]}set X4(t){if(!yI.includes(t))throw new Error("invalid mode");_I.get(this).Q6t(t)}get X4(){return _I.get(this).B6t()}set K4(t){QM.ar(t);const e=PI.indexOf(t);if(-1===e)throw new Error("invalid text direction");_I.get(this).r7t(e)}get K4(){return PI[_I.get(this).s7t()]}set E7t(t){_I.get(this).n7t(!!t)}get E7t(){return _I.get(this).z6t()}T7t(t){QM.ir(t);const e=_I.get(this);e.o7t("fixed"),e.h7t(t)}P7t(){_I.get(this).o7t("auto")}get i5(){return _I.get(this).c7t()}get r5(){return _I.get(this).l7t()}A7t(){const t=_I.get(this);return[t.c7t(),t.l7t()]}M7t(t,e,i){return QM.ar(t),QM.ir(e),QM.ir(i),_I.get(this).p7t(t,e,i)}I7t(t,e){return QM.ir(t),QM.ir(e),_I.get(this).f7t(t,e)}O7t(t,e=0){return QM.ar(t),QM.ir(e),_I.get(this).d7t(t,e)}D7t(t){return QM.ar(t),_I.get(this).m7t(t)}x7t(t){const e=_I.get(this),i=e.gY().JY(t);e.A6t(i)}C7t(){return _I.get(this).v7t()}}}{const AI=self.Ee;AI.cY.Text.hY={R7t(t,e){return e?this.Bl===t:AI.Zr(this.Bl,t)},L7t(){return-1!==this.v6t},K6t:()=>!0,k7t(t,e,i){return this.p7t(t,e,i)}}}{const MI=self.Ee,II=MI.$s(MI.ba);MI.cY.Text.Ypt={Hl(t){this.O6t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.U6t(t.toString())},G7t(t){this.O6t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.U6t(this.Bl+t)},N7t(t,e){this.O6t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Z6t(t.toString(),e)},j7t(t,e){let i=!1,r=!1;switch(e){case 1:i=!0;break;case 2:r=!0;break;case 3:i=!0,r=!0}t===this.a6t&&i===this.PO&&r===this.AO||(this.H6t(t),this.$6t(i),this.Y6t(r))},bD(t){this.V6t(t)},F7t(t){II.Za(t),II.Xs(),this.t7t(II)},B7t(t,e){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},V8t(t){this.N$().W_(t),this.Fl.W$()},z7t(){this.X6t()},TD(t){this.W6t(t)},U7t(t){this.J6t(t)},H7t(t){this.q6t(t)},V7t(t){this.i7t(t)},zD(t){this.r7t(t)},W7t(t){this.A6t(t)},$7t(){return this.v7t()},Y7t(t){this.n7t(t)},J7t(t,e){this.o7t(["auto","fixed"][t]),this.h7t(e)}}}{const OI=self.Ee;OI.cY.Text.Jpt={Text(){return this.Bl},q7t(){return this.o6t?OI.ds.zy(this.Bl):this.Bl},Q7t(){return this.a6t},Z7t(){return this.h6t},X7t(){return this.c7t()},K7t(){return this.l7t()},t9t(){return this.u6t},e9t(t,e){return this.f7t(t,e)},i9t(t){return this.m7t(t)},r9t(t,e){const i=this.d7t(t,e);return i?i.x:0},s9t(t,e){const i=this.d7t(t,e);return i?i.y:0},n9t(t,e){const i=this.d7t(t,e);return i?i.width:0},o9t(t,e){const i=this.d7t(t,e);return i?i.height:0},a9t(){return this.p6t}}}{const DI=self.Ee;DI.cY.Touch=class extends DI.Tkt{constructor(t){super(t)}Ys(){super.Ys()}}}{let xI=function(){return LI.QJ().y0()};GetTouchSdkInstance=xI;const CI=self.Ee,RI=self.Le;CI.cY.Touch.NFt=class extends CI.lGt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}Qkt(){return self.h9t}};let LI=null;self.h9t=class extends self.Eq{constructor(t){super(t),LI=t,t.gY().E$().P$=this}requestPermission(t){RI.ar(t);const e=xI();if("orientation"===t)return e.u9t(0);if("motion"===t)return e.u9t(1);throw new Error("invalid type")}}}{const kI=self.Ee,GI="touch";kI.cY.Touch.Instance=class extends kI.yGt{constructor(t,e){super(t,GI),this.c9t=new Map,this.l9t=!1,this.f9t=!1,this.p9t=0,this.d9t=0,this.m9t=0,this.y9t=0,this.g9t=0,this.v9t=0,this.w9t=0,this.S9t=0,this.b9t=0,this._9t=0,this.E9t=0,this.T9t=0,this.P9t=0,this.A9t=0,this.M9t=0,this.I9t=0,this.O9t=0,this.D9t=[],e&&(this.l9t=e[0]),this.AGt("permission-result",t=>this.x9t(t));const i=this.gY().wf();this.Zf=new kI.Jf(kI.Uf.Yf(i,"pointerdown",t=>this.C9t(t.data)),kI.Uf.Yf(i,"pointermove",t=>this.R9t(t.data)),kI.Uf.Yf(i,"pointerup",t=>this.L9t(t.data,!1)),kI.Uf.Yf(i,"pointercancel",t=>this.L9t(t.data,!0)),kI.Uf.Yf(i,"deviceorientation",t=>this.k9t(t.data)),kI.Uf.Yf(i,"deviceorientationabsolute",t=>this.G9t(t.data)),kI.Uf.Yf(i,"devicemotion",t=>this.N9t(t.data)),kI.Uf.Yf(i,"tick2",t=>this.gst()))}Ys(){this.c9t.clear(),super.Ys()}C9t(t){if("mouse"===t.pointerType){if(!this.l9t)return;this.f9t=!0}const e=t.pointerId;if(this.c9t.has(e))return;const i=t.pageX-this.Fl.aJ(),r=t.pageY-this.Fl.uJ(),s=performance.now(),n=this.c9t.size;this.E9t=n,this.T9t=e;const o=kI.$s(kI.cY.Touch.j9t);o.szt(s,i,r,e,n),this.c9t.set(e,o),this.hX(kI.cY.Touch.hY.F9t),this.hX(kI.cY.Touch.hY.B9t),this.A9t=i,this.M9t=r,this.O9t=0,this.hX(kI.cY.Touch.hY.z9t)}R9t(t){if("mouse"===t.pointerType&&!this.f9t)return;const e=this.c9t.get(t.pointerId);if(!e)return;const i=performance.now();if(i-e.oU()<2)return;const r=t.pageX-this.Fl.aJ(),s=t.pageY-this.Fl.uJ();e.n6(i,r,s,t.width,t.height,t.pressure)}L9t(t,e){if("mouse"===t.pointerType){if(!this.f9t)return;this.f9t=!1}const i=performance.now(),r=t.pointerId,s=this.c9t.get(r);if(s){if(this.E9t=s.U9t(),this.T9t=s.t2(),!e){const e=t.pageX-this.Fl.aJ(),i=t.pageY-this.Fl.uJ();this.A9t=e,this.M9t=i,this.O9t=1,this.hX(kI.cY.Touch.hY.z9t)}if(this.hX(kI.cY.Touch.hY.H9t),this.hX(kI.cY.Touch.hY.V9t),!e){const t=s.W9t(i);"single-tap"===t?(this.hX(kI.cY.Touch.hY.$9t),this.A9t=s.rE(),this.M9t=s.oE(),this.hX(kI.cY.Touch.hY.Y9t)):"double-tap"===t&&(this.hX(kI.cY.Touch.hY.J9t),this.A9t=s.rE(),this.M9t=s.oE(),this.hX(kI.cY.Touch.hY.q9t))}s.Ys(),this.c9t.delete(r)}}u9t(t){return this.DGt("request-permission",{type:t}),new Promise((e,i)=>{this.D9t.push({type:t,resolve:e,reject:i})})}x9t(t){const e=t.result,i=t.type;this.P9t=i;const r=this.D9t.filter(t=>t.type===i);for(const t of r)t.resolve(e?"granted":"denied");this.D9t=this.D9t.filter(t=>t.type!==i),e?(this.hX(kI.cY.Touch.hY.Q9t),0===i?this.Fl.M0t():this.Fl.I0t()):this.hX(kI.cY.Touch.hY.Z9t)}k9t(t){"number"==typeof t.webkitCompassHeading?this.p9t=t.webkitCompassHeading:t.absolute&&(this.p9t=t.alpha),this.d9t=t.alpha,this.m9t=t.beta,this.y9t=t.gamma}G9t(t){this.p9t=t.alpha}N9t(t){const e=t.acceleration;e&&(this.g9t=e.x,this.v9t=e.y,this.w9t=e.z);const i=t.accelerationIncludingGravity;i&&(this.S9t=i.x,this.b9t=i.y,this._9t=i.z)}gst(){const t=performance.now();let e=0;for(const i of this.c9t.values())i.oU()<=t-50&&i.X9t(t),i.K9t(t)&&(this.E9t=i.U9t(),this.T9t=i.t2(),this.I9t=e,this.hX(kI.cY.Touch.hY.tte),this.A9t=i.rE(),this.M9t=i.oE(),this.hX(kI.cY.Touch.hY.ete),this.I9t=0),++e}ite(t){t=Math.floor(t);for(const e of this.c9t.values()){if(0===t)return e;--t}return null}rte(t,e){return t>=0&&e>=0&&t<this.Fl.ZXt()&&e<this.Fl.XXt()}FGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.c9t.values()].map(t=>({name:"$"+t.t2(),value:t.rE()+", "+t.oE()}))}]}}}{const NI=self.Ee;NI.cY.Touch.hY={B9t:()=>!0,V9t:()=>!0,ste(){return this.c9t.size>0},z9t(t,e){return!!t&&e===this.O9t&&!!this.rte(this.A9t,this.M9t)&&this.Fl.CV().QWt(t,[[this.A9t,this.M9t]],!1)},nte(t){if(!t)return!1;const e=this.Fl.mTt().Cxt(),i=[...this.c9t.values()].filter(t=>this.rte(t.rE(),t.oE())).map(t=>[t.rE(),t.oE()]);return NI.xor(this.Fl.CV().QWt(t,i,e),e)},ote(t,e,i){const r=this.ite(t);return!!r&&NI.compare(r.j0(),e,i)},ate:()=>!0,hte:()=>!0,ute(t,e,i){this.Fl.M0t();let r=0;return r=0===t?this.d9t:1===t?this.m9t:this.y9t,NI.compare(r,e,i)},cte(t,e,i){this.Fl.I0t();let r=0;return r=0===t?this.S9t:1===t?this.b9t:2===t?this._9t:3===t?this.g9t:4===t?this.v9t:this.w9t,NI.compare(r,e,i)},F9t(t){return(t=Math.floor(t))===this.E9t},H9t(t){return(t=Math.floor(t))===this.E9t},lte(t){return t=Math.floor(t),this.c9t.size>=t+1},tte:()=>!0,$9t:()=>!0,J9t:()=>!0,ete(t){return!!t&&!!this.rte(this.A9t,this.M9t)&&this.Fl.CV().QWt(t,[[this.A9t,this.M9t]],!1)},Y9t(t){return!!t&&!!this.rte(this.A9t,this.M9t)&&this.Fl.CV().QWt(t,[[this.A9t,this.M9t]],!1)},q9t(t){return!!t&&!!this.rte(this.A9t,this.M9t)&&this.Fl.CV().QWt(t,[[this.A9t,this.M9t]],!1)},Q9t(t){return this.P9t===t},Z9t(t){return this.P9t===t}}}self.Ee.cY.Touch.Ypt={fte(t){this.u9t(t)}};{const jI=self.Ee;jI.cY.Touch.Jpt={pte(){return this.c9t.size},GLt(t){const e=this.ite(this.I9t);return e?e.dte(this.Fl.k$(),t,!0):0},NLt(t){const e=this.ite(this.I9t);return e?e.dte(this.Fl.k$(),t,!1):0},mte(t,e){const i=this.ite(t);return i?i.dte(this.Fl.k$(),e,!0):0},yte(t,e){const i=this.ite(t);return i?i.dte(this.Fl.k$(),e,!1):0},gte(t,e){const i=this.c9t.get(t);return i?i.dte(this.Fl.k$(),e,!0):0},vte(t,e){const i=this.c9t.get(t);return i?i.dte(this.Fl.k$(),e,!1):0},wte(){const t=this.ite(0);return t?t.rE():0},Ste(){const t=this.ite(0);return t?t.oE():0},bte(t){const e=this.ite(t);return e?e.rE():0},_te(t){const e=this.ite(t);return e?e.oE():0},Ete(t){const e=this.c9t.get(t);return e?e.rE():0},Tte(t){const e=this.c9t.get(t);return e?e.oE():0},Pte(t){const e=this.ite(t);return e?e.j0():0},Ate(t){const e=this.c9t.get(t);return e?e.j0():0},Mte(t){const e=this.ite(t);return e?jI.en(e.qq()):0},Ite(t){const e=this.c9t.get(t);return e?jI.en(e.qq()):0},Ote(){return this.Fl.M0t(),this.p9t},Dte(){return this.Fl.M0t(),this.d9t},xte(){return this.Fl.M0t(),this.m9t},Cte(){return this.Fl.M0t(),this.y9t},Rte(){return this.Fl.I0t(),this.S9t},Lte(){return this.Fl.I0t(),this.b9t},kte(){return this.Fl.I0t(),this._9t},Gte(){return this.Fl.I0t(),this.g9t},Nte(){return this.Fl.I0t(),this.v9t},jte(){return this.Fl.I0t(),this.w9t},Fte(){return this.E9t},Bte(){return this.T9t},zte(t){const e=this.c9t.get(t);return e?e.Eg():0},Ute(t){const e=this.c9t.get(t);return e?e.Pg():0},Hte(t){const e=this.c9t.get(t);return e?e.Vte():0}}}{const FI=self.Ee,BI=15,zI=500,UI=333,HI=25;let VI=-1e3,WI=-1e3,$I=-1e4;FI.cY.Touch.j9t=class extends FI.Vs{constructor(){super(),this.Wte=0,this.ZM=0,this.pZt=0,this.iH=0,this.$te=0,this.Yte=0,this.Jte=0,this.Dh=0,this.xh=0,this.qte=0,this.Qte=0,this.Ug=0,this.Hg=0,this.Zte=0,this.Xte=!1,this.Kte=!1}Ys(){}szt(t,e,i,r,s){this.Wte=r,this.ZM=s,this.iH=t,this.$te=t,this.pZt=t,this.Yte=e,this.Jte=i,this.Dh=e,this.xh=i,this.qte=e,this.Qte=i}n6(t,e,i,r,s,n){this.$te=this.iH,this.iH=t,this.qte=this.Dh,this.Qte=this.xh,this.Dh=e,this.xh=i,this.Ug=r,this.Hg=s,this.Zte=n,!this.Kte&&FI.nn(this.Yte,this.Jte,this.Dh,this.xh)>=15&&(this.Kte=!0)}t2(){return this.Wte}U9t(){return this.ZM}oU(){return this.iH}X9t(t){this.$te=t}rE(){return this.Dh}oE(){return this.xh}j0(){const t=FI.nn(this.Dh,this.xh,this.qte,this.Qte),e=(this.iH-this.$te)/1e3;return e>0?t/e:0}qq(){return FI.hn(this.qte,this.Qte,this.Dh,this.xh)}Eg(){return this.Ug}Pg(){return this.Hg}Vte(){return this.Zte}K9t(t){return!this.Xte&&t-this.pZt>=500&&!this.Kte&&FI.nn(this.Yte,this.Jte,this.Dh,this.xh)<15&&(this.Xte=!0,!0)}W9t(t){return this.Xte?"":t-this.pZt<=333&&!this.Kte&&FI.nn(this.Yte,this.Jte,this.Dh,this.xh)<15?t-$I<=666&&FI.nn(VI,WI,this.Dh,this.xh)<25?(VI=-1e3,WI=-1e3,$I=-1e4,"double-tap"):(VI=this.Dh,WI=this.xh,$I=t,"single-tap"):""}dte(t,e,i){if(void 0===e)return t.z$(0).det(this.Dh,this.xh)[i?0:1];{const r=t.F$(e);return r?r.yZ(this.Dh,this.xh)[i?0:1]:0}}}}{const YI=self.Ee;YI.cY.eee=class extends YI.Tkt{constructor(t){super(t)}Ys(){super.Ys()}}}{const JI=self.Ee;JI.cY.eee.NFt=class extends JI.lGt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}}}{const qI=self.Ee,QI="localstorage";qI.cY.eee.Instance=class extends qI.yGt{constructor(t,e){super(t,QI),this.iee="",this.jM="",this.ree=[],this.see="",this.nee=!1,this.oee=0,this.aee=0,this.hee=!1,e&&(this.hee=e[0]);const i=this.Fl.SJ();this.wJ=null,this.hee?this.wJ=i._i({Ei:!0}):this.wJ=i,this.uee=new Map,this.cee=!1,this.Fl.rY(this.iE())}async iE(){const t=await Promise.race([this.OGt("init"),qI.po(3e3)]);t&&(this.nee=t.isPersistent)}Ys(){super.Ys()}async lee(t){this.see=this.fee(t),await this.oY(qI.cY.eee.hY.pee)}fee(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}FGt(){return this.cee||this.dee(),[{title:"plugins.localstorage.name",properties:[...this.uee.entries()].map(t=>({name:"$"+t[0],value:t[1],l8t:e=>this.wJ.setItem(t[0],e)}))}]}async dee(){this.cee=!0;try{const t=await this.wJ.keys();t.sort((t,e)=>{const i=t.toLowerCase(),r=e.toLowerCase();return i<r?-1:r<i?1:0});const e=await Promise.all(t.map(t=>this.wJ.getItem(t)));this.uee.clear();for(let i=0,r=t.length;i<r;++i)this.uee.set(t[i],e[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.cee=!1}}}}{const ZI=self.Ee;ZI.cY.eee.hY={mee(t){return this.iee===t},yee:()=>!0,gee(t){return this.iee===t},vee:()=>!0,wee(t){return this.iee===t},See:()=>!0,bee:()=>!0,_ee:()=>!0,pee:()=>!0,Eee(t){return this.iee===t},Tee(t){return this.iee===t},Pee(t,e){return ZI.compare(this.iee,t,e)},Aee(t,e){return ZI.compare(this.jM,t,e)},Mee(){return this.aee>0},Iee(){return this.oee>0},Oee:()=>!0,Dee:()=>!0,xee(){return this.nee}}}{let XI=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=XI;const KI=self.Ee;KI.cY.eee.Ypt={async Cee(t,e){this.aee++;try{const i=await this.wJ.setItem(t,e);await this.PGt(async()=>{this.iee=t,this.jM=i,await this.oY(KI.cY.eee.hY.yee),await this.oY(KI.cY.eee.hY.mee)})}catch(t){await this.lee(t)}finally{this.aee--,0===this.aee&&await this.oY(KI.cY.eee.hY.Oee)}},async Ree(t,e){if(!e)return;const i=e.wRt(this.hi);if(!i)return;const r=i.y0();if(!r)return;const s=r.Lee();this.aee++;try{await this.wJ.setItem(t,s),await this.PGt(async()=>{this.iee=t,this.jM="",await this.oY(KI.cY.eee.hY.yee),await this.oY(KI.cY.eee.hY.mee)})}catch(t){await this.lee(t)}finally{this.aee--,0===this.aee&&await this.oY(KI.cY.eee.hY.Oee)}},async kee(t){this.oee++;try{const e=await this.wJ.getItem(t);await this.PGt(async()=>{this.iee=t,this.jM=XI(e)?e:"",await this.oY(KI.cY.eee.hY.vee),await this.oY(KI.cY.eee.hY.gee)})}catch(t){await this.lee(t)}finally{this.oee--,0===this.oee&&await this.oY(KI.cY.eee.hY.Dee)}},async Gee(t,e){if(!e)return;const i=e.wRt(this.hi);if(!i)return;const r=i.y0();this.oee++;try{let e=await this.wJ.getItem(t);e=e instanceof ArrayBuffer?e:new ArrayBuffer(0),await this.PGt(async()=>{this.jM="",this.iee=t,r.Nee(e),await this.oY(KI.cY.eee.hY.vee),await this.oY(KI.cY.eee.hY.gee)})}catch(t){await this.lee(t)}finally{this.oee--,0===this.oee&&await this.oY(KI.cY.eee.hY.Dee)}},async jee(t){try{const e=await this.wJ.getItem(t);await this.PGt(async()=>{this.iee=t,null==e?(this.jM="",await this.oY(KI.cY.eee.hY.Tee)):(this.jM=XI(e)?e:"",await this.oY(KI.cY.eee.hY.Eee))})}catch(t){await this.lee(t)}},async kl(t){try{await this.wJ.removeItem(t),await this.PGt(async()=>{this.iee=t,this.jM="",await this.oY(KI.cY.eee.hY.See),await this.oY(KI.cY.eee.hY.wee)})}catch(t){await this.lee(t)}},async Fee(){try{await this.wJ.clear(),await this.PGt(async()=>{this.iee="",this.jM="",KI.So(this.ree),await this.oY(KI.cY.eee.hY.bee)})}catch(t){await this.lee(t)}},async Bee(){try{const t=await this.wJ.keys();await this.PGt(async()=>{this.ree=t,await this.oY(KI.cY.eee.hY._ee)})}catch(t){await this.lee(t)}},async zee(){const t=await this.OGt("request-persistent");t.isOk&&(this.nee=t.isPersistent)},Uee(t){if(!this.hee)return;let e;try{e=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}e&&e["is-c3-storage"]&&Array.isArray(e.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.wJ.bi(new Map(e.items))}}}self.Ee.cY.eee.Jpt={Hee(){return this.jM},Vee(){return this.iee},Wee(){return this.ree.length},$ee(t){return(t=Math.floor(t))<0||t>=this.ree.length?"":this.ree[t]},Yee(){return this.see},Jee(){return this.hee?JSON.stringify({"is-c3-storage":!0,items:[...this.wJ.Si()]}):""}};{const tO=self.Ee,eO=[];tO.cY.Audio=class extends tO.Tkt{constructor(t){super(t)}qee(t){eO.push(t)}static async Qee(){await Promise.all(eO),tO.So(eO)}Ys(){super.Ys()}}}{let iO=function(){return oO.QJ().y0()},rO=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=iO,GetAudioDOMInterface=rO;const sO=self.Ee,nO=self.Le;sO.cY.Audio.NFt=class extends sO.lGt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}Qkt(){return self.Zee}};let oO=null;self.Zee=class extends self.Eq{constructor(t){super(t),oO=t}get Xee(){return rO().GetAudioContextExtern()}get Kee(){return rO().GetDestinationNodeExtern()}get tie(){return iO().eie()}set tie(t){iO().iie(t)}get rie(){return iO().sie()}set rie(t){nO.ir(t),iO().nie(t)}oie(){iO().aie()}}}{const aO=self.Ee,hO="audio",uO=["interactive","balanced","playback"];aO.cY.Audio.Instance=class extends aO.yGt{constructor(t,e){super(t,hO),this.hie=0,this.uie=0,this.cie=[],this.lie=!0,this.fie=0,this.pie=0,this.die=!1,this.mie=1,this.yie=1,this.gie=[this.Fl.E9()/2,this.Fl.T9()/2,600],this.vie=[0,0,-1],this.wie=[0,1,0],this.Sie=600,this.bie=1e4,this._ie=1,this.Eie=null,this.Tie=-1,this.Pie=1,this.Aie=!1,this.Mie=0,this.Iie="suspended",this.Oie=0,this.Die=new Map,this.xie=0,this.Cie=0,this.Rie=new Map,this.Lie=new Map;let i="interactive";e&&(this.fie=e[0],this.pie=e[1],this.die=e[2],i=uO[e[3]],this.lie=e[4],this.mie=e[5],this.yie=e[6],this.gie[2]=e[7],this.Sie=e[8],this.bie=e[9],this._ie=e[10]),this.kie=[],this.Gie=[],this.Nie=[],this.MGt([["state",t=>this.jie(t)],["audiocontext-state",t=>this.Fie(t)],["fxstate",t=>this.Bie(t)],["trigger",t=>this.zie(t)],["buffer-metadata",t=>this.Uie(t)]]);const r=this.gY().wf();this.Zf=new aO.Jf(aO.Uf.Yf(r,"instancedestroy",t=>this.Hie(t.M0)),aO.Uf.Yf(r,"afterload",()=>this.Mst()),aO.Uf.Yf(r,"suspend",()=>this.Vie()),aO.Uf.Yf(r,"resume",()=>this.Wie()));const s=this.Fl.eJ(),n="Safari"===aO.Je.Ze,o=this.Fl.YKt()||"macos-wkwebview"===s,a="playable-ad-single-file"===s,h="cordova"===s&&"Android"===aO.Je.qe,u=n||o||a||h;this.Fl.rY(this.OGt("create-audio-context",{preloadList:this.Fl.OV().m8().map(t=>({originalUrl:t.y8,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.fie,latencyHint:i,panningModel:this.mie,distanceModel:this.yie,refDistance:this.Sie,maxDistance:this.bie,rolloffFactor:this._ie,listenerPos:this.gie,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.Mie=t.sampleRate,this.Iie=t.audioContextState,this.Oie=t.outputLatency})),this.kGt()}Ys(){this.Eie=null,super.Ys()}$ie(t){return this.lie?t.split(" ").filter(t=>!!t):t?[t]:[]}Yie(t,e){for(const i of e){let e=!1;for(const r of t)if(aO.Zr(r,i)){e=!0;break}if(!e)return!1}return!0}Jie(t,e){return this.Yie(t,this.$ie(e))}qee(t){this.KJ().qee(t)}Hie(t){this.Eie===t&&(this.Eie=null)}qie(t){return Math.pow(10,t/20)}Qie(t){const e=this.qie(t);return isFinite(e)?Math.max(Math.min(e,1),0):0}Zie(t){return Math.log(t)/Math.log(10)*20}Xie(t){return this.Zie(Math.max(Math.min(t,1),0))}Kie(){let t=0;const e=!!self.C3_GetAudioContextCurrentTime;return t=e?this.hie:this.uie,this.hie=0,this.uie=0,{tre:t,ere:e}}Vie(){this.die||this.IGt("set-suspended",{isSuspended:!0})}Wie(){this.die||this.IGt("set-suspended",{isSuspended:!1})}jie(t){const e=t.tickCount;this.Oie=t.outputLatency;const i=this.kie.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>e||-1===t.placeholder));this.kie=t.audioInstances,this.Nie=t.analysers,i.length>0&&aO.Ls(this.kie,i)}Uie(t){this.Rie.set(t.originalUrl,{duration:t.duration})}Fie(t){this.Iie=t.audioContextState}rdt(){return this.Fl.EJt()?"running":this.Iie}Bie(t){this.Gie=t.fxstate}ire(t){const e=this.$ie(t);for(const t of this.kie)if(this.Yie(t.tags,e))return t;return null}rre(t){const e=this.$ie(t);return this.kie.some(t=>this.Yie(t.tags,e)&&t.isPlaying)}sre(t,e,i,r,s){if(this.rre(e))return null;const n=this.Rie.get(t),o={tags:this.$ie(e),duration:n?n.duration:0,volume:s,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:r,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.kie.push(o),o}nre(t){const e=this.$ie(t);for(const t of this.kie)this.Yie(t.tags,e)&&(t.isPlaying=!1)}async zie(t){const e=t.type;this.cie=t.tags;const i=t.aiid;if("ended"===e){for(const t of this.kie)if(t.aiid===i){t.isPlaying=!1;break}await this.oY(aO.cY.Audio.hY.ore)}else"fade-ended"===e&&await this.oY(aO.cY.Audio.hY.are)}hre(t){return this.Jie(this.cie,t)}Ant(){const t={timeScale:this.Fl.BW(),gameTime:this.Fl.UKt(),instPans:this.ure(),tickCount:this.Fl.HKt()};if(this.Eie){const e=this.Eie.N$();this.gie[0]=e.rE(),this.gie[1]=e.oE(),t.listenerPos=this.gie,t.listenerOrientation=[...this.vie,...this.wie]}this.IGt("tick",t)}cre(t,e,i,r,s){if(0===i)return[t,e];const n=Math.sin(i),o=Math.cos(i),a=(t-=r)*n;return t=t*o-(e-=s)*n,e=e*o+a,[t+=r,e+=s]}ure(){return this.kie.filter(t=>-1!==t.uid).map(t=>this.Fl.C$(t.uid)).filter(t=>t).map(t=>{const e=t.N$(),i=e.F$().qq(),[r,s]=this.cre(e.rE(),e.oE(),-i,this.gie[0],this.gie[1]);return{uid:t.GZ(),x:r,y:s,z:e.QX(),angle:e.qq()-i}})}lre(t,e){for(const i of this.Nie)if(i.index===e&&aO.Zr(i.tag,t))return i;return null}fre(t){for(const e of this.$ie(t)){const t=e.toLowerCase();this.Die.set(t,(this.Die.get(t)||0)+1)}}eie(){return this.Aie}iie(t){t=!!t,this.Aie!==t&&(this.Aie=t,this.IGt("set-silent",{isSilent:t}))}sie(){return this.Pie}nie(t){this.Pie!==t&&(this.Pie=t,this.IGt("set-master-volume",{vol:t}))}aie(){this.IGt("stop-all");for(const t of this.kie)t.isPlaying=!1}pre(t){return!(t.hasOwnProperty("placeholder")||3===this.pie||t.isMusic&&1===this.pie||!t.isMusic&&2===this.pie)}yE(){return{isSilent:this.Aie,masterVolume:this.Pie,listenerZ:this.gie[2],listenerForwardVec:this.vie,listenerUpVec:this.wie,listenerUid:this.Eie?this.Eie.GZ():-1,remoteUrls:[...this.Lie.entries()],playing:this.kie.filter(t=>this.pre(t)),effects:this.Gie,analysers:this.Nie}}gE(t){if(this.Aie=t.isSilent,this.Pie=t.masterVolume,this.gie[2]=t.listenerZ,this.Eie=null,this.Tie=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.vie=t.listenerForwardVec:this.vie=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.wie=t.listenerUpVec:this.wie=[0,1,0],this.Lie.clear(),t.remoteUrls)for(const[e,i]of t.remoteUrls)this.Lie.set(e,i);this.kie=t.playing;for(const t of this.kie)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Gie=t.effects,this.Nie=t.analysers}Mst(){if(-1!==this.Tie&&(this.Eie=this.Fl.C$(this.Tie),this.Tie=-1,this.Eie)){const t=this.Eie.N$();this.gie[0]=t.rE(),this.gie[1]=t.oE()}for(const t of this.kie){const e=this.Fl.OV().d8(t.bufferOriginalUrl);e?(t.bufferUrl=e.url,t.bufferType=e.type):t.bufferUrl=null}for(const t of Object.values(this.Gie))for(const e of t)if(e.hasOwnProperty("bufferOriginalUrl")){const t=this.Fl.OV().d8(e.bufferOriginalUrl);t&&(e.bufferUrl=t.url,e.bufferType=t.type)}this.IGt("load-state",{saveLoadMode:this.pie,timeScale:this.Fl.BW(),gameTime:this.Fl.UKt(),listenerPos:this.gie,listenerOrientation:[...this.vie,...this.wie],isSilent:this.Aie,masterVolume:this.Pie,playing:this.kie.filter(t=>null!==t.bufferUrl),effects:this.Gie})}FGt(){const t=[];for(const[e,i]of Object.entries(this.Gie))t.push({name:"$"+e,value:i.map(t=>t.type).join(", ")});const e="plugins.audio.debugger";return[{title:e+".tag-effects",properties:t},{title:e+".currently-playing",properties:[{name:e+".currently-playing-count",value:this.kie.length},...this.kie.map((t,e)=>({name:"$#"+e,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self.Ee.cY.Audio.hY={ore(t){return this.hre(t)},are(t){return this.hre(t)},dre(){return this.Cie===this.xie},mre:()=>!0,yre(){return this.eie()},gre(){for(const t of this.kie)if(t.isPlaying)return!0;return!1},vre(t){return this.rre(t)}};{const cO=self.Ee,lO=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];cO.cY.Audio.Ypt={Play(t,e,i,r,s){const n=cO.cY.Audio.Ypt.wre.call(this,t,e,i,r,s);return this.qee(n),n},sdt(t,e,i,r){cO.cY.Audio.Ypt.wre.call(this,t,0,e,0,i,r)},async wre(t,e,i,r,s,n){if(this.Aie)return;const o=t[1],a=this.Fl.OV().d8(t[0]);if(!a)return;const{tre:h,ere:u}=this.Kie(),c=this.sre(t[0],s,o,0!==e,this.Qie(i));try{await this.OGt("play",{originalUrl:t[0],url:a.url,type:a.type,isMusic:o,tags:this.$ie(s),isLooping:0!==e,vol:this.Qie(i),stereoPan:cO.Xs(r/100,-1,1),pos:n||0,off:h,trueClock:u})}finally{c&&(c.placeholder=this.Fl.HKt())}},async Sre(t,e,i,r,s,n,o,a,h,u,c){if(this.Aie)return;const l=t[1],f=this.Fl.OV().d8(t[0]);if(!f)return;const{tre:p,ere:d}=this.Kie(),m=this.sre(t[0],c,l,0!==e,this.Qie(i));try{await this.OGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:l,tags:this.$ie(c),isLooping:0!==e,vol:this.Qie(i),pos:0,off:p,trueClock:d,panning:{x:r,y:s,z:n,angle:cO.tn(o),innerAngle:cO.tn(a),outerAngle:cO.tn(h),outerGain:this.Qie(u)}})}finally{m&&(m.placeholder=this.Fl.HKt())}},async bre(t,e,i,r,s,n,o,a){if(this.Aie)return;if(!r)return;const h=r.wRt();if(!h||!h.N$())return;const u=h.N$(),c=u.F$().qq(),[l,f]=this.cre(u.rE(),u.oE(),-c,this.gie[0],this.gie[1]),p=t[1],d=this.Fl.OV().d8(t[0]);if(!d)return;const{tre:m,ere:y}=this.Kie(),g=this.sre(t[0],a,p,0!==e,this.Qie(i));try{await this.OGt("play",{originalUrl:t[0],url:d.url,type:d.type,isMusic:p,tags:this.$ie(a),isLooping:0!==e,vol:this.Qie(i),pos:0,off:m,trueClock:y,panning:{x:l,y:f,z:u.QX(),angle:u.qq()-c,innerAngle:cO.tn(s),outerAngle:cO.tn(n),outerGain:this.Qie(o),uid:h.GZ()}})}finally{g&&(g.placeholder=this.Fl.HKt())}},async _re(t,e,i,r,s,n){if(this.Aie)return;const o=1===t,a=this.Fl.OV().d8(e)||this.Lie.get(e.toLowerCase());if(!a)return;const{tre:h,ere:u}=this.Kie(),c=this.sre(e,n,o,0!==i,this.Qie(r));try{await this.OGt("play",{originalUrl:e,url:a.url,type:a.type,isMusic:o,tags:this.$ie(n),isLooping:0!==i,vol:this.Qie(r),stereoPan:cO.Xs(s/100,-1,1),pos:0,off:h,trueClock:u})}finally{c&&(c.placeholder=this.Fl.HKt())}},async Ere(t,e,i,r,s,n,o,a,h,u,c,l){if(this.Aie)return;const f=1===t,p=this.Fl.OV().d8(e)||this.Lie.get(e.toLowerCase());if(!p)return;const{tre:d,ere:m}=this.Kie(),y=this.sre(e,l,f,0!==i,this.Qie(r));try{await this.OGt("play",{originalUrl:e,url:p.url,type:p.type,isMusic:f,tags:this.$ie(l),isLooping:0!==i,vol:this.Qie(r),pos:0,off:d,trueClock:m,panning:{x:s,y:n,z:o,angle:cO.tn(a),innerAngle:cO.tn(h),outerAngle:cO.tn(u),outerGain:this.Qie(c)}})}finally{y&&(y.placeholder=this.Fl.HKt())}},async Tre(t,e,i,r,s,n,o,a,h){if(this.Aie)return;if(this.Aie)return;if(!s)return;const u=s.wRt();if(!u||!u.N$())return;const c=u.N$(),l=c.F$().qq(),[f,p]=this.cre(c.rE(),c.oE(),-l,this.gie[0],this.gie[1]),d=1===t,m=this.Fl.OV().d8(e)||this.Lie.get(e.toLowerCase());if(!m)return;const{tre:y,ere:g}=this.Kie(),v=this.sre(e,h,d,0!==i,this.Qie(r));try{await this.OGt("play",{originalUrl:e,url:m.url,type:m.type,isMusic:d,tags:this.$ie(h),isLooping:0!==i,vol:this.Qie(r),pos:0,off:y,trueClock:g,panning:{x:f,y:p,z:c.QX(),angle:c.qq()-l,innerAngle:cO.tn(n),outerAngle:cO.tn(o),outerGain:this.Qie(a),uid:u.GZ()}})}finally{v&&(v.placeholder=this.Fl.HKt())}},Pre(t,e){this.IGt("set-looping",{tags:this.$ie(t),isLooping:0===e})},Are(t,e){this.IGt("set-muted",{tags:this.$ie(t),isMuted:0===e})},edt(t,e){this.IGt("set-volume",{tags:this.$ie(t),vol:this.Qie(e)})},Mre(t,e,i,r){this.IGt("fade-volume",{tags:this.$ie(t),vol:this.Qie(e),duration:i,stopOnEnd:0===r})},Ire(t,e){this.IGt("set-stereo-pan",{tags:this.$ie(t),p:cO.Xs(e/100,-1,1)})},async Ore(t){const e=t[1],i=this.Fl.OV().d8(t[0]);i&&(this.xie++,await this.OGt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:e}),this.Cie++)},async Dre(t,e){const i=1===t,r=this.Fl.OV().d8(e)||this.Lie.get(e.toLowerCase());r&&(this.xie++,await this.OGt("preload",{originalUrl:e,url:r.url,type:r.type,isMusic:i}),this.Cie++)},C1(t,e){this.IGt("set-playback-rate",{tags:this.$ie(t),rate:Math.max(e,0)})},b1(t){this.nre(t),this.IGt("stop",{tags:this.$ie(t)})},xre(){this.aie()},Cre(t,e){this.IGt("set-paused",{tags:this.$ie(t),paused:0===e})},Rre(t,e){this.IGt("seek",{tags:this.$ie(t),pos:e})},Lre(t){2===t&&(t=this.eie()?1:0),this.iie(0===t)},kre(t){const e=this.Qie(t);this.nie(e)},Gre(t,e,i,r,s,n,o){const a=lO[e];this.fre(t),this.IGt("add-effect",{type:"filter",tags:this.$ie(t),params:[a,i,r,s,n,cO.Xs(o/100,0,1)]})},Nre(t,e,i,r){this.fre(t),this.IGt("add-effect",{type:"delay",tags:this.$ie(t),params:[e,this.Qie(i),cO.Xs(r/100,0,1)]})},jre(t,e,i,r,s,n){this.fre(t),this.IGt("add-effect",{type:"flanger",tags:this.$ie(t),params:[e/1e3,i/1e3,r,s/100,cO.Xs(n/100,0,1)]})},Fre(t,e,i,r,s,n,o){this.fre(t),this.IGt("add-effect",{type:"phaser",tags:this.$ie(t),params:[e,i,r,s,n,cO.Xs(o/100,0,1)]})},Bre(t,e,i,r){const s=this.Fl.OV().d8(e[0]);s&&(this.fre(t),this.IGt("add-effect",{type:"convolution",tags:this.$ie(t),bufferOriginalUrl:e[0],bufferUrl:s.url,bufferType:s.type,params:[0===i,cO.Xs(r/100,0,1)]}))},zre(t,e){this.fre(t),this.IGt("add-effect",{type:"gain",tags:this.$ie(t),params:[this.Qie(e)]})},Ure(t,e){this.fre(t),this.IGt("add-effect",{type:"stereopan",tags:this.$ie(t),params:[cO.Xs(e/100,-1,1)]})},Hre(t){this.fre(t),this.IGt("add-effect",{type:"gain",tags:this.$ie(t),params:[0]})},Vre(t,e,i){this.fre(t),this.IGt("add-effect",{type:"tremolo",tags:this.$ie(t),params:[e,cO.Xs(i/100,0,1)]})},Wre(t,e,i){this.fre(t),this.IGt("add-effect",{type:"ringmod",tags:this.$ie(t),params:[e,cO.Xs(i/100,0,1)]})},$re(t,e,i,r,s,n){this.fre(t),this.IGt("add-effect",{type:"distortion",tags:this.$ie(t),params:[this.qie(e),this.qie(i),r,this.qie(s),cO.Xs(n/100,0,1)]})},Yre(t,e,i,r,s,n){this.fre(t),this.IGt("add-effect",{type:"compressor",tags:this.$ie(t),params:[e,i,r,s/1e3,n/1e3]})},Jre(t,e,i){this.fre(t),this.IGt("add-effect",{type:"analyser",tags:this.$ie(t),params:[e,i]})},qre(t){const e=this.$ie(t);for(const t of e)this.Die.set(t.toLowerCase(),0);this.IGt("remove-effects",{tags:e}),this.Gie={}},G0(t,e,i,r,s,n){this.IGt("set-effect-param",{tags:this.$ie(t),index:Math.floor(e),param:i,value:r,ramp:s,time:n})},Qre(t){if(!t)return;const e=t.wRt();e&&e.N$()&&(this.Eie=e)},Zre(t){this.gie[2]=t},Xre(t,e,i,r,s,n){this.vie[0]=t,this.vie[1]=e,this.vie[2]=-i,this.wie[0]=r,this.wie[1]=s,this.wie[2]=-n},Kre(t){this.hie=Math.max(t,0),this.uie=Math.max(t-performance.now()/1e3,0)},tse(t){const e=t[1],i=this.Fl.OV().d8(t[0]);i&&this.IGt("unload",{url:i.url,type:i.type,isMusic:e})},ese(t,e){const i=1===t,r=this.Fl.OV().d8(e)||this.Lie.get(e.toLowerCase());r&&this.IGt("unload",{url:r.url,type:r.type,isMusic:i})},ise(){this.IGt("unload-all")},rse(t,e,i){this.Lie.set(i.toLowerCase(),{url:t,type:e})}}}{const fO=self.Ee;fO.cY.Audio.Jpt={sse(t){const e=this.ire(t);return e?e.duration:0},Zpt(t){const e=this.ire(t);return e?e.playbackTime:0},idt(t){const e=this.ire(t);return e?e.playbackRate:0},Xpt(t){const e=this.ire(t);return e?this.Xie(e.volume):0},nse(){return this.Xie(this.sie())},ose(t){return this.Die.get(t.toLowerCase())||0},ase(t,e){const i=this.lre(t,Math.floor(e));return i?i.binCount:0},hse(t,e,i){const r=this.lre(t,Math.floor(e));return r?(i=Math.floor(i))<0||i>=r.binCount?0:r.freqBins[i]:0},cse(t,e){const i=this.lre(t,Math.floor(e));return i?i.peak:0},lse(t,e){const i=this.lre(t,Math.floor(e));return i?i.rms:0},fse(){return this.Mie},pse:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,dse(){return this.Oie},mse(t,e){return 0==(t=fO.Xs(+t,0,100)/100)?-1/0:t<.1?this.Xie(fO.Mt(0,this.Qie(e),10*t)):fO.Mt(e,0,(t-.1)/.9)}}}{const pO=self.Ee;pO.cY.Ze=class extends pO.Tkt{constructor(t){super(t)}Ys(){super.Ys()}}}{const dO=self.Ee;dO.cY.Ze.NFt=class extends dO.lGt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}}}{const mO=self.Ee,yO="browser";mO.cY.Ze.Instance=class extends mO.yGt{constructor(t,e){super(t,yO),this.yse="",this.gse=!1,this.vse="",this.wse="",this.Sse=!1,this.bse=0,this._se=0,this.Ese=0,this.Tse=0,this.Pse=!1,this.Ase=!1,this.Mse=new Map,this.Ise=!1,this.Ose="",this.Dse=!1,this.MGt([["online-state",t=>this.xse(t)],["backbutton",()=>this.Cse()],["sw-message",t=>this.Rse(t)],["hashchange",t=>this.Lse(t)],["install-available",()=>this.kse()],["app-installed",t=>this.Gse(t)],["fullscreenerror",()=>this.aJt()]]);const i=this.gY().wf();this.Zf=new mO.Jf(mO.Uf.Yf(i,"afterfirstlayoutstart",()=>this.Nse()),mO.Uf.Yf(i,"window-resize",()=>this.nJt()),mO.Uf.Yf(i,"window-focus",()=>this.rXt()),mO.Uf.Yf(i,"window-blur",()=>this.iXt()),mO.Uf.Yf(i,"suspend",()=>this.Vie()),mO.Uf.Yf(i,"resume",()=>this.Wie()),mO.Uf.Yf(i,"windowmaximize",()=>this.jse()),mO.Uf.Yf(i,"windowminimize",()=>this.Fse())),this.Fl.rY(this.OGt("get-initial-state",{exportType:this.Fl.eJ()}).then(t=>{this.yse=t.location,this.gse=t.isOnline,this.vse=t.referrer,this.wse=t.title,this.Sse=t.isCookieEnabled,this.bse=t.screenWidth,this._se=t.screenHeight,this.Ese=t.windowOuterWidth,this.Tse=t.windowOuterHeight,this.Pse=t.windowHasFocus,this.Ase=t.isConstructArcade}))}Ys(){super.Ys()}Nse(){this.IGt("ready-for-sw-messages")}async xse(t){const e=!!t.isOnline;this.gse!==e&&(this.gse=e,this.gse?await this.oY(mO.cY.Ze.hY.Bse):await this.oY(mO.cY.Ze.hY.zse))}async nJt(){await this.oY(mO.cY.Ze.hY.Use)}async aJt(){await this.oY(mO.cY.Ze.hY.Hse)}async rXt(){this.Pse=!0,await this.oY(mO.cY.Ze.hY.Vse)}async iXt(){this.Pse=!1,await this.oY(mO.cY.Ze.hY.Wse)}async jse(){await this.oY(mO.cY.Ze.hY.$se)}async Fse(){await this.oY(mO.cY.Ze.hY.Yse)}Vie(){this.hX(mO.cY.Ze.hY.Jse)}Wie(){this.hX(mO.cY.Ze.hY.qse)}async Cse(){await this.oY(mO.cY.Ze.hY.Qse)}Rse(t){const e=t.type;"downloading-update"===e?this.hX(mO.cY.Ze.hY.Zse):"update-ready"===e||"update-pending"===e?this.hX(mO.cY.Ze.hY.Xse):"offline-ready"===e&&this.hX(mO.cY.Ze.hY.Kse)}Lse(t){this.yse=t.location,this.hX(mO.cY.Ze.hY.tne)}kse(){this.Ise=!0,this.hX(mO.cY.Ze.hY.ene)}Gse(t){this.Ise=!1,this.hX(mO.cY.Ze.hY.ine)}rne(){return this.Dse}sne(t){t=!!t,this.Dse!==t&&(this.Dse=t,this.IGt("set-warn-on-close",{enabled:t}))}FGt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.gse},{name:t+".is-fullscreen",value:this.Fl.I$().jJt()}]}]}}}{const gO=self.Ee;gO.cY.Ze.hY={nne(){return this.gse},Bse:()=>!0,zse:()=>!0,Use:()=>!0,Hse:()=>!0,Vse:()=>!0,Wse:()=>!0,one(){return this.Pse},ane(){return this.Sse},hne(){return this.Fl.I$().jJt()},Qse:()=>!0,une(t){return(this.Fl.I$().O2()<=this.Fl.I$().D2()?0:1)===t},Zse:()=>!0,Xse:()=>!0,Kse:()=>!0,tne:()=>!0,ene:()=>!0,cne(){return this.Ise},lne(t){switch(t){case 0:return"accepted"===this.Ose;case 1:return"dismissed"===this.Ose;case 2:return"error"===this.Ose;case 3:return!0;default:return!1}},ine:()=>!0,fne(t){const e=this.Fl.I$().BJt();switch(t){case 0:return"browser"===e;case 1:return"minimal-ui"===e;case 2:return"standalone"===e;case 3:return"fullscreen"===e;default:return!1}},pne(){return this.rne()},$se:()=>!0,Yse:()=>!0,dne(){return!this.Fl.MW()},Jse:()=>!0,qse:()=>!0,mne:()=>!1,yne:()=>!1,gne:()=>!1,vne:()=>!1,wne:()=>!1,Sne:()=>!0,bne:()=>!0}}{const C3=self.Ee,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.cY.Ze.Ypt={_ne(t){this.IGt("alert",{message:t.toString()})},Ene(){this.Ase||(this.Fl.yX()?self.gX.Tne():this.IGt("close"))},Pne(){this.IGt("set-focus",{isFocus:!0})},Ane(){this.IGt("set-focus",{isFocus:!1})},Mne(){this.Ase||this.IGt("navigate",{type:"back"})},Ine(){this.Ase||this.IGt("navigate",{type:"forward"})},One(){},Dne(){this.Ase||(this.Fl.yX()?this.Fl.mXt({type:"reload"}):this.IGt("navigate",{type:"reload"}))},xne(t,e){this.DGt("navigate",{type:"url",url:t,target:e,exportType:this.Fl.eJ()})},Cne(t,e){this.DGt("navigate",{type:"new-window",url:t,tag:e,exportType:this.Fl.eJ()})},Rne(t,e){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.F$t.$Jt(t);this.Fl.I$().UJt(i),this.DGt("request-fullscreen",{navUI:e})},Lne(){this.DGt("exit-fullscreen")},kne(t){const e=t.split(",");for(let t=0,i=e.length;t<i;++t)e[t]=parseInt(e[t],10);this.DGt("vibrate",{pattern:e})},D$(t,e){if(!t||!e)return;const i=this.Fl.OV().EY(t);this.Fl.D$(i,e)},Gne(t,e,i){if(!i)return;const r=`data:${e},${encodeURIComponent(t)}`;this.Fl.D$(r,i)},Nne(t,e){e=e.toString(),0===t?console.log(e):1===t?console.warn(e):2===t&&console.error(e)},jne(t){console.group(t)},Fne(){console.groupEnd()},Bne(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},zne(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const e=ORIENTATIONS[t];this.DGt("lock-orientation",{orientation:e})},Une(){this.DGt("unlock-orientation")},LY(t){this.Fl.OV().LY(t)},async Hne(t,e,i,r){await this.OGt("set-document-css-style",{prop:C3.va(t),value:e,selector:i,"is-all":0!==r})},async Vne(t,e,i){const r=await this.OGt("get-document-css-style",{prop:t,selector:e});r.isOk&&this.Mse.set(i.toLowerCase(),r.result.trim())},Wne(t){this.IGt("set-hash",{hash:t})},$ne(t,e){this.IGt("set-window-size",{windowWidth:t,windowHeight:e})},Yne(t,e){this.IGt("set-window-position",{windowX:t,windowY:e})},async Jne(){const t=await this.OGt("request-install");this.Ose=t.result,this.hX(C3.cY.Ze.hY.lne)},qne(t){this.sne(t)},Qne(){this.Fl.dXt({type:"maximize-window"})},Zne(){this.Fl.dXt({type:"minimize-window"})},Xne(){this.Fl.dXt({type:"restore-window"})}}}{const C3=self.Ee;C3.cY.Ze.Jpt={URL(){return this.Fl.YV()?this.yse:location.toString()},Kne(){return this.Fl.YV()?new URL(this.yse).protocol:location.protocol},toe(){return this.Fl.YV()?new URL(this.yse).hostname:location.hostname},Port(){return this.Fl.YV()?new URL(this.yse).port:location.port},eoe(){return this.Fl.YV()?new URL(this.yse).pathname:location.pathname},ioe(){return this.Fl.YV()?new URL(this.yse).hash:location.hash},We(){return this.Fl.YV()?new URL(this.yse).search:location.search},roe(t){const e=this.Fl.YV()?new URL(this.yse).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(e);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},soe(){return this.vse},noe(){return this.wse},ooe:()=>navigator.language,Je:()=>navigator.platform,aoe:()=>navigator.userAgent,hoe(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.Mse.get(t)||""},uoe:()=>navigator.appName,coe:()=>navigator.appVersion,loe:()=>navigator.product,foe:()=>navigator.vendor,poe:()=>1,doe:()=>1/0,moe(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},yoe:()=>self.devicePixelRatio,goe(){return this.bse},voe(){return this._se},woe(){return this.Fl.I$().O2()},Soe(){return this.Fl.I$().D2()},boe(){return this.Ese},_oe(){return this.Ese},Eoe(){return this.Fl.I$().BJt()},Toe(){return this.Ose}}}{const vO=self.Ee;vO.xgt.Poe=class extends vO.MNt{constructor(t){super(t)}Ys(){super.Ys()}}}{const wO=self.Ee;wO.xgt.Poe.NFt=class extends wO.CNt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}}}{const SO=self.Ee;SO.xgt.Poe.Instance=class extends SO.LNt{constructor(t,e){super(t),this.Aoe=null,this.Moe=-1,this.Ioe="",this.Ooe=new Set,this.Doe=0,this.xoe=0,this.Coe=0,this.Roe=0,this.Loe=0,this.koe=0,this.Goe=0,this.Noe=0,this.joe=0,this.Foe=0,this.Boe=!1,e&&(this.Boe=e[0]);const i=this.Fl.wf();this.Zf=new SO.Jf(SO.Uf.Yf(i,"instancedestroy",t=>this.Hie(t.M0)),SO.Uf.Yf(i,"afterload",t=>this.Mst()))}Ys(){this.Aoe=null,super.Ys()}zoe(t){t?(this.Aoe=t,this.NGt()):(this.Aoe=null,this.SGt())}Uoe(t,e,i){if(!t)return;const r=t.wRt(this.hi);if(!r)return;this.Ioe=e,this.zoe(r);const s=this.hi.N$(),n=r.N$();if("properties"===this.Ioe){const t=this.Ooe;t.clear();for(const e of i)t.add(e);this.Roe=s.rE()-n.rE(),this.Loe=s.oE()-n.oE(),this.Noe=s.qq()-n.qq(),this.Foe=s.qq(),this.joe=s.hE()-n.hE(),t.has("x")&&t.has("y")&&(this.xoe=SO.hn(n.rE(),n.oE(),s.rE(),s.oE())-n.qq(),this.Doe=SO.nn(n.rE(),n.oE(),s.rE(),s.oE())),t.has("width-abs")?this.koe=s.Eg()-n.Eg():t.has("width-scale")&&(this.koe=s.Eg()/n.Eg()),t.has("height-abs")?this.Goe=s.Pg()-n.Pg():t.has("height-scale")&&(this.Goe=s.Pg()/n.Pg())}else this.Doe=SO.nn(n.rE(),n.oE(),s.rE(),s.oE())}yE(){const t=this.Ooe,e=this.Ioe,i={uid:this.Aoe&&!this.Aoe.j$()?this.Aoe.GZ():-1,m:e,d:this.Boe};return"rope"===e||"bar"===e?i.pd=this.Doe:"properties"===e&&(i.ps=[...this.Ooe],t.has("imagepoint")?i.ip=this.Coe:t.has("x")&&t.has("y")?(i.pa=this.xoe,i.pd=this.Doe):(t.has("x")&&(i.dx=this.Roe),t.has("y")&&(i.dy=this.Loe)),t.has("angle")&&(i.da=this.Noe,i.lka=this.Foe),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.koe),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Goe),t.has("z")&&(i.dz=this.joe)),i}gE(t){const e=t.m,i=this.Ooe;if(i.clear(),this.Moe=t.uid,"number"!=typeof e){if(this.Ioe=e,t.hasOwnProperty("d")&&(this.Boe=!!t.d),"rope"===e||"bar"===e)this.Doe=t.pd;else if("properties"===e){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.Coe=t.ip:i.has("x")&&i.has("y")?(this.xoe=t.pa,this.Doe=t.pd):(i.has("x")&&(this.Roe=t.dx),i.has("y")&&(this.Loe=t.dy)),i.has("angle")&&(this.Noe=t.da,this.Foe=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.koe=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Goe=t.dh),i.has("z")&&(this.joe=t.dz)}}else this.Hoe(t)}Hoe(t){const e=this.Ooe,i=t.msa,r=t.tsa,s=t.pa,n=t.pd;switch(t.m){case 0:this.Ioe="properties",e.add("x").add("y").add("angle"),this.xoe=s,this.Doe=n,this.Noe=i-r,this.Foe=t.lka;break;case 1:this.Ioe="properties",e.add("x").add("y"),this.xoe=s,this.Doe=n;break;case 2:this.Ioe="properties",e.add("angle"),this.Noe=i-r,this.Foe=t.lka;break;case 3:this.Ioe="rope",this.Doe=t.pd;break;case 4:this.Ioe="bar",this.Doe=t.pd}}Mst(){-1===this.Moe?this.zoe(null):(this.zoe(this.Fl.C$(this.Moe)),this.Moe=-1)}Hie(t){this.Aoe===t&&(this.zoe(null),this.Boe&&this.Fl.Y$(this.hi))}LGt(){const t=this.Aoe;if(!t||t.j$())return;const e=t.N$(),i=this.hi.N$(),r=this.Ioe;let s=!1;if("rope"===r||"bar"===r){const t=SO.nn(i.rE(),i.oE(),e.rE(),e.oE());if(t>this.Doe||"bar"===r&&t<this.Doe){const t=SO.hn(e.rE(),e.oE(),i.rE(),i.oE());i.jX(e.rE()+Math.cos(t)*this.Doe,e.oE()+Math.sin(t)*this.Doe),s=!0}}else{const r=this.Ooe;let n=0;if(r.has("imagepoint")){const[e,r]=t.UCt(this.Coe);i.BCt(e,r)||(i.jX(e,r),s=!0)}else if(r.has("x")&&r.has("y")){const t=e.rE()+Math.cos(e.qq()+this.xoe)*this.Doe,r=e.oE()+Math.sin(e.qq()+this.xoe)*this.Doe;i.BCt(t,r)||(i.jX(t,r),s=!0)}else n=e.rE()+this.Roe,r.has("x")&&n!==i.rE()&&(i.sE(n),s=!0),n=e.oE()+this.Loe,r.has("y")&&n!==i.oE()&&(i.aE(n),s=!0);r.has("angle")&&(this.Foe!==i.qq()&&(this.Noe=SO.Ks(this.Noe+(i.qq()-this.Foe))),n=SO.Ks(e.qq()+this.Noe),n!==i.qq()&&(i.Jq(n),s=!0),this.Foe=i.qq()),r.has("width-abs")&&(n=e.Eg()+this.koe,n!==i.Eg()&&(i.cg(n),s=!0)),r.has("width-scale")&&(n=e.Eg()*this.koe,n!==i.Eg()&&(i.cg(n),s=!0)),r.has("height-abs")&&(n=e.Pg()+this.Goe,n!==i.Pg()&&(i.lg(n),s=!0)),r.has("height-scale")&&(n=e.Pg()*this.Goe,n!==i.Pg()&&(i.lg(n),s=!0)),r.has("z")&&(n=e.hE()+this.joe,n!==i.hE()&&(i.uE(n),this.Fl.W$()))}s&&i.NX()}FGt(){const t="behaviors.pin.debugger";return[{title:"$"+this.A0().Dl(),properties:[{name:t+".is-pinned",value:!!this.Aoe},{name:t+".pinned-uid",value:this.Aoe?this.Aoe.GZ():0}]}]}}}self.Ee.xgt.Poe.hY={Voe(){return!!this.Aoe},Woe(){return this.Boe}},self.Ee.xgt.Poe.Ypt={$oe(t,e){this.Uoe(t,0===e?"rope":"bar")},Yoe(t,e,i,r,s,n,o){const a=[];e&&a.push("x"),i&&a.push("y"),r&&a.push("angle"),o&&a.push("z"),1===s?a.push("width-abs"):2===s&&a.push("width-scale"),1===n?a.push("height-abs"):2===n&&a.push("height-scale"),0!==a.length&&this.Uoe(t,"properties",a)},Joe(t,e,i,r,s,n){const o=["imagepoint"];i&&o.push("angle"),n&&o.push("z"),1===r?o.push("width-abs"):2===r&&o.push("width-scale"),1===s?o.push("height-abs"):2===s&&o.push("height-scale"),this.Coe=e,this.Uoe(t,"properties",o)},qoe(t){"rope"!==this.Ioe&&"bar"!==this.Ioe||(this.Doe=Math.max(t,0))},Qoe(t){this.Boe=t},Zoe(){this.zoe(null),this.Ioe="",this.Ooe.clear(),this.Coe=""},Poe(t,e){switch(e){case 0:this.Uoe(t,"properties",["x","y","angle"]);break;case 1:this.Uoe(t,"properties",["x","y"]);break;case 2:this.Uoe(t,"properties",["angle"]);break;case 3:this.Uoe(t,"rope");break;case 4:this.Uoe(t,"bar")}}},self.Ee.xgt.Poe.Jpt={Xoe(){return this.Aoe?this.Aoe.GZ():-1}};{const bO=self.Ee;bO.xgt.Koe=class extends bO.MNt{constructor(t){super(t),this.tae=0,this.eae=0,this.iae=0,this.rae=0}Ys(){super.Ys()}sae(t){this.tae=t}nae(){return this.tae}oae(t){this.eae=t}aae(){return this.eae}hae(t){this.iae=t}uae(){return this.iae}cae(t){this.rae=t}lae(){return this.rae}}}{const _O=self.Ee;_O.xgt.Koe.NFt=class extends _O.CNt{constructor(t){super(t)}Ys(){super.Ys()}qkt(){}}}{const EO=self.Ee,TO=0;EO.xgt.Koe.Instance=class extends EO.LNt{constructor(t,e){super(t),this.cOt=!0,e&&(this.cOt=e[TO]),this.cOt&&this.NGt()}Ys(){super.Ys()}yE(){const t=this.E0();return{e:this.cOt,smg:t.nae(),ss:t.aae(),se:t.uae(),smd:t.lae()}}gE(t){const e=this.E0();e.sae(t.smg),e.oae(t.ss),e.hae(t.se),e.cae(t.smd),this.cOt=t.e,this.cOt?this.NGt():this.SGt()}sLt(t){this.cOt=!!t,this.cOt?this.NGt():this.SGt()}Dc(){return this.cOt}LGt(){if(!this.Dc())return;this.Fl.OW(this.hi);const t=this.E0(),e=t.cq();let i=0,r=0,s=0;for(const t of e){const e=t.Wzt(EO.xgt.Koe);if(!e||!e.y0().Dc())continue;const n=t.N$();i+=n.rE(),r+=n.oE(),++s}const n=this.hi.N$().g$(),o=this.Fl.LW();let a=0,h=0;if(o>=t.aae()&&o<t.uae()){let e=t.nae()*Math.min(this.Fl.BW(),1);0===t.lae()&&(e*=1-(o-t.aae())/(t.uae()-t.aae()));const i=this.Fl.f$()*Math.PI*2,r=this.Fl.f$()*e;a=Math.cos(i)*r,h=Math.sin(i)*r}n.Qq(i/s+a),n.Xq(r/s+h)}Ddt(t){if(t===TO)return this.cOt}Gdt(t,e){t===TO&&(this.cOt=!!e,this.cOt?this.NGt():this.SGt())}FGt(){return[{title:"$"+this.A0().Dl(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.Dc(),l8t:t=>this.sLt(t)}]}]}}}self.Ee.xgt.Koe.hY={Dc(){return this.Dc()}},self.Ee.xgt.Koe.Ypt={fae(t,e,i){const r=this.E0();r.sae(t),r.oae(this.Fl.LW()),r.hae(this.Fl.LW()+e),r.cae(i)},ekt(t){this.sLt(0!==t)}},self.Ee.xgt.Koe.Jpt={};{let PO=function(t){return"number"==typeof t?-t:t},AO=function(t,e){return"number"==typeof t&&"number"==typeof e},MO=function(t,e){return AO(t,e)?t+e:t},IO=function(t,e){return AO(t,e)?t-e:t},OO=function(t,e){return AO(t,e)?t*e:t},DO=function(t,e){return AO(t,e)?t/e:t},xO=function(t,e){return AO(t,e)?t%e:t},CO=function(t,e){return AO(t,e)?Math.pow(t,e):t},RO=function(t,e){if("string"==typeof t||"string"==typeof e){let i,r;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,r="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,i+r}return t&&e?1:0},LO=function(t,e){return AO(t,e)?t||e?1:0:t};unaryminus=PO,bothNumbers=AO,add=MO,subtract=IO,multiply=OO,divide=DO,mod=xO,pow=CO,and=RO,or=LO;const kO=self.Ee;self._Dt=[()=>3,t=>{const e=t.CDt(0);return()=>e.sDt()},()=>0,()=>1,()=>2,t=>{const e=t.CDt(0).XOt(),i=t.CDt(1).XOt(),r=t.CDt(2).bDt();return()=>e(i()/r.$lt(),1)},t=>{const e=t.CDt(0),i=t.CDt(1).XOt();return()=>e.sDt()/i(0)},t=>{const e=t.CDt(0).bDt();return()=>e.$lt()?"On":"Off"},()=>60,()=>"FirstTime",()=>"GameOver",()=>.8,()=>"inst",()=>"Sound",t=>{const e=t.CDt(0).bDt();return()=>e.$lt()?1:0},()=>"",t=>{const e=t.CDt(0);return()=>e.hDt()},()=>"Start",()=>"Stop",()=>"Level Progress",()=>"LevelProgress_0",()=>"LevelProgress_1",()=>"LevelProgress_2",t=>{const e=t.CDt(0).XOt();return()=>e()},()=>"Menu",()=>"GameMode",()=>"Levels",t=>{const e=t.CDt(0),i=t.CDt(1);return()=>e.hDt()?-1:i.hDt()},t=>{const e=t.CDt(0).XOt(),i=t.CDt(1);return()=>e()-i.sDt()},t=>{const e=t.CDt(0).XOt(),i=t.CDt(1).XOt(),r=t.CDt(2),s=t.CDt(3).bDt(),n=t.CDt(4).bDt(),o=t.CDt(5).bDt(),a=t.CDt(6).XOt();return()=>e(i(r.sDt()+(s.$lt()-n.$lt()),o.$lt()),a()/2)},t=>{const e=t.CDt(0).bDt();return()=>e.$lt()}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=globalThis.Ee;C32.cY.pae=class extends globalThis.s2{constructor(){super()}};var C33=globalThis.Ee;C33.cY.pae.NFt=class extends globalThis.f2{constructor(t){super(t)}d2(){}};var C34=globalThis.Ee;C34.cY.pae.Instance=class extends globalThis.tX{constructor(){super(),this.dae=C34.cY.pae.hY,this.actions=C34.cY.pae.Ypt,this.runtime.tW.iY(this.mae()),this.runtime.tW.iY(this.yae()),this.gae=0,this.vae=[],this.wae=null,this.Sae=!1,this.bae=null,this._ae=[],this.Eae=[],this.Tae=[],this.Pae=[],this.Aae={},this.Mae=!1,this.Iae={};let t=this;this.Oae=function(t){return"[object Object]"===Object.prototype.toString.call(t)},this.Dae=["__proto__","prototype","constructor"],this.xae=function(e){return-1===t.Dae.indexOf(e)},this.Cae=function(e,i){e.indexOf("[")>=0&&(e=e.replace(/\[/g,i).replace(/]/g,""));const r=e.split(i);if(r.filter(t.xae).length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r},this.hasOwnProperty=Object.prototype.hasOwnProperty,this.Rae=function(e,i,r,s){let n,o,a,h;if(void 0===i)return r;for(a=t.Cae(e,"."),n=0;n<a.length;n++){if(h=a[n],n===a.length-1)if(s&&t.Oae(i)&&t.Oae(r[h]))for(o in i)t.hasOwnProperty.call(i,o)&&(r[h][o]=i[o]);else if(s&&Array.isArray(r[h])&&Array.isArray(i))for(let t=0;t<i.length;t++)r[a[n]].push(i[t]);else r[h]=i;else t.hasOwnProperty.call(r,h)&&(t.Oae(r[h])||Array.isArray(r[h]))||(/^\d+$/.test(a[n+1])?r[h]=[]:r[h]={});r=r[h]}return r}}mae(){return new Promise(t=>{const e=document.createElement("script");e.src="https://bridge.playgama.com/v1/stable/playgama-bridge.js",document.body.appendChild(e);let i=!1;const r=setTimeout(()=>{i||e.onerror()},2e3);e.onload=function(){i=!0,clearTimeout(r),t()},e.onerror=function(){i=!0,clearTimeout(r);const e=document.createElement("script");e.textContent='(()=>{var t={258:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return a(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,a(r,t).push(n),r;function n(){i.call(r,t,n),e.apply(this,arguments)}},off:i,emit:function(t,e){var r=this,n=a(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,i)}))}return!!n.length}};function o(t){for(var e in n)t[e]=n[e];return t}function i(t,e){var n,o=this;if(arguments.length){if(e){if(n=a(o,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[r][t]=n}}else if((n=o[r])&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(t,e,n){if(!n||t[r]){var o=t[r]||(t[r]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit",XIAOMI:"xiaomi"},e={CORE:"core",PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements",ANALYTICS:"analytics"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed",ORIENTATION_STATE_CHANGED:"orientation_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={PORTRAIT:"portrait",LANDSCAPE:"landscape"},p="bridge-orientation-overlay",h={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},d="not_available",y="in_game",m="native",v={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},_={SDK_NOT_INITIALIZED:{message:"Before using the SDK you must initialize it"},STORAGE_NOT_SUPPORTED:{message:"Storage not supported"},STORAGE_NOT_AVAILABLE:{message:"Storage not available"},GAME_PARAMS_NOT_FOUND:{message:"Game params are not found"},INVITE_FRIENDS_MESSAGE_LENGTH_ERROR:{message:"Message is too long"}};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}function E(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function P(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,A(t,e,"set"),r),r}function w(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,A(t,e,"get"))}function A(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var O=new WeakMap,T=new WeakMap,k=new WeakMap;const D=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,O,{writable:!0,value:void 0}),E(this,T,{writable:!0,value:void 0}),E(this,k,{writable:!0,value:void 0}),P(this,O,new Promise((function(t,r){P(e,T,t),P(e,k,r)})))}var e,r;return e=t,(r=[{key:"promise",get:function(){return w(this,O)}},{key:"resolve",value:function(t){w(this,T).call(this,t)}},{key:"reject",value:function(t){w(this,k).call(this,t)}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var I=r(258),R=r.n(I);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function N(t,e,r){return e&&j(t.prototype,e),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:String(e)}const G=N((function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=void 0,(n=C(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=e})),M="1.27.0";function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F(n.key),n)}}function F(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:String(e)}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}function V(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function z(t,e){Y(t,e),e.add(t)}function Z(t,e,r){Y(t,e),e.set(t,r)}function Y(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,X(t,e,"get"))}function K(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function q(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,X(t,e,"set"),r),r}function X(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Q=new WeakMap,$=new WeakMap,tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=new WeakSet,ot=new WeakSet,it=new WeakSet,at=new WeakSet,st=new WeakSet;function ct(){if(0!==J(this,Q).length){var e=function(t){if(Array.isArray(t))return x(t)}(n=J(this,Q))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();q(this,Q,[]),q(this,$,null);var r="https://playgama.com/api/events/v2/bridge/analytics";this._platformBridge.platformId===t.DISCORD&&(r="/playgama/api/events/v2/bridge/analytics"),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})}).then((function(t){if(!t.ok)throw new Error("Network response was not ok: ".concat(t.status))})).catch((function(t){console.error("Error sending analytics events:",t)}))}var n}function ut(){var e,r=this._platformBridge.options;switch(this._platformBridge.platformId){case t.GAME_DISTRIBUTION:case t.Y8:e=r.gameId;break;case t.HUAWEI:e=r.appId;break;case t.MSN:e=r.gameId;break;case t.DISCORD:e=r.appId;break;case t.GAMEPUSH:e=r.projectId;break;default:e=null}return e||(e=K(this,it,lt).call(this,window.location.href)),e}function lt(e){try{var r=new URL(e).pathname.split("/").filter(Boolean);switch(this._platformBridge.platformId){case t.YANDEX:var n=r.indexOf("app"),o=-1!==n?r[n+1]:null;if(o)return"Yandex ".concat(o);break;case t.LAGGED:var i=r.indexOf("g"),a=-1!==i?r[i+1]:null;if(a)return K(this,at,ft).call(this,a);break;case t.CRAZY_GAMES:var s=r.indexOf("game"),c=-1!==s?r[s+1]:null;if(c)return K(this,at,ft).call(this,c);break;case t.PLAYGAMA:var u=r.indexOf("game"),l=-1!==u?r[u+1]:null;if(l)return K(this,at,ft).call(this,l);var f=r[0];if("string"==typeof f&&/^[a-z0-9]{10,}$/i.test(f))return"Playgama ".concat(f)}}catch(t){return null}return null}function ft(t){return"string"!=typeof t||0===t.length?"":t.replace(/-/g," ").replace(/\\b\\w/g,(function(t){return t.toUpperCase()}))}function pt(){var t=this;J(this,tt)||q(this,tt,setInterval((function(){t.send("".concat(e.CORE,"_ping"),e.CORE)}),15e3))}const ht=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(o);if(i){var r=W(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return V(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return z(V(t=a.call.apply(a,[this].concat(r))),st),z(V(t),at),z(V(t),it),z(V(t),ot),z(V(t),nt),Z(V(t),Q,{writable:!0,value:[]}),Z(V(t),$,{writable:!0,value:null}),Z(V(t),tt,{writable:!0,value:null}),Z(V(t),et,{writable:!0,value:null}),Z(V(t),rt,{writable:!0,value:(new Date).toISOString()}),t}return r=s,n=[{key:"initialize",value:function(t){this._platformBridge=t,q(this,et,K(this,ot,ut).call(this));var r={event_name:"".concat(e.CORE,"_initialization_started"),module:e.CORE,bridge_version:M,platform_id:this._platformBridge.platformId,game_id:J(this,et),timestamp:J(this,rt),data:{}};return J(this,Q).push(r),K(this,st,pt).call(this),this}},{key:"send",value:function(t,e){var r,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==(null===(r=this._platformBridge.options)||void 0===r?void 0:r.sendAnalyticsEvents)){var i=window.location.href;if(!(i.startsWith("file://")||i.includes("localhost")||i.includes("127.0.0.1"))){var a={event_name:t,module:e,bridge_version:M,platform_id:this._platformBridge.platformId,game_id:J(this,et),timestamp:(new Date).toISOString(),data:o};J(this,Q).push(a),J(this,$)&&clearTimeout(J(this,$)),q(this,$,setTimeout((function(){K(n,nt,ct).call(n)}),3e3))}}}}],n&&H(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(G));function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function mt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dt(e)?e:String(e)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}function _t(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function gt(t){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(t)}function St(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function bt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Et(t,e,"get"))}function Et(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Pt=new WeakMap,wt=new WeakMap,At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(c,t);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gt(i);if(a){var r=gt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _t(t)}(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),St(_t(e=s.call(this,t)),Pt,{writable:!0,value:!1}),St(_t(e),wt,{writable:!0,value:performance.now()}),e._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(t){return e.emit(n.AUDIO_STATE_CHANGED,t)})),e._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(t){return e.emit(n.PAUSE_STATE_CHANGED,t)})),e}return r=c,(o=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(t){var r,n,o={};if(t===h.GAME_READY){if(bt(this,Pt))return Promise.reject();n=!0,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=this,Et(r,Pt,"set"),n),o={time_s:((performance.now()-bt(this,wt))/1e3).toFixed(2)};var i=document.getElementById("loading-overlay");i&&i.remove()}return ht.send("".concat(e.PLATFORM,"_message_").concat(t),e.PLATFORM,o),this._platformBridge.sendMessage(t)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getGameById(e)}return this._platformBridge.getGameById(t)}}])&&yt(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(G);R().mixin(At.prototype);const Ot=At;function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function Dt(t){var e=function(t,e){if("object"!=Tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:String(e)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}const Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(n);if(o){var r=Rt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.authorize(e)}return this._platformBridge.authorizePlayer(t)}}])&&kt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==jt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Mt=["post","Message"].join(""),Bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=document.createElement("script");o.src=t;for(var i=0;i<Object.keys(e).length;i++){var a=Object.keys(e)[i],s=e[a];o.setAttribute(a,s)}o.addEventListener("load",r),o.addEventListener("error",(function(){return n(new Error("Failed to load: ".concat(t)))})),document.head.appendChild(o)}))},xt=function(t){var e=t.adSenseId,r=t.channelId,n=t.hostId,o=t.interstitialPlacementId,i=t.rewardedPlacementId,a=t.adFrequencyHint,s=void 0===a?"180s":a,c=t.testMode,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(t){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",a.setAttribute("data-ad-client",e),r?a.setAttribute("data-ad-channel",r):n&&a.setAttribute("data-ad-host",n),o&&a.setAttribute("data-admob-interstitial-slot",o),i&&a.setAttribute("data-admob-rewarded-slot",i),u&&a.setAttribute("data-adbreak-test","on"),a.setAttribute("data-ad-frequency-hint",s),a.setAttribute("crossorigin","anonymous"),a.addEventListener("load",(function(){window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push(Gt({preloadAdBreaks:"on",sound:"on",onReady:function(){}},l)),t((function(t){return window.adsbygoogle.push(t)}))})),document.head.appendChild(a)}))};function Ht(t){var e=document.createElement("div");return e.id=c,e.style.position="absolute",document.body.appendChild(e),"top"===t?(e.style.top="0px",e.style.height="90px",e.style.width="100%"):(e.style.bottom="0px",e.style.height="90px",e.style.width="100%"),e}var Ft=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))},Ut=function(t){return/^data:image\\/(png|jpeg|jpg|gif|bmp|webp|svg\\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(t)},Vt=function(t,e){return void 0===t[e]?null:t[e]};function Wt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))return t.reduce((function(t,n,o){if(t[o]=Vt(e,n),r)try{t[o]=JSON.parse(t[o])}catch(t){}return t}),new Array(t.length));var n=Vt(e,t);if(r&&"string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}function zt(t,e){for(var r=Gt({},t),n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];i in t&&e[i]instanceof Object&&t[i]instanceof Object?r[i]=zt(t[i],e[i]):r[i]=e[i]}return r}function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent[Mt](t,e)}function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$t(n.key),n)}}function Kt(t,e){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kt(t,e)}function qt(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function Qt(t,e,r){return(e=$t(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $t(t){var e=function(t,e){if("object"!=Yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yt(e)?e:String(e)}var te=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(c,e);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xt(i);if(a){var r=Xt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qt(t)}(this,t)});function c(e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Qt(qt(r=s.call(this,e)),"_currentLoadingProgress",null),Qt(qt(r),"_loadingProcessCompleted",!1),r._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(t){return r.emit(n.VISIBILITY_STATE_CHANGED,t)})),r._platformBridge.options.disableLoadingLogo||function(t){var e=document.createElement("style");e.textContent="\\n        .fullscreen {\\n            background: #242424;\\n            width: 100vw;\\n            height: 100vh;\\n            position: absolute;\\n            top: 0px;\\n            left: 0px;\\n        }\\n\\n        #loading-overlay {\\n            font-size: 20px;\\n            z-index: 1;\\n            display: flex;\\n            flex-direction: column;\\n            justify-content: center;\\n            align-items: center;\\n        }\\n\\n        #logo {\\n            width: 10%;\\n            max-width: 300px;\\n            min-width: 120px;\\n            overflow: visible;\\n        }\\n\\n        .fill-rect {\\n            transform: translateY(100%);\\n            transition: transform 0.3s ease-out;\\n        }\\n\\n        #gradientMover {\\n            display: none;\\n        }\\n\\n        .gradient-mover {\\n            animation: moveGradient 0.4s linear;\\n        }\\n\\n        @keyframes moveGradient {\\n            0% { transform: translateX(0); }\\n            100% { transform: translateX(-250%); }\\n        }\\n\\n        .logo-fade-out {\\n            animation: logoFadeOut 1s linear;\\n        }\\n\\n        .logo-fade-out path {\\n            fill: white;\\n            stroke: white;\\n        }\\n\\n        @keyframes logoFadeOut {\\n            0% { opacity: 1; }\\n            50% { opacity: 0; }\\n            100% { opacity: 0; }\\n        }\\n    ",document.head.appendChild(e);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===t?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(t,e){if(t){if("string"==typeof t)return Nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),h=document.createElementNS(f.namespaceURI,"mask");h.setAttribute("id","logo-mask");var d=document.createElementNS(f.namespaceURI,"rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","black"),h.appendChild(d),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("fill","white"),h.appendChild(e)})),p.appendChild(h);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(t){var e=t.offset,r=t.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",e),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("stroke",n.strokeColor),e.setAttribute("stroke-width","3"),f.appendChild(e)})),r.appendChild(f)}(r._platformBridge.platformId!==t.YANDEX&&r._platformBridge.options.showFullLoadingLogo),r}return r=c,o=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||e&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=t;var a=Math.max(0,Math.min(100,t)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],o&&Jt(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(G);R().mixin(te.prototype);const ee=te;function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oe(n.key),n)}}function oe(t){var e=function(t,e){if("object"!=re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==re(e)?e:String(e)}function ie(t,e){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ie(t,e)}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}const se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ie(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ae(n);if(o){var r=ae(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageSupported(t)}},{key:"isAvailable",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageAvailable(t)}},{key:"get",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e[this._platformBridge.platformId];if(n)return this.get(t,n,r)}var o=e;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?Array.isArray(t)&&0===t.length?Promise.resolve([]):this._platformBridge.getDataFromStorage(t,o,r):Promise.reject()}},{key:"set",value:function(t,e,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(t,e,n)}var o=r;if(o||(o=this.defaultType),!this._platformBridge.isStorageAvailable(o))return Promise.reject();if(Array.isArray(t)){if(!Array.isArray(e))return Promise.reject(new Error("Value must be an array when key is an array"));if(t.length!==e.length)return Promise.reject(new Error("Key and value arrays must have the same length"));if(0===t.length)return Promise.resolve()}return this._platformBridge.setDataToStorage(t,e,o)}},{key:"delete",value:function(t,e){if(e){var r=e[this._platformBridge.platformId];if(r)return this.delete(t,r)}var n=e;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?Array.isArray(t)&&0===t.length?Promise.resolve():this._platformBridge.deleteDataFromStorage(t,n):Promise.reject()}}],r&&ne(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,le(n.key),n)}}function le(t){var e=function(t,e){if("object"!=ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:String(e)}function fe(t,e){he(t,e),e.add(t)}function pe(t,e,r){he(t,e),e.set(t,r)}function he(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function de(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ye(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ve(t,e,"set"),r),r}function me(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ve(t,e,"get"))}function ve(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var _e="started",ge=new WeakMap,Se=new WeakMap,be=new WeakMap,Ee=new WeakMap,Pe=new WeakSet,we=new WeakSet,Ae=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fe(this,we),fe(this,Pe),pe(this,ge,{writable:!0,value:0}),pe(this,Se,{writable:!0,value:0}),pe(this,be,{writable:!0,value:"created"}),pe(this,Ee,{writable:!0,value:0}),ye(this,ge,e)}var e,r;return e=t,(r=[{key:"state",get:function(){return me(this,be)}},{key:"start",value:function(){var t=this;me(this,be)!==_e&&(ye(this,Se,me(this,ge)),de(this,Pe,Oe).call(this,_e),ye(this,Ee,setInterval((function(){ye(t,Se,me(t,Se)-1),t.emit("time_left_changed",me(t,Se)),me(t,Se)<=0&&(de(t,we,Te).call(t),de(t,Pe,Oe).call(t,"completed"))}),1e3)))}},{key:"stop",value:function(){de(this,we,Te).call(this),me(this,be)===_e&&de(this,Pe,Oe).call(this,"stopped")}}])&&ue(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oe(t){ye(this,be,t),this.emit("state_changed",me(this,be))}function Te(){clearInterval(me(this,Ee)),ye(this,Se,0)}R().mixin(Ae.prototype);const ke=Ae;function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=De(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==De(e)?e:String(e)}function Le(t,e){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Le(t,e)}function je(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Ne(t){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ne(t)}function Ce(t,e){Me(t,e),e.add(t)}function Ge(t,e,r){Me(t,e),e.set(t,r)}function Me(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Be(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Fe(t,e,"set"),r),r}function xe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function He(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Fe(t,e,"get"))}function Fe(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ue=new WeakMap,Ve=new WeakMap,We=new WeakMap,ze=new WeakMap,Ze=new WeakMap,Ye=new WeakMap,Je=new WeakMap,Ke=new WeakMap,qe=new WeakMap,Xe=new WeakSet,Qe=new WeakSet,$e=new WeakSet,tr=new WeakSet,er=new WeakSet,rr=new WeakSet,nr=new WeakSet,or=new WeakSet,ir=new WeakSet,ar=new WeakSet,sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(l,t);var e,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ne(o);if(c){var r=Ne(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===De(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return je(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Ce(je(e=u.call(this,t)),ar),Ce(je(e),ir),Ce(je(e),or),Ce(je(e),nr),Ce(je(e),rr),Ce(je(e),er),Ce(je(e),tr),Ce(je(e),$e),Ce(je(e),Qe),Ce(je(e),Xe),Ge(je(e),Ue,{writable:!0,value:s.HIDDEN}),Ge(je(e),Ve,{writable:!0,value:null}),Ge(je(e),We,{writable:!0,value:null}),Ge(je(e),ze,{writable:!0,value:i.CLOSED}),Ge(je(e),Ze,{writable:!0,value:null}),Ge(je(e),Ye,{writable:!0,value:void 0}),Ge(je(e),Je,{writable:!0,value:60}),Ge(je(e),Ke,{writable:!0,value:a.CLOSED}),Ge(je(e),qe,{writable:!0,value:null}),e._platformBridge.on(n.BANNER_STATE_CHANGED,(function(t){return xe(je(e),nr,dr).call(je(e),t)})),e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(t){t===i.CLOSED&&xe(je(e),er,pr).call(je(e)),xe(je(e),or,yr).call(je(e),t)})),e._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(t){return xe(je(e),ir,mr).call(je(e),t)})),xe(je(e),$e,lr).call(je(e)),e}return e=l,r=[{key:"isBannerSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return He(this,Ue)}},{key:"isInterstitialSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return He(this,ze)}},{key:"isRewardedSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return He(this,qe)}},{key:"rewardedState",get:function(){return He(this,Ke)}},{key:"minimumDelayBetweenInterstitial",get:function(){return He(this,Je)}},{key:"setMinimumDelayBetweenInterstitial",value:function(t){if(null===xe(this,Qe,ur).call(this,xe(this,tr,fr).call(this))){var e=xe(this,Qe,ur).call(this,t);null!==e&&xe(this,Xe,cr).call(this,e)}}},{key:"showBanner",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN){Be(this,Ve,e);var n,o=r;if(o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback),Be(this,We,o),xe(this,nr,dr).call(this,s.LOADING),this.isBannerSupported){var i=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.placements,a=xe(this,ar,vr).call(this,o,i);this._platformBridge.showBanner(e,a)}else xe(this,nr,dr).call(this,s.FAILED)}}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,i=xe(this,ar,vr).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!xe(this,rr,hr).call(this)){var r,n=e;if(n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback),Be(this,Ze,n),xe(this,or,yr).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&He(this,Ye)&&He(this,Ye).state===_e)xe(this,or,yr).call(this,i.FAILED);else{var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,a=xe(this,ar,vr).call(this,n,o);this._platformBridge.showInterstitial(a)}else xe(this,or,yr).call(this,i.FAILED)}}},{key:"preloadRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,i=xe(this,ar,vr).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!xe(this,rr,hr).call(this)){var r;Be(this,qe,e),He(this,qe)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&Be(this,qe,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,o=xe(this,ar,vr).call(this,He(this,qe),n);xe(this,ir,mr).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):xe(this,ir,mr).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Ie(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(G);function cr(t){Be(this,Je,t),He(this,Ye)&&(He(this,Ye).stop(),xe(this,er,pr).call(this))}function ur(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseInt(t,10);return Number.isNaN(e)?null:e}return null}function lr(){var t=xe(this,tr,fr).call(this);if(void 0!==t){var e=xe(this,Qe,ur).call(this,t);null!==e&&xe(this,Xe,cr).call(this,e)}}function fr(){var t;return null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.minimumDelayBetweenInterstitial}function pr(){He(this,Je)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(Be(this,Ye,new ke(He(this,Je))),He(this,Ye).start())}function hr(){var t=[i.LOADING,i.OPENED].includes(He(this,ze)),e=[a.LOADING,a.OPENED,a.REWARDED].includes(He(this,Ke));return t||e}function dr(t){He(this,Ue)!==t&&(Be(this,Ue,t),ht.send("".concat(e.ADVERTISEMENT,"_banner_").concat(t),e.ADVERTISEMENT,{position:He(this,Ve),placement:He(this,We)}),this.emit(n.BANNER_STATE_CHANGED,He(this,Ue)))}function yr(t){He(this,ze)!==t&&(Be(this,ze,t),ht.send("".concat(e.ADVERTISEMENT,"_interstitial_").concat(t),e.ADVERTISEMENT,{placement:He(this,Ze)}),this.emit(n.INTERSTITIAL_STATE_CHANGED,He(this,ze)))}function mr(t){He(this,Ke)!==t&&(Be(this,Ke,t),ht.send("".concat(e.ADVERTISEMENT,"_rewarded_").concat(t),e.ADVERTISEMENT,{placement:He(this,qe)}),this.emit(n.REWARDED_STATE_CHANGED,He(this,Ke)))}function vr(t,e){if(!t)return t;if(!e)return t;var r=e.find((function(e){return e.id===t}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:t}R().mixin(sr.prototype);const _r=sr;function gr(t){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(t)}function Sr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function br(t){var e=function(t,e){if("object"!=gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gr(e)?e:String(e)}function Er(t,e){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Er(t,e)}function Pr(t){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pr(t)}const wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pr(n);if(o){var r=Pr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.inviteFriends(e)}return this._platformBridge.inviteFriends(t)}},{key:"joinCommunity",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.joinCommunity(e)}return this._platformBridge.joinCommunity(t)}},{key:"share",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.share(e)}return this._platformBridge.share(t)}},{key:"createPost",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.createPost(e)}return this._platformBridge.createPost(t)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&Sr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tr(n.key),n)}}function Tr(t){var e=function(t,e){if("object"!=Ar(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ar(e)?e:String(e)}function kr(t,e){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kr(t,e)}function Dr(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Ir(t){return Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ir(t)}function Rr(t,e){jr(t,e),e.add(t)}function Lr(t,e,r){jr(t,e),e.set(t,r)}function jr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Mr(t,e,"set"),r),r}function Cr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Gr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Mr(t,e,"get"))}function Mr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Br=new WeakMap,xr=new WeakMap,Hr=new WeakMap,Fr=new WeakMap,Ur=new WeakSet,Vr=new WeakSet,Wr=new WeakSet,zr=new WeakSet,Zr=new WeakSet,Yr=new WeakSet,Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ir(n);if(o){var r=Ir(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ar(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dr(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Rr(Dr(e=i.call(this,t)),Yr),Rr(Dr(e),Zr),Rr(Dr(e),zr),Rr(Dr(e),Wr),Rr(Dr(e),Vr),Rr(Dr(e),Ur),Lr(Dr(e),Br,{writable:!0,value:null}),Lr(Dr(e),xr,{writable:!0,value:null}),Lr(Dr(e),Hr,{writable:!0,value:null}),Lr(Dr(e),Fr,{writable:!0,value:!1}),Cr(Dr(e),Ur,Kr).call(Dr(e)),e}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}},{key:"orientation",get:function(){return Gr(this,Br)}}])&&Or(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function Kr(){var t,e,r,n=this,o=this._platformBridge.deviceType;if(o===l.MOBILE||o===l.TABLET){var i=null===(t=this._platformBridge.options)||void 0===t?void 0:t.device;Nr(this,Fr,null!==(e=null==i?void 0:i.useBuiltInOrientationPopup)&&void 0!==e&&e),Nr(this,Hr,null!==(r=null==i?void 0:i.supportedOrientations)&&void 0!==r?r:[f.PORTRAIT,f.LANDSCAPE]),Nr(this,Br,Cr(this,Vr,qr).call(this)),window.screen.orientation?window.screen.orientation.addEventListener("change",(function(){return Cr(n,Wr,Xr).call(n)})):window.addEventListener("orientationchange",(function(){return Cr(n,Wr,Xr).call(n)})),window.addEventListener("resize",(function(){return Cr(n,Wr,Xr).call(n)})),Cr(this,zr,Qr).call(this)}}function qr(){var t;return null!==(t=window.screen.orientation)&&void 0!==t&&t.type?window.screen.orientation.type.includes("portrait")?f.PORTRAIT:f.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?f.PORTRAIT:f.LANDSCAPE:window.innerHeight>window.innerWidth?f.PORTRAIT:f.LANDSCAPE}function Xr(){var t=Cr(this,Vr,qr).call(this);t!==Gr(this,Br)&&(Nr(this,Br,t),this.emit(n.ORIENTATION_STATE_CHANGED,Gr(this,Br)),Cr(this,zr,Qr).call(this))}function Qr(){if(Gr(this,Fr))if(1===Gr(this,Hr).length){var t=Gr(this,Hr)[0];Gr(this,Br)!==t?Cr(this,Zr,$r).call(this):Cr(this,Yr,tn).call(this)}else Cr(this,Yr,tn).call(this)}function $r(){Gr(this,xr)||(Nr(this,xr,function(){if(!document.getElementById("bridge-orientation-overlay-styles")){var t=document.createElement("style");t.id="bridge-orientation-overlay-styles",t.textContent="\\n            #".concat(p," {\\n                position: fixed;\\n                top: 0;\\n                left: 0;\\n                width: 100vw;\\n                height: 100vh;\\n                background-color: rgba(0, 0, 0, 0.95);\\n                display: flex;\\n                flex-direction: column;\\n                justify-content: center;\\n                align-items: center;\\n                z-index: 9999999;\\n            }\\n\\n            #bridge-orientation-icon {\\n                width: 80px;\\n                height: 80px;\\n                animation: bridge-rotate-phone 1.5s ease-in-out infinite;\\n            }\\n\\n            #bridge-orientation-message {\\n                color: #fff;\\n                font-size: 18px;\\n                font-family: Arial, sans-serif;\\n                margin-top: 20px;\\n                text-align: center;\\n            }\\n\\n            @keyframes bridge-rotate-phone {\\n                0%, 100% { transform: rotate(0deg); }\\n                50% { transform: rotate(90deg); }\\n            }\\n        "),document.head.appendChild(t)}var e=document.createElement("div");e.id=p;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","bridge-orientation-icon"),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.innerHTML=\'\\n        <rect x="5" y="2" width="14" height="20" rx="2" stroke="white" stroke-width="2"/>\\n        <line x1="12" y1="18" x2="12" y2="18" stroke="white" stroke-width="2" stroke-linecap="round"/>\\n    \';var n=document.createElement("div");return n.id="bridge-orientation-message",n.innerText="Please rotate your device",e.appendChild(r),e.appendChild(n),e}()),document.body.appendChild(Gr(this,xr)))}function tn(){Gr(this,xr)&&(Gr(this,xr).remove(),Nr(this,xr,null))}R().mixin(Jr.prototype);const en=Jr;function rn(t){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(t)}function nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,on(n.key),n)}}function on(t){var e=function(t,e){if("object"!=rn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rn(e)?e:String(e)}function an(t,e){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},an(t,e)}function sn(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function cn(t){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cn(t)}function un(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function ln(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var fn=new WeakSet,pn=new WeakSet;function hn(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:t}function dn(t){var e,r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return!1;var n=r.find((function(e){return e.id===t}));return!!n&&!0===n.isMain}const yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&an(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cn(n);if(o){var r=cn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sn(t)}(this,t)});function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return un(sn(t=i.call.apply(i,[this].concat(r))),pn),un(sn(t),fn),t}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(t,e){var r=ln(this,fn,hn).call(this,t),n=ln(this,pn,dn).call(this,t);return this._platformBridge.leaderboardsSetScore(r,e,n)}},{key:"getEntries",value:function(t){var e=ln(this,fn,hn).call(this,t);return this._platformBridge.leaderboardsGetEntries(e)}},{key:"showNativePopup",value:function(t){var e=ln(this,fn,hn).call(this,t);return this._platformBridge.leaderboardsShowNativePopup(e)}}])&&nn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_n(n.key),n)}}function _n(t){var e=function(t,e){if("object"!=mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mn(e)?e:String(e)}function gn(t,e){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gn(t,e)}function Sn(t){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sn(t)}const bn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gn(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sn(o);if(i){var r=Sn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return r=s,(n=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(t,r){return ht.send("".concat(e.PAYMENTS,"_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsPurchase(t,r).then((function(r){return ht.send("".concat(e.PAYMENTS,"_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw ht.send("".concat(e.PAYMENTS,"_purchase_failed"),e.PAYMENTS,{id:t}),r}))}},{key:"getPurchases",value:function(){return ht.send("".concat(e.PAYMENTS,"_get_purchases_started"),e.PAYMENTS),this._platformBridge.paymentsGetPurchases().then((function(t){return ht.send("".concat(e.PAYMENTS,"_get_purchases_completed"),e.PAYMENTS),t})).catch((function(t){throw ht.send("".concat(e.PAYMENTS,"_get_purchases_failed"),e.PAYMENTS),t}))}},{key:"getCatalog",value:function(){return ht.send("".concat(e.PAYMENTS,"_get_catalog_started"),e.PAYMENTS),this._platformBridge.paymentsGetCatalog().then((function(t){return ht.send("".concat(e.PAYMENTS,"_get_catalog_completed"),e.PAYMENTS),t})).catch((function(t){throw ht.send("".concat(e.PAYMENTS,"_get_catalog_failed"),e.PAYMENTS),t}))}},{key:"consumePurchase",value:function(t){return ht.send("".concat(e.PAYMENTS,"_consume_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsConsumePurchase(t).then((function(r){return ht.send("".concat(e.PAYMENTS,"_consume_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw ht.send("".concat(e.PAYMENTS,"_consume_purchase_failed"),e.PAYMENTS,{id:t}),r}))}}])&&vn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(G);function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function Pn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wn(n.key),n)}}function wn(t){var e=function(t,e){if("object"!=En(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==En(e)?e:String(e)}function An(t,e){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},An(t,e)}function On(t){return On=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},On(t)}const Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&An(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=On(n);if(o){var r=On(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===En(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.get(e)}return this._platformBridge.getRemoteConfig(t)}}])&&Pn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function Dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,In(n.key),n)}}function In(t){var e=function(t,e){if("object"!=kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kn(e)?e:String(e)}function Rn(t,e){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rn(t,e)}function Ln(t){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ln(t)}const jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ln(n);if(o){var r=Ln(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(t){return this._platformBridge.clipboardWrite(t)}}])&&Dn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function Cn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gn(n.key),n)}}function Gn(t){var e=function(t,e){if("object"!=Nn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nn(e)?e:String(e)}function Mn(t,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mn(t,e)}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}const xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bn(n);if(o){var r=Bn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.unlock(e)}return this._platformBridge.unlockAchievement(t)}},{key:"getList",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getList(e)}return this._platformBridge.getAchievementsList(t)}},{key:"showNativePopup",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.showNativePopup(e)}return this._platformBridge.showAchievementsNativePopup(t)}}])&&Cn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(G);function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Un(n.key),n)}}function Un(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:String(e)}function Vn(t,e,r){Wn(t,e),e.set(t,r)}function Wn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zn(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Zn(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Jn(t,e,"get"))}function Yn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Jn(t,e,"set"),r),r}function Jn(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Kn=new WeakMap,qn=new WeakMap,Xn=new WeakMap,Qn=new WeakSet;function $n(){var t=Object.values(Zn(this,Kn)).some((function(t){return!0===t}));Zn(this,qn)!==t&&(Yn(this,qn,t),Zn(this,Xn).call(this,Zn(this,qn)))}const to=function(){function t(e,r){var n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,n=Qn),n.add(this),Vn(this,Kn,{writable:!0,value:{}}),Vn(this,qn,{writable:!0,value:!1}),Vn(this,Xn,{writable:!0,value:null}),Yn(this,Xn,r),e.forEach((function(t){Zn(o,Kn)[t]=!1}))}var e,r;return e=t,(r=[{key:"setState",value:function(t,e){t in Zn(this,Kn)&&"boolean"==typeof e&&Zn(this,Kn)[t]!==e&&(Zn(this,Kn)[t]=e,zn(this,Qn,$n).call(this))}},{key:"getState",value:function(t){return t in Zn(this,Kn)&&Zn(this,Kn)[t]}},{key:"getAggregatedState",value:function(){return Zn(this,qn)}},{key:"resetAll",value:function(){var t=this;Object.keys(Zn(this,Kn)).forEach((function(e){Zn(t,Kn)[e]=!1})),zn(this,Qn,$n).call(this)}}])&&Fn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function ro(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(r),!0).forEach((function(e){io(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ao(n.key),n)}}function io(t,e,r){return(e=ao(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ao(t){var e=function(t,e){if("object"!=eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eo(e)?e:String(e)}function so(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var co=new WeakMap,uo=function(){function e(t){var r,i,a,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),io(this,"_isInitialized",!1),io(this,"_platformSdk",null),io(this,"_isPlayerAuthorized",!1),io(this,"_playerId",null),io(this,"_playerName",null),io(this,"_playerPhotos",[]),io(this,"_playerExtra",{}),io(this,"_visibilityState",null),io(this,"_localStorage",null),io(this,"_defaultStorageType",u.LOCAL_STORAGE),io(this,"_platformStorageCachedData",null),io(this,"_isBannerSupported",!1),io(this,"_paymentsPurchases",[]),io(this,"_pauseStateAggregator",null),io(this,"_audioStateAggregator",null),a={writable:!0,value:{}},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=co),i.set(r,a);try{this._localStorage=window.localStorage}catch(t){}this._visibilityState=document.visibilityState;var c=["interstitial","rewarded","visibility","platform"];this._pauseStateAggregator=new to(c,(function(t){return s.emit(n.PAUSE_STATE_CHANGED,t)})),this._audioStateAggregator=new to(c,(function(t){return s.emit(n.AUDIO_STATE_CHANGED,!t)})),document.addEventListener("visibilitychange",(function(){s._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){s._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){s._setVisibilityState(o.VISIBLE)})),t&&(this._options=no({},t))}var r,c;return r=e,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return t.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var t=navigator.language;return"string"==typeof t?t.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!this._audioStateAggregator||!this._audioStateAggregator.getAggregatedState()}},{key:"isPlatformPaused",get:function(){return!!this._pauseStateAggregator&&this._pauseStateAggregator.getAggregatedState()}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(t,e){fetch("https://playgama.com/api/v1/timestamp/now").then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(e){t(1e3*e.timestamp)})).catch((function(){e()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(this._getDataFromLocalStorage(t[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(t,r);return Promise.resolve(i)}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,e,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this._setDataToLocalStorage(t[n],e[n]);return Promise.resolve()}return this._setDataToLocalStorage(t,e),Promise.resolve()}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this._deleteDataFromLocalStorage(t[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(t),Promise.resolve()}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}return Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var t=document.createElement("div");t.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",t.style.position="absolute",t.style.left="-9999px",t.style.width="1px",t.style.height="1px",document.body.appendChild(t);var e={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e).then((function(e){e.redirected?r(e.redirected):window.setTimeout((function(){var e,n=0===t.offsetHeight||"none"===(null===(e=window.getComputedStyle(t))||void 0===e?void 0:e.display);r(n),t.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(t){if(this.isPaymentsSupported){var e={id:t};return this._paymentsPurchases.push(e),Promise.resolve(e)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(t){if(this.isPaymentsSupported){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));return e<0?Promise.reject():(this._paymentsPurchases.splice(e,1),Promise.resolve({id:t}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(t){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(t):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(t,e){var r=this._localStorage.getItem(t);if(e&&"string"==typeof r)try{r=JSON.parse(r)}catch(t){}return r}},{key:"_setDataToLocalStorage",value:function(t,e){this._localStorage.setItem(t,"object"===eo(e)?JSON.stringify(e):e)}},{key:"_deleteDataFromLocalStorage",value:function(t){this._localStorage.removeItem(t)}},{key:"_setVisibilityState",value:function(t){if(this._visibilityState!==t){this._visibilityState=t,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState);var e=t===o.HIDDEN;this._pauseStateAggregator&&this._pauseStateAggregator.setState("visibility",e),this._audioStateAggregator&&this._audioStateAggregator.setState("visibility",e)}}},{key:"_setBannerState",value:function(t){this.emit(n.BANNER_STATE_CHANGED,t)}},{key:"_setInterstitialState",value:function(t){this.emit(n.INTERSTITIAL_STATE_CHANGED,t);var e=t===i.OPENED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("interstitial",e),this._audioStateAggregator&&this._audioStateAggregator.setState("interstitial",e)}},{key:"_setRewardedState",value:function(t){this.emit(n.REWARDED_STATE_CHANGED,t);var e=t===a.OPENED||t===a.REWARDED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("rewarded",e),this._audioStateAggregator&&this._audioStateAggregator.setState("rewarded",e)}},{key:"_setAudioState",value:function(t){this._audioStateAggregator?this._audioStateAggregator.setState("platform",!t):this.emit(n.AUDIO_STATE_CHANGED,t)}},{key:"_setPauseState",value:function(t){this._pauseStateAggregator?this._pauseStateAggregator.setState("platform",t):this.emit(n.PAUSE_STATE_CHANGED,t)}},{key:"_createPromiseDecorator",value:function(t){var e=new D;return so(this,co)[t]=e,e}},{key:"_getPromiseDecorator",value:function(t){return so(this,co)[t]}},{key:"_resolvePromiseDecorator",value:function(t,e){so(this,co)[t]&&(so(this,co)[t].resolve(e),delete so(this,co)[t])}},{key:"_rejectPromiseDecorator",value:function(t,e){so(this,co)[t]&&(so(this,co)[t].reject(e),delete so(this,co)[t])}},{key:"_paymentsGetProductsPlatformData",value:function(){var t=this;return this._options.payments?this._options.payments.map((function(e){var r=no({},e[t.platformId]);return r.platformProductId=r.id,r.id=e.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));if(!r)return null;var n=no({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(t){return"".concat(t,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(t){var e,r=this;return(null===(e=this._options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.useBuiltInErrorPopup)?function(t){if(!document.getElementById("bridge-info-popup-styles")){var e=document.createElement("style");e.id="bridge-info-popup-styles",e.textContent="\\n            #bridge-info-popup-overlay {\\n                position: fixed;\\n                top: 0;\\n                left: 0;\\n                width: 100vw;\\n                height: 100vh;\\n                background-color: rgba(0, 0, 0, 0.5);\\n                z-index: 9998;\\n                display: none;\\n            }\\n\\n            #bridge-info-popup {\\n                position: fixed;\\n                top: 50%;\\n                left: 50%;\\n                transform: translate(-50%, -50%);\\n                background-color: #2E3C75;\\n                color: #fff;\\n                padding: 20px;\\n                z-index: 9999;\\n                display: none;\\n                border-radius: 10px;\\n                box-shadow: 0 0 10px #2E3C75;\\n                font-size: 24px;\\n                font-family: \'Roboto\', sans-serif;\\n                text-align: center;\\n                min-width: 250px;\\n                max-width: 30%;\\n                flex-direction: column;\\n                justify-content: center;\\n                align-items: center;\\n            }\\n\\n            #bridge-info-popup-button {\\n                margin-top: 24px;\\n                width: 150px;\\n                background-color: rgba(255, 255, 255, 0.2);\\n                color: #fff;\\n                border: none;\\n                font-size: 24px;\\n                padding: 20px;\\n                border-radius: 5px;\\n                cursor: pointer;\\n                font-family: \'Roboto\', sans-serif;\\n                display: block;\\n            }\\n\\n            #bridge-info-popup-button:hover {\\n                background-color: rgba(255, 255, 255, 0.3);\\n            }",document.head.appendChild(e)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn\'t available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(t){o.onclick=function(){n.style.display="none",r.style.display="none",t()},r.style.display="block",n.style.display="flex"}))}().then((function(){t?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(t?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var t=function(){var t,e="bridge_player_guest_id";try{t=localStorage.getItem(e)}catch(t){}if(!t){var r=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),n=Date.now().toString(36);t="".concat(r).concat(n);try{localStorage.setItem(e,t)}catch(t){}}return{id:t,name:"Guest ".concat(t)}}();this._playerId=t.id,this._playerName=t.name}}])&&oo(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();R().mixin(uo.prototype);const lo=uo;function fo(t){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(t)}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,go(n.key),n)}}function ho(){return ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ho.apply(this,arguments)}function yo(t,e){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yo(t,e)}function mo(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function vo(t){return vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vo(t)}function _o(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function go(t){var e=function(t,e){if("object"!=fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fo(e)?e:String(e)}function So(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function bo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Eo(t,e,"get"))}function Eo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Po=new WeakMap,wo=new WeakSet;function Ao(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(t);return i||(i=this._createPromiseDecorator(t),this._platformSdk.send(e,n).then((function(e){e[o]?r._resolvePromiseDecorator(t):r._rejectPromiseDecorator(t)})).catch((function(e){r._rejectPromiseDecorator(t,e)}))),i.promise}const Oo=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vo(o);if(c){var r=vo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mo(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return _o(e=mo(t=f.call.apply(f,[this].concat(o))),r=wo),r.add(e),function(t,e,r){(e=go(e))in t?Object.defineProperty(t,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[e]=true}(mo(t),"_isBannerSupported"),function(t,e,r){_o(t,e),e.set(t,{writable:!0,value:void 0})}(mo(t),Po),t}return r=p,(n=[{key:"platformId",get:function(){return t.VK}},{key:"platformLanguage",get:function(){var t=new URL(window.location.href);if(t.searchParams.has("language")){var e=t.searchParams.get("language"),r=0;try{r=parseInt(e,10)}catch(t){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return ho(vo(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var t=new URL(window.location.href);return t.searchParams.has("hash")?t.searchParams.get("hash"):ho(vo(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(bo(this,Po)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return ho(vo(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===bo(this,Po)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r,n,o=this._getPromiseDecorator(v.INITIALIZE);if(!o){o=this._createPromiseDecorator(v.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(e=this,r=Po,n=i.searchParams.get("platform"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,Eo(e,r,"set"),n)),Bt("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Ft("vkBridge").then((function(){t._platformSdk=window.vkBridge,t._platformSdk.send("VKWebAppInit").then((function(){t._platformSdk.send("VKWebAppGetUserInfo").then((function(e){e&&(t._playerId=e.id,t._playerName="".concat(e.first_name," ").concat(e.last_name),e.photo_100&&t._playerPhotos.push(e.photo_100),e.photo_200&&t._playerPhotos.push(e.photo_200),e.photo_max_orig&&t._playerPhotos.push(e.photo_max_orig))})).finally((function(){t._isInitialized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ho(vo(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ho(vo(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(t)){var o=[];return i.forEach((function(t){var e=n.keys.findIndex((function(e){return e.key===t}));if(e<0)o.push(null);else if(""!==n.keys[e].value){var i=n.keys[e].value;if(r)try{i=JSON.parse(n.keys[e].value)}catch(t){}o.push(i)}else o.push(null)})),void e(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(t){}e(a)}else e(null)})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?o(t.error_data.error_reason):o()}))})):ho(vo(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a={key:t[i],value:e[i]};"string"!=typeof e[i]&&(a.value=JSON.stringify(e[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:t,value:e};return"string"!=typeof e&&(s.value=JSON.stringify(e)),new Promise((function(t,e){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){t()})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?e(t.error_data.error_reason):e()}))}))}return ho(vo(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.setDataToStorage(t[n],"",e));return Promise.all(r)}return this.setDataToStorage(t,"",e)}return ho(vo(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:t}).then((function(t){t.result?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(e){e.result&&t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(e){e.result&&t._setInterstitialState(i.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(e){t._setInterstitialState(e.result?i.CLOSED:i.FAILED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result&&t._setRewardedState(a.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return So(this,wo,Ao).call(this,v.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(t){if(!t||!t.groupId)return Promise.reject();var e=t.groupId;return"string"==typeof e&&(e=parseInt(e,10),Number.isNaN(e))?Promise.reject():So(this,wo,Ao).call(this,v.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:e}).then((function(){window.open("https://vk.com/public".concat(e))}))}},{key:"share",value:function(t){var e={};return t&&t.link&&(e.link=t.link),So(this,wo,Ao).call(this,v.SHARE,"VKWebAppShare",e,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?So(this,wo,Ao).call(this,v.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return So(this,wo,Ao).call(this,v.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(t){return So(this,wo,Ao).call(this,v.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:t})}}])&&po(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(lo);function To(t){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},To(t)}function ko(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Do(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ro(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ro(n.key),n)}}function Ro(t){var e=function(t,e){if("object"!=To(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=To(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==To(e)?e:String(e)}function Lo(){return Lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Co(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Lo.apply(this,arguments)}function jo(t,e){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jo(t,e)}function No(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Co(t){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Co(t)}function Go(t,e,r){Mo(t,e),e.set(t,r)}function Mo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function xo(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Fo(t,e,"set"),r),r}function Ho(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Fo(t,e,"get"))}function Fo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Uo=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,zo=new WeakMap,Zo=new WeakSet;function Yo(){var t=this;return new Promise((function(e){var r=!1;t._options&&t._options.useSignedData&&(r=t._options.useSignedData),t._platformSdk.getPlayer({signed:r}).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized=e.isAuthorized(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var n=e.getName();""!==n&&(t._playerName=n),t._playerPhotos=[];var o=e.getPhoto("small"),i=e.getPhoto("medium"),a=e.getPhoto("large");return o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),a&&t._playerPhotos.push(a),t._playerExtra={payingStatus:e.getPayingStatus()},r&&(t._playerExtra.signature=e.signature),xo(t,Vo,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){e()}))}))}const Jo=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jo(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Co(o);if(c){var r=Co(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===To(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return No(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Mo(e=No(t=f.call.apply(f,[this].concat(o))),r=Zo),r.add(e),Go(No(t),Uo,{writable:!0,value:!1}),Go(No(t),Vo,{writable:!0,value:null}),Go(No(t),Wo,{writable:!0,value:null}),Go(No(t),zo,{writable:!0,value:null}),t}return r=p,(n=[{key:"platformId",get:function(){return t.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():Lo(Co(p.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():Lo(Co(p.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return Lo(Co(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Ho(this,Uo)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("/sdk.js").then((function(){Ft("YaGames","init").then((function(){window.YaGames.init().then((function(e){var r;t._platformSdk=e,xo(t,zo,Bo(t,Zo,Yo).call(t));var n=null===(r=t._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.27.0"}),o=t._platformSdk.shortcut.canShowPrompt().then((function(e){xo(t,Uo,e.canShow)})),i=new Promise((function(t){setTimeout(t,1e3)})),a=Promise.race([o,i]),c=t._platformSdk.getPayments().then((function(e){xo(t,Wo,e)}));t._isBannerSupported=!0;var u=t._platformSdk.adv.getBannerAdvStatus().then((function(e){e.stickyAdvIsShowing&&t._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:var e;return null===(e=this._platformSdk.features.LoadingAPI)||void 0===e||e.ready(),Promise.resolve();case h.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case h.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return Lo(Co(p.prototype),"sendMessage",this).call(this,t)}}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var t=this;return new Promise((function(e,r){t._platformSdk.features.GamesAPI.getAllGames().then((function(t){var r=t.games;e(r)})).catch(r)}))}},{key:"getGameById",value:function(t){var e=this;return null!=t&&t.gameId?new Promise((function(r,n){e._platformSdk.features.GamesAPI.getGameByID(null==t?void 0:t.gameId).then((function(t){var e=t.game,n=t.isAvailable;r(Do(Do({},e),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var t=this,e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(xo(this,zo,Bo(this,Zo,Yo).call(this)),Ho(this,zo).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){xo(t,zo,Bo(t,Zo,Yo).call(t)),Ho(t,zo).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Lo(Co(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Lo(Co(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Ho(this,zo).then((function(){return new Promise((function(e){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var i=void 0===n._platformStorageCachedData[t[o]]?null:n._platformStorageCachedData[t[o]];r.push(i)}e(r)}else e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}))})):Promise.reject():Lo(Co(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Ho(this,zo).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Do({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;Ho(n,Vo).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))}))})):Promise.reject():Lo(Co(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Ho(this,zo).then((function(){return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?Do({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];Ho(r,Vo).setData(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}))})):Promise.reject():Lo(Co(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.adv.hideBannerAdv().then((function(e){e.stickyAdvIsShowing||t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){t._setInterstitialState(i.OPENED)},onClose:function(e){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)},onError:function(t){console.error(t)}}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(t){t(!1)}))}},{key:"addToHomeScreen",value:function(){var t=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(e){"accepted"!==e.outcome?t._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN):t._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN)})).catch((function(e){t._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN,e)}))),e.promise}},{key:"rate",value:function(){var t=this,e=this._getPromiseDecorator(v.RATE);return e||(e=this._createPromiseDecorator(v.RATE),this._platformSdk.feedback.canReview().then((function(e){e.value?t._platformSdk.feedback.requestReview().then((function(e){e.feedbackSent?t._resolvePromiseDecorator(v.RATE):t._rejectPromiseDecorator(v.RATE)})).catch((function(e){t._rejectPromiseDecorator(v.RATE,e)})):t._rejectPromiseDecorator(v.RATE,e.reason)})).catch((function(e){t._rejectPromiseDecorator(v.RATE,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(t,e).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,t)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(t,n).then((function(t){var r;r=t&&t.entries.length>0?t.entries.map((function(t){return{id:t.player.uniqueID,name:t.player.publicName,score:t.score,rank:t.rank,photo:t.player.getAvatarSrc("large")}})):[],e._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this;if(!Ho(this,Wo))return Promise.reject();var r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),Ho(this,Wo).purchase(r).then((function(r){var n=Do({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this;if(!Ho(this,Wo))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),Ho(this,Wo).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(v.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!Ho(this,Wo))return Promise.reject();var e=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),Ho(this,Wo).getCatalog().then((function(r){var n=e.map((function(t){var e,n=r.find((function(e){return e.id===t.id}));return{id:t.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(e=n.getPriceCurrencyImage)||void 0===e?void 0:e.call(n,"medium")}}));t._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!Ho(this,Wo))return Promise.reject();var e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),Ho(this,Wo).getPurchases().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=Do({id:r.find((function(e){return e.id===t.productID})).id},t.purchaseData);return delete e.productID,e})),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}},{key:"getRemoteConfig",value:function(t){var e=this;if(!this._platformSdk)return Promise.reject();var r=t;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(v.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(t){e._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,t)})).catch((function(t){e._rejectPromiseDecorator(v.GET_REMOTE_CONFIG,t)}))),n.promise}},{key:"clipboardWrite",value:function(t){var e=this,r=this._getPromiseDecorator(v.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(v.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(t).then((function(){e._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0)})).catch((function(t){e._rejectPromiseDecorator(v.CLIPBOARD_WRITE,t)}))),r.promise}}])&&Io(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(lo);function Ko(t){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(t)}function qo(){qo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ko(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ko(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Xo(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Qo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Xo(i,n,o,a,s,"next",t)}function s(t){Xo(i,n,o,a,s,"throw",t)}a(void 0)}))}}function $o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$o(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ri(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ri(n.key),n)}}function ri(t){var e=function(t,e){if("object"!=Ko(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ko(e)?e:String(e)}function ni(){return ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ai(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ni.apply(this,arguments)}function oi(t,e){return oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oi(t,e)}function ii(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function ai(t){return ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ai(t)}function si(t,e){ui(t,e),e.add(t)}function ci(t,e,r){ui(t,e),e.set(t,r)}function ui(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function li(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function fi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,hi(t,e,"set"),r),r}function pi(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,hi(t,e,"get"))}function hi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var di="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",yi="https://store.xsolla.com/api/v2/project/",mi=new WeakMap,vi=new WeakMap,_i=new WeakMap,gi=new WeakSet,Si=new WeakSet,bi=new WeakSet,Ei=new WeakSet;function Pi(){var t=this;return pi(this,vi)?new Promise((function(e,r){t._platformSdk.user.getUser().then((function(n){if(!n)return t._playerApplyGuestData(),void r();t._isPlayerAuthorized=!0,n.username&&(t._playerName=n.username),n.profilePictureUrl&&(t._playerPhotos=[n.profilePictureUrl]),t._playerExtra=n,t._options.useUserToken?t._platformSdk.user.getUserToken().then((function(e){t._playerExtra.jwt=e})).finally((function(){e()})):e()})).catch((function(e){t._playerApplyGuestData(),r(e)}))})):(this._playerApplyGuestData(),Promise.reject())}function wi(){return Ai.apply(this,arguments)}function Ai(){return(Ai=Qo(qo().mark((function t(){return qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.XPayStationWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Bt(di);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oi(){return Ti.apply(this,arguments)}function Ti(){return(Ti=Qo(qo().mark((function t(){var e;return qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._platformSdk.user.getXsollaUserToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ki(t,e,r){return Di.apply(this,arguments)}function Di(){return(Di=Qo(qo().mark((function t(e,r,n){var o;return qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(yi,"/").concat(e,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=t.sent).ok){t.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return t.abrupt("return",o.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const Ii=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}(d,e);var r,n,o,f,p=(o=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ai(o);if(f){var r=ai(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ko(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ii(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return si(ii(t=p.call.apply(p,[this].concat(r))),Ei),si(ii(t),bi),si(ii(t),Si),si(ii(t),gi),ci(ii(t),mi,{writable:!0,value:!1}),ci(ii(t),vi,{writable:!0,value:!1}),ci(ii(t),_i,{writable:!0,value:{adStarted:function(){pi(ii(t),mi)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED)},adFinished:function(){pi(ii(t),mi)?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setInterstitialState(i.CLOSED)},adError:function(){pi(ii(t),mi)?t._setRewardedState(a.FAILED):t._setInterstitialState(i.FAILED)}}}),t}return r=d,(n=[{key:"platformId",get:function(){return t.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return pi(this,vi)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():ni(ai(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return pi(this,vi)}},{key:"isPaymentsSupported",get:function(){return!0===pi(this,vi)}},{key:"deviceType",get:function(){if(pi(this,vi)){var t=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(t))return t}return ni(ai(d.prototype),"deviceType",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Ft("CrazyGames","SDK","init").then((function(){t._platformSdk=window.CrazyGames.SDK,t._defaultStorageType=u.PLATFORM_INTERNAL,t._isBannerSupported=!0,t._platformSdk.init().then((function(){fi(t,vi,t._platformSdk.user.isUserAccountAvailable);var e=li(t,gi,Pi).call(t);t.options.xsollaProjectId&&li(t,Si,wi).call(t),Promise.all([e]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(!pi(this,vi))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){li(t,gi,Pi).call(t).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case h.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case h.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return ni(ai(d.prototype),"sendMessage",this).call(this,t)}}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ni(ai(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ni(ai(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){if(Array.isArray(t)){var o=[];return t.forEach((function(t){var e=n._platformSdk.data.getItem(t);if(r)try{e=JSON.parse(e)}catch(t){}o.push(e)})),void e(o)}var i=n._platformSdk.data.getItem(t);if(r)try{i=JSON.parse(i)}catch(t){}e(i)})):ni(ai(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(t)){for(var o=0;o<t.length;o++){var i=e[o];"string"!=typeof e[o]&&(i=JSON.stringify(e[o])),n._platformSdk.data.setItem(t[o],i)}r()}else{var a=e;"string"!=typeof e&&(a=JSON.stringify(e)),n._platformSdk.data.setItem(t,a),r()}})):ni(ai(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?Array.isArray(t)?(t.forEach((function(t){return r._platformSdk.data.removeItem(t)})),Promise.resolve()):(this._platformSdk.data.removeItem(t),Promise.resolve()):ni(ai(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Ht(t)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){fi(this,mi,!1),this._platformSdk.ad.requestAd("midgame",pi(this,_i))}},{key:"showRewarded",value:function(){fi(this,mi,!0),this._platformSdk.ad.requestAd("rewarded",pi(this,_i))}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ad.hasAdblock().then((function(t){e(t)}))}))}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),li(this,Si,wi).call(this).then((function(){return li(e,bi,Oi).call(e)})).then((function(t){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:t,sandbox:e.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var c=s.order_id||s.invoice;if(!c)return;li(e,Ei,ki).call(e,e.options.xsollaProjectId,c,t).then((function(t){e._platformSdk.analytics.trackOrder("xsolla",t);var o=ti({id:r.id,sku:n,orderId:c},t);e._paymentsPurchases.push(o),i||(i=!0,e._resolvePromiseDecorator(v.PURCHASE,o))})).catch((function(t){i||e._rejectPromiseDecorator(v.PURCHASE,t)}))}}catch(t){i||e._rejectPromiseDecorator(v.PURCHASE,t)}})),o.on("close",(function(){i||e._rejectPromiseDecorator(v.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),li(this,bi,Oi).call(this).then((function(e){return fetch("".concat(yi,"/").concat(t.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla catalog HTTP ".concat(t.status));return t.json()})).then((function(r){var n=new Map((r.items||[]).map((function(t){return[t.sku,t]}))),o=e.map((function(t){var e,r,o,i,a,s,c,u,l,f,p=t.platformProductId||t.id,h=n.get(p);return{id:t.id,name:null!==(e=null!==(r=null==h?void 0:h.name)&&void 0!==r?r:t.name)&&void 0!==e?e:t.id,description:null!==(o=null!==(i=null==h?void 0:h.description)&&void 0!==i?i:t.description)&&void 0!==o?o:"",price:null!==(a=null==h||null===(s=h.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==h||null===(u=h.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==h||null===(f=h.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));t._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(v.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(v.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:t})}catch(t){this._rejectPromiseDecorator(v.CONSUME_PURCHASE,t)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),li(this,bi,Oi).call(this).then((function(e){return fetch("".concat(yi,"/").concat(t.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla inventory HTTP ".concat(t.status));return t.json()})).then((function(e){var r=t._paymentsGetProductsPlatformData()||[];t._paymentsPurchases=(e.items||[]).map((function(t){var e=r.find((function(e){return e.id===t.sku}));return e?ti({id:e.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}}])&&ei(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(lo);function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Li(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ji(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Li(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ci(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Li(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ni(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ci(n.key),n)}}function Ci(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ri(e)?e:String(e)}function Gi(){return Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Gi.apply(this,arguments)}function Mi(t,e){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mi(t,e)}function Bi(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function xi(t){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(t)}var Hi=new WeakSet;function Fi(){var t=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(e){t._platformSdk.getUsers([t._playerId],(function(r){if(r&&1===r.length){var n=r[0];t._playerName=n.full_name,""!==n.avatar&&(t._playerPhotos=[n.avatar])}e()}))}))}const Ui=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mi(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xi(o);if(s){var r=xi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bi(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Bi(t=c.call.apply(c,[this].concat(o))),r=Hi),r.add(e),t}return r=l,(n=[{key:"platformId",get:function(){return t.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){t._platformSdk=new window.AgRuSdk,t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(e,r){"rewarded"===e.type?null===r?e.status?t._setRewardedState(a.OPENED):(e.reward&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED):null===r?e.status?t._setInterstitialState(i.OPENED):t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)}));var e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,Hi,Fi).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._resolvePromiseDecorator(v.INITIALIZE)}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,r)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Gi(xi(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Gi(xi(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,r){if(n._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===n._platformStorageCachedData[t[i]]?null:n._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(t)){for(var a=[],s=0;s<t.length;s++){var c=void 0===n._platformStorageCachedData[t[s]]?null:n._platformStorageCachedData[t[s]];a.push(c)}return void e(a)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else r(i)})):r()})):Gi(xi(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?ji({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.setSaveData(i,(function(t,e){null===e&&(n._platformStorageCachedData=i,r()),o(e)}))}else o()})):Gi(xi(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?ji({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.setSaveData(o,(function(t,i){null===i&&(r._platformStorageCachedData=o,e()),n(i)}))}else n()})):Gi(xi(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&Ni(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function Vi(t){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(t)}function Wi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zi(n.key),n)}}function zi(t){var e=function(t,e){if("object"!=Vi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vi(e)?e:String(e)}function Zi(t,e){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zi(t,e)}function Yi(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Ji(t){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ji(t)}function Ki(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Xi(t,e,"set"),r),r}function qi(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Xi(t,e,"get"))}function Xi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Qi=new WeakMap;const $i=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}(p,e);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ji(o);if(l){var r=Ji(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yi(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=Yi(t=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=Qi),r.set(e,n),t}return r=p,(n=[{key:"platformId",get:function(){return t.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var e=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(t){switch(t.name){case"SDK_READY":e._platformSdk=window.gdsdk,e._isInitialized=!0,e.showInterstitial(),e._resolvePromiseDecorator(v.INITIALIZE);break;case"SDK_GAME_START":qi(e,Qi)?(e._setRewardedState(a.CLOSED),e._platformSdk.preloadAd("rewarded")):e._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":qi(e,Qi)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":e._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,Bt("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND);return t.promise}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Ht(t)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var t=this;Ki(this,Qi,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){t._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var t=this;Ki(this,Qi,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){t._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&Wi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(lo);function ta(t){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(t)}function ea(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,la(n.key),n)}}function ra(){return ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ia(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ra.apply(this,arguments)}function na(t,e){return na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},na(t,e)}function oa(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ia(t)}function aa(t,e){ca(t,e),e.add(t)}function sa(t,e,r){ca(t,e),e.set(t,r)}function ca(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ua(t,e,r){return(e=la(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function la(t){var e=function(t,e){if("object"!=ta(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ta(e)?e:String(e)}function fa(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function pa(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ha(t,e,"get"))}function ha(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var da="AUTHORIZED",ya={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},ma=new WeakMap,va=new WeakMap,_a=new WeakMap,ga=new WeakMap,Sa=new WeakSet,ba=new WeakSet,Ea=new WeakSet,Pa=new WeakSet,wa=new WeakSet,Aa=new WeakSet,Oa=new WeakSet,Ta=new WeakSet,ka=new WeakSet,Da=new WeakSet,Ia=new WeakSet,Ra=new WeakSet,La=new WeakSet,ja=new WeakSet,Na=new WeakSet,Ca=new WeakSet;function Ga(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(t){return{method:"users.hasAppPermission",ext_perm:t}}}}function Ma(){var t=this;return{userProfileCallback:function(e,r,n){return fa(t,Sa,xa).call(t,e,r,n)},hasValueAccessCallback:function(e,r,n){return fa(t,Ea,Fa).call(t,r,n)}}}function Ba(){var t=this;return{showPermissions:function(){return fa(t,Pa,Ua).call(t)},loadAd:function(e){return fa(t,wa,Va).call(t,e)},showLoadedAd:function(e,r){return fa(t,Aa,Wa).call(t,r)},showAd:function(e,r){return fa(t,Oa,za).call(t,r)},requestBannerAds:function(e,r){return fa(t,Ta,Za).call(t,e,r)},showBannerAds:function(e,r){return fa(t,Da,Ja).call(t,r)},hideBannerAds:function(e,r){return fa(t,ka,Ya).call(t,r)},setBannerFormat:function(e){return fa(t,Ia,Ka).call(t,e)},showInvite:function(e){return fa(t,Ra,qa).call(t,e)},showRatingDialog:function(e,r){return fa(t,La,Xa).call(t,e,r)},joinGroup:function(e,r){return fa(t,ja,Qa).call(t,e,r)},showLoginSuggestion:function(e,r){return fa(t,ba,Ha).call(t,e,r)},postMediatopic:function(e,r){return fa(t,Na,$a).call(t,e,r)},isAdBlockEnabled:function(e,r){return fa(t,Ca,ts).call(t,e,r)}}}function xa(t,e){"ok"===t&&(this._playerId=e.uid,this._playerName=e.name,this._playerPhotos=[e.pic50x50,e.pic128x128,e.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(pa(this,va).hasAppPermission(ya.VALUABLE_ACCESS),pa(this,_a).hasValueAccessCallback)}function Ha(t,e){if("error"===t)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}function Fa(t){if(this._hasValuableAccessPermission=!!t,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(v.INITIALIZE);else{var e=Object.values(ya).map((function(t){return\'"\'.concat(t,\'"\')})).join(",");this._platformSdk.UI.showPermissions("[".concat(e,"]"))}}function Ua(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(pa(this,va).hasAppPermission(ya.VALUABLE_ACCESS),pa(this,_a).hasValueAccessCallback)}function Va(t){"error"===t?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Wa(t){switch(t){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function za(t){switch(t){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Za(t,e){if("error"!==t)switch(e){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",pa(this,ma));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Ya(t){t?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Ja(t){t||this._setBannerState(s.FAILED)}function Ka(t){"error"===t?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function qa(t){"error"===t?this._rejectPromiseDecorator(v.INVITE_FRIENDS):this._resolvePromiseDecorator(v.INVITE_FRIENDS)}function Xa(t,e){"error"===t?this._rejectPromiseDecorator(v.RATE,e):this._resolvePromiseDecorator(v.RATE)}function Qa(t,e){"error"===t?this._rejectPromiseDecorator(v.JOIN_COMMUNITY,e):this._resolvePromiseDecorator(v.JOIN_COMMUNITY)}function $a(t,e){"error"===t?this._rejectPromiseDecorator(v.CREATE_POST,e):this._resolvePromiseDecorator(v.CREATE_POST)}function ts(t,e){"ok"===t?this._resolvePromiseDecorator(v.ADBLOCK_DETECT,"true"===e):this._rejectPromiseDecorator(v.ADBLOCK_DETECT)}const es=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&na(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ia(o);if(s){var r=ia(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ta(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oa(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return aa(oa(t=c.call.apply(c,[this].concat(r))),Ca),aa(oa(t),Na),aa(oa(t),ja),aa(oa(t),La),aa(oa(t),Ra),aa(oa(t),Ia),aa(oa(t),Da),aa(oa(t),ka),aa(oa(t),Ta),aa(oa(t),Oa),aa(oa(t),Aa),aa(oa(t),wa),aa(oa(t),Pa),aa(oa(t),Ea),aa(oa(t),ba),aa(oa(t),Sa),sa(oa(t),ga,{get:Ba,set:void 0}),sa(oa(t),_a,{get:Ma,set:void 0}),sa(oa(t),va,{get:Ga,set:void 0}),ua(oa(t),"_hasValuableAccessPermission",!1),ua(oa(t),"_hasValuableAccessPermissionShowed",!1),ua(oa(t),"_platformBannerOptions",{}),sa(oa(t),ma,{writable:!0,value:null}),t}return r=l,(n=[{key:"platformId",get:function(){return t.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("//api.ok.ru/js/fapi5.js").then((function(){Ft("FAPI").then((function(){t._platformSdk=window.FAPI,window.API_callback=function(e,r,n){return pa(t,ga)[e](r,n)};var e=t._platformSdk.Util.getRequestParameters()||{};e.api_server&&e.apiconnection?t._platformSdk.init(e.api_server,e.apiconnection,(function(){var e,r=null===(e=t._platformSdk)||void 0===e?void 0:e.saved_state;t._isPlayerAuthorized=!r||r===da,t._isPlayerAuthorized?t._platformSdk.Client.call(pa(t,va).userProfile,pa(t,_a).userProfileCallback):(t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE))}),(function(){t._rejectPromiseDecorator(v.INITIALIZE)})):t._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND)}))}))),e.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(da)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ra(ia(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:ra(ia(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(e,o){var i=Array.isArray(t)?t:[t],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(t)){var u=[];return i.forEach((function(t){if(""!==c[t]&&void 0!==c[t]){var e=c[t];if(r)try{e=JSON.parse(c[t])}catch(t){}u.push(e)}else u.push(null)})),void e(u)}if(""===c[t]||void 0===c[t])return void e(null);var l=c[t];if(r)try{l=JSON.parse(c[t])}catch(t){}e(l)}else o(s)}))})):Promise.reject(_.STORAGE_NOT_AVAILABLE):ra(ia(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_.STORAGE_NOT_AVAILABLE);for(var o=Array.isArray(t)?t:[t],i=Array.isArray(t)?e:[e],a=[],s=function(){var t=o[c],e=i[c];"string"!=typeof e&&(e=JSON.stringify(e));var r={method:"storage.set",key:t,value:e},s=new Promise((function(t,e){n._platformSdk.Client.call(r,(function(r,n){n?t():e()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return ra(ia(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_.STORAGE_NOT_AVAILABLE);for(var n=Array.isArray(t)?t:[t],o=[],i=function(){var t={method:"storage.set",key:n[a]},e=new Promise((function(e,n){r._platformSdk.Client.call(t,(function(t,r){r?e():n()}))}));o.push(e)},a=0;a<n.length;a++)i();return Promise.all(o)}return ra(ia(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(t){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(t){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(t){var e,r;r=t,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e=this,ha(e,ma,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var t=this._getPromiseDecorator(v.ADBLOCK_DETECT);return t||(t=this._createPromiseDecorator(v.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),t.promise}},{key:"inviteFriends",value:function(t){var e=(t||{}).text;if(!t||"string"!=typeof e)return Promise.reject();var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),e.length>120?this._rejectPromiseDecorator(v.INVITE_FRIENDS,_.INVITE_FRIENDS_MESSAGE_LENGTH_ERROR):this._platformSdk.UI.showInvite(e)),r.promise}},{key:"rate",value:function(){var t=this._getPromiseDecorator(v.RATE);return t||(t=this._createPromiseDecorator(v.RATE),this._platformSdk.UI.showRatingDialog()),t.promise}},{key:"createPost",value:function(t){if(!t||null==t||!t.media)return Promise.reject();var e,r=this._getPromiseDecorator(v.CREATE_POST);return r||(r=this._createPromiseDecorator(v.CREATE_POST),this._platformSdk.UI.postMediatopic(t,null!==(e=t.status)&&void 0!==e&&e)),r.promise}},{key:"joinCommunity",value:function(t){if(!t||null==t||!t.groupId)return Promise.reject();var e,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(t.groupId,null!==(e=t.enableMessages)&&void 0!==e&&e)),r.promise}}])&&ea(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function rs(t){return rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rs(t)}function ns(){ns=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==rs(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(rs(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function os(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function is(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function as(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?is(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=cs(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ss(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cs(n.key),n)}}function cs(t){var e=function(t,e){if("object"!=rs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rs(e)?e:String(e)}function us(){return us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ps(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},us.apply(this,arguments)}function ls(t,e){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ls(t,e)}function fs(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function ps(t){return ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(t)}function hs(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function ds(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var ys=new WeakSet,ms=new WeakSet;function vs(){var t=this;return new Promise((function(e){t._platformSdk.userService.getUser().then((function(e){return e.isAuthorized?(t._isPlayerAuthorized=!0,t._playerId=e.id,t._playerName=e.name,t._playerPhotos=e.photos,t._playerExtra=e,t._defaultStorageType=u.PLATFORM_INTERNAL,ds(t,ms,_s).call(t,[])):(t._playerApplyGuestData(),Promise.resolve())})).catch((function(){t._playerApplyGuestData()})).finally((function(){e()}))}))}function _s(t){return gs.apply(this,arguments)}function gs(){var t;return t=ns().mark((function t(e){var r,n=arguments;return ns().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(n.length>1&&void 0!==n[1])||n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",Wt(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)})),gs=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){os(i,n,o,a,s,"next",t)}function s(t){os(i,n,o,a,s,"throw",t)}a(void 0)}))},gs.apply(this,arguments)}const Ss=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ls(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ps(o);if(s){var r=ps(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fs(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return hs(fs(t=c.call.apply(c,[this].concat(r))),ms),hs(fs(t),ys),t}return r=l,(n=[{key:"platformId",get:function(){return t.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||us(ps(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://developer.playgama.com/sdk/v1.js").then((function(){Ft("PLAYGAMA_SDK").then((function(){t._platformSdk=window.PLAYGAMA_SDK,t._platformSdk.advService.subscribeToAdStateChanges((function(e,r){if("interstitial"===e)switch(r){case"open":t._setInterstitialState(i.OPENED);break;case"empty":case"error":t._setInterstitialState(i.FAILED);break;case"close":t._setInterstitialState(i.CLOSED)}else if("rewarded"===e)switch(r){case"open":t._setRewardedState(a.OPENED);break;case"empty":case"error":t._setRewardedState(a.FAILED);break;case"rewarded":t._setRewardedState(a.REWARDED);break;case"close":t._setRewardedState(a.CLOSED)}})),ds(t,ys,vs).call(t).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameService.gameReady(),Promise.resolve()):us(ps(l.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||us(ps(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:us(ps(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?ds(this,ms,_s).call(this,t,r):Promise.reject():us(ps(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?as({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]="string"!=typeof e[i]?JSON.stringify(e[i]):e[i];else o[t]="string"!=typeof e?JSON.stringify(e):e;return this._platformSdk.storageApi.setItems(o),us(ps(l.prototype),"setDataToStorage",this).call(this,t,e,r);default:return Promise.reject(_.STORAGE_NOT_SUPPORTED)}}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;switch(e){case u.PLATFORM_INTERNAL:return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?as({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(t)?t:[t]),us(ps(l.prototype),"deleteDataFromStorage",this).call(this,t,e);default:return Promise.reject(_.STORAGE_NOT_SUPPORTED)}}},{key:"showInterstitial",value:function(){this._platformSdk.advService.showInterstitial()}},{key:"showRewarded",value:function(){this._platformSdk.advService.showRewarded()}},{key:"authorizePlayer",value:function(t){var e=this,r=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?ds(this,ys,vs).call(this,t).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){ds(e,ys,vs).call(e,t).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),r.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(e){if("PAID"===e.status){var n=as({id:t},e);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(v.PURCHASE,n)}else r._rejectPromiseDecorator(v.PURCHASE,e.error)})).catch((function(t){r._rejectPromiseDecorator(v.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));return Promise.resolve(e)}}])&&ss(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function bs(t){return bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(t)}function Es(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ps(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ds(n.key),n)}}function ws(){return ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ts(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ws.apply(this,arguments)}function As(t,e){return As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},As(t,e)}function Os(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Ts(t){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ts(t)}function ks(t,e,r){return(e=Ds(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ds(t){var e=function(t,e){if("object"!=bs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bs(e)?e:String(e)}function Is(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Rs(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,js(t,e,"set"),r),r}function Ls(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,js(t,e,"get"))}function js(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ns=new WeakMap,Cs=new WeakMap;const Gs=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&As(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ts(o);if(s){var r=Ts(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Os(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Is(Os(t=c.call.apply(c,[this].concat(r))),Ns,{writable:!0,value:void 0}),Is(Os(t),Cs,{writable:!0,value:void 0}),ks(Os(t),"_defaultStorageType",u.PLATFORM_INTERNAL),ks(Os(t),"_isPlayerAuthorized",!0),t}return r=l,n=[{key:"platformId",get:function(){return t.PLAYDECK}},{key:"platformLanguage",get:function(){return Ls(this,Ns)?Ls(this,Ns):ws(Ts(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),window.addEventListener("message",(function e(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;t._playerId=i.telegramId,t._playerPhotos=[i.avatar],t._playerName=i.username,Rs(t,Ns,i.locale),Rs(t,Cs,i.params),window.removeEventListener("message",e),t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}}})),Zt({playdeck:{method:"getUserProfile"}},"*")),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_OVER:return Zt({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case h.GAME_READY:return Zt({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return ws(Ts(l.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":t._setInterstitialState(i.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setInterstitialState(i.FAILED),window.removeEventListener("message",e)}})),Zt({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setRewardedState(a.OPENED);break;case"rewardedAd":t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"skipAd":t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setRewardedState(a.FAILED),window.removeEventListener("message",e)}})),Zt({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ws(Ts(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ws(Ts(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?new Promise((function(e){var r={},n=Array.isArray(t)?t:[t];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(t)?t.map((function(t){return r[t]})):r[t];e(c)}}})),n.forEach((function(t){return Zt({playdeck:{method:"getData",key:t}},"*")}))})):ws(Ts(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(t)?t:[t],o=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));n.forEach((function(t,e){return Zt({playdeck:{method:"setData",key:t,value:o[e]}},"*")})),r()})):ws(Ts(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return Zt({playdeck:{method:"setData",key:t,value:""}},"*")})),e()})):ws(Ts(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(){var t=this,e=this._getPromiseDecorator(v.SHARE);return e||(e=this._createPromiseDecorator(v.SHARE),window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",e),t._resolvePromiseDecorator(v.SHARE))})),Zt({playdeck:{method:"customShare",value:Ls(this,Cs)}},"*")),e.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),window.addEventListener("message",(function t(e){var r=e.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(Zt({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",t))})),window.addEventListener("message",(function e(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",e);var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Es(Object(r),!0).forEach((function(e){ks(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:t},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(v.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",e),r._rejectPromiseDecorator(v.PURCHASE,i.value))})),Zt({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Stars"),priceCurrencyCode:"Stars",priceValue:t.amount}}));return Promise.resolve(e)}}],n&&Ps(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function Ms(t){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(t)}function Bs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zs(n.key),n)}}function xs(){return xs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Us(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},xs.apply(this,arguments)}function Hs(t,e){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hs(t,e)}function Fs(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Us(t){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Us(t)}function Vs(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Ws(t,e,r){return(e=zs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zs(t){var e=function(t,e){if("object"!=Ms(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ms(e)?e:String(e)}function Zs(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Js(t,e,"set"),r),r}function Ys(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Js(t,e,"get"))}function Js(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ks=new WeakMap,qs=new WeakMap,Xs=new WeakMap,Qs=new WeakMap;const $s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hs(t,e)}(f,e);var r,n,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Us(o);if(s){var r=Us(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ms(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fs(t)}(this,t)});function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Ws(Fs(t=c.call.apply(c,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),Ws(Fs(t),"_isPlayerAuthorized",!0),Vs(Fs(t),Ks,{writable:!0,value:void 0}),Vs(Fs(t),qs,{writable:!0,value:void 0}),Vs(Fs(t),Xs,{writable:!0,value:{onStart:function(){return t._setRewardedState(a.OPENED)},onSkip:function(){return t._setRewardedState(a.CLOSED)},onReward:function(){return t._setRewardedState(a.REWARDED)},onError:function(){return t._setRewardedState(a.FAILED)}}}),Vs(Fs(t),Qs,{writable:!0,value:{onStart:function(){return t._setInterstitialState(i.OPENED)},onSkip:function(){return t._setInterstitialState(i.CLOSED)},onError:function(){return t._setInterstitialState(i.FAILED)}}}),t}return r=f,(n=[{key:"platformId",get:function(){return t.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:xs(Us(f.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!Ys(this,qs)}},{key:"isRewardedSupported",get:function(){return!!Ys(this,qs)}},{key:"deviceType",get:function(){switch(Ys(this,Ks)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return xs(Us(f.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://telegram.org/js/telegram-web-app.js").then((function(){t._platformSdk=window.Telegram.WebApp;var e=t._platformSdk.initDataUnsafe.user;t._playerId=e.id,t._playerName=[e.first_name,e.last_name].filter(Boolean).join(" "),t._playerPhotos=[e.photo_url],Zs(t,Ks,t._platformSdk.platform),t._isInitialized=!0,t._options&&t._options.adsgramBlockId?Bt("https://sad.adsgram.ai/js/sad.min.js").then((function(){Zs(t,qs,window.Adsgram.init({blockId:t._options.adsgramBlockId}))})).finally((function(){t._resolvePromiseDecorator(v.INITIALIZE)})):t._resolvePromiseDecorator(v.INITIALIZE)}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):xs(Us(f.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||xs(Us(f.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||xs(Us(f.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Array.isArray(t)?n._platformSdk.CloudStorage.getItems(t,(function(n,i){if(n)o(n);else{var a=[];t.forEach((function(t){var e=i[t];if(r&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}a.push(e)})),e(a)}})):n._platformSdk.CloudStorage.getItem(t,(function(t,n){t&&o(t);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(t){}e(i)}))})):xs(Us(f.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(t)?t:[t],i=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));o.forEach((function(t,e){return n._platformSdk.CloudStorage.setItem(t,i[e])})),r()})):xs(Us(f.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return r._platformSdk.CloudStorage.removeItem(t)})),e()})):xs(Us(f.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;Ys(this,qs)?(Ys(this,qs).addEventListener("onStart",Ys(this,Qs).onStart),Ys(this,qs).addEventListener("onSkip",Ys(this,Qs).onSkip),Ys(this,qs).addEventListener("onError",Ys(this,Qs).onError),Ys(this,qs).addEventListener("onBannerNotFound",Ys(this,Qs).onError),Ys(this,qs).show().finally((function(){Ys(t,qs).removeEventListener("onStart",Ys(t,Qs).onStart),Ys(t,qs).removeEventListener("onSkip",Ys(t,Qs).onSkip),Ys(t,qs).removeEventListener("onError",Ys(t,Qs).onError),Ys(t,qs).removeEventListener("onBannerNotFound",Ys(t,Qs).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;Ys(this,qs)?(Ys(this,qs).addEventListener("onStart",Ys(this,Xs).onStart),Ys(this,qs).addEventListener("onSkip",Ys(this,Xs).onSkip),Ys(this,qs).addEventListener("onReward",Ys(this,Xs).onReward),Ys(this,qs).addEventListener("onError",Ys(this,Xs).onError),Ys(this,qs).addEventListener("onBannerNotFound",Ys(this,Xs).onError),Ys(this,qs).show().finally((function(){Ys(t,qs).addEventListener("onStart",Ys(t,Xs).onStart),Ys(t,qs).addEventListener("onSkip",Ys(t,Xs).onSkip),Ys(t,qs).addEventListener("onReward",Ys(t,Xs).onReward),Ys(t,qs).addEventListener("onError",Ys(t,Xs).onError),Ys(t,qs).addEventListener("onBannerNotFound",Ys(t,Xs).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var t=this,e=this._getPromiseDecorator(v.CLIPBOARD_READ);return e||(e=this._createPromiseDecorator(v.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(e){e?t._resolvePromiseDecorator(v.CLIPBOARD_READ,e):t._rejectPromiseDecorator(v.CLIPBOARD_READ)}))),e.promise}}])&&Bs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(lo);var tc=["player"];function ec(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ec(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ic(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nc(t){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(t)}function oc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ic(n.key),n)}}function ic(t){var e=function(t,e){if("object"!=nc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nc(e)?e:String(e)}function ac(){return ac="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ac.apply(this,arguments)}function sc(t,e){return sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sc(t,e)}function cc(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function uc(t){return uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uc(t)}function lc(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function fc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var pc="userData",hc="6129580795478709",dc=new WeakSet,yc=new WeakSet;function mc(){var t=this;return new Promise((function(e,r){t._platformStorageCachedData?e(t._platformStorageCachedData):t._platformSdk.api("user_data/retrieve","POST",{key:pc},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(t){}t._platformStorageCachedData=o,e(o)}))}))}function vc(t){if("ok"===t.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var e=t.authResponse.details,r=e.pid,n=e.locale,o=e.nickname,i=e.first_name,a=e.last_name,s=e.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(t){return!!t})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const _c=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uc(o);if(s){var r=uc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return lc(cc(t=c.call.apply(c,[this].concat(r))),yc),lc(cc(t),dc),t}return r=l,(n=[{key:"platformId",get:function(){return t.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.gameId?Bt("https://cdn.y8.com/api/sdk.js").then((function(){Ft("ID").then((function(){t._platformSdk=window.ID,t._platformSdk.Event.subscribe("id.init",(function(){xt({adSenseId:t._options.channelId?"ca-pub-".concat(hc):t._options.adsenseId,channelId:t._options.channelId,hostId:"ca-host-pub-".concat(hc)}).then((function(e){t._showAd=e})),t._platformSdk.getLoginStatus((function(e){fc(t,yc,vc).call(t,e),t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))})),t._platformSdk.init({appId:t._options.gameId})}))})):this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.login((function(n){fc(t,yc,vc).call(t,n),"ok"===n.status?(t._platformStorageCachedData=null,e()):r()}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ac(uc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ac(uc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){fc(n,dc,mc).call(n).then((function(n){var o=(Array.isArray(t)?t:[t]).map((function(t){var e=n[t];return r||"object"!==nc(e)||null===e?null!=e?e:null:JSON.stringify(e)}));e(o)})).catch(o)})):ac(uc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){fc(n,dc,mc).call(n).then((function(i){var a=rc({},i);if(Array.isArray(t))for(var s=0;s<t.length;s++)a[t[s]]=e[s];else a[t]=e;n._platformSdk.api("user_data/submit","POST",{key:pc,value:JSON.stringify(a)},(function(t){"ok"===t.status?(n._platformStorageCachedData=a,r()):o(t)}))})).catch(o)})):ac(uc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){fc(r,dc,mc).call(r).then((function(o){var i=rc({},o);if(Array.isArray(t))for(var a=0;a<t.length;a++)delete i[t[a]];else delete i[t];r._platformSdk.api("user_data/submit","POST",{key:pc,value:JSON.stringify(i)},(function(t){"ok"===t.status?(r._platformStorageCachedData=i,e()):n(t)}))})).catch(n)})):ac(uc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){t._setInterstitialState(i.OPENED)},afterAd:function(){t.interstitialState!==i.FAILED&&t._setInterstitialState(i.CLOSED)},adBreakDone:function(e){"viewed"!==e.breakStatus&&t._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){t._setRewardedState(a.OPENED)},afterAd:function(){t.rewardedState!==a.FAILED&&t._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){t._setRewardedState(a.FAILED)},adViewed:function(){t._setRewardedState(a.REWARDED)},adBreakDone:function(e){"frequencyCapped"!==e.breakStatus&&"other"!==e.breakStatus||t._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={table:t,points:e};this._platformSdk.GameAPI.Leaderboards.save(o,(function(t){var e=t.success,n=t.errormessage;e?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={table:t,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(t){var r=t.scores,n=t.success,o=t.errormessage;if(n){var i=r.map((function(t){return{id:t.playerid,name:t.playername,score:t.points,rank:t.rank,photo:null}}));e._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,i)}else e._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(t){var e=this;return this._isPlayerAuthorized&&t.achievement&&t.achievementkey?new Promise((function(r){e._platformSdk.GameAPI.Achievements.save(t,(function(t){r(t)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.GameAPI.Achievements.listCustom(t,(function(t){t.success?r(t.achievements.map((function(t){var e=t.player;return rc(rc({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,tc)),{},{playerid:e.playerid,playername:e.playername,lastupdated:e.lastupdated,date:e.date,rdate:e.rdate})}))):n(new Error(t.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(t){return this._platformSdk.GameAPI.Achievements.list(t),Promise.resolve()}}])&&oc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function Sc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bc(n.key),n)}}function bc(t){var e=function(t,e){if("object"!=gc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gc(e)?e:String(e)}function Ec(){return Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ec.apply(this,arguments)}function Pc(t,e){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pc(t,e)}function wc(t){return wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wc(t)}const Ac=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wc(o);if(s){var r=wc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?Bt("https://lagged.com/api/rev-share/lagged.js").then((function(){Ft("LaggedAPI").then((function(){t._platformSdk=window.LaggedAPI,t._platformSdk.init(t._options.devId,t._options.publisherId),t._platformSdk.User.get((function(e){var r,n=null!==(r=null==e?void 0:e.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(t._playerId=o,t._playerName=i,t._playerPhotos.push(a),t._isPlayerAuthorized=!0),t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))})):this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND)),e.promise}},{key:"isStorageSupported",value:function(t){return t!==u.PLATFORM_INTERNAL&&Ec(wc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t!==u.PLATFORM_INTERNAL&&Ec(wc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){t._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(e,r){e?r():t._setRewardedState(a.FAILED)}),(function(e){e?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={score:e,board:t};this._platformSdk.Scores.save(o,(function(t){t.success?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,t.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(t){var e=this;return t.achievement?new Promise((function(r,n){e._platformSdk.Achievements.save(Array.isArray(t.achievement)?t.achievement:[t.achievement],(function(t){t.success?r(t):n(t.errormsg)}))})):Promise.reject()}}])&&Sc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function Oc(){Oc=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ic(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ic(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Tc(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kc(Object(r),!0).forEach((function(e){xc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ic(t){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(t)}function Rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hc(n.key),n)}}function jc(){return jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},jc.apply(this,arguments)}function Nc(t,e){return Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nc(t,e)}function Cc(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Gc(t){return Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gc(t)}function Mc(t,e){Bc(t,e),e.add(t)}function Bc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xc(t,e,r){return(e=Hc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hc(t){var e=function(t,e){if("object"!=Ic(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ic(e)?e:String(e)}function Fc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Uc(t,e,"set"),r),r}function Uc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Vc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Wc=new WeakMap,zc=new WeakSet,Zc=new WeakSet,Yc=new WeakSet,Jc=new WeakSet;function Kc(){var t=this;t._platformSdk.overlayViews.setCustomEventHandler((function(e){if("leaderboard"===e)Fc(t,Wc,!0);else if("close"===e){if(function(t,e){return e.get?e.get.call(t):e.value}(r=t,Uc(r,Wc,"get")))return void Fc(t,Wc,!1);t._overlay&&(document.body.removeChild(document.getElementById(t._overlay.iframeElement.id)),t._overlay.dismissAsync(),t._overlay=null)}var r}))}function qc(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[t])return this._preloadedInterstitialPromises[t];var r=null;return this._preloadedInterstitialPromises[t]=this._platformSdk.getInterstitialAdAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedInterstitialPromises[t]=null,Promise.reject()})),this._preloadedInterstitialPromises[t]}function Xc(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[t])return this._preloadedRewardedPromises[t];var r=null;return this._preloadedRewardedPromises[t]=this._platformSdk.getRewardedVideoAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedRewardedPromises[t]=null,Promise.reject()})),this._preloadedRewardedPromises[t]}function Qc(){return $c.apply(this,arguments)}function $c(){var t;return t=Oc().mark((function t(){return Oc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",Promise.resolve());case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(0),"INVALID_OPERATION"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=13;break}t.next=14;break;case 13:throw new Error(t.t0);case 14:return t.prev=15,t.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!t.sent){t.next=21;break}return t.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:t.next=28;break;case 23:if(t.prev=23,t.t1=t.catch(15),"INVALID_OPERATION"!==(null===t.t1||void 0===t.t1?void 0:t.t1.code)){t.next=27;break}return t.abrupt("return",Promise.resolve());case 27:throw new Error(t.t1);case 28:return t.abrupt("return",Promise.resolve());case 29:case"end":return t.stop()}}),t,this,[[0,8],[15,23]])})),$c=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Tc(i,n,o,a,s,"next",t)}function s(t){Tc(i,n,o,a,s,"throw",t)}a(void 0)}))},$c.apply(this,arguments)}const tu=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nc(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gc(o);if(c){var r=Gc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ic(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Cc(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Mc(Cc(t=f.call.apply(f,[this].concat(i))),Jc),Mc(Cc(t),Yc),Mc(Cc(t),Zc),Mc(Cc(t),zc),xc(Cc(t),"_contextId",null),xc(Cc(t),"_supportedApis",[]),xc(Cc(t),"_preloadedInterstitialPromises",{}),xc(Cc(t),"_preloadedRewardedPromises",{}),xc(Cc(t),"_defaultStorageType",u.PLATFORM_INTERNAL),xc(Cc(t),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},Bc(e=Cc(t),r=Wc),r.set(e,n),t}return r=p,n=[{key:"platformId",get:function(){return t.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||jc(Gc(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return jc(Gc(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return"native_popup"}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return Ft("FBInstant")})).then((function(){return t._platformSdk=window.FBInstant,t._platformSdk.initializeAsync()})).then((function(){return t._isPlayerAuthorized=!0,t._playerId=t._platformSdk.player.getID(),t._contextId=t._platformSdk.context.getID(),t._platformLanguage=t._platformSdk.getLocale(),"string"==typeof t._platformLanguage&&(t._platformLanguage=t._platformLanguage.substring(0,2).toLowerCase()),t._supportedApis=t._platformSdk.getSupportedAPIs(),Vc(t,zc,Kc).call(t),Promise.allSettled([t._platformSdk.community.canFollowOfficialPageAsync(),t._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(e){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return Rc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rc(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;t._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(e){return t._rejectPromiseDecorator(v.INITIALIZE,e)}))),e.promise}},{key:"sendMessage",value:function(t){var e=this;return t===h.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return Vc(e,Jc,Qc).call(e)}),0),new Promise((function(t){e._platformSdk.startGameAsync().then(t)}))):jc(Gc(p.prototype),"sendMessage",this).call(this,t)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):jc(Gc(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:jc(Gc(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.player.getDataAsync(i).then((function(t){var n=i.map((function(e){var n=t[e];return r||"object"!==Ic(n)||null===n?null!=n?n:null:JSON.stringify(n)}));e(n)})).catch(o)})):jc(Gc(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):jc(Gc(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null;else o[t]=null;r._platformSdk.player.setDataAsync(o).then(e).catch(n)})):jc(Gc(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t,e){var r=this;this._platformSdk.loadBannerAdAsync(e,t).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideBannerAdAsync().then((function(){t._setBannerState(s.HIDDEN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(t){Vc(this,Zc,qc).call(this,t)}},{key:"showInterstitial",value:function(t){var e=this;Vc(this,Zc,qc).call(this,t).then((function(t){return e._setInterstitialState(i.OPENED),t.showAsync()})).then((function(){e._setInterstitialState(i.CLOSED),Vc(e,Zc,qc).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!1)}))}},{key:"preloadRewarded",value:function(t){Vc(this,Yc,Xc).call(this,t)}},{key:"showRewarded",value:function(t){var e=this;Vc(this,Yc,Xc).call(this,t).then((function(t){return e._setRewardedState(a.OPENED),t.showAsync()})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),Vc(e,Yc,Xc).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!0)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.globalLeaderboards.setScoreAsync(t,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){var e=this,r=this._getPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="9999",t.id="loading-overlay";var e=document.createElement("div");return e.style.fontSize="24px",e.style.color="#fff",e.innerText="Loading...",t.appendChild(e),t}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(t,20).then((function(t){var r=t.map((function(t){return{score:t.getScore(),sessionID:t.getPlayer().getSessionID()}})),o=e._platformSdk.overlayViews.createOverlayViewWithXMLString(\'\\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\\n                <For source="{{players}}" itemName="player">\\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\\n                      <Text content="{{player.score}}" />\\n                    </View>\\n                </For>\\n            </View>\\n        </View>\\n    </View>\\n\',"",{players:r},(function(t){t.showAsync(),e._overlay=t,n.remove(),e._resolvePromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(t,r){n.remove(),e._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(t){n.remove(),e._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=Dc({id:t},r);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(v.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=e.map((function(t){var e=r.find((function(e){return e.productID===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceAmount}}));t._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=Dc({id:r.find((function(e){return e.id===t.productID})).id},t);return delete e.productID,e})),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.image||!e.text)return Promise.reject();if(!Ut(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.inviteAsync(e).then((function(){t._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(v.INVITE_FRIENDS,e)}))),r.promise}},{key:"joinCommunity",value:function(t){var e=this,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),t&&!0===t.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(t){return e._resolvePromiseDecorator(v.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(v.JOIN_COMMUNITY,t)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(t){return e._resolvePromiseDecorator(v.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(v.JOIN_COMMUNITY,t)}))),r.promise}},{key:"share",value:function(t){var e=this;if(!t.image||!t.text)return Promise.reject();if(!Ut(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.shareAsync(Dc({intent:"REQUEST"},t)).then((function(){e._resolvePromiseDecorator(v.SHARE)})).catch((function(t){e._rejectPromiseDecorator(v.SHARE,t)}))),r.promise}}],n&&Lc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(lo);function eu(t){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(t)}function ru(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nu(n.key),n)}}function nu(t){var e=function(t,e){if("object"!=eu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eu(e)?e:String(e)}var ou,iu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"send",value:function(t){Zt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*")}},{key:"addListener",value:function(t){window.addEventListener("message",t)}},{key:"removeListener",value:function(t){window.removeEventListener("message",t)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&ru(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function au(){au=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==fu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fu(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function su(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cu(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function uu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uu(Object(r),!0).forEach((function(e){gu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fu(t){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(t)}function pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Su(n.key),n)}}function hu(t,e){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hu(t,e)}function du(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function yu(t,e){_u(t,e),e.add(t)}function mu(){return mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mu.apply(this,arguments)}function vu(t){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vu(t)}function _u(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gu(t,e,r){return(e=Su(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Su(t){var e=function(t,e){if("object"!=fu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fu(e)?e:String(e)}function bu(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}function Eu(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Pu="banner",wu="bridge",Au={IS_STORAGE_AVAILABLE:"is_storage_available",IS_STORAGE_SUPPORTED:"is_storage_supported",GET_DATA_FROM_STORAGE:"get_data_from_storage",SET_DATA_TO_STORAGE:"set_data_to_storage",DELETE_DATA_FROM_STORAGE:"delete_data_from_storage",GET_SERVER_TIME:"get_server_time",CHECK_ADBLOCK:"check_adblock",CLIPBOARD_READ:"clipboard_read",LIVENESS_PING:"ping",UNLOCK_ACHIEVEMENT:"unlock_achievement",GET_ACHIEVEMENTS:"get_achievements",SHOW_ACHIEVEMENTS_NATIVE_POPUP:"show_achievements_native_popup",GET_PERFORMANCE_RESOURCES:"get_performance_resources",GET_LANGUAGE:"get_language",GET_PLAYER:"get_player"},Ou="isLocalStorageSupported",Tu="isPlatformInternalStorageSupported",ku="isBannerSupported",Du=new WeakMap,Iu=new WeakSet,Ru=new WeakSet,Lu=new WeakSet,ju=new WeakSet,Nu=new WeakSet,Cu=new WeakSet,Gu=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hu(t,e)}(l,r);var n,o,i,a,c=(i=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vu(i);if(a){var r=vu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return du(t)}(this,t)});function l(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return yu(du(t=c.call.apply(c,[this].concat(i))),Cu),yu(du(t),Nu),yu(du(t),ju),yu(du(t),Lu),yu(du(t),Ru),yu(du(t),Iu),gu(du(t),"_supportedFeatures",[]),gu(du(t),"_leaderboardsType",null),e=du(t),r=Du,n={writable:!0,value:new iu},_u(e,r),r.set(e,n),t}return n=l,(o=[{key:"platformId",get:function(){return t.QA_TOOL}},{key:"platformLanguage",get:function(){return Eu(this,Lu,xu).call(this,{type:e.PLATFORM,action:Au.GET_LANGUAGE,options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(ku)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var t;return null!==(t=this._leaderboardsType)&&void 0!==t?t:d}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),bu(this,Du).addListener((function(r){var n=r.data;if(null!=n&&n.type&&(null==n?void 0:n.source)!==wu)if(n.type===e.PLATFORM){if(n.action===v.INITIALIZE&&Eu(t,Nu,Fu).call(t).then((function(){Eu(t,Iu,Mu).call(t,n)})),n.action===Au.GET_PERFORMANCE_RESOURCES){var o,i=bu(t,Du).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Eu(t,Ru,Bu).call(t,i,a)}}else n.type===e.ADVERTISEMENT&&Eu(t,Cu,Vu).call(t,n)})),Eu(this,Lu,xu).call(this,{type:e.PLATFORM,action:v.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(t){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),Eu(this,ju,Hu).call(this,e.PLAYER,v.AUTHORIZE_PLAYER,{options:t}).then((function(t){var e=t.auth;"success"===e.status?Eu(r,Nu,Fu).call(r).then((function(){r._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)})):r._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e.error)}))),n.promise}},{key:"sendMessage",value:function(t){return[h.GAME_READY,h.IN_GAME_LOADING_STARTED,h.IN_GAME_LOADING_STOPPED,h.GAMEPLAY_STARTED,h.GAMEPLAY_STOPPED,h.PLAYER_GOT_ACHIEVEMENT,h.GAME_OVER].includes(t)?(Eu(this,Lu,xu).call(this,{type:e.PLATFORM,action:t}),Promise.resolve()):mu(vu(l.prototype),"sendMessage",this).call(this,t)}},{key:"getServerTime",value:function(){return Eu(this,ju,Hu).call(this,e.PLATFORM,Au.GET_SERVER_TIME,{options:{}},{timeout:5e3}).then((function(t){var e=t.time;if(!e)throw new Error("Invalid server time");return e})).catch((function(){throw new Error("Server time request timeout")}))}},{key:"isStorageSupported",value:function(t){return Eu(this,Lu,xu).call(this,{type:e.STORAGE,action:Au.IS_STORAGE_SUPPORTED,options:{storageType:t}}),!(t!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(Tu))||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(Ou))}},{key:"isStorageAvailable",value:function(t){return Eu(this,Lu,xu).call(this,{type:e.STORAGE,action:Au.IS_STORAGE_AVAILABLE,options:{storageType:t}}),(t===u.PLATFORM_INTERNAL&&this._supportedFeatures.includes(Tu)&&this._isPlayerAuthorized||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(Ou)))&&mu(vu(l.prototype),"isStorageAvailable",this).call(this,u.LOCAL_STORAGE)}},{key:"getDataFromStorage",value:function(t,r,n){return this.isStorageSupported(r)?Eu(this,ju,Hu).call(this,e.STORAGE,Au.GET_DATA_FROM_STORAGE,{options:{key:t,storageType:r,tryParseJson:n}}).then((function(e){var r=e.storage;return Wt(t,r,n)})):Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,r,n){return Eu(this,Lu,xu).call(this,{type:e.STORAGE,action:Au.SET_DATA_TO_STORAGE,options:{key:t,value:r,storageType:n}}),this.isStorageSupported(n)?n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE?Promise.resolve():mu(vu(l.prototype),"setDataToStorage",this).call(this,t,r,n):Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,r){return Eu(this,Lu,xu).call(this,{type:e.STORAGE,action:Au.DELETE_DATA_FROM_STORAGE,options:{key:t,storageType:r}}),this.isStorageSupported(r)?r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE?Promise.resolve():mu(vu(l.prototype),"deleteDataFromStorage",this).call(this,t,r):Promise.reject(_.STORAGE_NOT_SUPPORTED)}},{key:"showInterstitial",value:function(t){this.isInterstitialSupported&&Eu(this,Lu,xu).call(this,{type:e.ADVERTISEMENT,action:"interstitial",options:{placement:t}})}},{key:"showRewarded",value:function(t){this.isRewardedSupported&&Eu(this,Lu,xu).call(this,{type:e.ADVERTISEMENT,action:"reward",options:{placement:t}})}},{key:"showBanner",value:function(t,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),Eu(this,Lu,xu).call(this,{type:e.ADVERTISEMENT,action:s.SHOWN,options:{type:Pu,position:t,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),Eu(this,Lu,xu).call(this,{type:e.ADVERTISEMENT,action:s.HIDDEN,options:{type:Pu}}))}},{key:"checkAdBlock",value:function(){return Eu(this,Lu,xu).call(this,{type:Au.CHECK_ADBLOCK,action:v.ADBLOCK_DETECT}),mu(vu(l.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var t=this._getPromiseDecorator(v.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(v.INVITE_FRIENDS),this._resolvePromiseDecorator(v.INVITE_FRIENDS),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.INVITE_FRIENDS})),t.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var t=this._getPromiseDecorator(v.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._resolvePromiseDecorator(v.JOIN_COMMUNITY),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.JOIN_COMMUNITY})),t.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var t=this._getPromiseDecorator(v.SHARE);return t||(t=this._createPromiseDecorator(v.SHARE),this._resolvePromiseDecorator(v.SHARE),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.SHARE})),t.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var t=this._getPromiseDecorator(v.CREATE_POST);return t||(t=this._createPromiseDecorator(v.CREATE_POST),this._resolvePromiseDecorator(v.CREATE_POST),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.CREATE_POST})),t.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.ADD_TO_HOME_SCREEN})),t.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var t=this._getPromiseDecorator(v.ADD_TO_FAVORITES);return t||(t=this._createPromiseDecorator(v.ADD_TO_FAVORITES),this._resolvePromiseDecorator(v.ADD_TO_FAVORITES),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.ADD_TO_FAVORITES})),t.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var t=this._getPromiseDecorator(v.RATE);return t||(t=this._createPromiseDecorator(v.RATE),this._resolvePromiseDecorator(v.RATE),Eu(this,Lu,xu).call(this,{type:e.SOCIAL,action:v.RATE})),t.promise}},{key:"paymentsPurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),Eu(this,ju,Hu).call(this,e.PAYMENTS,v.PURCHASE,{options:{product:n}}).then((function(e){var n=e.purchase;if(n&&"object"===fu(n))if(null!=n&&n.status){var o=lu({id:t},n.purchaseData);r._paymentsPurchases.push(o),r._resolvePromiseDecorator(v.PURCHASE,o)}else r._rejectPromiseDecorator(v.PURCHASE,(null==n?void 0:n.error)||new Error("Unknown purchase error"));else r._rejectPromiseDecorator(v.PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsConsumePurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(v.CONSUME_PURCHASE);return o||(o=this._createPromiseDecorator(v.CONSUME_PURCHASE),Eu(this,ju,Hu).call(this,e.PAYMENTS,v.CONSUME_PURCHASE,{options:{product:this._paymentsPurchases[n]}}).then((function(e){var o=e.purchase;if(o&&"object"===fu(o))if(null!=o&&o.status){var i=lu({id:t},o);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(v.CONSUME_PURCHASE,i)}else r._rejectPromiseDecorator(v.CONSUME_PURCHASE,(null==o?void 0:o.error)||new Error("Unknown consume purchase error"));else r._rejectPromiseDecorator(v.CONSUME_PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);if(!r){r=this._createPromiseDecorator(v.GET_CATALOG);var n=this._paymentsGetProductsPlatformData();Eu(this,ju,Hu).call(this,e.PAYMENTS,v.GET_CATALOG,{options:{products:n}}).then((function(){var e=n.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));t._resolvePromiseDecorator(v.GET_CATALOG,e)}))}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(v.GET_PURCHASES);return r||(r=this._createPromiseDecorator(v.GET_PURCHASES),Eu(this,ju,Hu).call(this,e.PAYMENTS,v.GET_PURCHASES,{options:{products:this._paymentsGetProductsPlatformData()}}).then((function(e){var r=e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){return lu({id:n.find((function(e){return e.id===t.id})).id},t.purchaseData)})),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)}))),r.promise}},{key:"getRemoteConfig",value:function(){var t=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(v.GET_REMOTE_CONFIG),Eu(this,ju,Hu).call(this,e.REMOTE_CONFIG,v.GET_REMOTE_CONFIG).then((function(e){var r=e.result;t._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,r)}))),r.promise}},{key:"clipboardWrite",value:function(t){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(v.CLIPBOARD_WRITE);return n||(n=this._createPromiseDecorator(v.CLIPBOARD_WRITE),Eu(this,ju,Hu).call(this,e.CLIPBOARD,v.CLIPBOARD_WRITE,{options:{text:t}}).then((function(){r._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0)}))),n.promise}},{key:"clipboardRead",value:function(){var t=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(Au.CLIPBOARD_READ);return r||(r=this._createPromiseDecorator(Au.CLIPBOARD_READ),Eu(this,ju,Hu).call(this,e.CLIPBOARD,Au.CLIPBOARD_READ,{options:{}}).then((function(e){var r=e.text;t._resolvePromiseDecorator(Au.CLIPBOARD_READ,r)}))),r.promise}},{key:"leaderboardsSetScore",value:function(t,r){if(this.leaderboardsType===d)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={id:t,score:r};Eu(this,Lu,xu).call(this,{type:e.LEADERBOARDS,action:v.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var r=this;if(this.leaderboardsType===d||this.leaderboardsType===m)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);return n||(n=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES),Eu(this,ju,Hu).call(this,e.LEADERBOARDS,v.LEADERBOARDS_GET_ENTRIES,{options:{id:t}},{timeout:5e3}).then((function(t){var e=t.entries;r._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,e)})).catch((function(){r._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES)}))),n.promise}},{key:"unlockAchievement",value:function(t){return this.isAchievementsSupported?Eu(this,ju,Hu).call(this,e.ACHIEVEMENTS,Au.UNLOCK_ACHIEVEMENT,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"getAchievementsList",value:function(t){return this.isGetAchievementsListSupported?Eu(this,ju,Hu).call(this,e.ACHIEVEMENTS,Au.GET_ACHIEVEMENTS,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?(Eu(this,Lu,xu).call(this,{type:e.ACHIEVEMENTS,action:Au.SHOW_ACHIEVEMENTS_NATIVE_POPUP}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(t){return lu({id:t.id},t.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));return r?lu({id:r.id},r.playgama):null}}])&&pu(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),l}(lo);function Mu(t){var e,r,n,o;this._supportedFeatures=t.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(ku);var i=t.config,a=void 0===i?{}:i;this._deviceType=null!==(e=a.deviceType)&&void 0!==e?e:mu(vu(ou.prototype),"deviceType",this),this._platformLanguage=a.platformLanguage?a.platformLanguage.toLowerCase():mu(vu(ou.prototype),"platformLanguage",this),this._platformTld=null!==(r=a.platformTld)&&void 0!==r?r:mu(vu(ou.prototype),"platformTld",this),this._platformPayload=null!==(n=a.platformPayload)&&void 0!==n?n:mu(vu(ou.prototype),"platformPayload",this),this._leaderboardsType=null!==(o=a.leaderboardsType)&&void 0!==o?o:d,this._paymentsPurchases=t.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE),Eu(this,Lu,xu).call(this,{type:"liveness",action:Au.LIVENESS_PING,options:{version:"1.27.0"}})}function Bu(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(t){var e={};return i.forEach((function(r){r in t&&(e[r]=t[r])})),e}));return Eu(this,Lu,xu).call(this,{type:e.PLATFORM,action:Au.GET_PERFORMANCE_RESOURCES,id:t,options:{resources:a}}),Promise.resolve(o)}function xu(t){bu(this,Du).send(lu({source:wu},t))}function Hu(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=bu(this,Du).generateMessageId(),a=lu({timeout:0},o);return new Promise((function(s,c){var u=function n(o){var a=o.data;(null==a?void 0:a.type)===t&&(null==a?void 0:a.action)===e&&(null==a?void 0:a.id)===i&&(null==a?void 0:a.source)!==wu&&(bu(r,Du).removeListener(n),s(a))};bu(r,Du).addListener(u),Eu(r,Lu,xu).call(r,lu({type:t,action:e,id:i,options:o},n)),a.timeout>0&&setTimeout((function(){c(new Error("Request timeout")),bu(r,Du).removeListener(u)}),a.timeout)}))}function Fu(){return Uu.apply(this,arguments)}function Uu(){var t;return t=au().mark((function t(){var r=this;return au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Eu(this,ju,Hu).call(this,e.PLAYER,Au.GET_PLAYER).then((function(t){var e,n=t.player;null!=n&&n.isAuthorized?(r._playerId=n.userId,r._isPlayerAuthorized=n.isAuthorized,r._playerName=n.name,Array.isArray(n.photos)&&(r._playerPhotos=function(t){if(Array.isArray(t))return su(t)}(e=n.photos)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return su(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?su(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=n,r._defaultStorageType=u.PLATFORM_INTERNAL):r._playerApplyGuestData()})).catch((function(){r._playerApplyGuestData()})));case 1:case"end":return t.stop()}}),t,this)})),Uu=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cu(i,n,o,a,s,"next",t)}function s(t){cu(i,n,o,a,s,"throw",t)}a(void 0)}))},Uu.apply(this,arguments)}function Vu(t){var e=t.action,r=t.payload;if("interstitial"===e){if(!this.isInterstitialSupported)return;switch(r.status){case"start":this._setInterstitialState(i.LOADING);break;case"open":this._setInterstitialState(i.OPENED);break;case"failed":this._setInterstitialState(i.FAILED);break;case"close":this._setInterstitialState(i.CLOSED)}}else if("reward"===e){if(!this.isRewardedSupported)return;switch(r.status){case"start":this._setRewardedState(a.LOADING);break;case"open":this._setRewardedState(a.OPENED);break;case"rewarded":this._setRewardedState(a.REWARDED);break;case"close":this._setRewardedState(a.CLOSED);break;case"failed":this._setRewardedState(a.FAILED)}}}ou=Gu;const Wu=Gu;function zu(t){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(t)}function Zu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yu(n.key),n)}}function Yu(t){var e=function(t,e){if("object"!=zu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zu(e)?e:String(e)}function Ju(){return Ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ju.apply(this,arguments)}function Ku(t,e){return Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ku(t,e)}function qu(t){return qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qu(t)}const Xu=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ku(t,e)}(u,e);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qu(o);if(s){var r=qu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return t.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Ft("PokiSDK","init").then((function(){t._platformSdk=window.PokiSDK,t._platformSdk.init().then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return Ju(qu(u.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this,e=!1;this._platformSdk.commercialBreak((function(){e=!0,t._setInterstitialState(i.OPENED)})).then((function(){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)})).catch((function(e){t._setInterstitialState(i.FAILED,e)}))}},{key:"showRewarded",value:function(){var t=this,e=!1;this._platformSdk.rewardedBreak((function(){e=!0,t._setRewardedState(a.OPENED)})).then((function(r){e?(r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(e){t._setRewardedState(a.FAILED,e)}))}}])&&Zu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(lo);function Qu(t){return Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(t)}function $u(){$u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Qu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Qu(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function tl(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function el(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tl(i,n,o,a,s,"next",t)}function s(t){tl(i,n,o,a,s,"throw",t)}a(void 0)}))}}function rl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rl(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=il(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ol(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,il(n.key),n)}}function il(t){var e=function(t,e){if("object"!=Qu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qu(e)?e:String(e)}function al(){return al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ul(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},al.apply(this,arguments)}function sl(t,e){return sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sl(t,e)}function cl(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function ul(t){return ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ul(t)}function ll(t,e){pl(t,e),e.add(t)}function fl(t,e,r){pl(t,e),e.set(t,r)}function pl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hl(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ml(t,e,"set"),r),r}function dl(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function yl(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ml(t,e,"get"))}function ml(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var vl=new WeakMap,_l=new WeakMap,gl=new WeakSet,Sl=new WeakSet,bl=new WeakSet,El=new WeakSet;function Pl(){var t=this;return yl(this,vl)?new Promise((function(e){yl(t,vl).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!1).then((function(){return e()}));case"ready":t._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){t._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!1).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setInterstitialState(i.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!1)}function wl(){var t=this;return yl(this,vl)?new Promise((function(e){yl(t,vl).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!0).then((function(){return e()}));case"ready":t._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){t._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){t._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!0).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setRewardedState(a.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!0)}function Al(t){t?(this._isPlayerAuthorized=!0,this._playerId=t.playerId,this._playerName=t.playerDisplayName,this._playerExtra=t,hl(this,_l,"personal"===t.userAccountType.toLowerCase())):this._playerApplyGuestData()}function Ol(t){return Tl.apply(this,arguments)}function Tl(){return Tl=el($u().mark((function t(e){var r,n=arguments;return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSave.getDataAsync({gameId:this._options.gameId});case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",Wt(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)}))),Tl.apply(this,arguments)}const kl=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sl(t,e)}(d,e);var r,n,o,c,l,f,p,h=(f=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ul(f);if(p){var r=ul(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cl(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ll(cl(t=h.call.apply(h,[this].concat(r))),El),ll(cl(t),bl),ll(cl(t),Sl),ll(cl(t),gl),fl(cl(t),vl,{writable:!0,value:null}),fl(cl(t),_l,{writable:!0,value:!1}),t}return r=d,n=[{key:"platformId",get:function(){return t.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return yl(this,_l)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);if(!e){var r;e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.21.min.js").then((function(){return Ft("$msstart")})).then((function(){t._platformSdk=window.$msstart,t._platformSdk.getSignedInUserAsync().then((function(e){dl(t,bl,Al).call(t,e)})).catch((function(){dl(t,bl,Al).call(t,null)})).finally((function(){t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&Bt("https://playgama.com/ads/msn.v0.1.js").then((function(){return Ft("pgAds")})).then((function(){window.pgAds.init(n).then((function(){hl(t,vl,window.pgAds);var e=t._options.gameId;yl(t,vl).updateTargeting({gameId:e})}))}))}return e.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.signInAsync().then((function(r){dl(t,bl,Al).call(t,r),e()})).catch((function(e){dl(t,bl,Al).call(t,null),r(e)}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||al(ul(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:al(ul(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?dl(this,El,Ol).call(this,t,r):Promise.reject():al(ul(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?nl({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSave.saveDataAsync({data:i,gameId:n._options.gameId}).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject():al(ul(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null,delete r._platformStorageCachedData[t[i]];else o[t]=null,delete r._platformStorageCachedData[t];r.platformSdk.cloudSave.saveDataAsync({data:o,gameId:r._options.gameId}).then((function(){e()})).catch((function(t){n(t)}))})):Promise.reject():al(ul(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.shareAsync(t).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;return new Promise((function(t,n){r._platformSdk.submitGameResultsAsync(e).then(t).catch(n)}))}},{key:"showBanner",value:function(t){var e,r=this;e="top"===t?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([e]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideDisplayAdsAsync().then((function(){t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.loadAdsAsync(!1).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setInterstitialState(i.OPENED),e.showAdsCompletedAsync})).then((function(){return t._setInterstitialState(i.CLOSED)})).catch((function(){return dl(t,gl,Pl).call(t)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.loadAdsAsync(!0).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setRewardedState(a.OPENED),e.showAdsCompletedAsync})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return dl(t,Sl,wl).call(t)}))}},{key:"paymentsPurchase",value:(l=el($u().mark((function t(e){var r,n,o,i;return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._paymentsGetProductPlatformData(e)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(v.PURCHASE)){t.next=23;break}if(n=this._createPromiseDecorator(v.PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.purchaseAsync({productId:r.platformProductId});case 12:if("IAP_PURCHASE_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:i=nl(nl({id:e},o.receipt),{},{receiptSignature:o.receiptSignature}),this._paymentsPurchases.push(i),this._resolvePromiseDecorator(v.PURCHASE,i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),this._rejectPromiseDecorator(v.PURCHASE,t.t0);case 23:return t.abrupt("return",n.promise);case 24:case"end":return t.stop()}}),t,this,[[6,20]])}))),function(t){return l.apply(this,arguments)})},{key:"paymentsConsumePurchase",value:(c=el($u().mark((function t(e){var r,n,o,i;return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this._paymentsPurchases.findIndex((function(t){return t.id===e})))<0)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(v.CONSUME_PURCHASE)){t.next=24;break}if(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].productId});case 12:if("IAP_CONSUME_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:this._paymentsPurchases.splice(r,1),delete(i=nl(nl({id:e},o.consumptionReceipt),{},{consumptionSignature:o.consumptionSignature})).productId,this._resolvePromiseDecorator(v.CONSUME_PURCHASE,i),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),this._rejectPromiseDecorator(v.CONSUME_PURCHASE,t.t0);case 24:return t.abrupt("return",n.promise);case 25:case"end":return t.stop()}}),t,this,[[6,21]])}))),function(t){return c.apply(this,arguments)})},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=e.map((function(t){var e=r.find((function(e){return e.productId===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,publisherName:e.publisherName,inAppOfferToken:e.inAppOfferToken,isConsumable:e.isConsumable,price:"".concat(e.price.listPrice," ").concat(e.price.currencyCode," "),priceCurrencyCode:e.price.currencyCode,priceValue:e.price.listPrice}}));t._resolvePromiseDecorator(v.GET_CATALOG,n)}else t._rejectPromiseDecorator(v.GET_CATALOG,r.description)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:(o=el($u().mark((function t(){var e,r,n;return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._getPromiseDecorator(v.GET_PURCHASES)){t.next=20;break}if(e=this._createPromiseDecorator(v.GET_PURCHASES),t.prev=3,this._isPlayerAuthorized){t.next=7;break}return t.next=7,this.authorizePlayer();case 7:return t.next=9,this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId});case 9:if("IAP_GET_ALL_PURCHASES_FAILURE"!==(r=t.sent).code){t.next=12;break}throw new Error(r.description);case 12:n=this._paymentsGetProductsPlatformData(),this._paymentsPurchases=r.receipts.map((function(t){return nl(nl({id:n.find((function(e){return e.platformProductId===t.productId})).id},t),{},{receiptSignature:r.receiptSignature})})),this._resolvePromiseDecorator(v.GET_PURCHASES,this._paymentsPurchases),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),this._rejectPromiseDecorator(v.GET_PURCHASES,t.t0);case 20:return t.abrupt("return",e.promise);case 21:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return o.apply(this,arguments)})}],n&&ol(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(lo);function Dl(t){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(t)}function Il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Il(Object(r),!0).forEach((function(e){Bl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xl(n.key),n)}}function jl(){return jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},jl.apply(this,arguments)}function Nl(t,e){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nl(t,e)}function Cl(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Gl(t){return Gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gl(t)}function Ml(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Bl(t,e,r){return(e=xl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xl(t){var e=function(t,e){if("object"!=Dl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dl(e)?e:String(e)}function Hl(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Fl=new WeakSet,Ul=new WeakSet,Vl=new WeakSet,Wl=new WeakSet,zl=new WeakSet,Zl=new WeakSet,Yl=new WeakSet,Jl=new WeakSet,Kl=new WeakSet,ql=new WeakSet,Xl=new WeakSet,Ql=new WeakSet,$l=new WeakSet;function tf(t,e){var r;r=JSON.stringify({action:t,data:e}),window.system&&window.system[Mt](r)}function ef(){if(window.system){var t=this;window.system.onmessage=function(e){try{var r=JSON.parse(e),n=r.action,o=r.data;n===v.INITIALIZE?Hl(t,Vl,rf).call(t,o):n===v.AUTHORIZE_PLAYER?Hl(t,Wl,nf).call(t,o):n===v.SET_INTERSTITIAL_STATE?Hl(t,zl,of).call(t,o):n===v.SET_REWARDED_STATE?Hl(t,Zl,af).call(t,o):n===v.GET_CATALOG?Hl(t,Yl,sf).call(t,o):n===v.PURCHASE?Hl(t,Jl,cf).call(t,o):n===v.CONSUME_PURCHASE?Hl(t,Kl,uf).call(t,o):n===v.GET_PURCHASES?Hl(t,ql,lf).call(t,o):n===v.GET_STORAGE_DATA?Hl(t,Xl,ff).call(t,o):n===v.SET_STORAGE_DATA?Hl(t,Ql,pf).call(t,o):n===v.DELETE_STORAGE_DATA&&Hl(t,$l,hf).call(t,o)}catch(t){console.error("Error parsing Huawei message:",t)}}}}function rf(t){t.success?(this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE,t)):this._rejectPromiseDecorator(v.INITIALIZE,new Error(t))}function nf(t){if(!t.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,new Error(t));this._playerId=t.playerId,this._playerName=t.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}function of(t){Object.values(i).includes(t.state)&&this._setInterstitialState(t.state,t.state===i.FAILED?new Error(t):void 0)}function af(t){Object.values(a).includes(t.state)&&this._setRewardedState(t.state,t.state===a.FAILED?new Error(t):void 0)}function sf(t){if(t.success){var e=this._paymentsGetProductsPlatformData().map((function(e){var r=t.data.find((function(t){return t.productId===e.id}));return{id:e.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(v.GET_CATALOG,e)}else this._rejectPromiseDecorator(v.GET_CATALOG,new Error(t))}function cf(t){if(t.success){var e=t.data,r=Rl({id:t.id},e);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(v.PURCHASE,r)}else this._rejectPromiseDecorator(v.PURCHASE,new Error(t))}function uf(t){if(t.success){var e=this._paymentsPurchases.findIndex((function(e){return e.purchaseToken===t.purchaseToken}));e>=0&&this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(v.CONSUME_PURCHASE,t)}else this._rejectPromiseDecorator(v.CONSUME_PURCHASE,new Error(t))}function lf(t){if(t.success){var e=this._paymentsGetProductsPlatformData();this._paymentsPurchases=t.data.map((function(t){var r=JSON.parse(t),n=Rl({id:e.find((function(t){return t.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(v.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(v.GET_PURCHASES,new Error(t))}function ff(t){t.success?this._resolvePromiseDecorator(v.GET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(v.GET_STORAGE_DATA,new Error(t))}function pf(t){t.success?this._resolvePromiseDecorator(v.SET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(v.SET_STORAGE_DATA,new Error(t))}function hf(t){t.success?this._resolvePromiseDecorator(v.DELETE_STORAGE_DATA,t.data):this._rejectPromiseDecorator(v.DELETE_STORAGE_DATA,new Error(t))}const df=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nl(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gl(o);if(i){var r=Gl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Cl(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Ml(Cl(t=a.call.apply(a,[this].concat(r))),$l),Ml(Cl(t),Ql),Ml(Cl(t),Xl),Ml(Cl(t),ql),Ml(Cl(t),Kl),Ml(Cl(t),Jl),Ml(Cl(t),Yl),Ml(Cl(t),Zl),Ml(Cl(t),zl),Ml(Cl(t),Wl),Ml(Cl(t),Vl),Ml(Cl(t),Ul),Ml(Cl(t),Fl),Bl(Cl(t),"_defaultStorageType",u.PLATFORM_INTERNAL),t}return r=s,(n=[{key:"platformId",get:function(){return t.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,Hl(this,Ul,ef).call(this),Hl(this,Fl,tf).call(this,v.INITIALIZE,this._appId)):this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND)),t.promise}},{key:"authorizePlayer",value:function(){var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),Hl(this,Fl,tf).call(this,v.AUTHORIZE_PLAYER)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||jl(Gl(s.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||jl(Gl(s.prototype),"isStorageAvailable",this).call(this,t)}},{key:"setDataToStorage",value:function(t,e,r){if(r!==u.PLATFORM_INTERNAL)return jl(Gl(s.prototype),"setDataToStorage",this).call(this,t,e,r);var n=this._getPromiseDecorator(v.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(v.SET_STORAGE_DATA),Hl(this,Fl,tf).call(this,v.SET_STORAGE_DATA,{key:t,value:e})),n.promise}},{key:"getDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return jl(Gl(s.prototype),"getDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(v.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(v.GET_STORAGE_DATA),Hl(this,Fl,tf).call(this,v.GET_STORAGE_DATA,t)),r.promise}},{key:"deleteDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return jl(Gl(s.prototype),"deleteDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(v.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(v.DELETE_STORAGE_DATA),Hl(this,Fl,tf).call(this,v.DELETE_STORAGE_DATA,t)),r.promise}},{key:"showInterstitial",value:function(t){Hl(this,Fl,tf).call(this,v.SHOW_INTERSTITIAL,t)}},{key:"showRewarded",value:function(t){Hl(this,Fl,tf).call(this,v.SHOW_REWARDED,t)}},{key:"paymentsPurchase",value:function(t){if(!this._paymentsGetProductPlatformData(t))return Promise.reject();var e=this._getPromiseDecorator(v.PURCHASE);return e||(e=this._createPromiseDecorator(v.PURCHASE),Hl(this,Fl,tf).call(this,v.PURCHASE,t)),e.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject();var r=this._getPromiseDecorator(v.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(v.CONSUME_PURCHASE),Hl(this,Fl,tf).call(this,v.CONSUME_PURCHASE,this._paymentsPurchases[e].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=this._getPromiseDecorator(v.GET_CATALOG);return e||(e=this._createPromiseDecorator(v.GET_CATALOG),Hl(this,Fl,tf).call(this,v.GET_CATALOG,t.map((function(t){return t.id})))),e.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),Hl(this,Fl,tf).call(this,v.GET_PURCHASES)),t.promise}}])&&Ll(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(lo);function yf(t){return yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(t)}function mf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mf(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ef(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _f(){_f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==yf(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yf(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function gf(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Sf(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gf(i,n,o,a,s,"next",t)}function s(t){gf(i,n,o,a,s,"throw",t)}a(void 0)}))}}function bf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ef(n.key),n)}}function Ef(t){var e=function(t,e){if("object"!=yf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yf(e)?e:String(e)}function Pf(){return Pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Of(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Pf.apply(this,arguments)}function wf(t,e){return wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wf(t,e)}function Af(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Of(t){return Of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Of(t)}var Tf=new WeakSet;function kf(){var t=this,e={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=e[r];n&&(t._setRewardedState(n),n===a.REWARDED&&t._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(e){var n=r[e];n&&t._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(e){var r=n[e];r&&t._setBannerState(r)}))}const Df=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wf(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Of(a);if(s){var r=Of(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Af(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Af(t=c.call.apply(c,[this].concat(o))),r=Tf),r.add(e),t}return r=l,n=[{key:"platformId",get:function(){return t.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);if(!e){var r;switch(e=this._createPromiseDecorator(v.INITIALIZE),new URLSearchParams(window.location.search).get("target")){case"prod":default:r="https://app.bitquest.games/bqsdk.min.js";break;case"stage":r="https://app-stage.bitquest.games/bqsdk.min.js";break;case"bank":r="https://app-global.memebeat.io/bqsdk.min.js"}Bt(r).then((function(){Ft("bq").then((function(){t._platformSdk=window.bq,t._platformSdk.initialize().then((function(){t._platformSdk.platform.sendMessage("game_ready");var e=t._platformSdk.player,r=e.id,n=void 0===r?null:r,o=e.name,i=void 0===o?"":o;t._playerId=n,t._playerName=i,t._isPlayerAuthorized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._playerExtra=e,function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,Tf,kf).call(t),t.showPreRoll(),t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(v.INITIALIZE,e)}))}))}))}return e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Pf(Of(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Pf(Of(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return n._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return this._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Pf(Of(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=Sf(_f().mark((function t(e,r,n){return _f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return t.next=3,this._platformSdk.storage.set(e,r,"platform_internal");case 3:return t.abrupt("return");case 4:return t.next=6,Pf(Of(l.prototype),"setDataToStorage",this).call(this,e,r,n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Sf(_f().mark((function t(e,r){var n;return _f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=13;break}if(!Array.isArray(e)){t.next=10;break}n=0;case 3:if(!(n<e.length)){t.next=9;break}return t.next=6,this._platformSdk.storage.delete(e[n],"platform_internal");case 6:n++,t.next=3;break;case 9:return t.abrupt("return");case 10:return t.next=12,this._platformSdk.storage.delete(e,"platform_internal");case 12:return t.abrupt("return");case 13:return t.next=15,Pf(Of(l.prototype),"deleteDataFromStorage",this).call(this,e,r);case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._getPromiseDecorator(v.PURCHASE);return r||(r=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payment.purchase(t).then((function(r){var n=vf({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var t,e=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(t=this._platformSdk)||void 0===t||!t.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(v.GET_CATALOG);return n||(n=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(t){if(!Array.isArray(t))throw new Error("Catalog response is not an array");var n=r.map((function(e){var r=t.find((function(t){return t.purchaseId===e.id}));return r?{id:e.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(t).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(v.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(e){var r=null==e?void 0:e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){var e=n.find((function(e){return e.id===t.purchaseId}));if(!e)return null;var r=vf({id:e.id},t);return delete r.purchaseId,r})).filter(Boolean),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.leaderboard.setScore(t,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(t).then((function(t){var r=Array.isArray(t)?t:t.entries||t.data||[];e._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,t)}))),r.promise}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.platform.getServerTime())}))}}],n&&bf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function If(t){return If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(t)}function Rf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gf(n.key),n)}}function Lf(t,e){return Lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lf(t,e)}function jf(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Nf(t){return Nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nf(t)}function Cf(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Gf(t){var e=function(t,e){if("object"!=If(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=If(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==If(e)?e:String(e)}function Mf(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Bf=new WeakSet,xf=new WeakSet,Hf=new WeakSet;function Ff(){var t=this;this._platformSdk.ads.on("rewarded:start",(function(){t._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(e){e||t._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)}))}function Uf(){var t=this;this._platformSdk.ads.on("fullscreen:start",(function(){t._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){t._setInterstitialState(i.CLOSED)}))}function Vf(){var t=this;this._platformSdk.ads.on("sticky:render",(function(){t._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){t._setBannerState(s.HIDDEN)}))}const Wf=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lf(t,e)}(c,e);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nf(o);if(i){var r=Nf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===If(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jf(t)}(this,t)});function c(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Cf(jf(t=s.call.apply(s,[this].concat(o))),Hf),Cf(jf(t),xf),Cf(jf(t),Bf),e=jf(t),!0,(r=Gf(r="_isBannerSupported"))in e?Object.defineProperty(e,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[r]=true,t}return r=c,(n=[{key:"platformId",get:function(){return t.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);Bt(r).then((function(){Ft("GamePush").then((function(){var e;t._platformSdk=window.GamePush;var r=null===(e=t._platformSdk)||void 0===e?void 0:e.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;t._isPlayerAuthorized=!0,t._playerId=o,t._playerName=a,c&&t._playerPhotos.push(c)}else t._playerApplyGuestData();t._isInitialized=!0,Mf(t,xf,Uf).call(t),Mf(t,Bf,Ff).call(t),Mf(t,Hf,Vf).call(t),t._resolvePromiseDecorator(v.INITIALIZE)}))}))}else this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND);return e.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.ads.showRewardedVideo().catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ads.isAdblockEnabled().then((function(t){e(t)}))}))}}])&&Rf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(lo);function zf(t){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(t)}function Zf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zf(Object(r),!0).forEach((function(e){Qf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$f(n.key),n)}}function Kf(t,e){return Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kf(t,e)}function qf(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Xf(t){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xf(t)}function Qf(t,e,r){return(e=$f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $f(t){var e=function(t,e){if("object"!=zf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zf(e)?e:String(e)}var tp="https://discord.com/api/v10";const ep=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kf(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xf(o);if(i){var r=Xf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qf(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qf(qf(t=a.call.apply(a,[this].concat(r))),"_appId",null),Qf(qf(t),"_accessToken",null),t}return r=s,(n=[{key:"platformId",get:function(){return t.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.appId?(this._appId=this._options.appId,Bt("/cdn/discord/discord-v2.0.0.min.js").then((function(){Ft("discord","DiscordSDK").then((function(){return t._platformSdk=new window.discord.DiscordSDK(t._appId),t._platformSdk.ready()})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)}))}))):this._rejectPromiseDecorator(v.INITIALIZE,_.DISCORD_GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(t){var e=this,r=(null==t?void 0:t.scope)||["identify"],n=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(t){var r=t.code;return fetch("".concat("/api","/discord/auth-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,appId:e._appId})})})).then((function(t){return t.json()})).then((function(t){return e._accessToken=t.accessToken,e._playerExtra={token:t.token,accessToken:e._accessToken,channelId:e._platformSdk.channelId},e._platformSdk.commands.authenticate({access_token:e._accessToken})})).then((function(t){if(null===t)throw e._playerApplyGuestData(),new Error("Authorization failed");return fetch("".concat(tp,"/users/@me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e._accessToken),"Content-Type":"application/json"}})})).then((function(t){return t.json()})).then((function(t){e._playerId=t.id,e._playerName=t.username,t.avatar&&e._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png")),e._playerExtra=Yf(Yf({},e._playerExtra),t),e._isPlayerAuthorized=!0,e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)})).catch((function(t){e._playerApplyGuestData(),e._accessToken=null,e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),n.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);if(!r)return Promise.reject();var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=Yf({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),fetch("".concat(tp,"/applications/").concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(v.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=e.map((function(t){var e,r,o=n.find((function(e){return e.id===t.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(e=o.price)||void 0===e||null===(e=e.currency)||void 0===e?void 0:e.toUpperCase(),s="".concat(i," ").concat(a);return{id:t.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));t._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.entitlements.map((function(t){return Yf({id:r.find((function(e){return e.id===t.id})).id},t)})),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=this._getPromiseDecorator(v.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){t._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(v.INVITE_FRIENDS,e)}))),e.promise}},{key:"share",value:function(t){var e=this;if(!t.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:t.mediaUrl}).then((function(){e._resolvePromiseDecorator(v.SHARE)})).catch((function(t){e._rejectPromiseDecorator(v.SHARE,t)}))),r.promise}}])&&Jf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(lo);function rp(t){return rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(t)}function np(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function op(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?np(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ap(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):np(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ip(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ap(n.key),n)}}function ap(t){var e=function(t,e){if("object"!=rp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rp(e)?e:String(e)}function sp(){return sp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},sp.apply(this,arguments)}function cp(t,e){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cp(t,e)}function up(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lp(t)}function fp(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,pp(t,e,"get"))}function pp(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var hp=new WeakMap;const dp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cp(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lp(o);if(s){var r=lp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return up(t)}(this,t)});function l(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=up(t=c.call.apply(c,[this].concat(i))),n={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=hp),r.set(e,n),t}return r=l,(n=[{key:"platformId",get:function(){return t.YOUTUBE}},{key:"platformLanguage",get:function(){return fp(this,hp)?fp(this,hp):sp(lp(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Ft("ytgame").then((function(){t._platformSdk=window.ytgame,t._defaultStorageType=u.PLATFORM_INTERNAL;var e=t._platformSdk.system.getLanguage().then((function(e){var r,n,o;r=t,n=hp,o=e.length>2?e.slice(0,2):e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r,pp(r,n,"set"),o)}));t._platformStorageCachedData={};var r=t._platformSdk.game.loadData().then((function(e){"string"==typeof e&&""!==e&&(t._platformStorageCachedData=JSON.parse(e))}));t._platformSdk.system.onAudioEnabledChange((function(e){t._setAudioState(e)})),t._platformSdk.system.onPause((function(){t._setPauseState(!0)})),t._platformSdk.system.onResume((function(){t._setPauseState(!1)})),Promise.all([e,r]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE),t._platformSdk.game.firstFrameReady()}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||sp(lp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||sp(lp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(t)){for(var i=[],a=0;a<t.length;a++){var s=void 0===n._platformStorageCachedData[t[a]]?null:n._platformStorageCachedData[t[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(t){}i.push(s)}e(i)}else{var c=void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(t){}e(c)}})).catch((function(){o()}))})):sp(lp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?op({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):sp(lp(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o=null!==r._platformStorageCachedData?op({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))})):sp(lp(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):sp(lp(l.prototype),"sendMessage",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var i="string"==typeof e?parseInt(e,10):e;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(t){n._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,t)}))}return o.promise}}])&&ip(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function yp(t){return yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(t)}var mp=["gamer_id","gamer_name","gamer_avatar_url"];function vp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pp(n.key),n)}}function _p(t,e){return _p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_p(t,e)}function gp(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sp(t)}function bp(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Ep(t,e,r){return(e=Pp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pp(t){var e=function(t,e){if("object"!=yp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yp(e)?e:String(e)}function wp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Ap=new WeakSet,Op=new WeakSet;function Tp(){var t=this,e=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadInterstitialPromise=null,n(new Error(t))}})}))),this._preloadInterstitialPromise}function kp(){var t=this,e=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadRewardedPromise=null,n(new Error(t))}})}))),this._preloadRewardedPromise}const Dp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_p(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sp(o);if(c){var r=Sp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gp(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return bp(gp(t=u.call.apply(u,[this].concat(r))),Op),bp(gp(t),Ap),Ep(gp(t),"_preloadInterstitialPromise",null),Ep(gp(t),"_preloadRewardedPromise",null),Ep(gp(t),"_isBannerAvailable",!1),t}return r=l,(n=[{key:"platformId",get:function(){return t.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),window.onSdkReady=function(){if(t._platformSdk=window.JioGames,t._platformSdk.playerInfo){var e=t._platformSdk.playerInfo,r=e.gamer_id,n=e.gamer_name,o=e.gamer_avatar_url,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,mp);t.playerId=r||null,t.playerName=n||null,o&&t.playerPhotos.push(o),t.playerExtra=i,t._isPlayerAuthorized=!0}t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)},window.onBannerReady=function(){t._isBannerAvailable=!0},Bt("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(e){t._rejectPromiseDecorator(v.INITIALIZE,JSON.stringify(e))}))),e.promise}},{key:"preloadInterstitial",value:function(){wp(this,Ap,Tp).call(this)}},{key:"showInterstitial",value:function(){var t=this;wp(this,Ap,Tp).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Interstitial,{onAdClosed:function(){t._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setInterstitialState(i.FAILED)}}),t._setInterstitialState(i.OPENED),t._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){wp(this,Op,kp).call(this)}},{key:"showRewarded",value:function(){var t=this;wp(this,Op,kp).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Rewarded,{onAdClosed:function(e){e&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setRewardedState(a.FAILED)}}),t._setRewardedState(a.OPENED),t._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(t){var e,r=this;this._isBannerAvailable?null===(e=window.JGBanner)||void 0===e||e.loadBanner().then((function(){var e,n;r._setBannerState(s.SHOWN),null===(e=window.JGBanner)||void 0===e||e.showBanner(t||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(t){console.error(t),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var t;null===(t=window.JGBanner)||void 0===t||t.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(t,e,r){if(!r)return Promise.reject();var n="string"==typeof e?parseInt(e,10):e;return this._platformSdk.postScore(n),Promise.resolve()}}])&&vp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function Ip(t){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(t)}function Rp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rp(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Np(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Np(n.key),n)}}function Np(t){var e=function(t,e){if("object"!=Ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ip(e)?e:String(e)}function Cp(){return Cp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Cp.apply(this,arguments)}function Gp(t,e){return Gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gp(t,e)}function Mp(t){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(t)}const Bp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gp(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mp(o);if(s){var r=Mp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||Cp(Mp(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),Bt("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){Ft("PortalSDK").then((function(){t._platformSdk=window.PortalSDK,t._platformSdk.initialize().then((function(){t._platformSdk.initializeOverlay(),t._defaultStorageType=u.PLATFORM_INTERNAL,t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(v.INITIALIZE,e)}))}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Cp(Mp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Cp(Mp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return Promise.resolve(n._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Cp(Mp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t,r){return Promise.resolve(n._platformSdk.setValue(t,e[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(t,e))}return Cp(Mp(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var n=t.map((function(t){return Promise.resolve(r._platformSdk.removeValue(t))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(t))}return Cp(Mp(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.requestAd().then((function(){t._setInterstitialState(i.OPENED),t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.requestRewardAd().then((function(e){e?(t._setRewardedState(a.OPENED),t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):Cp(Mp(l.prototype),"sendMessage",this).call(this,t)}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t),n=this._getPromiseDecorator(v.PURCHASE);if(!n){n=this._createPromiseDecorator(v.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(t){var r=t.find((function(t){return t&&t.id===o}));if(!r)throw new Error("Shop item not found in catalog");return e._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=Lp({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(v.PURCHASE,t)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e||!Array.isArray(e)||0===e.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=e.map((function(t){var e=t.id,n=r.find((function(t){return t&&t.id===e}));return n?{id:t.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);t._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=t.id,n=r.find((function(t){return t.id===e}));return n?Lp({id:n.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(v.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(v.GET_PURCHASES,e)}))),e.promise}}])&&jp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function xp(t){return xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(t)}function Hp(){Hp=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==xp(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(xp(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Fp(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Up(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fp(i,n,o,a,s,"next",t)}function s(t){Fp(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Vp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wp(n.key),n)}}function Wp(t){var e=function(t,e){if("object"!=xp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xp(e)?e:String(e)}function zp(){return zp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zp.apply(this,arguments)}function Zp(t,e){return Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zp(t,e)}function Yp(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function Jp(t){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jp(t)}function Kp(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function qp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Xp=new WeakSet,Qp=new WeakSet,$p=new WeakSet,th=new WeakSet,eh=new WeakSet,rh=new WeakSet,nh=new WeakSet,oh=new WeakSet,ih=new WeakSet,ah=new WeakSet;function sh(t){Zt({type:t,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},"*")}function ch(t){this._isPlayerAuthorized=t.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=t.playerId,this._playerName=t.playerName,t.playerPhoto&&this._playerPhotos.push(t.playerPhoto)),this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE)}function uh(t){var e,r;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.GET_STORAGE_DATA,null!==(r=t.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(v.GET_STORAGE_DATA)}function lh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.SET_STORAGE_DATA):this._rejectPromiseDecorator(v.SET_STORAGE_DATA)}function fh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(v.DELETE_STORAGE_DATA)}function ph(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.PURCHASE,t.data):this._rejectPromiseDecorator(v.PURCHASE,t.data)}function hh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.GET_CATALOG,t.data):this._rejectPromiseDecorator(v.GET_CATALOG,t.data)}function dh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.GET_PURCHASES,t.data):this._rejectPromiseDecorator(v.GET_PURCHASES,t.data)}function yh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.CREATE_POST):this._rejectPromiseDecorator(v.CREATE_POST)}function mh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(v.JOIN_COMMUNITY):this._rejectPromiseDecorator(v.JOIN_COMMUNITY)}const vh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zp(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jp(a);if(s){var r=Jp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yp(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Kp(Yp(t=c.call.apply(c,[this].concat(r))),ah),Kp(Yp(t),ih),Kp(Yp(t),oh),Kp(Yp(t),nh),Kp(Yp(t),rh),Kp(Yp(t),eh),Kp(Yp(t),th),Kp(Yp(t),$p),Kp(Yp(t),Qp),Kp(Yp(t),Xp),t}return r=l,n=[{key:"platformId",get:function(){return t.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(window.addEventListener("message",(function(e){if("devvit-message"===e.data.type){var r=e.data.data.message;r.type===v.INITIALIZE?qp(t,Qp,ch).call(t,r):r.type===v.GET_STORAGE_DATA?qp(t,$p,uh).call(t,r):r.type===v.SET_STORAGE_DATA?qp(t,th,lh).call(t,r):r.type===v.DELETE_STORAGE_DATA?qp(t,eh,fh).call(t,r):r.type===v.GET_CATALOG?qp(t,nh,hh).call(t,r):r.type===v.PURCHASE?qp(t,rh,ph).call(t,r):r.type===v.GET_PURCHASES?qp(t,oh,dh).call(t,r):r.type===v.CREATE_POST?qp(t,ih,yh).call(t,r):r.type===v.JOIN_COMMUNITY&&qp(t,ah,mh).call(t)}})),e=this._createPromiseDecorator(v.INITIALIZE),qp(this,Xp,sh).call(this,v.INITIALIZE)),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||zp(Jp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||zp(Jp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(v.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(v.GET_STORAGE_DATA),qp(this,Xp,sh).call(this,v.GET_STORAGE_DATA,{key:t})),n.promise}return zp(Jp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=Up(Hp().mark((function t(e,r,n){var o;return Hp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return(o=this._getPromiseDecorator(v.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(v.SET_STORAGE_DATA),qp(this,Xp,sh).call(this,v.SET_STORAGE_DATA,{key:e,value:r})),t.abrupt("return",o.promise);case 4:return t.abrupt("return",zp(Jp(l.prototype),"setDataToStorage",this).call(this,e,r,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Up(Hp().mark((function t(e,r){var n;return Hp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=4;break}return(n=this._getPromiseDecorator(v.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(v.DELETE_STORAGE_DATA),qp(this,Xp,sh).call(this,v.DELETE_STORAGE_DATA,{key:e})),t.abrupt("return",n.promise);case 4:return t.abrupt("return",zp(Jp(l.prototype),"deleteDataFromStorage",this).call(this,e,r));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(t){var e=this._getPromiseDecorator(v.PURCHASE);return e||(e=this._createPromiseDecorator(v.PURCHASE),qp(this,Xp,sh).call(this,v.PURCHASE,{id:t})),e.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var t=this._getPromiseDecorator(v.GET_CATALOG);return t||(t=this._createPromiseDecorator(v.GET_CATALOG),qp(this,Xp,sh).call(this,v.GET_CATALOG)),t.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),qp(this,Xp,sh).call(this,v.GET_PURCHASES)),t.promise}},{key:"createPost",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getPromiseDecorator(v.CREATE_POST);return e||(e=this._createPromiseDecorator(v.CREATE_POST),qp(this,Xp,sh).call(this,v.CREATE_POST,{options:t})),e.promise}},{key:"joinCommunity",value:function(){var t=this._getPromiseDecorator(v.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(v.JOIN_COMMUNITY),qp(this,Xp,sh).call(this,v.JOIN_COMMUNITY)),t.promise}}],n&&Vp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function _h(t){return _h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(t)}function gh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sh(n.key),n)}}function Sh(t){var e=function(t,e){if("object"!=_h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_h(e)?e:String(e)}function bh(){return bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},bh.apply(this,arguments)}function Eh(t,e){return Eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Eh(t,e)}function Ph(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function wh(t){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wh(t)}function Ah(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oh(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Th(t,e,"get"))}function Th(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var kh=new WeakSet,Dh=new WeakMap;function Ih(t){var e=document.createElement("ins");return e.style.display="block",e.classList.add("adsbygoogle"),e.setAttribute("data-ad-client",this._options.adSenseId),e.setAttribute("data-ad-slot",t),e.setAttribute("data-ad-format","auto"),e.setAttribute("data-container-id",c),e.setAttribute("data-full-width-responsive","true"),this._options.testMode&&e.setAttribute("data-adtest","on"),e}const Rh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eh(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wh(o);if(c){var r=wh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ph(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Ah(e=Ph(t=u.call.apply(u,[this].concat(o))),r=kh),r.add(e),function(t,e,r){Ah(t,e),e.set(t,{writable:!0,value:function(){}})}(Ph(t),Dh),t}return r=l,(n=[{key:"platformId",get:function(){return t.XIAOMI}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();try{window.funmax&&window.funmax.loadStart&&window.funmax.loadStart()}catch(t){console.error(t)}var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.adSenseId&&this._options.hostId?xt({adSenseId:this._options.adSenseId,hostId:this._options.hostId,testMode:!!this._options.testMode}).then((function(e){var r,n;n=e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=t,Th(r,Dh,"set"),n),t._isInitialized=!0,t._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(v.INITIALIZE,e)})):this._rejectPromiseDecorator(v.INITIALIZE,_.GAME_PARAMS_NOT_FOUND)),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?new Promise((function(t){try{window.funmax&&window.funmax.loadReady&&window.funmax.loadReady()}catch(t){console.error(t)}t()})):bh(wh(l.prototype),"sendMessage",this).call(this,t)}},{key:"showBanner",value:function(t,e){if(!this._bannerContainer){this._bannerPlacement=e,this._bannerContainer=Ht(t);var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,kh,Ih).call(this,e);this._bannerContainer.appendChild(r),this._setBannerState(s.SHOWN)}}},{key:"hideBanner",value:function(){var t;null===(t=this._bannerContainer)||void 0===t||t.remove(),this._bannerContainer=null,this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(t){var e=this;Oh(this,Dh)?Oh(this,Dh).call(this,{type:"start",name:t,beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(t){var e=this;Oh(this,Dh)?Oh(this,Dh).call(this,{type:"reward",name:t,beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}}])&&gh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(lo);function Lh(t){return Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(t)}function jh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jh(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Gh(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ch(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gh(n.key),n)}}function Gh(t){var e=function(t,e){if("object"!=Lh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lh(e)?e:String(e)}function Mh(t,e){xh(t,e),e.add(t)}function Bh(t,e,r){xh(t,e),e.set(t,r)}function xh(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hh(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Vh(t,e,"set"),r),r}function Fh(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Uh(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Vh(t,e,"get"))}function Vh(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Wh=new WeakMap,zh=new WeakMap,Zh=new WeakMap,Yh=new WeakMap,Jh=new WeakMap,Kh=new WeakSet,qh=new WeakSet,Xh=new WeakSet;function Qh(e){var r,n=t.MOCK,o=new URL(window.location.href);if(e.forciblySetPlatformId)n=Fh(this,qh,$h).call(this,e.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=Fh(this,qh,$h).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=t.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=t.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=t.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=t.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=t.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=t.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=t.PLAYDECK:o.hash.includes("tgWebAppData")?n=t.TELEGRAM:o.hostname.includes("y8")?n=t.Y8:o.hostname.includes("fbsbx")?n=t.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=t.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=t.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=t.BITQUEST:o.hostname.includes("eponesh.")?n=t.GAMEPUSH:o.hostname.includes("discordsays.com")?n=t.DISCORD:o.hostname.includes("usercontent.goog")?n=t.YOUTUBE:o.hostname.includes("portalapp.")?n=t.PORTAL:o.hostname.includes("devvit.")&&(n=t.REDDIT)}var a=e;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=zt(a,a.platforms[n])),delete a.platforms,n){case t.VK:Hh(this,Zh,new Oo(a));break;case t.YANDEX:Hh(this,Zh,new Jo(a));break;case t.CRAZY_GAMES:Hh(this,Zh,new Ii(a));break;case t.ABSOLUTE_GAMES:Hh(this,Zh,new Ui(a));break;case t.GAME_DISTRIBUTION:Hh(this,Zh,new $i(a));break;case t.OK:Hh(this,Zh,new es(a));break;case t.PLAYGAMA:Hh(this,Zh,new Ss(a));break;case t.PLAYDECK:Hh(this,Zh,new Gs(a));break;case t.TELEGRAM:Hh(this,Zh,new $s(a));break;case t.Y8:Hh(this,Zh,new _c(a));break;case t.LAGGED:Hh(this,Zh,new Ac(a));break;case t.FACEBOOK:Hh(this,Zh,new tu(a));break;case t.POKI:Hh(this,Zh,new Xu(a));break;case t.QA_TOOL:Hh(this,Zh,new Wu(a));break;case t.MSN:Hh(this,Zh,new kl(a));break;case t.HUAWEI:Hh(this,Zh,new df(a));break;case t.BITQUEST:Hh(this,Zh,new Df(a));break;case t.GAMEPUSH:Hh(this,Zh,new Wf(a));break;case t.DISCORD:Hh(this,Zh,new ep(a));break;case t.YOUTUBE:Hh(this,Zh,new dp(a));break;case t.JIO_GAMES:Hh(this,Zh,new Dp(a));break;case t.PORTAL:Hh(this,Zh,new Bp(a));break;case t.REDDIT:Hh(this,Zh,new vh(a));break;case t.XIAOMI:Hh(this,Zh,new Rh(a));break;default:Hh(this,Zh,new lo(a))}}function $h(e){for(var r=Object.values(t),n=0;n<r.length;n++)if(e===r[n])return e;return t.MOCK}function td(t){return Uh(this,Wh)||console.error(_.SDK_NOT_INITIALIZED),Uh(this,Yh)[t]}const ed=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),Mh(this,Xh),Mh(this,qh),Mh(this,Kh),Bh(this,Wh,{writable:!0,value:!1}),Bh(this,zh,{writable:!0,value:null}),Bh(this,Zh,{writable:!0,value:null}),Bh(this,Yh,{writable:!0,value:{}}),Bh(this,Jh,{writable:!0,value:"javascript"})}var c,p;return c=r,(p=[{key:"version",get:function(){return"1.27.0"}},{key:"isInitialized",get:function(){return Uh(this,Wh)}},{key:"options",get:function(){return Uh(this,Zh).options}},{key:"platform",get:function(){return Fh(this,Xh,td).call(this,e.PLATFORM)}},{key:"player",get:function(){return Fh(this,Xh,td).call(this,e.PLAYER)}},{key:"game",get:function(){return Fh(this,Xh,td).call(this,e.GAME)}},{key:"storage",get:function(){return Fh(this,Xh,td).call(this,e.STORAGE)}},{key:"advertisement",get:function(){return Fh(this,Xh,td).call(this,e.ADVERTISEMENT)}},{key:"social",get:function(){return Fh(this,Xh,td).call(this,e.SOCIAL)}},{key:"device",get:function(){return Fh(this,Xh,td).call(this,e.DEVICE)}},{key:"leaderboard",get:function(){return Fh(this,Xh,td).call(this,e.LEADERBOARDS)}},{key:"leaderboards",get:function(){return Fh(this,Xh,td).call(this,e.LEADERBOARDS)}},{key:"payments",get:function(){return Fh(this,Xh,td).call(this,e.PAYMENTS)}},{key:"achievements",get:function(){return Fh(this,Xh,td).call(this,e.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return Fh(this,Xh,td).call(this,e.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return Fh(this,Xh,td).call(this,e.CLIPBOARD)}},{key:"analytics",get:function(){return Fh(this,Xh,td).call(this,e.ANALYTICS)}},{key:"engine",get:function(){return Uh(this,Jh)},set:function(t){Hh(this,Jh,t)}},{key:"PLATFORM_ID",get:function(){return t}},{key:"PLATFORM_MESSAGE",get:function(){return h}},{key:"MODULE_NAME",get:function(){return e}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"DEVICE_ORIENTATION",get:function(){return f}},{key:"initialize",value:function(t){var r=this;if(Uh(this,Wh))return Promise.resolve();if(!Uh(this,zh)){Hh(this,zh,new D);var n,o=performance.now(),i="./playgama-bridge-config.json";t&&t.configFilePath&&(i=t.configFilePath),fetch(i).then((function(t){return t.json()})).then((function(t){n=Nh({},t)})).catch((function(e){console.error("Config parsing error.",e),n=Nh({},t)})).finally((function(){Fh(r,Kh,Qh).call(r,n),Uh(r,Zh).engine=r.engine,Uh(r,Yh)[e.PLATFORM]=new Ot(Uh(r,Zh)),Uh(r,Yh)[e.PLAYER]=new Lt(Uh(r,Zh)),Uh(r,Yh)[e.GAME]=new ee(Uh(r,Zh)),Uh(r,Yh)[e.STORAGE]=new se(Uh(r,Zh)),Uh(r,Yh)[e.ADVERTISEMENT]=new _r(Uh(r,Zh)),Uh(r,Yh)[e.SOCIAL]=new wr(Uh(r,Zh)),Uh(r,Yh)[e.DEVICE]=new en(Uh(r,Zh)),Uh(r,Yh)[e.LEADERBOARDS]=new yn(Uh(r,Zh)),Uh(r,Yh)[e.PAYMENTS]=new bn(Uh(r,Zh)),Uh(r,Yh)[e.REMOTE_CONFIG]=new Tn(Uh(r,Zh)),Uh(r,Yh)[e.CLIPBOARD]=new jn(Uh(r,Zh)),Uh(r,Yh)[e.ACHIEVEMENTS]=new xn(Uh(r,Zh)),Uh(r,Yh)[e.ANALYTICS]=ht.initialize(Uh(r,Zh)),Uh(r,Zh).initialize().then((function(){var t,n;Hh(r,Wh,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white");var i=((performance.now()-o)/1e3).toFixed(2);if(ht.send("".concat(e.CORE,"_initialization_completed"),e.CORE,{time_s:i}),Uh(r,zh)&&(Uh(r,zh).resolve(),Hh(r,zh,null)),null!==(t=Uh(r,Zh).options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.preloadOnStart){var a=Uh(r,Zh).options.advertisement.interstitial.preloadOnStart;Uh(r,Yh)[e.ADVERTISEMENT].preloadInterstitial(a)}if(null!==(n=Uh(r,Zh).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var s=Uh(r,Zh).options.advertisement.rewarded.preloadOnStart;Uh(r,Yh)[e.ADVERTISEMENT].preloadRewarded(s)}})).catch((function(t){var r=((performance.now()-o)/1e3).toFixed(2),n=(null==t?void 0:t.message)||String(t);ht.send("".concat(e.CORE,"_initialization_failed"),e.CORE,{error:n,time_s:r}),console.error("PlaygamaBridge initialization failed:",t)})).finally((function(){setTimeout((function(){return Uh(r,Yh)[e.GAME].setLoadingProgress(100,!0)}),700)}))}))}return Uh(this,zh).promise}}])&&Ch(c.prototype,p),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge||window.playgamaBridge||(window.bridge=new ed,window.playgamaBridge=window.bridge)})()})();',document.body.appendChild(e),t()}})}yae(){return new Promise((t,e)=>{const i=()=>{void 0!==window.Lae?(window.Lae.kae="construct",window.Lae.initialize().then(()=>{window.Lae.Gae.on("banner_state_changed",t=>{switch(this.aX(this.dae.Nae),t){case window.Lae.jae.LOADING:this.aX(this.dae.Fae);break;case window.Lae.jae.Bae:this.aX(this.dae.zae);break;case window.Lae.jae.HIDDEN:this.aX(this.dae.Uae);break;case window.Lae.jae.Hae:this.aX(this.dae.Vae)}}),window.Lae.Gae.on("interstitial_state_changed",t=>{switch(this.aX(this.dae.Wae),t){case window.Lae.$ae.LOADING:this.aX(this.dae.Yae);break;case window.Lae.$ae.OPENED:this.aX(this.dae.Jae);break;case window.Lae.$ae.CLOSED:this.aX(this.dae.qae);break;case window.Lae.$ae.Hae:this.aX(this.dae.Qae)}}),window.Lae.Gae.on("rewarded_state_changed",t=>{switch(this.aX(this.dae.Zae),t){case window.Lae.Xae.LOADING:this.aX(this.dae.Kae);break;case window.Lae.Xae.OPENED:this.aX(this.dae.the);break;case window.Lae.Xae.ehe:this.aX(this.dae.ihe);break;case window.Lae.Xae.CLOSED:this.aX(this.dae.rhe);break;case window.Lae.Xae.Hae:this.aX(this.dae.she)}}),window.Lae.nhe.on("visibility_state_changed",t=>{this.aX(this.dae.ohe)}),window.Lae.platform.on("audio_state_changed",t=>{this.aX(this.dae.ahe)}),window.Lae.platform.on("pause_state_changed",t=>{this.aX(this.dae.hhe)}),t()}).catch(t=>e(t))):setTimeout(i,100)};i()})}DZ(){super.DZ()}TX(){return{bae:this.bae}}PX(t){this.bae=t.bae||{}}};var C35=globalThis.Ee;C35.cY.pae.hY={uhe(){return this.Mae},che:()=>window.Lae.platform.lhe,ahe:()=>!0,fhe:()=>window.Lae.platform.j1,hhe:()=>!0,phe:()=>window.Lae.platform.dhe,mhe:()=>window.Lae.platform.yhe,ghe:()=>!0,vhe:()=>!0,whe:()=>!0,She(){return this.gae>0},ri:()=>"mobile"===window.Lae.device.type,bhe:()=>"tablet"===window.Lae.device.type,ii:()=>"desktop"===window.Lae.device.type,_he:()=>"tv"===window.Lae.device.type,Ehe:()=>window.Lae.Phe.The,Ahe:()=>window.Lae.Phe.Mhe,Ihe:()=>!0,Ohe:()=>"string"==typeof window.Lae.Phe.name,Dhe:t=>window.Lae.Phe.xhe.length>t,Che:()=>!0,Rhe(){return this.Sae},ohe:()=>!0,Lhe:()=>!0,khe:()=>!0,Ghe:()=>!0,Nhe(t){if(!this.bae)return 0;let e=this.bae[t];return null!=e},jhe(t){switch(t){case 0:t="local_storage";break;case 1:t="platform_internal"}return window.Lae.storage.isSupported(t)},Fhe(t){switch(t){case 0:t="local_storage";break;case 1:t="platform_internal"}return window.Lae.storage.Bhe(t)},zhe:()=>window.Lae.Gae.Uhe,Hhe:()=>window.Lae.Gae.Vhe,Whe:()=>window.Lae.Gae.$he,Nae:()=>!0,Fae:()=>!0,zae:()=>!0,Uae:()=>!0,Vae:()=>!0,Wae:()=>!0,Yae:()=>!0,Jae:()=>!0,qae:()=>!0,Qae:()=>!0,Zae:()=>!0,Kae:()=>!0,the:()=>!0,ihe:()=>!0,rhe:()=>!0,she:()=>!0,Yhe:()=>window.Lae.qhe.Jhe,Qhe:()=>!0,Zhe:()=>window.Lae.qhe.Xhe,Khe:()=>!0,tue:()=>window.Lae.qhe.eue,iue:()=>!0,rue:()=>window.Lae.qhe.sue,nue:()=>!0,oue:()=>window.Lae.qhe.aue,hue:()=>!0,uue:()=>window.Lae.qhe.lue,fue:()=>!0,pue:()=>window.Lae.qhe.due,mue:()=>!0,yue:()=>window.Lae.qhe.gue,vue:()=>"not_available"===window.Lae.wue.type,Sue:()=>"in_game"===window.Lae.wue.type,bue:()=>"native"===window.Lae.wue.type,_ue:()=>"native_popup"===window.Lae.wue.type,Eue:()=>!0,Tue:()=>!0,Pue:()=>!0,Aue:()=>window.Lae.Mue.isSupported,Iue:()=>!0,Oue:()=>!0,Due:()=>!0,xue:()=>!0,Cue:()=>window.Lae.Rue.isSupported,Lue:()=>window.Lae.Rue.kue,Gue:()=>window.Lae.Rue.Nue,jue:()=>!0,Fue:()=>!0,Bue:()=>!0,zue:()=>window.Lae.Aae.isSupported,Uue:()=>!0,Hue(t){if(!this.Aae)return 0;let e=this.Aae[t];return null!=e}};var C36=globalThis.Ee;C36.cY.pae.Ypt={Vue(t,e){this.Rae(t,e,this.Iae,!0)},Wue(t,e){this.Rae(t,e,this.Iae,!0)},$ue(t){switch(t){case 0:t=window.Lae.Jue.Yue;break;case 1:t=window.Lae.Jue.que;break;case 2:t=window.Lae.Jue.Que;break;case 3:t=window.Lae.Jue.Zue;break;case 4:t=window.Lae.Jue.Xue;break;case 5:t=window.Lae.Jue.Kue}window.Lae.platform.sendMessage(t)},tce(){return this.Mae=!1,new Promise(t=>{window.Lae.platform.ece().then(t=>{this.Mae=!0,this.gae=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.whe),t()})})},ice(){return this.Mae=!1,new Promise(t=>{window.Lae.platform.rce().then(t=>{this.Mae=!0,this.vae=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.ghe),t()})})},sce(){return this.Mae=!1,new Promise(t=>{window.Lae.platform.nce(this.Iae).then(t=>{this.Mae=!0,this.wae=t}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.vhe),t()})})},oce(){return this.Mae=!1,new Promise(t=>{window.Lae.Phe.ace(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Ihe),t()})})},hce(t){this._ae.push(t)},uce(t){switch(this.Mae=!1,t){case 0:t=null;break;case 1:t="local_storage";break;case 2:t="platform_internal"}return new Promise(e=>{window.Lae.storage.get(this._ae,t).then(t=>{this.bae||(this.bae={});for(let e=0;e<t.length;e++){let i=this._ae[e],r=t[e];this.bae[i]=r}this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this._ae=[],this.aX(this.dae.Lhe),e()})})},cce(t,e){this.Eae.push(t),this.Tae.push(e)},lce(t){switch(this.Mae=!1,t){case 0:t=null;break;case 1:t="local_storage";break;case 2:t="platform_internal"}return new Promise(e=>{window.Lae.storage.set(this.Eae,this.Tae,t).then(()=>{this.bae||(this.bae={});for(let t=0;t<this.Eae.length;t++){let e=this.Eae[t];this.bae[e]=this.Tae[t]}this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Eae=[],this.Tae=[],this.aX(this.dae.khe),e()})})},fce(t){this.Pae.push(t)},pce(t){switch(this.Mae=!1,t){case 0:t=null;break;case 1:t="local_storage";break;case 2:t="platform_internal"}return new Promise(e=>{window.Lae.storage.delete(this.Pae,t).then(()=>{if(this.bae)for(let t=0;t<this.Pae.length;t++){let e=this.Pae[t];delete this.bae[e]}this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Pae=[],this.aX(this.dae.Ghe),e()})})},dce(t){window.Lae.Gae.mce(t)},yce(t,e){window.Lae.Gae.gce(t,e)},vce(){window.Lae.Gae.wce()},Sce(t){window.Lae.Gae.bce(t)},_ce(t){window.Lae.Gae.Ece(t)},Tce(){return this.Mae=!1,new Promise(t=>{window.Lae.Gae.Pce().then(t=>{this.Mae=!0,this.Sae=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Che),t()})})},Ace(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.share(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Qhe),t()})})},Mce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.Ice(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Khe),t()})})},Oce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.Dce(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.iue),t()})})},xce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.Cce(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.nue),t()})})},Rce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.Lce().then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.hue),t()})})},kce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.Gce().then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.fue),t()})})},Nce(){return this.Mae=!1,new Promise(t=>{window.Lae.qhe.rate().then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.mue),t()})})},jce(t,e){return this.Mae=!1,new Promise(i=>{window.Lae.wue.Fce(t,e).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Eue),i()})})},Bce(t){return this.zce=null,this.Mae=!1,new Promise(e=>{window.Lae.wue.getEntries(t).then(t=>{this.zce=t,this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Tue),e()})})},Uce(t){return this.Mae=!1,new Promise(e=>{window.Lae.wue.Hce(t).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Pue),e()})})},Vce(t){return this.Mae=!1,new Promise(e=>{window.Lae.Mue.Wce(t,this.Iae).then(t=>{this.Mae=!0,this.$ce=t}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Iue),e()})})},Yce(t){return this.Mae=!1,new Promise(e=>{window.Lae.Mue.Jce(t).then(t=>{this.Mae=!0,this.$ce=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.xue),e()})})},qce(){return this.Mae=!1,new Promise(t=>{window.Lae.Mue.Qce().then(t=>{this.Mae=!0,this.Zce=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Due),t()})})},Xce(){return this.Mae=!1,new Promise(t=>{window.Lae.Mue.Kce().then(t=>{this.Mae=!0,this.tle=t}).catch(t=>console.log(t)).finally(()=>{this.aX(this.dae.Oue),t()})})},ele(){return this.Mae=!1,new Promise(t=>{window.Lae.Rue.unlock(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.jue),t()})})},ile(){return this.Mae=!1,new Promise(t=>{window.Lae.Rue.rle(this.Iae).then(t=>{this.Mae=!0,this.sle=t}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Fue),t()})})},nle(){return this.Mae=!1,new Promise(t=>{window.Lae.Rue.Hce(this.Iae).then(()=>{this.Mae=!0}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Bue),t()})})},ole(){return this.Mae=!1,new Promise(t=>{window.Lae.Aae.get(this.Iae).then(t=>{this.Mae=!0,this.Aae=t}).catch(t=>console.log(t)).finally(()=>{this.Iae={},this.aX(this.dae.Uue),t()})})}};var C37=globalThis.Ee;C37.cY.pae.Jpt={ale:()=>window.Lae.platform.id,hle:()=>window.Lae.platform.language,ule:()=>window.Lae.platform.cle,lle:()=>window.Lae.platform.fle?window.Lae.platform.fle:"",ple(){return this.gae},dle(){return this.vae?this.vae.length:0},mle(){if(!this.vae||this.vae.length<=0)return 0;let t=this.vae[0];return Object.keys(t).length},yle(t){if(!this.vae||this.vae.length<=0)return"";let e=this.vae[0];return Object.keys(e)[t]},gle(t,e){if(!this.vae||this.vae.length<=0)return"";let i=this.vae[t];if(!i)return"";if("number"==typeof e){return i[Object.keys(i)[e]]}return i[e]},vle(){if(!this.wae)return 0;return Object.keys(this.wae).length},wle(t){if(!this.wae)return"";return Object.keys(this.wae)[t]},Sle(t){if(!this.wae)return"";if("number"==typeof t){let e=Object.keys(this.wae)[t];return this.wae[e]}return this.wae[t]},ble:()=>window.Lae.device.type,_le:()=>window.Lae.Phe.id,Ele:()=>window.Lae.Phe.name,Tle:()=>window.Lae.Phe.xhe.length,Ple:t=>window.Lae.Phe.xhe[t],Ale:()=>Object.keys(window.Lae.Phe.Mle).length,Ile:t=>Object.keys(window.Lae.Phe.Mle)[t],Ole(t){let e=window.Lae.Phe.Mle;if("number"==typeof t){return e[Object.keys(e)[t]]}return e[t]},VisibilityState:()=>window.Lae.nhe.visibilityState,Dle:()=>window.Lae.storage.xle,Cle(t){return this.bae?this.bae[t]:null},Rle(t){if(!this.bae)return null;let e=this.bae[t];return"string"!=typeof e&&(e=JSON.stringify(e)),e},Lle:()=>window.Lae.Gae.kle,Gle:()=>window.Lae.Gae.Nle,jle:()=>window.Lae.Gae.Fle,Ble:()=>window.Lae.Gae.zle,Ule:()=>window.Lae.Gae.Hle,Vle:()=>window.Lae.wue.type,Wle(){return this.zce?this.zce.length:0},$le(t){if(!this.zce||this.zce.length<=0)return"";return this.zce[t].id},Yle(t){if(!this.zce||this.zce.length<=0)return"";return this.zce[t].name},Jle(t){if(!this.zce||this.zce.length<=0)return"";return this.zce[t].photo},qle(t){if(!this.zce||this.zce.length<=0)return"";return this.zce[t].score},Qle(t){if(!this.zce||this.zce.length<=0)return"";return this.zce[t].rank},Zle(){return this.sle?this.sle.length:0},Xle(){if(this.sle||this.sle.length<=0)return 0;let t=this.sle[0];return Object.keys(t).length},Kle(t){if(!this.sle||this.sle.length<=0)return"";let e=this.sle[0];return Object.keys(e)[t]},tfe(t,e){if(!this.sle||this.sle.length<=0)return"";let i=this.sle[t];if("number"==typeof e){return i[Object.keys(i)[e]]}return i[e]},efe(){if(!this.$ce)return 0;return Object.keys(this.$ce).length},ife(t){if(!this.$ce)return"";return Object.keys(this.$ce)[t]},rfe(t){if(!this.$ce)return"";if("number"==typeof t){let e=Object.keys(this.$ce)[t];return this.$ce[e]}return this.$ce[t]},sfe(){return this.tle?this.tle.length:0},nfe(){if(!this.tle||this.tle.length<=0)return 0;let t=this.tle[0];return Object.keys(t).length},ofe(t){if(!this.tle||this.tle.length<=0)return"";let e=this.tle[0];return Object.keys(e)[t]},afe(t,e){if(!this.tle||this.tle.length<=0)return"";let i=this.tle[t];if("number"==typeof e){return i[Object.keys(i)[e]]}return i[e]},hfe(){return this.Zce?this.Zce.length:0},ufe(){if(!this.Zce||this.Zce.length<=0)return 0;let t=this.Zce[0];return Object.keys(t).length},cfe(t){if(!this.Zce||this.Zce.length<=0)return"";let e=this.Zce[0];return Object.keys(e)[t]},lfe(t,e){if(!this.Zce||this.Zce.length<=0)return"";let i=this.Zce[t];if("number"==typeof e){return i[Object.keys(i)[e]]}return i[e]},ffe(t,e,i){if(!this.Zce||this.Zce.length<=0)return"";let r=this.Zce.find(i=>i[t]===e);if(!r)return"";if("number"==typeof i){return r[Object.keys(r)[i]]}return r[i]},pfe(t){return this.Aae?this.Aae[t]:null}};var C38=self.Ee;function lerp2(t,e,i){return t+(e-t)*(i>1?1:i<0?0:i)}function clamp(t,e,i){return t<e?e:t>i?i:t}function max2(t,e){return t>e?t:e}function randFloat(t,e){return Math.random()*(e-t)+t}self._Xt=function(){return[C38.cY.hpt,C38.cY.Text,C38.xgt.Poe,C38.xgt.Koe,C38.cY.Touch,C38.cY.eee,C38.cY.Audio,C38.cY.Ze,C38.cY.pae,C38.cY.Touch.hY.z9t,C38.cY.uY.hY.J1t,C38.cY.uY.Ypt.i2t,C38.cY.hpt.Jpt.skt,C38.mfe.dfe,C38.cY.uY.hY.hrt,C38.cY.uY.Ypt.z2t,C38.cY.uY.Ypt.C2t,C38.cY.uY.Ypt.G2t,C38.cY.uY.Jpt.min,C38.cY.uY.Jpt.o4t,C38.cY.hpt.Ypt.cg,C38.cY.hpt.Jpt.jLt,C38.cY.uY.Jpt.T4t,C38.cY.hpt.Ypt.lg,C38.cY.hpt.Jpt.FLt,C38.cY.hpt.Ypt.f8t,C38.cY.pae.Ypt.dce,C38.cY.uY.hY.x1t,C38.cY.uY.Ypt.n2t,C38.cY.eee.Ypt.Cee,C38.cY.uY.hY.GMt,C38.cY.hpt.hY.vLt,C38.cY.hpt.hY.aLt,C38.cY.uY.Ypt.po,C38.mfe.yfe,C38.mfe.gfe,C38.cY.pae.hY.Hhe,C38.cY.pae.Ypt.Sce,C38.cY.Touch.hY.Y9t,C38.cY.uY.Ypt.I2t,C38.cY.uY.Ypt.x2t,C38.cY.uY.Ypt.o2t,C38.mfe.vfe,C38.cY.Audio.Ypt._re,C38.cY.Audio.Ypt.b1,C38.cY.eee.Ypt.kee,C38.cY.uY.hY.XPt,C38.mfe.wfe,C38.cY.uY.Ypt.m2t,C38.cY.eee.hY.gee,C38.cY.eee.Jpt.Hee,C38.mfe.Sfe,C38.mfe.bfe,C38.mfe._fe,C38.mfe.Efe,C38.mfe.Tfe,C38.cY.Touch.hY.B9t,C38.cY.Touch.Jpt.NLt,C38.cY.hpt.Jpt.NLt,C38.cY.uY.hY.b1t,C38.cY.Touch.hY.ste,C38.cY.hpt.Ypt.aE,C38.cY.uY.Jpt.max,C38.cY.uY.Jpt.a4t,C38.cY.hpt.hY.fRt,C38.cY.uY.hY.yrt,C38.mfe.Pfe,C38.cY.eee.hY.Aee]},self.VXt=[{Afe:0},{Mfe:0},{Ife:0},{Ofe:0},{Dfe:0},{xfe:0},{level:0},{locked:0},{Poe:0},{Cfe:0},{Rfe:0},{Lfe:0},{kfe:0},{Gfe:0},{Nfe:0},{jfe:0},{Ffe:0},{Bfe:0},{zfe:0},{Ufe:0},{Hfe:0},{Vfe:0},{Wfe:0},{$fe:0},{Yfe:0},{Jfe:0},{qfe:0},{Qfe:0},{Zfe:0},{Xfe:0},{Kfe:0},{tpe:0},{epe:0},{ipe:0},{Touch:0},{eee:0},{uoe:0},{rpe:0},{spe:0},{npe:0},{Audio:0},{ope:0},{ape:0},{Ze:0},{hpe:0},{upe:0},{cpe:0},{lpe:0},{fpe:0},{pae:0},{ppe:0},{dpe:0},{mpe:0},{ype:0},{gpe:0},{vpe:0},{wpe:0},{Spe:0},{bpe:0},{_pe:0},{Epe:0},{Tpe:0}],self.Ppe={Afe:class extends self.g8t{},Mfe:class extends self.g8t{},Ife:class extends self.g8t{},Ofe:class extends self.g8t{},Dfe:class extends self.g8t{},xfe:class extends self.w7t{},Cfe:class extends self.g8t{},Rfe:class extends self.g8t{},Lfe:class extends self.g8t{},kfe:class extends self.w7t{},Gfe:class extends self.g8t{},Nfe:class extends self.g8t{},Ffe:class extends self.g8t{},Bfe:class extends self.g8t{},zfe:class extends self.g8t{},Ufe:class extends self.w7t{},Hfe:class extends self.w7t{},Vfe:class extends self.g8t{},Wfe:class extends self.g8t{},$fe:class extends self.g8t{},Yfe:class extends self.g8t{},Jfe:class extends self.g8t{},qfe:class extends self.g8t{},Qfe:class extends self.g8t{},Zfe:class extends self.w7t{},Xfe:class extends self.g8t{},Kfe:class extends self.g8t{},tpe:class extends self.g8t{},epe:class extends self.g8t{},ipe:class extends self.g8t{},Touch:class extends self.PZ{},eee:class extends self.PZ{},rpe:class extends self.g8t{},spe:class extends self.g8t{},npe:class extends self.g8t{},Audio:class extends self.PZ{},ape:class extends self.g8t{},Ze:class extends self.PZ{},hpe:class extends self.g8t{},upe:class extends self.g8t{},cpe:class extends self.g8t{},lpe:class extends self.g8t{},fpe:class extends self.g8t{},pae:class extends C38.cY.pae.Instance{}};var levelGroupNames=["easy","normal","hard"],colorHexs=["8CBEB2","F2EBBF","F3B562","F01B1E","5C4B51","F06060","00BBC9","00747C","A47859","8C0303","F2D3AC"],colors=colorHexs.map(t=>hEXToVBColor(t));function hEXToVBColor(t){const e=t.substr(4,2),i=t.substr(2,2),r=t.substr(0,2);return[parseInt(r,16)/255,parseInt(i,16)/255,parseInt(e,16)/255]}var Vector=class t{constructor(t,e){this.x=t,this.y=e}static Mt(e,i,r){return new t(lerp2(e.x,i.x,r),lerp2(e.y,i.y,r))}Ape(){return Math.sqrt(this.x*this.x+this.y*this.y)}sub(e){return new t(this.x-e.x,this.y-e.y)}add(e){return new t(this.x+e.x,this.y+e.y)}mul(e){return new t(this.x*e,this.y*e)}Mpe(){return this.mul(1/this.Ape())}clone(){return new t(this.x,this.y)}Ipe(e){return new t(Math.cos(e)*this.x-Math.sin(e)*this.y,Math.sin(e)*this.x+Math.cos(e)*this.y)}},Liquid=class extends ISpriteInstance{constructor(){super(),this.groupId=0,this.Ope=120,this.$M=this.runtime.RV.epe._i(this.GX.index,this.x,this.y),this.Dpe(this.$M),this.$M.xpe=0,this.Cpe=null,this.Rpe=!1,this.value=1,this.Lpe=!1}Dpe(t){this.IK(t,{kK:!0,NK:!0,HK:!0,WK:!0,FK:!0,zK:!0,ZK:!0})}kpe(t){this.groupId=t,this.$M.sK=colors[t%colors.length]}size(){return this.value*this.Ope}Gpe(t){this.value=t,this.Npe()}jpe(t){this.Rpe=t,this.Npe()}Npe(){this.Rpe?this.Fpe():this.Bpe()}Bpe(){this.Cpe&&this.Cpe.destroy(),this.$M.height=Math.max(this.value*this.Ope,.01),this.$M.xpe=0,this.$M.y=this.y}Fpe(){if(this.Cpe||(this.Cpe=this.runtime.RV.ipe._i(this.GX.index,this.x,this.y),this.Dpe(this.Cpe),this.Cpe.sK=colors[this.groupId%colors.length],this.zpe=this.Cpe.height),this.value<this.zpe/this.Ope)this.$M.isVisible=!1,this.Cpe.height=Math.max(this.Ope*this.value,.1);else{const t=2;this.$M.isVisible=!0,this.Cpe.height=this.zpe,this.$M.height=Math.max(this.Ope*this.value-this.zpe+t,1);const e=new Vector(0,-1).Ipe(this.angle).mul(this.Cpe.height-t).add(new Vector(this.x,this.y));this.$M.y=e.y,this.$M.x=e.x}}},LerpAnim=class{constructor(t,e,i,r,s){this.end=i,this.Mpe=e,this.speed=t,this.finished=!1,this.Upe=r,this.Hpe=s}update(t){this.finished||(this.Mpe=clamp(lerp2(this.Mpe,this.end,t*this.speed),0,1),this.Upe&&this.Upe(this.Mpe),this.Mpe>=1&&(this.finished=!0,this.Hpe&&this.Hpe()))}},LinearMoveAnim=class{constructor(t,e,i){this.Mpe=0,this.speed=t,this.finished=!1,this.Upe=e,this.Hpe=i}update(t){this.finished||(this.Mpe=clamp(this.Mpe+t*this.speed,0,1),this.Upe&&this.Upe(this.Mpe),this.Mpe>=1&&(this.finished=!0,this.Hpe&&this.Hpe()))}},Holder=class extends ISpriteInstance{constructor(){super(),this.maxValue=4,this.pending=!1,this.Lpe=!1,this.Vpe=[],this.Wpe=new Vector(300,-200),this.$pe=new Vector(this.x,this.y),this.Ype=new Vector(this.x,this.y-50),this.Jpe=[]}qpe(){return this.Vpe[this.Vpe.length-1]}Dpe(t){this.IK(t,{kK:!0,NK:!0,HK:!0,WK:!0,FK:!0,zK:!0,ZK:!0})}Qpe(){return this.Vpe.reduce((t,e)=>t+e.value,0)}update(){this.Jpe.forEach(t=>t.update(this.runtime.IW))}Zpe(t,e=0){const i=this.Xpe(),r=this.runtime.RV.Qfe._i(this.GX.index,i.x,i.y);r.kpe(t),r.Gpe(e),r.jpe(0===this.Vpe.length),this.Dpe(r),this.Vpe.push(r)}Xpe(){return new Vector(this.x,this.y).add(new Vector(0,-1).mul(this.Vpe.reduce((t,e)=>t+e.size(),0)))}Kpe(){return Math.round(this.Vpe.reduce((t,e)=>t+e.value,0))>=this.maxValue}tde(){this.pending?this.ede():this.ide()}init(t){t.forEach(t=>this.Zpe(t.groupId,t.value)),this.$pe=new Vector(this.x,this.y),this.Ype=this.$pe.add(new Vector(0,-50))}ede(){if(this.pending)throw Error();this.pending=!0,this.rde(!0),this.moveTo(this.Ype,5)}ide(){if(!this.pending)throw Error();this.pending=!1,this.rde(!1),this.moveTo(this.$pe,5)}rde(t){this.Lpe!==t&&(this.Lpe=t,this.Hj+=this.Lpe?.1:-.1)}async sde(t,e){if(this.pending=!1,t.Kpe()||!this.Vpe.length||t.Vpe.length&&t.Vpe[t.Vpe.length-1].groupId!==this.Vpe[this.Vpe.length-1].groupId)return;await this.nde(t);const i=this.ode(t),r=new Vector(this.x,this.y),s=this.angle,n=this.qpe();await this.ade(2,t=>{this.x=lerp2(r.x,i.position.x,t),this.y=lerp2(r.y,i.position.y,t),this.angle=lerp2(s,i.angle,t)});const o=n.value,a=Math.min(n.value,t.maxValue-t.Qpe());0===t.Vpe.length&&t.Zpe(n.groupId);const h=t.qpe(),u=h.value,c=this.runtime.RV.cpe.iq(),l=this.hde(t)?this.ude(2):this.ude(1);c.sK=h.$M.sK,c.x=l.x,c.y=l.y,c.isVisible=!0,this.cde("transfer"),await this.ade(5,t=>{n.Gpe(lerp2(o,o-a,t)),h.Gpe(lerp2(u,u+a,t))}),n.value<=.05?(this.Vpe.splice(this.Vpe.indexOf(n),1),n.destroy()):n.Gpe(Math.round(n.value)),this.lde("transfer"),c.isVisible=!1,h.Gpe(Math.round(h.value)),e&&e(),await this.ade(2,t=>{this.x=lerp2(i.position.x,r.x,t),this.y=lerp2(i.position.y,r.y,t),this.angle=lerp2(i.angle,s,t)}),await this.fde(),this.rde(!1)}ude(t){return new Vector(this.o1(t),this.h1(t))}hde(t){return t.x>this.x}ode(t){const e=82*Math.PI/180,i=new Vector(t.x,t.y-t.height-50),r=this.hde(t),s=r?this.ude(2):this.ude(1),n=r?e:-e;return{position:new Vector(this.x,this.y).sub(s).Ipe(n).add(i),angle:n}}async nde(t){const e=new Vector(t.x,t.y).add(this.x>t.x?this.Wpe.clone():new Vector(-this.Wpe.x,this.Wpe.y)),i=this.pde(new Vector(this.x,this.y).sub(e).Ape());await this.moveTo(e,i)}async moveTo(t,e){const i=new Vector(this.x,this.y);await this.ade(e,e=>{this.x=lerp2(i.x,t.x,e),this.y=lerp2(i.y,t.y,e)})}async fde(){const t=this.pde(new Vector(this.x,this.y).sub(this.$pe).Ape());await this.moveTo(this.$pe,Math.max(t,3))}pde(t){return Math.max(500/t,4)}cde(t){if(!this.runtime.LV._pe)return;const e=this.runtime.RV.ape._i(0,0,0);e.nUt.uoe=t,e.nUt.ope="Start",e.destroy()}lde(t){if(!this.runtime.LV._pe)return;const e=this.runtime.RV.ape._i(0,0,0);e.nUt.uoe=t,e.nUt.ope="Stop",e.destroy()}dde(t){this.Jpe.push(t)}mde(t){this.Jpe.slice(this.Jpe.indexOf(t),1)}ade(t,e,i){return new Promise((r,s)=>{let n=null;n=new LinearMoveAnim(t,e,()=>{this.mde(n),i&&i(),r()}),this.dde(n)})}yde(t,e,i,r,s){return new Promise((n,o)=>{let a=null;a=new LerpAnim(t,e,i,r,()=>{this.mde(a),s&&s(),n()}),this.dde(a)})}delay(t){return new Promise((e,i)=>{setTimeout(e,1e3*t)})}},MainScene=class t{constructor(e,i){this.runtime=e,this.gde=250,this.vde=[],this.level=i;e.RV.Zfe.iq().text="LEVEL "+i.wde;const r=this.Sde(i.map.length);e.LV.dpe=r.bde;for(let s=0;s<i.map.length;s++){const n=t._de(i.map[s].values),o=e.RV.Xfe._i(0,0,0),a=r.Ede[s];o.x=a.x,o.y=a.y,o.init(n),this.vde.push(o)}this.runtime.LV.mpe="playing"}static _de(t){const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(var i=0;r<t.length;r++){if(s!=t[r]){r--;break}i++}e.push({groupId:s,value:i})}return e}async Tde(t){if("playing"!==this.runtime.LV.mpe)return;const e=this.vde.find(t=>t.pending);if(e&&e!=t){const i=t.qpe();null==i||e.qpe().groupId===i.groupId&&!t.Kpe()?e.sde(t,()=>this.Pde()):(this.Ade("pop_sound_effect"),e.ide(),t.ede())}else t.Vpe.length&&(t.pending?t.ide():t.ede(),this.Ade("pop_sound_effect"))}Ade(t){if(!this.runtime.LV._pe)return;const e=this.runtime.RV.ape._i(0,0,0);e.nUt.uoe=t,e.destroy()}cde(t){if(!this.runtime.LV._pe)return;const e=this.runtime.RV.ape._i(0,0,0);e.nUt.uoe=t,e.nUt.ope="Start",e.destroy()}lde(t){if(!this.runtime.LV._pe)return;const e=this.runtime.RV.ape._i(0,0,0);e.nUt.uoe=t,e.nUt.ope="Stop",e.destroy()}Pde(){this.vde.filter(t=>t.Vpe.length).every(t=>t.Kpe()&&1==t.Vpe.length)&&this.Mde()}async Mde(){this.runtime.LV.mpe="over",this.Ade("Correct"),this.runtime.RV.fpe._i(0,this.runtime.layout.width/2,500).Ide();await this.runtime.storage.getItem("LevelProgress_"+this.runtime.LV.gpe)<this.runtime.LV.vpe&&await this.runtime.storage.setItem("LevelProgress_"+this.runtime.LV.gpe,this.runtime.LV.vpe),this.Ode("GameOver")}Dde(){}Ode(t){const e=this.runtime.RV.rpe._i(0,0,0);e.nUt.uoe=t,e.destroy()}update(t){for(const e of t.RV.fpe.eq())e.update();for(const e of t.RV.Xfe.eq())e.update()}Sde(t){let e=4*this.gde;const i=new Vector(this.runtime.layout.width/2,this.runtime.layout.height/2);if(t<6){const r=i.sub(new Vector(1,0).mul(this.gde*(t-1)/2)).add(new Vector(0,1).mul(160));return e=max2((t+.5)*this.gde,e),{Ede:[...Array(t).keys()].map(t=>r.add(new Vector(1,0).mul(t*this.gde))),bde:e}}const r=Math.ceil(t/2);(r+1)*this.gde>e&&(e=max2((r+1)*this.gde,this.runtime.layout.width));const s=[],n=i.sub(new Vector(0,1).mul(this.runtime.layout.height/5.5)).sub(new Vector(1,0).mul((r-1)*this.gde/2)).add(new Vector(0,1).mul(250));s.push(...[...Array(r).keys()].map(t=>n.add(new Vector(1,0).mul(t*this.gde))));const o=i.add(new Vector(0,1).mul(this.runtime.layout.height/4.5)).sub(new Vector(1,0).mul((t-r-1)*this.gde/2)).add(new Vector(0,1).mul(250));return s.push(...[...Array(t-r).keys()].map(t=>o.add(new Vector(1,0).mul(t*this.gde)))),{Ede:s,bde:e}}},WinParticles=class extends ISpriteInstance{constructor(){super(),this.xde=250,this.Cde=3,this.Rde=2,this.size=1.1,this.Lde=.8,this.kde=6e3,this.angle=60,this.Gde=3,this.Nde=1,this.angularVelocity=60,this.jde=40,this.speed=-1200,this.Fde=900,this.Bde=[[228/255,1,0],[1,0,128/255]],this.zde=[],this.Ude=!1,this.Hde=this.Gde+this.Nde}Ide(){if(!this.Ude){for(let t=0;t<this.xde;t++){const t=this.runtime.RV.lpe._i(0,this.x,this.y),e=this.size+randFloat(-this.Lde,this.Lde);t.width*=e,t.height*=e,t.size=e;const i=[randFloat(this.Bde[0][0],this.Bde[1][0]),randFloat(this.Bde[0][1],this.Bde[1][1]),randFloat(this.Bde[0][2],this.Bde[1][2])];t.sK=i;const r=this.angularVelocity+randFloat(-this.jde,this.jde);t.angularVelocity=r,t.angle=randFloat(0,2*Math.PI);const s=this.speed+randFloat(-this.Fde,this.Fde),n=this.Vde();t.Wde=n.x*s,t.$de=n.y*s,this.zde.push(t)}this.Ude=!0}}Vde(){const t=randFloat(-this.angle/2,this.angle/2),e=Math.sin(t),i=Math.cos(t),r=new Vector(0,1);return new Vector(r.x*i-r.y*e,r.y*i-r.x*e)}update(){const t=this.runtime.IW;this.Ude&&(this.Hde-=t,this.zde.forEach(e=>{e.y+=t*e.$de,e.$de+=this.kde*t,e.x+=t*e.Wde,e.angle+=e.angularVelocity*t*Math.PI/180}),this.Hde<=0&&(this.zde.forEach(t=>t.destroy()),this.destroy()))}},scene=null,levelGroups=[],level=null,levelProgresses=[];function setLevelProgresses(t){levelProgresses=t}function loadGame(t,e){level=e,t.S$("Game")}async function OnBeforeProjectStart(t){for(const e of levelGroupNames){const i=await t.MV._Y(e+".json"),r=await fetch(i),s=await r.text();levelGroups.push(JSON.parse(s))}t.addEventListener("tick",()=>Tick(t))}function Tick(t){scene&&scene.update(t)}runOnStartup(async t=>{t.RV.fpe.Tq(WinParticles),t.RV.Xfe.Tq(Holder),t.RV.Qfe.Tq(Liquid),t.m$("Game").addEventListener("beforelayoutstart",()=>{scene=new MainScene(t,level)}),t.addEventListener("beforeprojectstart",()=>OnBeforeProjectStart(t))});var currentLevelTiles2=[];function getLevelProgresses(){return levelProgresses}function getLevelGroups(){return levelGroups}function setProgresses(t){setLevelProgresses(t)}function getLevelGroupNames(){return levelGroupNames}function LoadGame(t,e){loadGame(t,e)}var scriptsInEvents={async wfe(t,e){console.log("on start of layout"),setProgresses(getLevelGroupNames().map(t=>0))},async Sfe(t,e){getLevelProgresses()[0]=t.LV.ppe?t.LV.ppe:0,console.log(levelProgresses)},async bfe(t,e){getLevelProgresses()[1]=t.LV.ppe?t.LV.ppe:0,console.log(levelProgresses)},async _fe(t,e){getLevelProgresses()[2]=t.LV.ppe?t.LV.ppe:0,console.log(levelProgresses)},async Efe(t,e){console.log(t),currentLevelTiles2.forEach(t=>{t.Yde.destroy(),t.text.destroy()});const i=getLevelGroups()[t.LV.gpe],r=getLevelProgresses(),s=(t.layout.width-180)/5;console.log(s);for(let e=0;e<i.Jde.length;e++){const i=t.RV.Cfe._i(2,0,0),n=t.RV.xfe._i(2,0,0);n.text=""+(e+1);const o=Math.floor(e/5),a=e-5*o,h=(a+.5)*s+30*(a+1),u=(o+.5)*s+30*(o+1)+150;i.x=h,i.y=u,i.width=s,i.height=s,n.width=s,n.height=s,n.x=h-s/2,n.y=u-s/2,n.width=s,n.height=s,i.nUt.level=e+1;const c=r[t.LV.gpe]<e?1:0;i.nUt.locked=c,r[t.LV.gpe]>e&&i.b8t("Completed"),1===i.nUt.locked&&i.b8t("Locked"),console.log(r[t.LV.gpe]<e),currentLevelTiles2.push({Yde:i,text:n})}t.LV.bpe=currentLevelTiles2[currentLevelTiles2.length-1].Yde.y+s-t.layout.height/2},async Tfe(t,e){-1!=t.LV.vpe&&LoadGame(t,levelGroups[t.LV.gpe].Jde[t.LV.vpe-1])},async Pfe(t,e){currentLevelTiles2=[]},async dfe(t,e){scene.Tde(t.x$(t.LV.ppe))},async yfe(t,e){t.RV.Ufe.iq().text="Level "+scene.level.wde},async gfe(t,e){t.RV.Vfe.iq().isVisible=levelGroups[t.LV.gpe].Jde[t.LV.vpe]},async qde(t,e){},async vfe(t,e){t.LV.vpe++,LoadGame(t,levelGroups[t.LV.gpe].Jde[t.LV.vpe-1])}};globalThis.Ee.mfe=scriptsInEvents;
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/